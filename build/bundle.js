!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=58)}([function(e,t,n){"use strict";e.exports=n(59)},function(e,t,n){e.exports=n(71)()},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(70);n.d(t,"BrowserRouter",function(){return r.a});var o=n(74);n.d(t,"HashRouter",function(){return o.a});var i=n(35);n.d(t,"Link",function(){return i.a});var a=n(76);n.d(t,"MemoryRouter",function(){return a.a});var s=n(79);n.d(t,"NavLink",function(){return s.a});var u=n(82);n.d(t,"Prompt",function(){return u.a});var c=n(84);n.d(t,"Redirect",function(){return c.a});var l=n(36);n.d(t,"Route",function(){return l.a});var f=n(23);n.d(t,"Router",function(){return f.a});var d=n(90);n.d(t,"StaticRouter",function(){return d.a});var h=n(92);n.d(t,"Switch",function(){return h.a});var p=n(94);n.d(t,"matchPath",function(){return p.a});var g=n(95);n.d(t,"withRouter",function(){return g.a})},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o,i,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,a,s],l=0;(u=new Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"authenticateUser",value:function(e){localStorage.setItem("token",e)}},{key:"isUserAuthenticated",value:function(){return null!==localStorage.getItem("token")}},{key:"deauthenticateUser",value:function(){localStorage.removeItem("token")}},{key:"getToken",value:function(){return localStorage.getItem("token")}}]),e}();t.default=o},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(17),o=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return o(e,t,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=a),i(o,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";var r=n(19),o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=f;var i=n(14);i.inherits=n(7);var a=n(50),s=n(53);i.inherits(f,a);for(var u=o(s.prototype),c=0;c<u.length;c++){var l=u[c];f.prototype[l]||(f.prototype[l]=s.prototype[l])}function f(e){if(!(this instanceof f))return new f(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||r(h,this)}function h(e){e.end()}Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),f.prototype._destroy=function(e,t){this.push(null),this.end(),r(t,e)}},function(e,t,n){"use strict";t.__esModule=!0;t.addLeadingSlash=function(e){return"/"===e.charAt(0)?e:"/"+e},t.stripLeadingSlash=function(e){return"/"===e.charAt(0)?e.substr(1):e};var r=t.hasBasename=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)};t.stripBasename=function(e,t){return r(e,t)?e.substr(t.length):e},t.stripTrailingSlash=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},t.parsePath=function(e){var t=e||"/",n="",r="",o=t.indexOf("#");-1!==o&&(r=t.substr(o),t=t.substr(0,o));var i=t.indexOf("?");return-1!==i&&(n=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}},t.createPath=function(e){var t=e.pathname,n=e.search,r=e.hash,o=t||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"f",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"e",function(){return a}),n.d(t,"g",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return c});var r=function(e){return"/"===e.charAt(0)?e:"/"+e},o=function(e){return"/"===e.charAt(0)?e.substr(1):e},i=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)},a=function(e,t){return i(e,t)?e.substr(t.length):e},s=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},u=function(e){var t=e||"/",n="",r="",o=t.indexOf("#");-1!==o&&(r=t.substr(o),t=t.substr(0,o));var i=t.indexOf("?");return-1!==i&&(n=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}},c=function(e){var t=e.pathname,n=e.search,r=e.hash,o=t||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){for(var n=e.toString();n.length<t;)n="0"+n;return n};t.arraysEqual=function(e,t){if(e.length!==t.length)return!1;for(var n=e.length;n--;)if(e[n]!==t[n])return!1;return!0},t.uuidv8=function(){return Math.random().toString(36).substr(2,8)},t.MBtoSize=function(e,t){if(0==e)return"0 MB";var n=t||2,r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(n))+" "+["MB","GB","TB","PB","EB","ZB","YB"][r]},t.BytestoSize=function(e,t){if(0==e)return"0 B";var n=t||2,r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(n))+" "+["B","KB","MB","GB"][r]},t.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),o=new Uint8Array(r),i=0;i<t.length;i++)o[i]=t.charCodeAt(i);var a=new DataView(r);return new Blob([a],{type:n})},t.formatNumberLength=r,t.formatVideoTime=function(e){var t=Math.floor(e/3600);e-=3600*t;var n=Math.floor(e/60),o=e-60*n;return t>0?t+":"+r(n,2)+":"+r(o,2):r(n,2)+":"+r(o,2)}},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(t,n(17).Buffer)},function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u});var r=n(32),o=n(33),i=n(12),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n,o){var s=void 0;"string"==typeof e?(s=Object(i.d)(e)).state=t:(void 0===(s=a({},e)).pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==t&&void 0===s.state&&(s.state=t));try{s.pathname=decodeURI(s.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(s.key=n),o?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=Object(r.default)(s.pathname,o.pathname)):s.pathname=o.pathname:s.pathname||(s.pathname="/"),s},u=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&Object(o.default)(e.state,t.state)}},function(e,t,n){"use strict";(function(e){var r=n(112),o=n(113),i=n(43);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=d(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),o=(e=s(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):d(e,t);if("Buffer"===t.type&&i(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=s(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,o);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,o){var i,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var l=-1;for(i=n;i<s;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(n+u>s&&(n=s-u),i=n;i>=0;i--){for(var f=!0,d=0;d<u;d++)if(c(e,i+d)!==c(t,d)){f=!1;break}if(f)return i}return-1}function y(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function b(e,t,n,r){return K(F(t,e.length-n),e,n,r)}function _(e,t,n,r){return K(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return _(e,t,n,r)}function C(e,t,n,r){return K(H(t),e,n,r)}function k(e,t,n,r){return K(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,u,c=e[o],l=null,f=c>239?4:c>223?3:c>191?2:1;if(o+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[o+1]))&&(u=(31&c)<<6|63&i)>127&&(l=u);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(u=(15&c)<<12|(63&i)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=f}return function(e){var t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=x));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,o){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(i,a),c=this.slice(r,o),l=e.slice(t,n),f=0;f<s;++f)if(c[f]!==l[f]){i=c[f],a=l[f];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function T(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function P(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=j(e[i]);return o}function O(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,o,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function B(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function U(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,n,r,i){return i||U(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,i){return i||U(e,0,n,8),o.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var o=t-e;n=new u(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},u.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):B(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);I(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);I(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):B(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=u.isBuffer(e)?e:F(new u(e,r).toString()),s=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function H(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(t,n(8))},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(i(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),a=(c=n.slice()).length,u=0;u<a;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var a;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(a=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function o(){this.removeListener(e,o),n||(n=!0,t.apply(this,arguments))}return o.listener=t,this.on(e,o),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=function(e,n,r,o){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,o)});default:for(i=new Array(s-1),a=0;a<i.length;)i[a++]=arguments[a];return t.nextTick(function(){e.apply(null,i)})}}:e.exports=t.nextTick}).call(t,n(6))},function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,o,i,a,s,u){if(r(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,o,i,a,s,u],f=0;(c=new Error(t.replace(/%s/g,function(){return l[f++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,n){"use strict";t.__esModule=!0,t.locationsAreEqual=t.createLocation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=s(n(32)),i=s(n(33)),a=n(11);function s(e){return e&&e.__esModule?e:{default:e}}t.createLocation=function(e,t,n,i){var s=void 0;"string"==typeof e?(s=(0,a.parsePath)(e)).state=t:(void 0===(s=r({},e)).pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==t&&void 0===s.state&&(s.state=t));try{s.pathname=decodeURI(s.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(s.key=n),i?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=(0,o.default)(s.pathname,i.pathname)):s.pathname=i.pathname:s.pathname||(s.pathname="/"),s},t.locationsAreEqual=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&(0,i.default)(e.state,t.state)}},function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(2),i=(r=o)&&r.__esModule?r:{default:r};t.default=function(){var e=null,t=[];return{setPrompt:function(t){return(0,i.default)(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,o){if(null!=e){var a="function"==typeof e?e(t,n):e;"string"==typeof a?"function"==typeof r?r(a,o):((0,i.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==a)}else o(!0)},appendListener:function(e){var n=!0,r=function(){n&&e.apply(void 0,arguments)};return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}}},function(e,t,n){"use strict";var r=n(24);t.a=r.a},function(e,t,n){"use strict";var r=n(2),o=n.n(r),i=n(4),a=n.n(i),s=n(0),u=n.n(s),c=n(1),l=n.n(c),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=d(this,e.call.apply(e,[this].concat(i))),r.state={match:r.computeMatch(r.props.history.location.pathname)},d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:f({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;a()(null==n||1===u.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){e.setState({match:e.computeMatch(r.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){o()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?u.a.Children.only(e):null},t}(u.a.Component);h.propTypes={history:l.a.object.isRequired,children:l.a.node},h.contextTypes={router:l.a.object},h.childContextTypes={router:l.a.object.isRequired},t.a=h},function(e,t,n){"use strict";var r=n(80),o=n.n(r),i={},a=0;t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof t&&(t={path:t});var n=t,r=n.path,s=void 0===r?"/":r,u=n.exact,c=void 0!==u&&u,l=n.strict,f=void 0!==l&&l,d=n.sensitive,h=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=i[n]||(i[n]={});if(r[e])return r[e];var s=[],u={re:o()(e,s,t),keys:s};return a<1e4&&(r[e]=u,a++),u}(s,{end:c,strict:f,sensitive:void 0!==d&&d}),p=h.re,g=h.keys,m=p.exec(e);if(!m)return null;var v=m[0],y=m.slice(1),b=e===v;return c&&!b?null:{path:s,url:"/"===s&&""===v?"/":v,isExact:b,params:g.reduce(function(e,t,n){return e[t.name]=y[n],e},{})}}},function(e,t,n){"use strict";var r=n(2),o=n.n(r);t.a=function(){var e=null,t=[];return{setPrompt:function(t){return o()(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"==typeof e?e(t,n):e;"string"==typeof a?"function"==typeof r?r(a,i):(o()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0,r=function(){n&&e.apply(void 0,arguments)};return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={backgroundStyle:{visibility:"hidden",backgroundColor:"rgba(0, 0, 0, 0.5)",position:"fixed",left:"0",top:"0",width:"100vw",height:"100vh",opacity:"0",transition:"opacity .5s",zIndex:"1000"}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),o(t,[{key:"componentWillReceiveProps",value:function(e){if(e.show!=this.props.show){var t=Object.assign({},this.state.backgroundStyle);t.visibility=!0===e.show?"visible":"hidden",t.opacity=!0===e.show?"1":"0",this.setState({backgroundStyle:t})}}},{key:"render",value:function(){return a.default.createElement("div",{id:this.props.id,style:this.state.backgroundStyle},this.props.children)}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),i=s(n(5)),a=n(3);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getItems=n.getItems.bind(n),n}return l(t,o.default.Component),r(t,[{key:"getItems",value:function(e){var t=this;return e.map(function(e,n){if(n<30){var r=e.title,i=e.id,a=e.backdrop.split("."),s="/backdrop/"+a[0]+"_thumbnail."+a[1],u=!!t.props.videolist.includes(i);return o.default.createElement(d,{key:i,id:i,title:r,backdrop:s,liked:u})}return o.default.createElement("div",{key:e._id})},this)}},{key:"render",value:function(){var e="";return this.props.data&&(e=this.getItems(this.props.data)),o.default.createElement("div",{ref:"titlecategory",className:"search-items-list"},o.default.createElement("div",{className:"titles-wrapper"},e))}}]),t}(),d=function(e){function t(e){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return l(t,o.default.Component),r(t,[{key:"render",value:function(){return o.default.createElement("div",{className:"search-item",style:{backgroundImage:"url("+this.props.backdrop+")"}},o.default.createElement(a.Link,{to:"/video/"+this.props.id,style:{textDecoration:"none"}},o.default.createElement("div",{className:"overlay"},o.default.createElement("div",{className:"item-title"},this.props.title))),o.default.createElement(h,{id:this.props.id,liked:this.props.liked}))}}]),t}(),h=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={liked:!1},n.handleClick=n.handleClick.bind(n),n}return l(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){this.setState({liked:this.props.liked})}},{key:"handleClick",value:function(e){!0===this.state.liked?this.setState({liked:!1}):this.setState({liked:!0});var t=i.default.getToken(),n={token:t,videoId:this.props.id,add:this.state.liked};$.ajax({url:"/update/videolist",headers:{Authorization:"bearer "+t},data:JSON.stringify(n),contentType:"application/json",method:"POST"}).fail(function(){console.log("There is an error when updating video list.")})}},{key:"render",value:function(){return o.default.createElement("div",{className:"item-list-toggle","data-toggled":this.state.liked,onClick:this.handleClick})}}]),t}();t.default=f},function(e,t,n){"use strict";(function(t,r){var o=n(9).Buffer,i=t.crypto||t.msCrypto;i&&i.getRandomValues?e.exports=function(e,n){if(e>65536)throw new Error("requested too many random bytes");var a=new t.Uint8Array(e);e>0&&i.getRandomValues(a);var s=o.from(a.buffer);if("function"==typeof n)return r.nextTick(function(){n(null,s)});return s}:e.exports=function(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}).call(t,n(8),n(6))},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))o.call(n,c)&&(s[c]=n[c]);if(r){a=r(n);for(var l=0;l<a.length;l++)i.call(n,a[l])&&(s[a[l]]=n[a[l]])}}return s}},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";function r(e){return"/"===e.charAt(0)}function o(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&r(e),s=t&&r(t),u=a||s;if(e&&r(e)?i=n:n.length&&(i.pop(),i=i.concat(n)),!i.length)return"/";var c=void 0;if(i.length){var l=i[i.length-1];c="."===l||".."===l||""===l}else c=!1;for(var f=0,d=i.length;d>=0;d--){var h=i[d];"."===h?o(i,d):".."===h?(o(i,d),f++):f&&(o(i,d),f--)}if(!u)for(;f--;f)i.unshift("..");!u||""===i[0]||i[0]&&r(i[0])||i.unshift("");var p=i.join("/");return c&&"/"!==p.substr(-1)&&(p+="/"),p}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});var o=void 0===t?"undefined":r(t);if(o!==(void 0===n?"undefined":r(n)))return!1;if("object"===o){var i=t.valueOf(),a=n.valueOf();if(i!==t||a!==n)return e(i,a);var s=Object.keys(t),u=Object.keys(n);return s.length===u.length&&s.every(function(r){return e(t[r],n[r])})}return!1}},function(e,t,n){"use strict";t.__esModule=!0;t.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.getConfirmation=function(e,t){return t(window.confirm(e))},t.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},t.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},t.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},t.isExtraneousPopstateEvent=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=n(4),u=n.n(s),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},d=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=l(this,e.call.apply(e,[this].concat(i))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!f(e)){e.preventDefault();var t=r.context.router.history,n=r.props,o=n.replace,i=n.to;o?t.replace(i):t.push(i)}},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);u()(this.context.router,"You should not use <Link> outside a <Router>");var i=this.context.router.history.createHref("string"==typeof t?{pathname:t}:t);return o.a.createElement("a",c({},r,{onClick:this.handleClick,href:i,ref:n}))},t}(o.a.Component);d.propTypes={onClick:a.a.func,target:a.a.string,replace:a.a.bool,to:a.a.oneOfType([a.a.string,a.a.object]).isRequired,innerRef:a.a.oneOfType([a.a.string,a.a.func])},d.defaultProps={replace:!1},d.contextTypes={router:a.a.shape({history:a.a.shape({push:a.a.func.isRequired,replace:a.a.func.isRequired,createHref:a.a.func.isRequired}).isRequired}).isRequired},t.a=d},function(e,t,n){"use strict";var r=n(37);t.a=r.a},function(e,t,n){"use strict";var r=n(2),o=n.n(r),i=n(4),a=n.n(i),s=n(0),u=n.n(s),c=n(1),l=n.n(c),f=n(25),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){return 0===u.a.Children.count(e)},g=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=h(this,e.call.apply(e,[this].concat(i))),r.state={match:r.computeMatch(r.props,r.context.router)},h(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:d({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,o=e.path,i=e.strict,s=e.exact,u=e.sensitive;if(n)return n;a()(t,"You should not use <Route> or withRouter() outside a <Router>");var c=t.route,l=(r||c.location).pathname;return o?Object(f.a)(l,{path:o,strict:i,exact:s,sensitive:u}):c.match},t.prototype.componentWillMount=function(){o()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),o()(!(this.props.component&&this.props.children&&!p(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),o()(!(this.props.render&&this.props.children&&!p(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){o()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),o()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,o=t.render,i=this.context.router,a=i.history,s=i.route,c=i.staticContext,l={match:e,location:this.props.location||s.location,history:a,staticContext:c};return r?e?u.a.createElement(r,l):null:o?e?o(l):null:n?"function"==typeof n?n(l):p(n)?null:u.a.Children.only(n):null},t}(u.a.Component);g.propTypes={computedMatch:l.a.object,path:l.a.string,exact:l.a.bool,strict:l.a.bool,sensitive:l.a.bool,component:l.a.func,render:l.a.func,children:l.a.oneOfType([l.a.func,l.a.node]),location:l.a.object},g.contextTypes={router:l.a.shape({history:l.a.object.isRequired,route:l.a.object.isRequired,staticContext:l.a.object})},g.childContextTypes={router:l.a.object.isRequired},t.a=g},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"e",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"g",function(){return s}),n.d(t,"h",function(){return u}),n.d(t,"f",function(){return c}),n.d(t,"d",function(){return l});var r=!("undefined"==typeof window||!window.document||!window.document.createElement),o=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},i=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},a=function(e,t){return t(window.confirm(e))},s=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},u=function(){return-1===window.navigator.userAgent.indexOf("Trident")},c=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},l=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.switchVideo=t.displayVideo=t.Video=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),i=s(n(99)),a=n(13);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=new i.default({dht:!1}),d="";e.WEBTORRENT_ANNOUNCE=["ws://104.131.128.61:8000"];var h=function(e){$("#video-components .fs-overlay").css({visibility:"visible",opacity:"1",width:"100vw",height:"100vh"}),$("#video-topbar .title").html(e.title),$("#video-loader .loader-inner").show(),$("#video-loader p").html(""),f.add(e.torrentID,function(e){var t=e.files.find(function(e){return e.name.endsWith(".mp4")||e.name.endsWith(".m4a")||e.name.endsWith(".m4v")});t?t.length/1073741824>2?($("#video-loader .loader-inner").hide(),$("#video-loader p").html("Warning: size of video larger than 2GB.")):t.appendTo("#video-container .video-wrapper"):($("#video-loader .loader-inner").hide(),$("#video-loader p").html("Error: only support .mp4 .m4a .m4v format now."))}),d=e.torrentID},p=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={videoLoaded:!1,progress:0},n.showOverlay=n.showOverlay.bind(n),n.removeOverlay=n.removeOverlay.bind(n),n.closeVideo=n.closeVideo.bind(n),n.updateplayer=n.updateplayer.bind(n),n.getFormatedTime=n.getFormatedTime.bind(n),n.getTimeState=n.getTimeState.bind(n),n.toggleMute=n.toggleMute.bind(n),n.changeVolume=n.changeVolume.bind(n),n.fullScreen=n.fullScreen.bind(n),n.exitFullScreen=n.exitFullScreen.bind(n),n}return l(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){var e,t=this,n=$("#video-topbar"),r=$("#video-container"),o=$("#video-controls"),i=$("#video-controls .play-vid"),a=($("#video-container video").get(0),$("#video-controls .volume .icon")),s=$("#video-controls .volume .intensityBar"),u=$("#video-controls .progress-bar"),c=$("#video-controls .scale"),l=$("#video-controls .time"),f=!1;r.draggable(),$(".loader-inner").loaders(),setInterval(this.updateplayer,500),$(window).keypress(function(e){0!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),i.click())}),$(window).keyup(function(e){var n=$("#video-container video").get(0);n&&(27===e.keyCode&&c.hasClass("active")&&(e.preventDefault(),c.toggleClass("active"),t.exitFullScreen()),39===e.keyCode&&(e.preventDefault(),n.currentTime+=10,t.updateplayer()),37===e.keyCode&&(e.preventDefault(),n.currentTime-=10,t.updateplayer()))}),r.mousemove(function(){f=!0}),r.mouseleave(function(){f=!1,o.removeClass("is-visible"),n.removeClass("is-visible"),r.css("cursor","none")});setInterval(function(){f&&(f=!1,o.addClass("is-visible"),n.addClass("is-visible"),r.css("cursor","auto"),clearTimeout(e),e=setTimeout(function(){o.removeClass("is-visible"),n.removeClass("is-visible"),r.css("cursor","none")},2e3))},100);i.click(function(){var e=$("#video-container video").get(0);$("#video-controls");e.paused?(e.play(),i.find(".icon").css("background-image","url(/img/pause-button.svg)"),t.showOverlay()):(e.pause(),i.find(".icon").css("background-image","url(/img/play-button.svg)"),t.removeOverlay())}),u.click(function(e){var n=$("#video-container video").get(0),r=($("#video-controls"),e.pageX-u.offset().left),o=u.outerWidth();n.currentTime=r/o*n.duration,t.updateplayer()}),u.mousemove(function(e){return l.text(t.getTimeState(e))}),a.click(function(){t.toggleMute()}),s.click(function(e){t.changeVolume(e)}),c.click(function(){c.toggleClass("active"),c.hasClass("active")?t.fullScreen():(t.exitFullScreen(),c.find(".icon").css("background-image","url(/img/fullscreen.svg)"))})}},{key:"componentWillUpdate",value:function(){$(".loader-inner").loaders()}},{key:"updateplayer",value:function(){var e=$("#video-container video").get(0);if(e){this.state.videoLoaded||this.setState({videoLoaded:!0});var t=$("#video-container video").height(),n=$("#video-controls .play-vid .icon"),r=$("#video-controls .progress-bar"),o=$("#video-controls .progress-bar .progress"),i=$("#video-controls .progress-bar .progress-indicator"),a=$("#video-controls .progress-container .timer"),s=e.currentTime/e.duration*100;$("#video-container").height()!==t&&$("#video-container").height(t),o.css("width",s+"%"),i.css("left",r.width()*s/100-6+"px"),a.text(this.getFormatedTime()),e.ended||e.paused?n.css("background-image","url(/img/play-button.svg)"):n.css("background-image","url(/img/pause-button.svg)")}else this.state.videoLoaded&&(this.setState({videoLoaded:!1}),this.forceUpdate())}},{key:"getFormatedTime",value:function(){var e=$("#video-container video").get(0),t=Math.round(e.currentTime);return(0,a.formatVideoTime)(t)}},{key:"getTimeState",value:function(e){var t=$("#video-container video").get(0),n=$("#video-controls .progress-bar"),r=$("#video-controls .time"),o=e.pageX-n.offset().left,i=n.outerWidth();r.css("left",o/i*n.width()+18+"px");var s=Math.round(o/i*t.duration);return(0,a.formatVideoTime)(s)}},{key:"toggleMute",value:function(){var e=$("#video-container video").get(0),t=$("#video-controls .volume .icon"),n=$("#video-controls .intensity"),r=$("#video-controls .volume-indicator");e.muted?(e.muted=!1,t.css("background-image","url(/img/volume.svg)"),n.show(),r.show()):(e.muted=!0,t.css("background-image","url(/img/mute-volume.svg)"),n.hide(),r.hide())}},{key:"changeVolume",value:function(e){var t=$("#video-container video").get(0),n=$("#video-controls .volume .icon"),r=$("#video-controls .volume .intensityBar"),o=$("#video-controls .intensity"),i=$("#video-controls .volume-indicator"),a=e.pageX-r.offset().left,s=r.outerWidth();t.volume=a/s,t.muted=!1,n.css("background-image","url(/img/volume.svg)"),o.css("width",a+"px"),o.show(),i.css("left",a/s*r.width()-6+"px"),i.show()}},{key:"fullScreen",value:function(){var e=$("#video-container"),t=e.get(0),n=$("#video-controls"),r=$("#video-topbar"),o=$("#video-controls .scale");n.addClass("fullscreen"),e.addClass("fullscreen"),e.draggable("disable"),r.addClass("fullscreen"),o.find(".icon").css("background-image","url(/img/fullscreen-exit.svg)"),t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullscreen?t.mozRequestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():console.log("Error: entering fullscreen.")}},{key:"exitFullScreen",value:function(){var e=$("#video-container"),t=$("#video-controls"),n=$("#video-topbar"),r=$("#video-controls .scale");t.removeClass("fullscreen"),e.removeClass("fullscreen"),e.draggable("enable"),n.removeClass("fullscreen"),r.find(".icon").css("background-image","url(/img/fullscreen.svg)"),document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():console.log("Error: exiting fullscreen.")}},{key:"showOverlay",value:function(){$("#video-components .fs-overlay").css({visibility:"visible",opacity:"1",width:"100vw",height:"100vh"})}},{key:"removeOverlay",value:function(){$("#video-components .fs-overlay").css({visibility:"hidden",opacity:"0",width:"0",height:"0"})}},{key:"closeVideo",value:function(){$("#video-components").hide(),f.remove(d),$("#video-container .video-wrapper").html("")}},{key:"render",value:function(){return o.default.createElement("div",{id:"video-components"},o.default.createElement("div",{className:"fs-overlay",onClick:this.removeOverlay}),o.default.createElement("div",{id:"video-container"},!this.state.videoLoaded&&o.default.createElement("div",{id:"video-loader"},o.default.createElement("div",{className:"loader-inner ball-pulse"}),o.default.createElement("p",null)),o.default.createElement("div",{id:"video-topbar"},o.default.createElement("div",{className:"close",onClick:this.closeVideo}),o.default.createElement("div",{className:"title"},"Title")),o.default.createElement("div",{className:"video-wrapper"}),o.default.createElement("div",{id:"video-controls"},o.default.createElement("div",{className:"overlay"}),o.default.createElement("div",{className:"play-vid"},o.default.createElement("div",{className:"icon"})),o.default.createElement("div",{className:"progress-container"},o.default.createElement("div",{className:"timer"},"00:00"),o.default.createElement("div",{className:"progress-bar"},o.default.createElement("div",{className:"progress"}),o.default.createElement("div",{className:"progress-indicator"})),o.default.createElement("div",{className:"time"},"00:00")),o.default.createElement("div",{className:"volume"},o.default.createElement("div",{className:"icon"}),o.default.createElement("div",{className:"intensityBar"},o.default.createElement("div",{className:"intensity"}),o.default.createElement("div",{className:"volume-indicator"}))),o.default.createElement("div",{className:"subtitle"},o.default.createElement("div",{className:"icon"})),o.default.createElement("div",{className:"scale"},o.default.createElement("div",{className:"icon"}))),o.default.createElement(g,{radius:25,stroke:4,videoLoaded:this.state.videoLoaded})))}}]),t}(),g=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.normalizedRadius=n.props.radius-2*n.props.stroke,n.circumference=2*n.normalizedRadius*Math.PI,n.radius=n.props.radius,n.stroke=n.props.stroke,n.state={progress:0},n.download=n.download.bind(n),n.mouseoverStyle=n.mouseoverStyle.bind(n),n.mouseoutStyle=n.mouseoutStyle.bind(n),n}return l(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=this;setInterval(function(){e.props.videoLoaded&&e.setState({progress:f.progress})},1e3)}},{key:"download",value:function(){var e=f.torrents[0].files[0];e.getBlobURL(function(t,n){var r=document.createElement("a");r.download=e.name,r.href=n,r.click(),r.remove()})}},{key:"mouseoverStyle",value:function(){$("#progress-ring-1").attr("stroke","#e50914"),$("#video-status text").css("opacity","1")}},{key:"mouseoutStyle",value:function(){$("#progress-ring-1").attr("stroke","rgba(255,255,255,.15)"),$("#video-status text").css("opacity","0")}},{key:"render",value:function(){var e=f.torrents[0],t=0,n=0,r=0,i=0;e&&(t=e.downloadSpeed,n=e.uploadSpeed,r=e.downloaded,e.uploaded,i=e.numPeers);var s=this.state.progress;0==r&&(s=0),0==s&&r>5e5&&(s=1);var u=this.circumference-s*this.circumference;return o.default.createElement("div",{id:"video-status",onMouseOver:this.mouseoverStyle,onMouseOut:this.mouseoutStyle},o.default.createElement("svg",{height:2*this.radius,width:2*this.radius},o.default.createElement("circle",{id:"progress-ring-1",stroke:"rgba(255,255,255,.15)",fill:"transparent",strokeWidth:this.stroke,strokeDasharray:this.circumference+" "+this.circumference,strokeLinecap:"round",style:{strokeDashoffset:u},r:this.normalizedRadius,cx:this.radius,cy:this.radius}),o.default.createElement("circle",{id:"progress-ring-2",stroke:"rgba(255,255,255,.15)",fill:"transparent",strokeWidth:this.stroke,r:this.normalizedRadius,cx:this.radius,cy:this.radius}),1==s?o.default.createElement("text",{id:"video-get-buffer",fill:"#EC5862",fontFamily:"FontAwesome",fontSize:"15px",textAnchor:"middle",alignmentBaseline:"central",cursor:"pointer",x:this.radius,y:this.radius,onClick:this.download},""):o.default.createElement("text",{fill:"white",fontFamily:"Arial, FontAwesome, sans-serif",fontSize:"13px",textAnchor:"middle",alignmentBaseline:"central",x:this.radius,y:this.radius},Math.trunc(100*s))),o.default.createElement("div",{className:"speed-status","data-type":"peer"},i," peers"),o.default.createElement("div",{className:"speed-status","data-type":"download"},(0,a.BytestoSize)(r,1),", ",(0,a.BytestoSize)(t,1)+"/s"),o.default.createElement("div",{className:"speed-status","data-type":"upload"},(0,a.BytestoSize)(n,1),", ",(0,a.BytestoSize)(n,1)+"/s"))}}]),t}();t.Video=p,t.displayVideo=h,t.switchVideo=function(e){f.remove(d),$("#video-container .video-wrapper").html(""),h(e)}}).call(t,n(8))},function(e,t,n){var r=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(100),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(0)),i=c(n(103)),a=c(n(5)),s=c(n(42)),u=n(13);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.rscCardStatus={addNew:!0,rscId:"",count:1},e.mode="add",e.coverChanged=!1,e.videoId="",e.state={cover:null,isCoverUploaded:!1,tags:[]},e.previewCover=e.previewCover.bind(e),e.removeCover=e.removeCover.bind(e),e.handleTagsChange=e.handleTagsChange.bind(e),e.addResource=e.addResource.bind(e),e.submitResourceInfo=e.submitResourceInfo.bind(e),e.cancelEditResource=e.cancelEditResource.bind(e),e.handleRsc=e.handleRsc.bind(e),e.resetComponent=e.resetComponent.bind(e),e.closeCard=e.closeCard.bind(e),e.submitCard=e.submitCard.bind(e),e.loadContent=e.loadContent.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){$(".horizon-scroll ul").sortable({axis:"x",animation_direction:"x",animation:200})}},{key:"loadContent",value:function(e){var t=this;this.videoId=e;var n=encodeURIComponent(a.default.getToken()),r="id="+e;$.ajax({url:"/api/video",data:r,headers:{Authorization:"bearer "+n},contentType:"application/x-www-form-urlencoded",method:"GET"}).done(function(e){t.mode="edit",e.rsc_info.forEach(function(e){t.handleRsc(!0,{title:e[0],size:e[1],magnet:e[2]})}),t.setState({isCoverUploaded:!0,tags:e.tags}),$("#cover-img").attr("src","/backdrop/"+e.backdrop),$("#edit-video-card .title").val(e.title),$("#edit-video-card .intro").val(e.introduction)}).fail(function(){console.log("There has an error getting video information.")})}},{key:"previewCover",value:function(e){if(e.target.files&&e.target.files[0]){var t=new FileReader;t.onload=function(e){$("#cover-img").attr("src",e.target.result)},t.readAsDataURL(e.target.files[0]),this.setState({isCoverUploaded:!0}),this.coverChanged=!0}}},{key:"removeCover",value:function(e){var t=!0;if(!e)t=confirm("Do you want to remove the backdrop?");t&&($("#cover-img").attr("src","#"),$("#upload-cover").val(""),"edit"===this.mode&&(this.coverChanged=!0),this.setState({isCoverUploaded:!1}))}},{key:"addResource",value:function(){this.rscCardStatus.addNew=!0,$("#edit-resource-card input").val(""),$("#edit-resource-card").css({visibility:"visible",opacity:"1",top:"50%"})}},{key:"cancelEditResource",value:function(){this.setState({tempResourceInfo:{title:"",size:null,magnet:""}}),$("#edit-resource-card input").val(""),$("#edit-resource-card").css({visibility:"hidden",opacity:"0",top:"60%"})}},{key:"handleRsc",value:function(e,t){var n=this,r=t.title,o=t.size,i=t.magnet;if(e){var a=this.rscCardStatus.count.toString();$(".horizon-scroll ul").append('<li class="ui-sortable-handle" id="rsc-card-'+a+'"><div class="item">'+r+'</div><div class="item">'+o+'</div><div class="item"><i class="fa fa-magnet rsc-magnet"></i><div  class="magnet-content">'+i+"</div></div></li>"),$("#rsc-card-"+a).click(function(e){var t=$(e.target).parent(".ui-sortable-handle"),r=t.attr("id"),o=t.html().match('<div class="item">(.*?)</div><div class="item">(.*?)</div><div class="item">.*?content">(.*?)</div></div>');$('#edit-resource-card input[name="title"]').val(o[1]),$('#edit-resource-card input[name="size"]').val(o[2].split(" ")[0]),$("#edit-resource-card select").val(o[2].split(" ")[1]),$('#edit-resource-card input[name="magnet"]').val(o[3]),n.rscCardStatus.addNew=!1,n.rscCardStatus.rscId=r,$("#edit-resource-card").css({visibility:"visible",opacity:"1",top:"50%"})}),this.rscCardStatus.count+=1}else{var s=$("#"+this.rscCardStatus.rscId);s.children().eq(0).html(r),s.children().eq(1).html(o),s.children().eq(2).children("div").html(i)}}},{key:"submitResourceInfo",value:function(){var e=$("#edit-resource-card input").map(function(){return this.value}).get(),t=e[0],n=e[1],r=$("#edit-resource-card select").val(),o=e[2];t&&n&&o?n.match(/[^$.\d]/)?alert("Size cannot contain non numeric characters."):o.match(/magnet:\?xt=urn:btih:[a-z0-9]{20,50}/i)?(n=n+" "+r,this.handleRsc(this.rscCardStatus.addNew,{title:t,size:n,magnet:o}),$("#edit-resource-card input").val(""),$("#edit-resource-card").css({visibility:"hidden",opacity:"0",top:"60%"})):alert("Please check the magnet link format."):alert("Please check if all the values are filled.")}},{key:"handleTagsChange",value:function(e){this.setState({tags:e})}},{key:"resetComponent",value:function(){$("#edit-video-card").css({visibility:"hidden",opacity:"0"}),this.removeCover(!0),$("#edit-video-card .title").val(""),this.cancelEditResource(),this.setState({tags:[]}),$("#edit-video-card .horizon-scroll ul").html(""),$("#edit-video-card .intro").val(""),this.mode="add",this.coverChanged=!1}},{key:"closeCard",value:function(){!0===confirm("Do you really want to leave?")&&this.resetComponent()}},{key:"submitCard",value:function(){if(!0===confirm("Do you want to submit the information now?")){var e=$("#edit-video-card .title").val(),t=$("#edit-video-card .horizon-scroll ul").children().map(function(){return this.innerHTML}).get(),n=[];t.forEach(function(e){var t=e.match('<div class="item">(.*?)</div><div class="item">(.*?)</div><div class="item">.*?content">(.*?)</div></div>');t=[t[1],t[2],t[3].split("&")[0]],n.push(t)});var r=this.state.tags,o=$("#edit-video-card .intro").val();if(!e)return void alert("Title is empty!");if(!n.length)return void alert("Resource Information is empty!");var i=!0;if(n.forEach(function(e){var t=e[0],n=e[1].split(" ")[0],r=e[2];n.match(/[^$.\d]/)&&(alert(t+":\nSize cannot contain non numeric characters."),i=!1),r.match(/magnet:\?xt=urn:btih:[a-z0-9]{20,50}/i)||(alert(t+":\nPlease check the magnet link format."),i=!1)}),!i)return;var c=$("#upload-cover")[0].files[0];if("add"===this.mode&&!c)return void alert("Cover is empty.");if(c)var l=c.name.split("."),f=(0,u.uuidv8)()+(0,u.uuidv8)(),d=l[l.length-1],h=f+"."+d,p=f+"_thumbnail."+d;var g=a.default.getToken(),m={id:this.videoId,mode:this.mode,coverChanged:this.coverChanged,title:e,backdrop:h,rscInfo:n,tags:r,introduction:o};if($.ajax({url:"/upload/video",headers:{Authorization:"bearer "+g},data:JSON.stringify(m),contentType:"application/json",responseType:"json",method:"POST"}).done(function(){console.log("Success on uploading video information.")}).fail(function(){console.log("There is an error when uploading video information.")}),this.coverChanged&&c)(new s.default).compress(c,{maxWidth:500}).then(function(e){var t=new FormData;t.append("backdrop",c,h),t.append("backdrop_thumbnail",e,p),$.ajax({url:"/upload/backdrop",headers:{Authorization:"bearer "+g},data:t,cache:!1,contentType:!1,processData:!1,method:"POST"}).done(function(){console.log("Successfully upload backdrop.")}).fail(function(){console.log("There is an error when uploading backdrop.")})}).catch(function(e){console.log("Something wrong when compressing backdrop.")});this.resetComponent()}}},{key:"render",value:function(){var e=this;return o.default.createElement("div",{className:"Video-card"},o.default.createElement("div",{className:"cover-wrapper"},this.state.isCoverUploaded&&o.default.createElement("div",{className:"cover-img-wrapper"},o.default.createElement("div",{onClick:function(){return e.removeCover(!1)}},o.default.createElement("i",{className:"fa fa-fw fa-times"})),o.default.createElement("img",{id:"cover-img",src:"#"})),!this.state.isCoverUploaded&&o.default.createElement("div",{className:"cover",onClick:function(){$("#upload-cover").click()}},"COVER"),o.default.createElement("input",{type:"file",id:"upload-cover",style:{display:"none"},onChange:function(t){return e.previewCover(t)}})),o.default.createElement("input",{type:"text",className:"title",required:!0,placeholder:"Title"}),o.default.createElement("div",{className:"horizon-scroll"},o.default.createElement("a",{className:"add-button",onClick:this.addResource},"+"),o.default.createElement(f,{onSubmit:this.submitResourceInfo,cancel:this.cancelEditResource}),o.default.createElement("div",{className:"cards-wrapper"},o.default.createElement("ul",null))),o.default.createElement(i.default,{value:this.state.tags,onChange:this.handleTagsChange}),o.default.createElement("textarea",{className:"intro",required:!0,placeholder:"Input introduction.."}),o.default.createElement("div",{className:"button-wrapper"},o.default.createElement("i",{onClick:this.closeCard,className:"fa fa-fw fa-times"}),o.default.createElement("i",{onClick:this.submitCard,className:"fa fa-fw fa-check"})),o.default.createElement("input",{type:"hidden",id:"edit-video-card-flag",value:"",onClick:function(t){e.loadContent(t.target.value)}}))}}]),t}(),f=function(e){var t=e.onSubmit,n=e.cancel;return o.default.createElement("div",{id:"edit-resource-card"},o.default.createElement("form",null,o.default.createElement(d,{name:"title",type:"text",placeholder:"title"}),o.default.createElement(d,{name:"size",type:"text",placeholder:"size"}),o.default.createElement(d,{name:"magnet",type:"text",placeholder:"magnet"})),o.default.createElement("button",{name:"submit",onClick:t},"Submit"),o.default.createElement("button",{name:"cancel",onClick:n},"Cancel"))},d=function(e){var t=e.name,n=e.type,r=e.placeholder;return o.default.createElement("div",{className:"resource-text-input"},o.default.createElement("input",{name:t,autoComplete:"false",required:!0,type:n,placeholder:r}),"size"===t&&o.default.createElement("select",null,o.default.createElement("option",{value:"MB"},"MB"),o.default.createElement("option",{value:"GB"},"GB"),o.default.createElement("option",{value:"KB"},"KB")),o.default.createElement("label",{htmlFor:t}))};t.default=l},function(e,t,n){var r;r=function(){"use strict";var e,t=(function(e){!function(t){var n=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,r=t.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),o=r&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),i=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,a=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,s=(r||i)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(e){var t,n,s,u,c,l,f,d,h;if(!(t=e.match(a)))throw new Error("invalid data URI");for(n=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),s=!!t[4],u=e.slice(t[0].length),c=s?atob(u):decodeURIComponent(u),l=new ArrayBuffer(c.length),f=new Uint8Array(l),d=0;d<c.length;d+=1)f[d]=c.charCodeAt(d);return r?new Blob([o?f:l],{type:n}):((h=new i).append(l),h.getBlob(n))};t.HTMLCanvasElement&&!n.toBlob&&(n.mozGetAsFile?n.toBlob=function(e,t,r){var o=this;setTimeout(function(){r&&n.toDataURL&&s?e(s(o.toDataURL(t,r))):e(o.mozGetAsFile("blob",t))})}:n.toDataURL&&s&&(n.toBlob=function(e,t,n){var r=this;setTimeout(function(){e(s(r.toDataURL(t,n)))})})),e.exports?e.exports=s:t.dataURLtoBlob=s}(window)}(e={exports:{}},e.exports),e.exports),n=Object.prototype.toString,r={checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,quality:.8,mimeType:"auto",convertSize:5e6,success:null,error:null},o=/^image\/.+$/;function i(e){return o.test(e)}var a=String.fromCharCode;var s=window.btoa;function u(e){var t=new DataView(e),n=void 0,r=void 0,o=void 0,i=void 0;if(255===t.getUint8(0)&&216===t.getUint8(1))for(var s=t.byteLength,u=2;u<s;){if(255===t.getUint8(u)&&225===t.getUint8(u+1)){o=u;break}u+=1}if(o){var c=o+10;if("Exif"===function(e,t,n){var r="",o=void 0;for(n+=t,o=t;o<n;o+=1)r+=a(e.getUint8(o));return r}(t,o+4,4)){var l=t.getUint16(c);if(((r=18761===l)||19789===l)&&42===t.getUint16(c+2,r)){var f=t.getUint32(c+4,r);f>=8&&(i=c+f)}}}if(i){var d=t.getUint16(i,r),h=void 0,p=void 0;for(p=0;p<d;p+=1)if(h=i+12*p+2,274===t.getUint16(h,r)){h+=8,n=t.getUint16(h,r),t.setUint16(h,1,r);break}}return n}!function(){function e(e){this.value=e}function t(t){var n,r;function o(n,r){try{var a=t[n](r),s=a.value;s instanceof e?Promise.resolve(s.value).then(function(e){o("next",e)},function(e){o("throw",e)}):i(a.done?"return":"normal",a.value)}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?o(n.key,n.arg):r=null}this._invoke=function(e,t){return new Promise(function(i,a){var s={key:e,arg:t,resolve:i,reject:a,next:null};r?r=r.next=s:(n=r=s,o(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}();var c=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=window,h=d.ArrayBuffer,p=d.FileReader,g=window.URL||window.webkitURL,m=/\.\w+$/;return function(){function e(t,n){c(this,e),this.result=null,t&&this.compress(t,n)}return l(e,[{key:"compress",value:function(e,o){var c=this,l=new Image;return o=f({},r,o),h||(o.checkOrientation=!1),new Promise(function(t,r){if((c=e)instanceof Blob||"[object Blob]"===n.call(c)){var c,l=e.type;if(i(l))if(g||p){if(g&&!o.checkOrientation)t(g.createObjectURL(e));else if(p){var d=new p,h=o.checkOrientation&&"image/jpeg"===l;d.onload=function(e){var n=e.target.result;t(h?f({url:function(e,t){var n=new Uint8Array(e),r=n.length,o="",i=void 0;for(i=0;i<r;i+=1)o+=a(n[i]);return"data:"+t+";base64,"+s(o)}(n,l)},function(e){var t=0,n=1,r=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}return{rotate:t,scaleX:n,scaleY:r}}(u(n))):{url:n})},d.onabort=r,d.onerror=r,h?d.readAsArrayBuffer(e):d.readAsDataURL(e)}}else r(new Error("The current browser does not support image compression."));else r(new Error("The first argument must be an image File or Blob object."))}else r(new Error("The first argument must be a File or Blob object."))}).then(function(t){return new Promise(function(n,r){l.onload=function(){return n(f({},t,{naturalWidth:l.naturalWidth,naturalHeight:l.naturalHeight}))},l.onabort=r,l.onerror=r,l.alt=e.name,l.src=t.url})}).then(function(n){var r=n.naturalWidth,a=n.naturalHeight,s=n.rotate,u=void 0===s?0:s,c=n.scaleX,f=void 0===c?1:c,d=n.scaleY,h=void 0===d?1:d;return new Promise(function(n){var s=document.createElement("canvas"),c=s.getContext("2d"),d=r/a,p=Math.max(o.maxWidth,0)||1/0,g=Math.max(o.maxHeight,0)||1/0,m=Math.max(o.minWidth,0)||0,v=Math.max(o.minHeight,0)||0,y=r,b=a;if(p<1/0&&g<1/0?g*d>p?g=p/d:p=g*d:p<1/0?g=p/d:g<1/0&&(p=g*d),m>0&&v>0?v*d>m?v=m/d:m=v*d:m>0?v=m/d:v>0&&(m=v*d),o.width>0)b=(y=o.width)/d;else if(o.height>0){y=(b=o.height)*d}var _=-(y=Math.min(Math.max(y,m),p))/2,w=-(b=Math.min(Math.max(b,v),g))/2,C=y,k=b;if(Math.abs(u)%180==90){var E={width:b,height:y};y=E.width,b=E.height}s.width=y,s.height=b,c.fillStyle="transparent",c.fillRect(0,0,y,b),c.save(),c.translate(y/2,b/2),c.rotate(u*Math.PI/180),c.scale(f,h),c.drawImage(l,Math.floor(_),Math.floor(w),Math.floor(C),Math.floor(k)),c.restore(),i(o.mimeType)||(o.mimeType=e.type),e.size>o.convertSize&&"image/png"===o.mimeType&&(o.mimeType="image/jpeg"),s.toBlob?s.toBlob(n,o.mimeType,o.quality):n(t(s.toDataURL(o.mimeType,o.quality)))})}).then(function(t){if(g&&g.revokeObjectURL(l.src),t)if(t.size>e.size&&!(o.width>0||o.height>0||o.maxWidth<1/0||o.maxHeight<1/0||o.minWidth>0||o.minHeight>0))t=e;else{var n=new Date;t.lastModified=n.getTime(),t.lastModifiedDate=n,t.name=e.name,t.name&&t.type!==e.type&&(t.name=t.name.replace(m,function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=i(e)?e.substr(6):"";return"jpeg"===n&&(n="jpg"),n&&t&&(n="."+n),n}(t.type)))}else t=e;return c.result=t,o.success&&o.success(t),Promise.resolve(t)}).catch(function(e){if(!o.error)throw e;o.error(e)})}}]),e}()},e.exports=r()},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(114)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(i=++o)}),e.splice(i,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(t,n(6))},function(e,t){var n=1e3,r=60*n,o=60*r,i=24*o,a=365.25*i;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var u,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*o;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?s(u=e,i,"day")||s(u,o,"hour")||s(u,r,"minute")||s(u,n,"second")||u+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var o in r)n.call(r,o)&&(e[o]=r[o])}return e};var n=Object.prototype.hasOwnProperty},function(e,t,n){(function(t){e.exports=u;var r=n(48)("simple-peer"),o=n(119),i=n(7),a=n(29),s=n(49);function u(e){var t=this;if(!(t instanceof u))return new u(e);if(t._id=a(4).toString("hex").slice(0,7),t._debug("new peer %o",e),e=Object.assign({allowHalfOpen:!1},e),s.Duplex.call(t,e),t.channelName=e.initiator?e.channelName||a(20).toString("hex"):null,t._isChromium="undefined"!=typeof window&&!!window.webkitRTCPeerConnection,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||u.channelConfig,t.config=e.config||u.config,t.constraints=t._transformConstraints(e.constraints||u.constraints),t.offerConstraints=t._transformConstraints(e.offerConstraints||{}),t.answerConstraints=t._transformConstraints(e.answerConstraints||{}),t.reconnectTimer=e.reconnectTimer||!1,t.sdpTransform=e.sdpTransform||function(e){return e},t.stream=e.stream||!1,t.trickle=void 0===e.trickle||e.trickle,t._earlyMessage=null,t.destroyed=!1,t.connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localPort=void 0,t._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:o(),!t._wrtc)throw"undefined"==typeof window?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser");if(t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._channel=null,t._pendingCandidates=[],t._previousStreams=[],t._chunk=null,t._cb=null,t._interval=null,t._reconnectTimeout=null,t._pc=new t._wrtc.RTCPeerConnection(t.config,t.constraints),t._isWrtc=Array.isArray(t._pc.RTCIceConnectionStates),t._isReactNativeWebrtc="number"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.initiator){var n=!1;t._pc.onnegotiationneeded=function(){n||t._createOffer(),n=!0},t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)})}else t._pc.ondatachannel=function(e){t._setupData(e)};"addTrack"in t._pc?(t.stream&&t.stream.getTracks().forEach(function(e){t._pc.addTrack(e,t.stream)}),t._pc.ontrack=function(e){t._onTrack(e)}):(t.stream&&t._pc.addStream(t.stream),t._pc.onaddstream=function(e){t._onAddStream(e)}),t.initiator&&t._isWrtc&&t._pc.onnegotiationneeded(),t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound)}function c(){}i(u,s.Duplex),u.WEBRTC_SUPPORT=!!o(),u.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}]},u.constraints={},u.channelConfig={},Object.defineProperty(u.prototype,"bufferSize",{get:function(){return this._channel&&this._channel.bufferedAmount||0}}),u.prototype.address=function(){return{port:this.localPort,family:"IPv4",address:this.localAddress}},u.prototype.signal=function(e){var t=this;if(t.destroyed)throw new Error("cannot signal after peer is destroyed");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}t._debug("signal()"),e.candidate&&(t._pc.remoteDescription?t._addIceCandidate(e.candidate):t._pendingCandidates.push(e.candidate)),e.sdp&&t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e),function(){t.destroyed||(t._pendingCandidates.forEach(function(e){t._addIceCandidate(e)}),t._pendingCandidates=[],"offer"===t._pc.remoteDescription.type&&t._createAnswer())},function(e){t._destroy(e)}),e.sdp||e.candidate||t._destroy(new Error("signal() called with invalid signal data"))},u.prototype._addIceCandidate=function(e){var t=this;try{t._pc.addIceCandidate(new t._wrtc.RTCIceCandidate(e),c,function(e){t._destroy(e)})}catch(e){t._destroy(new Error("error adding candidate: "+e.message))}},u.prototype.send=function(e){this._isWrtc&&t.isBuffer(e)&&(e=new Uint8Array(e)),this._channel.send(e)},u.prototype.destroy=function(e){this._destroy(null,e)},u.prototype._destroy=function(e,t){if(!this.destroyed){if(t&&this.once("close",t),this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.destroyed=!0,this.connected=!1,this._pcReady=!1,this._channelReady=!1,this._previousStreams=null,this._earlyMessage=null,clearInterval(this._interval),clearTimeout(this._reconnectTimeout),this._interval=null,this._reconnectTimeout=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,"addTrack"in this._pc?this._pc.ontrack=null:this._pc.onaddstream=null,this._pc.onnegotiationneeded=null,this._pc.ondatachannel=null}if(this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close")}},u.prototype._setupData=function(e){var t=this;if(!e.channel)return t._destroy(new Error("Data channel event is missing `channel` property"));t._channel=e.channel,t._channel.binaryType="arraybuffer","number"==typeof t._channel.bufferedAmountLowThreshold&&(t._channel.bufferedAmountLowThreshold=65536),t.channelName=t._channel.label,t._channel.onmessage=function(e){t._channelReady?t._onChannelMessage(e):(t._earlyMessage=e,t._onChannelOpen())},t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},t._channel.onopen=function(){t._channelReady||t._onChannelOpen()},t._channel.onclose=function(){t._onChannelClose()},t._channel.onerror=function(e){t._destroy(e)}},u.prototype._read=function(){},u.prototype._write=function(e,t,n){if(this.destroyed)return n(new Error("cannot write after peer is destroyed"));if(this.connected){try{this.send(e)}catch(e){return this._destroy(e)}this._channel.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n},u.prototype._onFinish=function(){var e=this;function t(){setTimeout(function(){e._destroy()},1e3)}e.destroyed||(e.connected?t():e.once("connect",t))},u.prototype._createOffer=function(){var e=this;e.destroyed||e._pc.createOffer(function(t){function n(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,function(){if(e.destroyed)return;e.trickle||e._iceComplete?n():e.once("_iceComplete",n)},function(t){e._destroy(t)}))},function(t){e._destroy(t)},e.offerConstraints)},u.prototype._createAnswer=function(){var e=this;e.destroyed||e._pc.createAnswer(function(t){function n(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,function(){if(e.destroyed)return;e.trickle||e._iceComplete?n():e.once("_iceComplete",n)},function(t){e._destroy(t)}))},function(t){e._destroy(t)},e.answerConstraints)},u.prototype._onIceStateChange=function(){var e=this;if(!e.destroyed){var t=e._pc.iceConnectionState,n=e._pc.iceGatheringState;e._debug("iceStateChange (connection: %s) (gathering: %s)",t,n),e.emit("iceStateChange",t,n),"connected"!==t&&"completed"!==t||(clearTimeout(e._reconnectTimeout),e._pcReady=!0,e._maybeReady()),"disconnected"===t&&(e.reconnectTimer?(clearTimeout(e._reconnectTimeout),e._reconnectTimeout=setTimeout(function(){e._destroy()},e.reconnectTimer)):e._destroy()),"failed"===t&&e._destroy(new Error("Ice connection failed.")),"closed"===t&&e._destroy()}},u.prototype.getStats=function(e){0===this._pc.getStats.length?this._pc.getStats().then(function(t){var n=[];t.forEach(function(e){n.push(e)}),e(null,n)},function(t){e(t)}):this._isReactNativeWebrtc?this._pc.getStats(null,function(t){var n=[];t.forEach(function(e){n.push(e)}),e(null,n)},function(t){e(t)}):this._pc.getStats.length>0?this._pc.getStats(function(t){var n=[];t.result().forEach(function(e){var t={};e.names().forEach(function(n){t[n]=e.stat(n)}),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,n.push(t)}),e(null,n)},function(t){e(t)}):e(null,[])},u.prototype._maybeReady=function(){var e=this;e._debug("maybeReady pc %s channel %s",e._pcReady,e._channelReady),!e.connected&&!e._connecting&&e._pcReady&&e._channelReady&&(e._connecting=!0,e.getStats(function(t,n){if(!e.destroyed){t&&(n=[]),e._connecting=!1,e.connected=!0;var r={},o={},i={};if(n.forEach(function(e){"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(r[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(o[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(i[e.id]=e)}),n.forEach(function(e){"transport"===e.type&&s(i[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&s(e)}),e._chunk){try{e.send(e._chunk)}catch(t){return e._destroy(t)}e._chunk=null,e._debug('sent chunk from "write before connect"');var a=e._cb;e._cb=null,a(null)}"number"!=typeof e._channel.bufferedAmountLowThreshold&&(e._interval=setInterval(function(){e._onInterval()},150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect"),e._earlyMessage&&(e._onChannelMessage(e._earlyMessage),e._earlyMessage=null)}function s(t){var n=o[t.localCandidateId];n&&n.ip?(e.localAddress=n.ip,e.localPort=Number(n.port)):n&&n.ipAddress?(e.localAddress=n.ipAddress,e.localPort=Number(n.portNumber)):"string"==typeof t.googLocalAddress&&(n=t.googLocalAddress.split(":"),e.localAddress=n[0],e.localPort=Number(n[1]));var i=r[t.remoteCandidateId];i&&i.ip?(e.remoteAddress=i.ip,e.remotePort=Number(i.port)):i&&i.ipAddress?(e.remoteAddress=i.ipAddress,e.remotePort=Number(i.portNumber)):"string"==typeof t.googRemoteAddress&&(i=t.googRemoteAddress.split(":"),e.remoteAddress=i[0],e.remotePort=Number(i[1])),e.remoteFamily="IPv4",e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort)}}))},u.prototype._onInterval=function(){!this._cb||!this._channel||this._channel.bufferedAmount>65536||this._onChannelBufferedAmountLow()},u.prototype._onSignalingStateChange=function(){this.destroyed||(this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))},u.prototype._onIceCandidate=function(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||(this._iceComplete=!0,this.emit("_iceComplete")))},u.prototype._onChannelMessage=function(e){if(!this.destroyed){var n=e.data;n instanceof ArrayBuffer&&(n=t.from(n)),this.push(n)}},u.prototype._onChannelBufferedAmountLow=function(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}},u.prototype._onChannelOpen=function(){this.connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())},u.prototype._onChannelClose=function(){this.destroyed||(this._debug("on channel close"),this._destroy())},u.prototype._onAddStream=function(e){this.destroyed||(this._debug("on add stream"),this.emit("stream",e.stream))},u.prototype._onTrack=function(e){if(!this.destroyed){this._debug("on track");var t=e.streams[0].id;-1===this._previousStreams.indexOf(t)&&(this._previousStreams.push(t),this.emit("stream",e.streams[0]))}},u.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],r.apply(null,e)},u.prototype._transformConstraints=function(e){if(0===Object.keys(e).length)return e;if((e.mandatory||e.optional)&&!this._isChromium){var t=Object.assign({},e.optional,e.mandatory);return void 0!==t.OfferToReceiveVideo&&(t.offerToReceiveVideo=t.OfferToReceiveVideo,delete t.OfferToReceiveVideo),void 0!==t.OfferToReceiveAudio&&(t.offerToReceiveAudio=t.OfferToReceiveAudio,delete t.OfferToReceiveAudio),t}return e.mandatory||e.optional||!this._isChromium?e:(void 0!==e.offerToReceiveVideo&&(e.OfferToReceiveVideo=e.offerToReceiveVideo,delete e.offerToReceiveVideo),void 0!==e.offerToReceiveAudio&&(e.OfferToReceiveAudio=e.offerToReceiveAudio,delete e.offerToReceiveAudio),{mandatory:e})}}).call(t,n(17).Buffer)},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(118)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(i=++o)}),e.splice(i,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(t,n(6))},function(e,t,n){(t=e.exports=n(50)).Stream=t,t.Readable=t,t.Writable=n(53),t.Duplex=n(10),t.Transform=n(55),t.PassThrough=n(123)},function(e,t,n){"use strict";(function(t,r){var o=n(19);e.exports=b;var i,a=n(43);b.ReadableState=y;n(18).EventEmitter;var s=function(e,t){return e.listeners(t).length},u=n(51),c=n(9).Buffer,l=t.Uint8Array||function(){};var f=n(14);f.inherits=n(7);var d=n(120),h=void 0;h=d&&d.debuglog?d.debuglog("stream"):function(){};var p,g=n(121),m=n(52);f.inherits(b,u);var v=["error","close","destroy","pause","resume"];function y(e,t){i=i||n(10),e=e||{},this.objectMode=!!e.objectMode,t instanceof i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n(54).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function b(e){if(i=i||n(10),!(this instanceof b))return new b(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function _(e,t,n,r,o){var i,a=e._readableState;null===t?(a.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,E(e)}(e,a)):(o||(i=function(e,t){var n;r=t,c.isBuffer(r)||r instanceof l||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(a,t)),i?e.emit("error",i):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?w(e,a,t,!1):x(e,a)):w(e,a,t,!1))):r||(a.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function w(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&E(e)),x(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),n=!0),_(this,e,t,!1,n)},b.prototype.unshift=function(e){return _(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return p||(p=n(54).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var C=8388608;function k(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=C?e=C:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?o(S,e):S(e))}function S(e){h("emit readable"),e.emit("readable"),O(e)}function x(e,t){t.readingMore||(t.readingMore=!0,o(T,e,t))}function T(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function A(e){h("readable nexttick read 0"),e.read(0)}function P(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),O(e),t.flowing&&!t.reading&&e.read(0)}function O(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function R(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,o=n.data;e-=o.length;for(;n=n.next;){var i=n.data,a=e>i.length?i.length:e;if(a===i.length?o+=i:o+=i.slice(0,e),0===(e-=a)){a===i.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(a));break}++r}return t.length-=r,o}(e,t):function(e,t){var n=c.allocUnsafe(e),r=t.head,o=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,a),0===(e-=a)){a===i.length?(++o,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(a));break}++o}return t.length-=o,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function I(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,o(L,t,e))}function L(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function B(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}b.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?I(this):E(this),null;if(0===(e=k(e,t))&&t.ended)return 0===t.length&&I(this),null;var r,o=t.needReadable;return h("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",o=!0),t.ended||t.reading?h("reading or ended",o=!1):o&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=k(n,t))),null===(r=e>0?R(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&I(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,h("pipe count=%d opts=%j",i.pipesCount,t);var u=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?l:b;function c(t,r){h("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,h("cleanup"),e.removeListener("close",v),e.removeListener("finish",y),e.removeListener("drain",f),e.removeListener("error",m),e.removeListener("unpipe",c),n.removeListener("end",l),n.removeListener("end",b),n.removeListener("data",g),d=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||f())}function l(){h("onend"),e.end()}i.endEmitted?o(u):n.once("end",u),e.on("unpipe",c);var f=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,O(e))}}(n);e.on("drain",f);var d=!1;var p=!1;function g(t){h("ondata"),p=!1,!1!==e.write(t)||p||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==B(i.pipes,e))&&!d&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function m(t){h("onerror",t),b(),e.removeListener("error",m),0===s(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",y),b()}function y(){h("onfinish"),e.removeListener("close",v),b()}function b(){h("unpipe"),n.unpipe(e)}return n.on("data",g),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",m),e.once("close",v),e.once("finish",y),e.emit("pipe",n),i.flowing||(h("pipe resume"),n.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)r[i].emit("unpipe",this,n);return this}var a=B(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},b.prototype.on=function(e,t){var n=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&E(this):o(A,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,o(P,e,t))}(this,e)),this},b.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;for(var o in e.on("end",function(){if(h("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(o){(h("wrapped data"),t.decoder&&(o=t.decoder.write(o)),t.objectMode&&null==o)||(t.objectMode||o&&o.length)&&(r.push(o)||(n=!0,e.pause()))}),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<v.length;i++)e.on(v[i],r.emit.bind(r,v[i]));return r._read=function(t){h("wrapped _read",t),n&&(n=!1,e.resume())},r},b._fromList=R}).call(t,n(8),n(6))},function(e,t,n){e.exports=n(18).EventEmitter},function(e,t,n){"use strict";var r=n(19);function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,i=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;i||a?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r(o,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(r(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";(function(t,r,o){var i=n(19);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var o=r.callback;t.pendingcb--,o(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var s,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:i;y.WritableState=v;var c=n(14);c.inherits=n(7);var l={deprecate:n(122)},f=n(51),d=n(9).Buffer,h=o.Uint8Array||function(){};var p,g=n(52);function m(){}function v(e,t){s=s||n(10),e=e||{},this.objectMode=!!e.objectMode,t instanceof s&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===e.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,o){--t.pendingcb,n?(i(o,r),i(E,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(o(r),e._writableState.errorEmitted=!0,e.emit("error",r),E(e,t))}(e,n,r,t,o);else{var a=C(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?u(_,e,n,a,o):_(e,n,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(e){if(s=s||n(10),!(p.call(y,this)||this instanceof s))return new y(e);this._writableState=new v(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function b(e,t,n,r,o,i,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function _(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),E(e,t)}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),i=t.corkedRequestsFree;i.entry=n;for(var s=0,u=!0;n;)o[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;o.allBuffers=u,b(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new a(t)}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(b(e,t,!1,t.objectMode?1:c.length,c,l,f),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),E(e,t)})}function E(e,t){var n=C(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,i(k,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}c.inherits(y,f),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||e&&e._writableState instanceof v}})):p=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,n){var r,o=this._writableState,a=!1,s=(r=e,(d.isBuffer(r)||r instanceof h)&&!o.objectMode);return s&&!d.isBuffer(e)&&(e=function(e){return d.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=m),o.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),i(t,n)}(this,n):(s||function(e,t,n,r){var o=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),i(r,a),o=!1),o}(this,o,e,n))&&(o.pendingcb++,a=function(e,t,n,r,o,i){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,n));return t}(t,r,o);r!==a&&(n=!0,o="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:i,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,s,r,o,i);return u}(this,o,s,e,t,n)),a},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},y.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,E(e,t),n&&(t.finished?i(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(6),n(40).setImmediate,n(8))},function(e,t,n){var r=n(17).Buffer,o=r.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};var i=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!o(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:return void(this.write=a)}this.charBuffer=new r(6),this.charReceived=0,this.charLength=0};function a(e){return e.toString(this.encoding)}function s(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function u(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}i.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((o=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&o<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived);var o;r=(t+=e.toString(this.encoding,0,r)).length-1;if((o=t.charCodeAt(r))>=55296&&o<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),e.copy(this.charBuffer,0,0,i),t.substring(0,r)}return t},i.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},i.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,o=this.encoding;t+=r.slice(0,n).toString(o)}return t}},function(e,t,n){"use strict";e.exports=a;var r=n(10),o=n(14);function i(e){this.afterTransform=function(t,n){return function(e,t,n){var r=e._transformState;r.transforming=!1;var o=r.writecb;if(!o)return e.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=n&&e.push(n);o(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState=new i(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){s(t,e,n)}):s(t)})}function s(e,t,n){if(t)return e.emit("error",t);null!=n&&e.push(n);var r=e._writableState,o=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(o.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}o.inherits=n(7),o.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){var r=n(9).Buffer,o=n(132);t.DEFAULT_ANNOUNCE_PEERS=50,t.MAX_ANNOUNCE_PEERS=82,t.binaryToHex=function(e){return"string"!=typeof e&&(e=String(e)),r.from(e,"binary").toString("hex")},t.hexToBinary=function(e){return"string"!=typeof e&&(e=String(e)),r.from(e,"hex").toString("binary")},o(t,n(133))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),o=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var t=e.name,n=e.type,o=e.placeholder,i=e.onChange;return r.default.createElement("div",{className:"auth-form-input"},r.default.createElement("input",{name:t,autoComplete:"false",required:!0,type:n,placeholder:o,onChange:i}),r.default.createElement("label",{htmlFor:t}))};a.propTypes={name:o.default.string.isRequired,type:o.default.string.isRequired,placeholder:o.default.string,onChange:o.default.func.isRequired},t.default=a},function(e,t,n){"use strict";var r=l(n(0)),o=l(n(60)),i=n(3),a=l(n(98)),s=l(n(143)),u=l(n(145)),c=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}o.default.render(r.default.createElement(i.BrowserRouter,{history:i.browserHistory},r.default.createElement(i.Switch,null,r.default.createElement(i.Route,{exact:!0,path:"/login",component:s.default}),r.default.createElement(i.Route,{exact:!0,path:"/signup",component:u.default}),r.default.createElement(i.Route,{path:"/",render:function(){return c.default.isUserAuthenticated()?r.default.createElement(a.default,null):r.default.createElement(i.Redirect,{to:"/login"})}}))),document.getElementById("root"))},function(e,t,n){"use strict";var r=n(30),o=n(31);n(20);var i=n(15);function a(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw(t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")).name="Invariant Violation",t.framesToPop=1,t}var s={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function u(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||s}function c(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||s}function l(){}u.prototype.isReactComponent={},u.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&a("85"),this.updater.enqueueSetState(this,e,t,"setState")},u.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},l.prototype=u.prototype;var f=c.prototype=new l;function d(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||s}f.constructor=c,r(f,u.prototype),f.isPureReactComponent=!0;var h=d.prototype=new l;h.constructor=d,r(h,u.prototype),h.unstable_isAsyncReactComponent=!0,h.render=function(){return this.props.children};var p={Component:u,PureComponent:c,AsyncComponent:d},g={current:null},m=Object.prototype.hasOwnProperty,v="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,y={key:!0,ref:!0,__self:!0,__source:!0};function b(e,t,n,r,o,i,a){return{$$typeof:v,type:e,key:t,ref:n,props:a,_owner:i}}b.createElement=function(e,t,n){var r,o={},i=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),void 0===t.__self?null:t.__self,void 0===t.__source?null:t.__source,t)m.call(t,r)&&!y.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return b(e,i,a,0,0,g.current,o)},b.createFactory=function(e){var t=b.createElement.bind(null,e);return t.type=e,t},b.cloneAndReplaceKey=function(e,t){return b(e.type,t,e.ref,e._self,e._source,e._owner,e.props)},b.cloneElement=function(e,t,n){var o=r({},e.props),i=e.key,a=e.ref,s=(e._self,e._source,e._owner);if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=g.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)m.call(t,c)&&!y.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}return b(e.type,i,a,0,0,s,o)},b.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===v};var _="function"==typeof Symbol&&Symbol.iterator,w="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;var C=/\/+/g,k=[];function E(e,t,n,r){if(k.length){var o=k.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function S(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>k.length&&k.push(e)}function x(e,t,n,r){var o=typeof e;if("undefined"!==o&&"boolean"!==o||(e=null),null===e||"string"===o||"number"===o||"object"===o&&e.$$typeof===w)return n(r,e,""===t?"."+T(e,0):t),1;var i=0;if(t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){var u=t+T(o=e[s],s);i+=x(o,u,n,r)}else if("function"==typeof(u=_&&e[_]||e["@@iterator"]))for(e=u.call(e),s=0;!(o=e.next()).done;)i+=x(o=o.value,u=t+T(o,s++),n,r);else"object"===o&&a("31","[object Object]"===(n=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return i}function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function A(e,t){e.func.call(e.context,t,e.count++)}function P(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?O(e,r,n,i.thatReturnsArgument):null!=e&&(b.isValidElement(e)&&(e=b.cloneAndReplaceKey(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(C,"$&/")+"/")+n)),r.push(e))}function O(e,t,n,r,o){var i="";null!=n&&(i=(""+n).replace(C,"$&/")+"/"),t=E(t,i,r,o),null==e||x(e,"",P,t),S(t)}var R={forEach:function(e,t,n){if(null==e)return e;t=E(null,null,t,n),null==e||x(e,"",A,t),S(t)},map:function(e,t,n){if(null==e)return e;var r=[];return O(e,r,null,t,n),r},count:function(e){return null==e?0:x(e,"",i.thatReturnsNull,null)},toArray:function(e){var t=[];return O(e,t,null,i.thatReturnsArgument),t}};e.exports={Children:{map:R.map,forEach:R.forEach,count:R.count,toArray:R.toArray,only:function(e){return b.isValidElement(e)||a("143"),e}},Component:p.Component,PureComponent:p.PureComponent,unstable_AsyncComponent:p.AsyncComponent,createElement:b.createElement,cloneElement:b.cloneElement,isValidElement:b.isValidElement,createFactory:b.createFactory,version:"16.0.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:g,assign:r}}},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(61)},function(e,t,n){"use strict";var r=n(0);n(20);var o=n(62),i=n(30),a=n(63),s=n(15),u=n(31),c=n(64),l=n(65),f=n(68),d=n(69);function h(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw(t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")).name="Invariant Violation",t.framesToPop=1,t}function p(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}r||h("227");var g={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},m=p,v=function(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?p(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e},y=null,b={};function _(){if(y)for(var e in b){var t=b[e],n=y.indexOf(e);if(-1<n||h("96",e),!C.plugins[n])for(var r in t.extractEvents||h("97",e),C.plugins[n]=t,n=t.eventTypes){var o=void 0,i=n[r],a=t,s=r;C.eventNameDispatchConfigs.hasOwnProperty(s)&&h("99",s),C.eventNameDispatchConfigs[s]=i;var u=i.phasedRegistrationNames;if(u){for(o in u)u.hasOwnProperty(o)&&w(u[o],a,s);o=!0}else i.registrationName?(w(i.registrationName,a,s),o=!0):o=!1;o||h("98",r,e)}}}function w(e,t,n){C.registrationNameModules[e]&&h("100",e),C.registrationNameModules[e]=t,C.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var C={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){y&&h("101"),y=Array.prototype.slice.call(e),_()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];b.hasOwnProperty(t)&&b[t]===r||(b[t]&&h("102",t),b[t]=r,n=!0)}n&&_()}},k=C,E={children:!0,dangerouslySetInnerHTML:!0,autoFocus:!0,defaultValue:!0,defaultChecked:!0,innerHTML:!0,suppressContentEditableWarning:!0,style:!0};function S(e,t){return(e&t)===t}var x={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,HAS_STRING_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=x,n=e.Properties||{},r=e.DOMAttributeNamespaces||{},o=e.DOMAttributeNames||{};for(var i in e=e.DOMMutationMethods||{},n){T.properties.hasOwnProperty(i)&&h("48",i);var a=i.toLowerCase(),s=n[i];1>=(a={attributeName:a,attributeNamespace:null,propertyName:i,mutationMethod:null,mustUseProperty:S(s,t.MUST_USE_PROPERTY),hasBooleanValue:S(s,t.HAS_BOOLEAN_VALUE),hasNumericValue:S(s,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:S(s,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:S(s,t.HAS_OVERLOADED_BOOLEAN_VALUE),hasStringBooleanValue:S(s,t.HAS_STRING_BOOLEAN_VALUE)}).hasBooleanValue+a.hasNumericValue+a.hasOverloadedBooleanValue||h("50",i),o.hasOwnProperty(i)&&(a.attributeName=o[i]),r.hasOwnProperty(i)&&(a.attributeNamespace=r[i]),e.hasOwnProperty(i)&&(a.mutationMethod=e[i]),T.properties[i]=a}}},T={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",ATTRIBUTE_NAME_CHAR:":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},shouldSetAttribute:function(e,t){if(T.isReservedProp(e)||!("o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1]))return!1;if(null===t)return!0;switch(typeof t){case"boolean":return T.shouldAttributeAcceptBooleanValue(e);case"undefined":case"number":case"string":case"object":return!0;default:return!1}},getPropertyInfo:function(e){return T.properties.hasOwnProperty(e)?T.properties[e]:null},shouldAttributeAcceptBooleanValue:function(e){if(T.isReservedProp(e))return!0;var t=T.getPropertyInfo(e);return t?t.hasBooleanValue||t.hasStringBooleanValue||t.hasOverloadedBooleanValue:"data-"===(e=e.toLowerCase().slice(0,5))||"aria-"===e},isReservedProp:function(e){return E.hasOwnProperty(e)},injection:x},A=T,P=0,O=1,R=2,I=3,L=4,B=5,U=6,M=7,D=8,N=9,j=10,F=1,H=3,K=8,W=9,q=11,z=B,G=U,V=F,$=K,Y=A.ID_ATTRIBUTE_NAME,X={hasCachedChildNodes:1},Q=Math.random().toString(36).slice(2),J="__reactInternalInstance$"+Q,Z="__reactEventHandlers$"+Q;function ee(e){for(var t;t=e._renderedComponent;)e=t;return e}function te(e,t){(e=ee(e))._hostNode=t,t[J]=e}function ne(e,t){if(!(e._flags&X.hasCachedChildNodes)){var n,r=e._renderedChildren;t=t.firstChild;e:for(n in r)if(r.hasOwnProperty(n)){var o=r[n],i=ee(o)._domID;if(0!==i){for(;null!==t;t=t.nextSibling){var a=t,s=i;if(a.nodeType===V&&a.getAttribute(Y)===""+s||a.nodeType===$&&a.nodeValue===" react-text: "+s+" "||a.nodeType===$&&a.nodeValue===" react-empty: "+s+" "){te(o,t);continue e}}h("32",i)}}e._flags|=X.hasCachedChildNodes}}function re(e){if(e[J])return e[J];for(var t=[];!e[J];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}var n=e[J];if(n.tag===z||n.tag===G)return n;for(;e&&(n=e[J]);e=t.pop()){var r=n;t.length&&ne(n,e)}return r}var oe={getClosestInstanceFromNode:re,getInstanceFromNode:function(e){var t=e[J];return t?t.tag===z||t.tag===G?t:t._hostNode===e?t:null:null!=(t=re(e))&&t._hostNode===e?t:null},getNodeFromInstance:function(e){if(e.tag===z||e.tag===G)return e.stateNode;if(void 0===e._hostNode&&h("33"),e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent||h("34"),e=e._hostParent;for(;t.length;e=t.pop())ne(e,e._hostNode);return e._hostNode},precacheChildNodes:ne,precacheNode:te,uncacheNode:function(e){var t=e._hostNode;t&&(delete t[J],e._hostNode=null)},precacheFiberNode:function(e,t){t[J]=e},getFiberCurrentPropsFromNode:function(e){return e[Z]||null},updateFiberProps:function(e,t){e[Z]=t}},ie={remove:function(e){e._reactInternalFiber=void 0},get:function(e){return e._reactInternalFiber},has:function(e){return void 0!==e._reactInternalFiber},set:function(e,t){e._reactInternalFiber=t}},ae={ReactCurrentOwner:r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner};function se(e){if("function"==typeof e.getName)return e.getName();if("number"==typeof e.tag){if("string"==typeof(e=e.type))return e;if("function"==typeof e)return e.displayName||e.name}return null}var ue=0,ce=1,le=2,fe=4,de=6,he=8,pe=16,ge=32,me=64,ve=128,ye=B,be=I,_e=L,we=U,Ce=ue,ke=le;function Ee(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if((t.effectTag&ke)!==Ce)return 1;for(;t.return;)if(((t=t.return).effectTag&ke)!==Ce)return 1}return t.tag===be?2:3}function Se(e){2!==Ee(e)&&h("188")}function xe(e){var t=e.alternate;if(!t)return 3===(t=Ee(e))&&h("188"),1===t?null:e;for(var n=e,r=t;;){var o=n.return,i=o?o.alternate:null;if(!o||!i)break;if(o.child===i.child){for(var a=o.child;a;){if(a===n)return Se(o),e;if(a===r)return Se(o),t;a=a.sibling}h("188")}if(n.return!==r.return)n=o,r=i;else{a=!1;for(var s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a){for(s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}a||h("189")}}n.alternate!==r&&h("190")}return n.tag!==be&&h("188"),n.stateNode.current===n?e:t}var Te=function(e){return 2===Ee(e)},Ae=function(e){return!!(e=ie.get(e))&&2===Ee(e)},Pe=function(e){if(!(e=xe(e)))return null;for(var t=e;;){if(t.tag===ye||t.tag===we)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null},Oe=function(e){if(!(e=xe(e)))return null;for(var t=e;;){if(t.tag===ye||t.tag===we)return t;if(t.child&&t.tag!==_e)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null},Re={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,injection:{injectErrorUtils:function(e){"function"!=typeof e.invokeGuardedCallback&&h("197"),Ie=e.invokeGuardedCallback}},invokeGuardedCallback:function(e,t,n,r,o,i,a,s,u){Ie.apply(Re,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,o,i,a,s,u){if(Re.invokeGuardedCallback.apply(this,arguments),Re.hasCaughtError()){var c=Re.clearCaughtError();Re._hasRethrowError||(Re._hasRethrowError=!0,Re._rethrowError=c)}},rethrowCaughtError:function(){return function(){if(Re._hasRethrowError){var e=Re._rethrowError;throw Re._rethrowError=null,Re._hasRethrowError=!1,e}}.apply(Re,arguments)},hasCaughtError:function(){return Re._hasCaughtError},clearCaughtError:function(){if(Re._hasCaughtError){var e=Re._caughtError;return Re._caughtError=null,Re._hasCaughtError=!1,e}h("198")}};function Ie(e,t,n,r,o,i,a,s,u){Re._hasCaughtError=!1,Re._caughtError=null;var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){Re._caughtError=e,Re._hasCaughtError=!0}}var Le,Be=Re;function Ue(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=Me.getNodeFromInstance(r),Be.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}var Me={isEndish:function(e){return"topMouseUp"===e||"topTouchEnd"===e||"topTouchCancel"===e},isMoveish:function(e){return"topMouseMove"===e||"topTouchMove"===e},isStartish:function(e){return"topMouseDown"===e||"topTouchStart"===e},executeDirectDispatch:function(e){var t=e._dispatchListeners,n=e._dispatchInstances;return Array.isArray(t)&&h("103"),e.currentTarget=t?Me.getNodeFromInstance(n):null,t=t?t(e):null,e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,t},executeDispatchesInOrder:function(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var o=0;o<n.length&&!e.isPropagationStopped();o++)Ue(e,t,n[o],r[o]);else n&&Ue(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null},executeDispatchesInOrderStopAtTrue:function(e){e:{var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r])){t=n[r];break e}}else if(t&&t(e,n)){t=n;break e}t=null}return e._dispatchInstances=null,e._dispatchListeners=null,t},hasDispatches:function(e){return!!e._dispatchListeners},getFiberCurrentPropsFromNode:function(e){return Le.getFiberCurrentPropsFromNode(e)},getInstanceFromNode:function(e){return Le.getInstanceFromNode(e)},getNodeFromInstance:function(e){return Le.getNodeFromInstance(e)},injection:{injectComponentTree:function(e){Le=e}}},De=Me,Ne=null,je=null,Fe=null;function He(e){if(e=De.getInstanceFromNode(e))if("number"==typeof e.tag){Ne&&"function"==typeof Ne.restoreControlledState||h("194");var t=De.getFiberCurrentPropsFromNode(e.stateNode);Ne.restoreControlledState(e.stateNode,e.type,t)}else"function"!=typeof e.restoreControlledState&&h("195"),e.restoreControlledState()}var Ke={injection:{injectFiberControlledHostComponent:function(e){Ne=e}},enqueueStateRestore:function(e){je?Fe?Fe.push(e):Fe=[e]:je=e},restoreStateIfNeeded:function(){if(je){var e=je,t=Fe;if(Fe=je=null,He(e),t)for(e=0;e<t.length;e++)He(t[e])}}};function We(e,t,n,r,o,i){return e(t,n,r,o,i)}function qe(e,t){return e(t)}function ze(e,t){return qe(e,t)}var Ge=!1,Ve={batchedUpdates:function(e,t){if(Ge)return We(ze,e,t);Ge=!0;try{return We(ze,e,t)}finally{Ge=!1,Ke.restoreStateIfNeeded()}},injection:{injectStackBatchedUpdates:function(e){We=e},injectFiberBatchedUpdates:function(e){qe=e}}},$e=H;function Ye(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===$e?e.parentNode:e}var Xe=I,Qe=[];function Je(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n=t;if("number"==typeof n.tag){for(;n.return;)n=n.return;n=n.tag!==Xe?null:n.stateNode.containerInfo}else{for(;n._hostParent;)n=n._hostParent;n=oe.getNodeFromInstance(n).parentNode}if(!n)break;e.ancestors.push(t),t=oe.getClosestInstanceFromNode(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],Ze._handleTopLevel(e.topLevelType,t,e.nativeEvent,Ye(e.nativeEvent))}var Ze={_enabled:!0,_handleTopLevel:null,setHandleTopLevel:function(e){Ze._handleTopLevel=e},setEnabled:function(e){Ze._enabled=!!e},isEnabled:function(){return Ze._enabled},trapBubbledEvent:function(e,t,n){return n?a.listen(n,t,Ze.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){return n?a.capture(n,t,Ze.dispatchEvent.bind(null,e)):null},dispatchEvent:function(e,t){if(Ze._enabled){var n=Ye(t);if(null===(n=oe.getClosestInstanceFromNode(n))||"number"!=typeof n.tag||Te(n)||(n=null),Qe.length){var r=Qe.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Ve.batchedUpdates(Je,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Qe.length&&Qe.push(e)}}}},et=Ze;function tt(e,t){return null==t&&h("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function nt(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var rt=null;function ot(e,t){e&&(De.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))}function it(e){return ot(e,!0)}function at(e){return ot(e,!1)}function st(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||"button"!==t&&"input"!==t&&"select"!==t&&"textarea"!==t);default:return!1}}var ut,ct={injection:{injectEventPluginOrder:k.injectEventPluginOrder,injectEventPluginsByName:k.injectEventPluginsByName},getListener:function(e,t){if("number"==typeof e.tag){var n=e.stateNode;if(!n)return null;var r=De.getFiberCurrentPropsFromNode(n);if(!r)return null;if(n=r[t],st(t,e.type,r))return null}else{if("string"==typeof(r=e._currentElement)||"number"==typeof r||!e._rootNodeID)return null;if(n=(e=r.props)[t],st(t,r.type,e))return null}return n&&"function"!=typeof n&&h("231",t,typeof n),n},extractEvents:function(e,t,n,r){for(var o,i=k.plugins,a=0;a<i.length;a++){var s=i[a];s&&(s=s.extractEvents(e,t,n,r))&&(o=tt(o,s))}return o},enqueueEvents:function(e){e&&(rt=tt(rt,e))},processEventQueue:function(e){var t=rt;rt=null,nt(t,e?it:at),rt&&h("95"),Be.rethrowCaughtError()}};function lt(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n=(t="on"+e)in document;return n||((n=document.createElement("div")).setAttribute(t,"return;"),n="function"==typeof n[t]),!n&&ut&&"wheel"===e&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}function ft(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}o.canUseDOM&&(ut=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var dt={animationend:ft("Animation","AnimationEnd"),animationiteration:ft("Animation","AnimationIteration"),animationstart:ft("Animation","AnimationStart"),transitionend:ft("Transition","TransitionEnd")},ht={},pt={};function gt(e){if(ht[e])return ht[e];if(!dt[e])return e;var t,n=dt[e];for(t in n)if(n.hasOwnProperty(t)&&t in pt)return ht[e]=n[t];return""}o.canUseDOM&&(pt=document.createElement("div").style,"AnimationEvent"in window||(delete dt.animationend.animation,delete dt.animationiteration.animation,delete dt.animationstart.animation),"TransitionEvent"in window||delete dt.transitionend.transition);var mt={topAbort:"abort",topAnimationEnd:gt("animationend")||"animationend",topAnimationIteration:gt("animationiteration")||"animationiteration",topAnimationStart:gt("animationstart")||"animationstart",topBlur:"blur",topCancel:"cancel",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoad:"load",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:gt("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},vt={},yt=0,bt="_reactListenersID"+(""+Math.random()).slice(2);function _t(e){return Object.prototype.hasOwnProperty.call(e,bt)||(e[bt]=yt++,vt[e[bt]]={}),vt[e[bt]]}var wt=i({},{handleTopLevel:function(e,t,n,r){e=ct.extractEvents(e,t,n,r),ct.enqueueEvents(e),ct.processEventQueue(!1)}},{setEnabled:function(e){et&&et.setEnabled(e)},isEnabled:function(){return!(!et||!et.isEnabled())},listenTo:function(e,t){var n=_t(t);e=k.registrationNameDependencies[e];for(var r=0;r<e.length;r++){var o=e[r];n.hasOwnProperty(o)&&n[o]||("topWheel"===o?lt("wheel")?et.trapBubbledEvent("topWheel","wheel",t):lt("mousewheel")?et.trapBubbledEvent("topWheel","mousewheel",t):et.trapBubbledEvent("topWheel","DOMMouseScroll",t):"topScroll"===o?et.trapCapturedEvent("topScroll","scroll",t):"topFocus"===o||"topBlur"===o?(et.trapCapturedEvent("topFocus","focus",t),et.trapCapturedEvent("topBlur","blur",t),n.topBlur=!0,n.topFocus=!0):"topCancel"===o?(lt("cancel",!0)&&et.trapCapturedEvent("topCancel","cancel",t),n.topCancel=!0):"topClose"===o?(lt("close",!0)&&et.trapCapturedEvent("topClose","close",t),n.topClose=!0):mt.hasOwnProperty(o)&&et.trapBubbledEvent(o,mt[o],t),n[o]=!0)}},isListeningToAllDependencies:function(e,t){t=_t(t),e=k.registrationNameDependencies[e];for(var n=0;n<e.length;n++){var r=e[n];if(!t.hasOwnProperty(r)||!t[r])return!1}return!0},trapBubbledEvent:function(e,t,n){return et.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return et.trapCapturedEvent(e,t,n)}}),Ct={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kt=["Webkit","ms","Moz","O"];Object.keys(Ct).forEach(function(e){kt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ct[t]=Ct[e]})});var Et={isUnitlessNumber:Ct,shorthandPropertyExpansions:{background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}}},St=Et.isUnitlessNumber,xt=!1;if(o.canUseDOM){var Tt=document.createElement("div").style;try{Tt.font=""}catch(rn){xt=!0}}var At=function(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=n,i=t[n];if(o=null==i||"boolean"==typeof i||""===i?"":r||"number"!=typeof i||0===i||St.hasOwnProperty(o)&&St[o]?(""+i).trim():i+"px","float"===n&&(n="cssFloat"),r)e.setProperty(n,o);else if(o)e[n]=o;else if(r=xt&&Et.shorthandPropertyExpansions[n])for(var a in r)e[a]="";else e[n]=""}},Pt=new RegExp("^["+A.ATTRIBUTE_NAME_START_CHAR+"]["+A.ATTRIBUTE_NAME_CHAR+"]*$"),Ot={},Rt={};var It={setAttributeForID:function(e,t){e.setAttribute(A.ID_ATTRIBUTE_NAME,t)},setAttributeForRoot:function(e){e.setAttribute(A.ROOT_ATTRIBUTE_NAME,"")},getValueForProperty:function(){},getValueForAttribute:function(){},setValueForProperty:function(e,t,n){var r=A.getPropertyInfo(t);if(r&&A.shouldSetAttribute(t,n)){var o=r.mutationMethod;o?o(e,n):null==n||r.hasBooleanValue&&!n||r.hasNumericValue&&isNaN(n)||r.hasPositiveNumericValue&&1>n||r.hasOverloadedBooleanValue&&!1===n?It.deleteValueForProperty(e,t):r.mustUseProperty?e[r.propertyName]=n:(t=r.attributeName,(o=r.attributeNamespace)?e.setAttributeNS(o,t,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?e.setAttribute(t,""):e.setAttribute(t,""+n))}else It.setValueForAttribute(e,t,A.shouldSetAttribute(t,n)?n:null)},setValueForAttribute:function(e,t,n){(function(e){return!!Rt.hasOwnProperty(e)||!Ot.hasOwnProperty(e)&&(Pt.test(e)?Rt[e]=!0:(Ot[e]=!0,!1))})(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=A.getPropertyInfo(t);n?(t=n.mutationMethod)?t(e,void 0):n.mustUseProperty?e[n.propertyName]=!n.hasBooleanValue&&"":e.removeAttribute(n.attributeName):e.removeAttribute(t)}},Lt=It,Bt=ae.ReactDebugCurrentFrame;function Ut(){return null}var Mt={current:null,phase:null,resetCurrentFiber:function(){Bt.getCurrentStack=null,Mt.current=null,Mt.phase=null},setCurrentFiber:function(e,t){Bt.getCurrentStack=Ut,Mt.current=e,Mt.phase=t},getCurrentFiberOwnerName:function(){return null},getCurrentFiberStackAddendum:Ut},Dt=Mt,Nt={getHostProps:function(e,t){var n=t.value,r=t.checked;return i({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked})},initWrapperState:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}},updateWrapper:function(e,t){var n=t.checked;null!=n&&Lt.setValueForProperty(e,"checked",n||!1),null!=(n=t.value)?0===n&&""===e.value?e.value="0":"number"===t.type?(n!=(t=parseFloat(e.value)||0)||n==t&&e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n):(null==t.value&&null!=t.defaultValue&&e.defaultValue!==""+t.defaultValue&&(e.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked))},postMountWrapper:function(e,t){switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":e.value="",e.value=e.defaultValue;break;default:e.value=e.value}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==t&&(e.name=t)},restoreControlledState:function(e,t){Nt.updateWrapper(e,t);var n=t.name;if("radio"===t.type&&null!=n){for(t=e;t.parentNode;)t=t.parentNode;for(n=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=oe.getFiberCurrentPropsFromNode(r);o||h("90"),Nt.updateWrapper(r,o)}}}}},jt=Nt;var Ft=function(){},Ht=function(e,t){null!=t.value&&e.setAttribute("value",t.value)},Kt=function(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null==e||"string"!=typeof e&&"number"!=typeof e||(t+=e)}),t}(t.children))&&(e.children=t),e};function Wt(e,t,n){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r)}else{for(n=""+n,t=null,r=0;r<e.length;r++){if(e[r].value===n)return void(e[r].selected=!0);null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}var qt=function(e,t){return i({},t,{value:void 0})},zt=function(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}},Gt=function(e,t){e.multiple=!!t.multiple;var n=t.value;null!=n?Wt(e,!!t.multiple,n):null!=t.defaultValue&&Wt(e,!!t.multiple,t.defaultValue)},Vt=function(e,t){e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!t.multiple;var r=t.value;null!=r?Wt(e,!!t.multiple,r):n!==!!t.multiple&&(null!=t.defaultValue?Wt(e,!!t.multiple,t.defaultValue):Wt(e,!!t.multiple,t.multiple?[]:""))},$t=function(e,t){var n=t.value;null!=n&&Wt(e,!!t.multiple,n)},Yt={getHostProps:function(e,t){return null!=t.dangerouslySetInnerHTML&&h("91"),i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})},initWrapperState:function(e,t){var n=t.value,r=n;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&h("92"),Array.isArray(t)&&(1>=t.length||h("93"),t=t[0]),n=""+t),null==n&&(n=""),r=n),e._wrapperState={initialValue:""+r}},updateWrapper:function(e,t){var n=t.value;null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)},restoreControlledState:function(e,t){Yt.updateWrapper(e,t)}},Xt=Yt,Qt=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jt(e,t){t&&(Qt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&h("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&h("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||h("61")),null!=t.style&&"object"!=typeof t.style&&h("62",""))}function Zt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}var en={_getTrackerFromNode:function(e){return e._valueTracker},track:function(e){e._valueTracker||(e._valueTracker=function(e){var t=Zt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"function"==typeof n.get&&"function"==typeof n.set)return Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:!0,get:function(){return n.get.call(this)},set:function(e){r=""+e,n.set.call(this,e)}}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}(e))},updateValueIfChanged:function(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Zt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)},stopTracking:function(e){(e=e._valueTracker)&&e.stopTracking()}};function tn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nn,rn,on=g,an=(rn=function(e,t){if(e.namespaceURI!==on.svg||"innerHTML"in e)e.innerHTML=t;else for((nn=nn||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=nn.firstChild;t.firstChild;)e.appendChild(t.firstChild)},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return rn(e,t)})}:rn),sn=/["'&<>]/,un=H;function cn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===un)return void(n.nodeValue=t)}e.textContent=t}o.canUseDOM&&("textContent"in document.documentElement||(cn=function(e,t){if(e.nodeType===un)e.nodeValue=t;else{if("boolean"==typeof t||"number"==typeof t)t=""+t;else{t=""+t;var n=sn.exec(t);if(n){var r,o="",i=0;for(r=n.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#x27;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}i!==r&&(o+=t.substring(i,r)),i=r+1,o+=n}t=i!==r?o+t.substring(i,r):o}}an(e,t)}}));var ln=cn,fn=(Dt.getCurrentFiberOwnerName,W),dn=q,hn=wt.listenTo,pn=k.registrationNameModules,gn=g.html,mn=m;function vn(e,t){hn(t,e.nodeType===fn||e.nodeType===dn?e:e.ownerDocument)}var yn={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},bn={createElement:function(e,t,n,r){return n=n.nodeType===fn?n:n.ownerDocument,r===gn&&(r=mn(e)),r===gn?"script"===e?((e=n.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"==typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e},createTextNode:function(e,t){return(t.nodeType===fn?t:t.ownerDocument).createTextNode(e)},setInitialProperties:function(e,t,n,r){var o=tn(t,n);switch(t){case"iframe":case"object":wt.trapBubbledEvent("topLoad","load",e);var i=n;break;case"video":case"audio":for(i in yn)yn.hasOwnProperty(i)&&wt.trapBubbledEvent(i,yn[i],e);i=n;break;case"source":wt.trapBubbledEvent("topError","error",e),i=n;break;case"img":case"image":wt.trapBubbledEvent("topError","error",e),wt.trapBubbledEvent("topLoad","load",e),i=n;break;case"form":wt.trapBubbledEvent("topReset","reset",e),wt.trapBubbledEvent("topSubmit","submit",e),i=n;break;case"details":wt.trapBubbledEvent("topToggle","toggle",e),i=n;break;case"input":jt.initWrapperState(e,n),i=jt.getHostProps(e,n),wt.trapBubbledEvent("topInvalid","invalid",e),vn(r,"onChange");break;case"option":Ft(e,n),i=Kt(e,n);break;case"select":zt(e,n),i=qt(e,n),wt.trapBubbledEvent("topInvalid","invalid",e),vn(r,"onChange");break;case"textarea":Xt.initWrapperState(e,n),i=Xt.getHostProps(e,n),wt.trapBubbledEvent("topInvalid","invalid",e),vn(r,"onChange");break;default:i=n}Jt(t,i);var a,u=i;for(a in u)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?At(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&an(e,c):"children"===a?"string"==typeof c?ln(e,c):"number"==typeof c&&ln(e,""+c):"suppressContentEditableWarning"!==a&&(pn.hasOwnProperty(a)?null!=c&&vn(r,a):o?Lt.setValueForAttribute(e,a,c):null!=c&&Lt.setValueForProperty(e,a,c))}switch(t){case"input":en.track(e),jt.postMountWrapper(e,n);break;case"textarea":en.track(e),Xt.postMountWrapper(e,n);break;case"option":Ht(e,n);break;case"select":Gt(e,n);break;default:"function"==typeof i.onClick&&(e.onclick=s)}},diffProperties:function(e,t,n,r,o){var i,a,u=null;switch(t){case"input":n=jt.getHostProps(e,n),r=jt.getHostProps(e,r),u=[];break;case"option":n=Kt(e,n),r=Kt(e,r),u=[];break;case"select":n=qt(e,n),r=qt(e,r),u=[];break;case"textarea":n=Xt.getHostProps(e,n),r=Xt.getHostProps(e,r),u=[];break;default:"function"!=typeof n.onClick&&"function"==typeof r.onClick&&(e.onclick=s)}for(i in Jt(t,r),e=null,n)if(!r.hasOwnProperty(i)&&n.hasOwnProperty(i)&&null!=n[i])if("style"===i)for(a in t=n[i])t.hasOwnProperty(a)&&(e||(e={}),e[a]="");else"dangerouslySetInnerHTML"!==i&&"children"!==i&&"suppressContentEditableWarning"!==i&&(pn.hasOwnProperty(i)?u||(u=[]):(u=u||[]).push(i,null));for(i in r){var c=r[i];if(t=null!=n?n[i]:void 0,r.hasOwnProperty(i)&&c!==t&&(null!=c||null!=t))if("style"===i)if(t){for(a in t)!t.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(e||(e={}),e[a]="");for(a in c)c.hasOwnProperty(a)&&t[a]!==c[a]&&(e||(e={}),e[a]=c[a])}else e||(u||(u=[]),u.push(i,e)),e=c;else"dangerouslySetInnerHTML"===i?(c=c?c.__html:void 0,t=t?t.__html:void 0,null!=c&&t!==c&&(u=u||[]).push(i,""+c)):"children"===i?t===c||"string"!=typeof c&&"number"!=typeof c||(u=u||[]).push(i,""+c):"suppressContentEditableWarning"!==i&&(pn.hasOwnProperty(i)?(null!=c&&vn(o,i),u||t===c||(u=[])):(u=u||[]).push(i,c))}return e&&(u=u||[]).push("style",e),u},updateProperties:function(e,t,n,r,o){tn(n,r),r=tn(n,o);for(var i=0;i<t.length;i+=2){var a=t[i],s=t[i+1];"style"===a?At(e,s):"dangerouslySetInnerHTML"===a?an(e,s):"children"===a?ln(e,s):r?null!=s?Lt.setValueForAttribute(e,a,s):Lt.deleteValueForAttribute(e,a):null!=s?Lt.setValueForProperty(e,a,s):Lt.deleteValueForProperty(e,a)}switch(n){case"input":jt.updateWrapper(e,o),en.updateValueIfChanged(e);break;case"textarea":Xt.updateWrapper(e,o);break;case"select":Vt(e,o)}},diffHydratedProperties:function(e,t,n,r,o){switch(t){case"iframe":case"object":wt.trapBubbledEvent("topLoad","load",e);break;case"video":case"audio":for(var i in yn)yn.hasOwnProperty(i)&&wt.trapBubbledEvent(i,yn[i],e);break;case"source":wt.trapBubbledEvent("topError","error",e);break;case"img":case"image":wt.trapBubbledEvent("topError","error",e),wt.trapBubbledEvent("topLoad","load",e);break;case"form":wt.trapBubbledEvent("topReset","reset",e),wt.trapBubbledEvent("topSubmit","submit",e);break;case"details":wt.trapBubbledEvent("topToggle","toggle",e);break;case"input":jt.initWrapperState(e,n),wt.trapBubbledEvent("topInvalid","invalid",e),vn(o,"onChange");break;case"option":Ft(e,n);break;case"select":zt(e,n),wt.trapBubbledEvent("topInvalid","invalid",e),vn(o,"onChange");break;case"textarea":Xt.initWrapperState(e,n),wt.trapBubbledEvent("topInvalid","invalid",e),vn(o,"onChange")}for(var a in Jt(t,n),r=null,n)n.hasOwnProperty(a)&&(i=n[a],"children"===a?"string"==typeof i?e.textContent!==i&&(r=["children",i]):"number"==typeof i&&e.textContent!==""+i&&(r=["children",""+i]):pn.hasOwnProperty(a)&&null!=i&&vn(o,a));switch(t){case"input":en.track(e),jt.postMountWrapper(e,n);break;case"textarea":en.track(e),Xt.postMountWrapper(e,n);break;case"select":case"option":break;default:"function"==typeof n.onClick&&(e.onclick=s)}return r},diffHydratedText:function(e,t){return e.nodeValue!==t},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":jt.restoreControlledState(e,n);break;case"textarea":Xt.restoreControlledState(e,n);break;case"select":$t(e,n)}}},_n=void 0;if(o.canUseDOM)if("function"!=typeof requestIdleCallback){var wn=null,Cn=null,kn=!1,En=!1,Sn=0,xn=33,Tn=33,An={timeRemaining:"object"==typeof performance&&"function"==typeof performance.now?function(){return Sn-performance.now()}:function(){return Sn-Date.now()}},Pn="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){e.source===window&&e.data===Pn&&(kn=!1,e=Cn,Cn=null,null!==e&&e(An))},!1);var On=function(e){En=!1;var t=e-Sn+Tn;t<Tn&&xn<Tn?(8>t&&(t=8),Tn=t<xn?xn:t):xn=t,Sn=e+Tn,kn||(kn=!0,window.postMessage(Pn,"*")),t=wn,wn=null,null!==t&&t(e)};_n=function(e){return Cn=e,En||(En=!0,requestAnimationFrame(On)),0}}else _n=requestIdleCallback;else _n=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0}})}),0};var Rn={rIC:_n},In={enableAsyncSubtreeAPI:!0},Ln=0,Bn=1,Un=2,Mn=3,Dn=4,Nn=5,jn=ge,Fn=Ln,Hn=Bn,Kn=Un,Wn=R,qn=I,zn=void 0,Gn=void 0;function Vn(e,t){return e!==Kn&&e!==Hn||t!==Kn&&t!==Hn?e===Fn&&t!==Fn?-255:e!==Fn&&t===Fn?255:e-t:0}function $n(e,t,n,r){null!==n?n.next=t:(t.next=e.first,e.first=t),null!==r?t.next=r:e.last=t}function Yn(e,t){t=t.priorityLevel;var n=null;if(null!==e.last&&0>=Vn(e.last.priorityLevel,t))n=e.last;else for(e=e.first;null!==e&&0>=Vn(e.priorityLevel,t);)n=e,e=e.next;return n}function Xn(e,t){var n=e.alternate,r=e.updateQueue;null===r&&(r=e.updateQueue={first:null,last:null,hasForceUpdate:!1,callbackList:null}),null!==n?null===(e=n.updateQueue)&&(e=n.updateQueue={first:null,last:null,hasForceUpdate:!1,callbackList:null}):e=null;var o=zn=r;n=Gn=e!==r?e:null;var i=Yn(o,t),a=null!==i?i.next:o.first;return null===n?($n(o,t,i,a),null):(e=null!==(r=Yn(n,t))?r.next:n.first,$n(o,t,i,a),a===e&&null!==a||i===r&&null!==i?(null===r&&(n.first=t),null===e&&(n.last=null),null):($n(n,t={priorityLevel:t.priorityLevel,partialState:t.partialState,callback:t.callback,isReplace:t.isReplace,isForced:t.isForced,isTopLevelUnmount:t.isTopLevelUnmount,next:null},r,e),t))}function Qn(e,t,n,r){return"function"==typeof(e=e.partialState)?e.call(t,n,r):e}var Jn=function(e,t,n,r){Xn(e,{priorityLevel:r,partialState:t,callback:n,isReplace:!1,isForced:!1,isTopLevelUnmount:!1,next:null})},Zn=function(e,t,n,r){Xn(e,{priorityLevel:r,partialState:t,callback:n,isReplace:!0,isForced:!1,isTopLevelUnmount:!1,next:null})},er=function(e,t,n){Xn(e,{priorityLevel:n,partialState:null,callback:t,isReplace:!1,isForced:!0,isTopLevelUnmount:!1,next:null})},tr=function(e){var t=e.updateQueue;return null===t||e.tag!==Wn&&e.tag!==qn?Fn:null!==t.first?t.first.priorityLevel:Fn},nr=function(e,t,n,r){var o=null===t.element;e=Xn(e,t={priorityLevel:r,partialState:t,callback:n,isReplace:!1,isForced:!1,isTopLevelUnmount:o,next:null}),o&&(n=Gn,null!==(o=zn)&&null!==t.next&&(t.next=null,o.last=t),null!==n&&null!==e&&null!==e.next&&(e.next=null,n.last=t))},rr=function(e,t,n,r,o,a,s){null!==e&&e.updateQueue===n&&(n=t.updateQueue={first:n.first,last:n.last,callbackList:null,hasForceUpdate:!1}),e=n.callbackList;for(var u=n.hasForceUpdate,c=!0,l=n.first;null!==l&&0>=Vn(l.priorityLevel,s);){var f;n.first=l.next,null===n.first&&(n.last=null),l.isReplace?(o=Qn(l,r,o,a),c=!0):(f=Qn(l,r,o,a))&&(o=c?i({},o,f):i(o,f),c=!1),l.isForced&&(u=!0),null===l.callback||l.isTopLevelUnmount&&null!==l.next||((e=null!==e?e:[]).push(l.callback),t.effectTag|=jn),l=l.next}return n.callbackList=e,n.hasForceUpdate=u,null!==n.first||null!==e||u||(t.updateQueue=null),o},or=function(e,t,n){if(null!==(e=t.callbackList))for(t.callbackList=null,t=0;t<e.length;t++){var r=e[t];"function"!=typeof r&&h("191",r),r.call(n)}},ir=[],ar=-1,sr=function(e){return{current:e}},ur=function(e){0>ar||(e.current=ir[ar],ir[ar]=null,ar--)},cr=function(e,t){ir[++ar]=e.current,e.current=t},lr=function(){for(;-1<ar;)ir[ar]=null,ar--},fr=Te,dr=R,hr=I,pr=sr,gr=ur,mr=cr,vr=pr(u),yr=pr(!1),br=u;function _r(e,t,n){(e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n}function wr(e){return e.tag===dr&&null!=e.type.childContextTypes}function Cr(e,t){var n=e.stateNode,r=e.type.childContextTypes;if("function"!=typeof n.getChildContext)return t;for(var o in n=n.getChildContext())o in r||h("108",se(e)||"Unknown",o);return i({},t,n)}var kr=function(e){return wr(e)?br:vr.current},Er=_r,Sr=function(e,t){var n=e.type.contextTypes;if(!n)return u;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&_r(e,t,i),i},xr=function(){return yr.current},Tr=function(e){return e.tag===dr&&null!=e.type.contextTypes},Ar=wr,Pr=function(e){wr(e)&&(gr(yr,e),gr(vr,e))},Or=function(e){gr(yr,e),gr(vr,e)},Rr=function(e,t,n){null!=vr.cursor&&h("168"),mr(vr,t,e),mr(yr,n,e)},Ir=Cr,Lr=function(e){if(!wr(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||u,br=vr.current,mr(vr,t,e),mr(yr,yr.current,e),!0},Br=function(e,t){var n=e.stateNode;if(n||h("169"),t){var r=Cr(e,br);n.__reactInternalMemoizedMergedChildContext=r,gr(yr,e),gr(vr,e),mr(vr,r,e)}else gr(yr,e);mr(yr,t,e)},Ur=function(){br=u,vr.current=u,yr.current=!1},Mr=function(e){for(fr(e)&&e.tag===dr||h("170");e.tag!==hr;){if(wr(e))return e.stateNode.__reactInternalMemoizedMergedChildContext;(e=e.return)||h("171")}return e.stateNode.context},Dr=1,Nr=P,jr=R,Fr=I,Hr=B,Kr=U,Wr=L,qr=M,zr=N,Gr=j,Vr=Ln,$r=0,Yr=ue;function Xr(e,t,n){this.tag=e,this.key=t,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.memoizedState=this.updateQueue=this.memoizedProps=this.pendingProps=this.ref=null,this.internalContextTag=n,this.effectTag=Yr,this.lastEffect=this.firstEffect=this.nextEffect=null,this.pendingWorkPriority=Vr,this.alternate=null}function Qr(e,t,n){var r=void 0;return"function"==typeof e?(r=e.prototype&&e.prototype.isReactComponent?new Xr(jr,t,n):new Xr(Nr,t,n)).type=e:"string"==typeof e?(r=new Xr(Hr,t,n)).type=e:"object"==typeof e&&null!==e&&"number"==typeof e.tag?r=e:h("130",null==e?e:typeof e,""),r}var Jr,Zr,eo=function(e,t){var n=e.alternate;return null===n?((n=new Xr(e.tag,e.key,e.internalContextTag)).type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.effectTag=Yr,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.pendingWorkPriority=t,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n},to=function(e,t,n){return(t=Qr(e.type,e.key,t)).pendingProps=e.props,t.pendingWorkPriority=n,t},no=function(e,t,n){return(t=new Xr(Gr,null,t)).pendingProps=e,t.pendingWorkPriority=n,t},ro=function(e,t,n){return(t=new Xr(Kr,null,t)).pendingProps=e,t.pendingWorkPriority=n,t},oo=function(){var e=new Xr(Hr,null,$r);return e.type="DELETED",e},io=function(e,t,n){return(t=new Xr(qr,e.key,t)).type=e.handler,t.pendingProps=e,t.pendingWorkPriority=n,t},ao=function(e,t){return new Xr(zr,null,t)},so=function(e,t,n){return(t=new Xr(Wr,e.key,t)).pendingProps=e.children||[],t.pendingWorkPriority=n,t.stateNode={containerInfo:e.containerInfo,implementation:e.implementation},t},uo=function(e,t){return e!==Vr&&(t===Vr||t>e)?e:t},co=function(){return new Xr(Fr,null,$r)},lo=P,fo=O,ho=R,po=B;"function"==typeof Symbol&&Symbol.for?(Jr=Symbol.for("react.coroutine"),Zr=Symbol.for("react.yield")):(Jr=60104,Zr=60105);var go={createCoroutine:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Jr,key:null==r?null:""+r,children:e,handler:t,props:n}},createYield:function(e){return{$$typeof:Zr,value:e}},isCoroutine:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Jr},isYield:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Zr},REACT_YIELD_TYPE:Zr,REACT_COROUTINE_TYPE:Jr},mo="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.portal")||60106,vo={createPortal:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:mo,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},isPortal:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===mo},REACT_PORTAL_TYPE:mo},yo=go.REACT_COROUTINE_TYPE,bo=go.REACT_YIELD_TYPE,_o=vo.REACT_PORTAL_TYPE,wo=eo,Co=to,ko=no,Eo=ro,So=io,xo=ao,To=so,Ao=Array.isArray,Po=O,Oo=R,Ro=U,Io=L,Lo=M,Bo=N,Uo=j,Mo=ue,Do=le,No=he,jo="function"==typeof Symbol&&Symbol.iterator,Fo="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;function Ho(e){return null==e?null:"function"==typeof(e=jo&&e[jo]||e["@@iterator"])?e:null}function Ko(e,t){var n=t.ref;if(null!==n&&"function"!=typeof n){if(t._owner){t=t._owner;var r=void 0;t&&("number"==typeof t.tag?(t.tag!==Oo&&h("110"),r=t.stateNode):r=t.getPublicInstance()),r||h("147",n);var o=""+n;return null!==e&&null!==e.ref&&e.ref._stringRef===o?e.ref:((e=function(e){var t=r.refs===u?r.refs={}:r.refs;null===e?delete t[o]:t[o]=e})._stringRef=o,e)}"string"!=typeof n&&h("148"),t._owner||h("149",n)}return n}function Wo(e,t){"textarea"!==e.type&&h("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function qo(e,t){function n(n,r){if(t){if(!e){if(null===r.alternate)return;r=r.alternate}var o=n.lastEffect;null!==o?(o.nextEffect=r,n.lastEffect=r):n.firstEffect=n.lastEffect=r,r.nextEffect=null,r.effectTag=No}}function r(e,r){if(!t)return null;for(;null!==r;)n(e,r),r=r.sibling;return null}function o(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(t,n){return e?((t=wo(t,n)).index=0,t.sibling=null,t):(t.pendingWorkPriority=n,t.effectTag=Mo,t.index=0,t.sibling=null,t)}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=Do,n):r:(e.effectTag=Do,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=Do),e}function u(e,t,n,r){return null===t||t.tag!==Ro?((n=Eo(n,e.internalContextTag,r)).return=e,n):((t=i(t,r)).pendingProps=n,t.return=e,t)}function c(e,t,n,r){return null===t||t.type!==n.type?((r=Co(n,e.internalContextTag,r)).ref=Ko(t,n),r.return=e,r):((r=i(t,r)).ref=Ko(t,n),r.pendingProps=n.props,r.return=e,r)}function l(e,t,n,r){return null===t||t.tag!==Lo?((n=So(n,e.internalContextTag,r)).return=e,n):((t=i(t,r)).pendingProps=n,t.return=e,t)}function f(e,t,n,r){return null===t||t.tag!==Bo?((t=xo(n,e.internalContextTag,r)).type=n.value,t.return=e,t):((t=i(t,r)).type=n.value,t.return=e,t)}function d(e,t,n,r){return null===t||t.tag!==Io||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((n=To(n,e.internalContextTag,r)).return=e,n):((t=i(t,r)).pendingProps=n.children||[],t.return=e,t)}function p(e,t,n,r){return null===t||t.tag!==Uo?((n=ko(n,e.internalContextTag,r)).return=e,n):((t=i(t,r)).pendingProps=n,t.return=e,t)}function g(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Eo(""+t,e.internalContextTag,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Fo:return(n=Co(t,e.internalContextTag,n)).ref=Ko(null,t),n.return=e,n;case yo:return(t=So(t,e.internalContextTag,n)).return=e,t;case bo:return(n=xo(t,e.internalContextTag,n)).type=t.value,n.return=e,n;case _o:return(t=To(t,e.internalContextTag,n)).return=e,t}if(Ao(t)||Ho(t))return(t=ko(t,e.internalContextTag,n)).return=e,t;Wo(e,t)}return null}function m(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==o?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Fo:return n.key===o?c(e,t,n,r):null;case yo:return n.key===o?l(e,t,n,r):null;case bo:return null===o?f(e,t,n,r):null;case _o:return n.key===o?d(e,t,n,r):null}if(Ao(n)||Ho(n))return null!==o?null:p(e,t,n,r);Wo(e,n)}return null}function v(e,t,n,r,o){if("string"==typeof r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Fo:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case yo:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case bo:return f(t,e=e.get(n)||null,r,o);case _o:return d(t,e=e.get(null===r.key?n:r.key)||null,r,o)}if(Ao(r)||Ho(r))return p(t,e=e.get(n)||null,r,o);Wo(t,r)}return null}function y(e,i,s,u){for(var c=null,l=null,f=i,d=i=0,h=null;null!==f&&d<s.length;d++){f.index>d?(h=f,f=null):h=f.sibling;var p=m(e,f,s[d],u);if(null===p){null===f&&(f=h);break}t&&f&&null===p.alternate&&n(e,f),i=a(p,i,d),null===l?c=p:l.sibling=p,l=p,f=h}if(d===s.length)return r(e,f),c;if(null===f){for(;d<s.length;d++)(f=g(e,s[d],u))&&(i=a(f,i,d),null===l?c=f:l.sibling=f,l=f);return c}for(f=o(e,f);d<s.length;d++)(h=v(f,e,d,s[d],u))&&(t&&null!==h.alternate&&f.delete(null===h.key?d:h.key),i=a(h,i,d),null===l?c=h:l.sibling=h,l=h);return t&&f.forEach(function(t){return n(e,t)}),c}function b(e,i,s,u){var c=Ho(s);"function"!=typeof c&&h("150"),null==(s=c.call(s))&&h("151");for(var l=c=null,f=i,d=i=0,p=null,y=s.next();null!==f&&!y.done;d++,y=s.next()){f.index>d?(p=f,f=null):p=f.sibling;var b=m(e,f,y.value,u);if(null===b){f||(f=p);break}t&&f&&null===b.alternate&&n(e,f),i=a(b,i,d),null===l?c=b:l.sibling=b,l=b,f=p}if(y.done)return r(e,f),c;if(null===f){for(;!y.done;d++,y=s.next())null!==(y=g(e,y.value,u))&&(i=a(y,i,d),null===l?c=y:l.sibling=y,l=y);return c}for(f=o(e,f);!y.done;d++,y=s.next())null!==(y=v(f,e,d,y.value,u))&&(t&&null!==y.alternate&&f.delete(null===y.key?d:y.key),i=a(y,i,d),null===l?c=y:l.sibling=y,l=y);return t&&f.forEach(function(t){return n(e,t)}),c}return function(e,t,o,a){var u="object"==typeof o&&null!==o;if(u)switch(o.$$typeof){case Fo:e:{var c=o.key;for(u=t;null!==u;){if(u.key===c){if(u.type===o.type){r(e,u.sibling),(t=i(u,a)).ref=Ko(u,o),t.pendingProps=o.props,t.return=e,e=t;break e}r(e,u);break}n(e,u),u=u.sibling}(a=Co(o,e.internalContextTag,a)).ref=Ko(t,o),a.return=e,e=a}return s(e);case yo:e:{for(u=o.key;null!==t;){if(t.key===u){if(t.tag===Lo){r(e,t.sibling),(t=i(t,a)).pendingProps=o,t.return=e,e=t;break e}r(e,t);break}n(e,t),t=t.sibling}(o=So(o,e.internalContextTag,a)).return=e,e=o}return s(e);case bo:e:{if(null!==t){if(t.tag===Bo){r(e,t.sibling),(t=i(t,a)).type=o.value,t.return=e,e=t;break e}r(e,t)}(t=xo(o,e.internalContextTag,a)).type=o.value,t.return=e,e=t}return s(e);case _o:e:{for(u=o.key;null!==t;){if(t.key===u){if(t.tag===Io&&t.stateNode.containerInfo===o.containerInfo&&t.stateNode.implementation===o.implementation){r(e,t.sibling),(t=i(t,a)).pendingProps=o.children||[],t.return=e,e=t;break e}r(e,t);break}n(e,t),t=t.sibling}(o=To(o,e.internalContextTag,a)).return=e,e=o}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==t&&t.tag===Ro?(r(e,t.sibling),(t=i(t,a)).pendingProps=o,t.return=e,e=t):(r(e,t),(o=Eo(o,e.internalContextTag,a)).return=e,e=o),s(e);if(Ao(o))return y(e,t,o,a);if(Ho(o))return b(e,t,o,a);if(u&&Wo(e,o),void 0===o)switch(e.tag){case Oo:case Po:h("152",(o=e.type).displayName||o.name||"Component")}return r(e,t)}}var zo={reconcileChildFibers:qo(!0,!0),reconcileChildFibersInPlace:qo(!1,!0),mountChildFibersInPlace:qo(!1,!1),cloneChildFibers:function(e,t){if(null!==e&&t.child!==e.child&&h("153"),null!==t.child){e=t.child;var n=wo(e,e.pendingWorkPriority);for(n.pendingProps=e.pendingProps,t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=wo(e,e.pendingWorkPriority)).pendingProps=e.pendingProps,n.return=t;n.sibling=null}}},Go=fe,Vo=Dr,$o=Er,Yo=Sr,Xo=kr,Qo=Tr,Jo=Jn,Zo=Zn,ei=er,ti=rr,ni=xr,ri=Ae;var oi=zo.mountChildFibersInPlace,ii=zo.reconcileChildFibers,ai=zo.reconcileChildFibersInPlace,si=zo.cloneChildFibers,ui=rr,ci=Sr,li=kr,fi=xr,di=Lr,hi=Rr,pi=Br,gi=P,mi=O,vi=R,yi=I,bi=B,_i=U,wi=L,Ci=M,ki=D,Ei=N,Si=j,xi=Ln,Ti=Nn,Ai=ce,Pi=le,Oi=pe,Ri=me,Ii=ve,Li=ae.ReactCurrentOwner;function Bi(e,t,n,r,o){function i(e,t,n){a(e,t,n,t.pendingWorkPriority)}function a(e,t,n,r){t.child=null===e?oi(t,t.child,n,r):e.child===t.child?ii(t,t.child,n,r):ai(t,t.child,n,r)}function s(e,t){var n=t.ref;null===n||e&&e.ref===n||(t.effectTag|=Ii)}function l(e,t,n,r){if(s(e,t),!n)return r&&pi(t,!1),d(e,t);n=t.stateNode,Li.current=t;var o=n.render();return t.effectTag|=Ai,i(e,t,o),t.memoizedState=n.state,t.memoizedProps=n.props,r&&pi(t,!0),t.child}function f(e){var t=e.stateNode;t.pendingContext?hi(e,t.pendingContext,t.pendingContext!==t.context):t.context&&hi(e,t.context,!1),b(e,t.containerInfo)}function d(e,t){return si(e,t),t.child}function p(e,t){switch(t.tag){case yi:f(t);break;case vi:di(t);break;case wi:b(t,t.stateNode.containerInfo)}return null}var g=e.shouldSetTextContent,m=e.useSyncScheduling,v=e.shouldDeprioritizeSubtree,y=t.pushHostContext,b=t.pushHostContainer,_=n.enterHydrationState,w=n.resetHydrationState,C=n.tryToClaimNextHydratableInstance,k=(e=function(e,t,n,r){function o(e,t){t.updater=i,e.stateNode=t,ie.set(t,e)}var i={isMounted:ri,enqueueSetState:function(n,r,o){n=ie.get(n);var i=t(n,!1);Jo(n,r,void 0===o?null:o,i),e(n,i)},enqueueReplaceState:function(n,r,o){n=ie.get(n);var i=t(n,!1);Zo(n,r,void 0===o?null:o,i),e(n,i)},enqueueForceUpdate:function(n,r){n=ie.get(n);var o=t(n,!1);ei(n,void 0===r?null:r,o),e(n,o)}};return{adoptClassInstance:o,constructClassInstance:function(e,t){var n=e.type,r=Xo(e),i=Qo(e),a=i?Yo(e,r):u;return o(e,t=new n(t,a)),i&&$o(e,r,a),t},mountClassInstance:function(e,t){var n=e.alternate,r=e.stateNode,o=r.state||null,a=e.pendingProps;a||h("158");var s=Xo(e);r.props=a,r.state=o,r.refs=u,r.context=Yo(e,s),In.enableAsyncSubtreeAPI&&null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent&&(e.internalContextTag|=Vo),"function"==typeof r.componentWillMount&&(s=r.state,r.componentWillMount(),s!==r.state&&i.enqueueReplaceState(r,r.state,null),null!==(s=e.updateQueue)&&(r.state=ti(n,e,s,r,o,a,t))),"function"==typeof r.componentDidMount&&(e.effectTag|=Go)},updateClassInstance:function(e,t,o){var a=t.stateNode;a.props=t.memoizedProps,a.state=t.memoizedState;var s=t.memoizedProps,u=t.pendingProps;u||null==(u=s)&&h("159");var l=a.context,f=Xo(t);if(f=Yo(t,f),"function"!=typeof a.componentWillReceiveProps||s===u&&l===f||(l=a.state,a.componentWillReceiveProps(u,f),a.state!==l&&i.enqueueReplaceState(a,a.state,null)),l=t.memoizedState,o=null!==t.updateQueue?ti(e,t,t.updateQueue,a,l,u,o):l,!(s!==u||l!==o||ni()||null!==t.updateQueue&&t.updateQueue.hasForceUpdate))return"function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=Go),!1;var d=u;if(null===s||null!==t.updateQueue&&t.updateQueue.hasForceUpdate)d=!0;else{var p=t.stateNode,g=t.type;d="function"==typeof p.shouldComponentUpdate?p.shouldComponentUpdate(d,o,f):!(g.prototype&&g.prototype.isPureReactComponent&&c(s,d)&&c(l,o))}return d?("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(u,o,f),"function"==typeof a.componentDidUpdate&&(t.effectTag|=Go)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=Go),n(t,u),r(t,o)),a.props=u,a.state=o,a.context=f,d}}}(r,o,function(e,t){e.memoizedProps=t},function(e,t){e.memoizedState=t})).adoptClassInstance,E=e.constructClassInstance,S=e.mountClassInstance,x=e.updateClassInstance;return{beginWork:function(e,t,n){if(t.pendingWorkPriority===xi||t.pendingWorkPriority>n)return p(0,t);switch(t.tag){case gi:null!==e&&h("155");var r=t.type,o=t.pendingProps,a=li(t);return r=r(o,a=ci(t,a)),t.effectTag|=Ai,"object"==typeof r&&null!==r&&"function"==typeof r.render?(t.tag=vi,o=di(t),k(t,r),S(t,n),t=l(e,t,!0,o)):(t.tag=mi,i(e,t,r),t.memoizedProps=o,t=t.child),t;case mi:e:{if(o=t.type,n=t.pendingProps,r=t.memoizedProps,fi())null===n&&(n=r);else if(null===n||r===n){t=d(e,t);break e}r=li(t),o=o(n,r=ci(t,r)),t.effectTag|=Ai,i(e,t,o),t.memoizedProps=n,t=t.child}return t;case vi:return o=di(t),r=void 0,null===e?t.stateNode?h("153"):(E(t,t.pendingProps),S(t,n),r=!0):r=x(e,t,n),l(e,t,r,o);case yi:return f(t),null!==(r=t.updateQueue)?(o=t.memoizedState)===(r=ui(e,t,r,null,o,null,n))?(w(),t=d(e,t)):(o=r.element,null!==e&&null!==e.child||!_(t)?(w(),i(e,t,o)):(t.effectTag|=Pi,t.child=oi(t,t.child,o,n)),t.memoizedState=r,t=t.child):(w(),t=d(e,t)),t;case bi:y(t),null===e&&C(t),o=t.type;var u=t.memoizedProps;return null===(r=t.pendingProps)&&(null===(r=u)&&h("154")),a=null!==e?e.memoizedProps:null,fi()||null!==r&&u!==r?(u=r.children,g(o,r)?u=null:a&&g(o,a)&&(t.effectTag|=Oi),s(e,t),n!==Ti&&!m&&v(o,r)?(t.pendingWorkPriority=Ti,t=null):(i(e,t,u),t.memoizedProps=r,t=t.child)):t=d(e,t),t;case _i:return null===e&&C(t),null===(e=t.pendingProps)&&(e=t.memoizedProps),t.memoizedProps=e,null;case ki:t.tag=Ci;case Ci:return n=t.pendingProps,fi()?null===n&&(null===(n=e&&e.memoizedProps)&&h("154")):null!==n&&t.memoizedProps!==n||(n=t.memoizedProps),o=n.children,r=t.pendingWorkPriority,t.stateNode=null===e?oi(t,t.stateNode,o,r):e.child===t.child?ii(t,t.stateNode,o,r):ai(t,t.stateNode,o,r),t.memoizedProps=n,t.stateNode;case Ei:return null;case wi:e:{if(b(t,t.stateNode.containerInfo),n=t.pendingWorkPriority,o=t.pendingProps,fi())null===o&&(null==(o=e&&e.memoizedProps)&&h("154"));else if(null===o||t.memoizedProps===o){t=d(e,t);break e}null===e?t.child=ai(t,t.child,o,n):i(e,t,o),t.memoizedProps=o,t=t.child}return t;case Si:e:{if(n=t.pendingProps,fi())null===n&&(n=t.memoizedProps);else if(null===n||t.memoizedProps===n){t=d(e,t);break e}i(e,t,n),t.memoizedProps=n,t=t.child}return t;default:h("156")}},beginFailedWork:function(e,t,n){switch(t.tag){case vi:di(t);break;case yi:f(t);break;default:h("157")}return t.effectTag|=Ri,null===e?t.child=null:t.child!==e.child&&(t.child=e.child),t.pendingWorkPriority===xi||t.pendingWorkPriority>n?p(0,t):(t.firstEffect=null,t.lastEffect=null,a(e,t,null,n),t.tag===vi&&(e=t.stateNode,t.memoizedProps=e.props,t.memoizedState=e.state),t.child)}}}var Ui=zo.reconcileChildFibers,Mi=Pr,Di=Or,Ni=P,ji=O,Fi=R,Hi=I,Ki=B,Wi=U,qi=L,zi=M,Gi=D,Vi=N,$i=j,Yi=le,Xi=ve,Qi=fe,Ji=Nn;var Zi=null,ea=null;function ta(e){return function(t){try{return e(t)}catch(e){}}}var na=function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t.supportsFiber)return!0;try{var n=t.inject(e);Zi=ta(function(e){return t.onCommitFiberRoot(n,e)}),ea=ta(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0},ra=R,oa=I,ia=B,aa=U,sa=L,ua=M,ca=or,la=function(e){"function"==typeof ea&&ea(e)},fa=le,da=fe,ha=ge,pa=pe;var ga=sr,ma=ur,va=cr,ya={};var ba=B,_a=U,wa=I,Ca=he,ka=le,Ea=oo;var Sa=Pr,xa=lr,Ta=ae.ReactCurrentOwner,Aa=eo,Pa=uo,Oa=function(e){"function"==typeof Zi&&Zi(e)},Ra=Ln,Ia=Bn,La=Un,Ba=Mn,Ua=Dn,Ma=Nn,Da=Dr,Na=ce,ja=le,Fa=fe,Ha=de,Ka=he,Wa=pe,qa=ge,za=me,Ga=ve,Va=I,$a=B,Ya=L,Xa=R,Qa=tr,Ja=Ur;function Za(e){function t(){for(;null!==z&&z.current.pendingWorkPriority===Ra;){z.isScheduled=!1;var e=z.nextScheduledRoot;if(z.nextScheduledRoot=null,z===G)return G=z=null,K=Ra,null;z=e}e=z;for(var t=null,n=Ra;null!==e;)e.current.pendingWorkPriority!==Ra&&(n===Ra||n>e.current.pendingWorkPriority)&&(n=e.current.pendingWorkPriority,t=e),e=e.nextScheduledRoot;null!==t?(K=n,xa(),Ja(),w(),H=Aa(t.current,n),t!==re&&(ne=0,re=t)):(K=Ra,re=H=null)}function n(n){Z=!0,q=null;var r=n.stateNode;if(r.current===n&&h("177"),K!==Ia&&K!==La||ne++,Ta.current=null,n.effectTag>Na)if(null!==n.lastEffect){n.lastEffect.nextEffect=n;var o=n.firstEffect}else o=n;else o=n.firstEffect;for(B(),W=o;null!==W;){var i=!1,a=void 0;try{for(;null!==W;){var s=W.effectTag;if(s&Wa&&e.resetTextContent(W.stateNode),s&Ga){var u=W.alternate;null!==u&&R(u)}switch(s&~(qa|za|Wa|Ga|Na)){case ja:x(W),W.effectTag&=~ja;break;case Ha:x(W),W.effectTag&=~ja,A(W.alternate,W);break;case Fa:A(W.alternate,W);break;case Ka:ee=!0,T(W),ee=!1}W=W.nextEffect}}catch(e){i=!0,a=e}i&&(null===W&&h("178"),l(W,a),null!==W&&(W=W.nextEffect))}for(U(),r.current=n,W=o;null!==W;){r=!1,o=void 0;try{for(;null!==W;){var c=W.effectTag;if(c&(Fa|qa)&&P(W.alternate,W),c&Ga&&O(W),c&za)switch(i=W,a=void 0,null!==$&&(a=$.get(i),$.delete(i),null==a&&null!==i.alternate&&(i=i.alternate,a=$.get(i),$.delete(i))),null==a&&h("184"),i.tag){case Xa:i.stateNode.componentDidCatch(a.error,{componentStack:a.componentStack});break;case Va:null===Q&&(Q=a.error);break;default:h("157")}var f=W.nextEffect;W.nextEffect=null,W=f}}catch(e){r=!0,o=e}r&&(null===W&&h("178"),l(W,o),null!==W&&(W=W.nextEffect))}Z=!1,"function"==typeof Oa&&Oa(n.stateNode),X&&(X.forEach(m),X=null),t()}function r(e){for(;;){var t=S(e.alternate,e,K),n=e.return,r=e.sibling,o=e;if(!(o.pendingWorkPriority!==Ra&&o.pendingWorkPriority>K)){for(var i=Qa(o),a=o.child;null!==a;)i=Pa(i,a.pendingWorkPriority),a=a.sibling;o.pendingWorkPriority=i}if(null!==t)return t;if(null!==n&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),e.effectTag>Na&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){q=e;break}e=n}return null}function o(e){var t=k(e.alternate,e,K);return null===t&&(t=r(e)),Ta.current=null,t}function i(e){var t=E(e.alternate,e,K);return null===t&&(t=r(e)),Ta.current=null,t}function a(e){c(Ma,e)}function s(){if(null!==$&&0<$.size&&K===La)for(;null!==H;){var e=H;if(null===(H=null!==$&&($.has(e)||null!==e.alternate&&$.has(e.alternate))?i(H):o(H))&&(null===q&&h("179"),M=La,n(q),M=K,null===$||0===$.size||K!==La))break}}function u(e,r){if(null!==q?(M=La,n(q),s()):null===H&&t(),!(K===Ra||K>e)){M=K;e:for(;;){if(K<=La)for(;null!==H&&!(null===(H=o(H))&&(null===q&&h("179"),M=La,n(q),M=K,s(),K===Ra||K>e||K>La)););else if(null!==r)for(;null!==H&&!N;)if(1<r.timeRemaining()){if(null===(H=o(H)))if(null===q&&h("179"),1<r.timeRemaining()){if(M=La,n(q),M=K,s(),K===Ra||K>e||K<Ba)break}else N=!0}else N=!0;switch(K){case Ia:case La:if(K<=e)continue e;break e;case Ba:case Ua:case Ma:if(null===r)break e;if(!N&&K<=e)continue e;break e;case Ra:break e;default:h("181")}}}}function c(e,t){D&&h("182"),D=!0;var n=M,r=!1,o=null;try{u(e,t)}catch(e){r=!0,o=e}for(;r;){if(J){Q=o;break}var s=H;if(null===s)J=!0;else{var c=l(s,o);if(null===c&&h("183"),!J){try{r=c,o=e,c=t;for(var f=r;null!==s;){switch(s.tag){case Xa:Sa(s);break;case $a:_(s);break;case Va:b(s);break;case Ya:b(s)}if(s===f||s.alternate===f)break;s=s.return}H=i(r),u(o,c)}catch(e){r=!0,o=e;continue}break}}}if(M=n,null!==t&&(V=!1),K>La&&!V&&(I(a),V=!0),e=Q,J=N=D=!1,re=Y=$=Q=null,ne=0,null!==e)throw e}function l(e,t){var n=Ta.current=null,r=!1,o=!1,i=null;if(e.tag===Va)n=e,f(e)&&(J=!0);else for(var a=e.return;null!==a&&null===n;){if(a.tag===Xa?"function"==typeof a.stateNode.componentDidCatch&&(r=!0,i=se(a),n=a,o=!0):a.tag===Va&&(n=a),f(a)){if(ee||null!==X&&(X.has(a)||null!==a.alternate&&X.has(a.alternate)))return null;n=null,o=!1}a=a.return}if(null!==n){null===Y&&(Y=new Set),Y.add(n);var s="";a=e;do{e:switch(a.tag){case lo:case fo:case ho:case po:var u=a._debugOwner,c=a._debugSource,l=se(a),d=null;u&&(d=se(u)),l="\n    in "+(l||"Unknown")+((u=c)?" (at "+u.fileName.replace(/^.*[\\\/]/,"")+":"+u.lineNumber+")":d?" (created by "+d+")":"");break e;default:l=""}s+=l,a=a.return}while(a);a=s,e=se(e),null===$&&($=new Map),t={componentName:e,componentStack:a,error:t,errorBoundary:r?n.stateNode:null,errorBoundaryFound:r,errorBoundaryName:i,willRetry:o},$.set(n,t);try{console.error(t.error)}catch(e){console.error(e)}return Z?(null===X&&(X=new Set),X.add(n)):m(n),n}return null===Q&&(Q=t),null}function f(e){return null!==Y&&(Y.has(e)||null!==e.alternate&&Y.has(e.alternate))}function d(e,t){return p(e,t)}function p(e,t){ne>te&&(J=!0,h("185")),!D&&t<=K&&(H=null);for(var n=!0;null!==e&&n;){if(n=!1,(e.pendingWorkPriority===Ra||e.pendingWorkPriority>t)&&(n=!0,e.pendingWorkPriority=t),null!==e.alternate&&(e.alternate.pendingWorkPriority===Ra||e.alternate.pendingWorkPriority>t)&&(n=!0,e.alternate.pendingWorkPriority=t),null===e.return){if(e.tag!==Va)break;var r=e.stateNode;if(t===Ra||r.isScheduled||(r.isScheduled=!0,G?G.nextScheduledRoot=r:z=r,G=r),!D)switch(t){case Ia:c(F?Ia:La,null);break;case La:j||h("186");break;default:V||(I(a),V=!0)}}e=e.return}}function g(e,t){var n=M;return n===Ra&&(n=!L||e.internalContextTag&Da||t?Ua:Ia),n===Ia&&(D||j)?La:n}function m(e){p(e,La)}var v=function(e){function t(e){return e===ya&&h("174"),e}var n=e.getChildHostContext,r=e.getRootHostContext,o=ga(ya),i=ga(ya),a=ga(ya);return{getHostContext:function(){return t(o.current)},getRootHostContainer:function(){return t(a.current)},popHostContainer:function(e){ma(o,e),ma(i,e),ma(a,e)},popHostContext:function(e){i.current===e&&(ma(o,e),ma(i,e))},pushHostContainer:function(e,t){va(a,t,e),t=r(t),va(i,e,e),va(o,t,e)},pushHostContext:function(e){var r=t(a.current),s=t(o.current);s!==(r=n(s,e.type,r))&&(va(i,e,e),va(o,r,e))},resetHostContainer:function(){o.current=ya,a.current=ya}}}(e),y=function(e){function t(e,t){var n=Ea();n.stateNode=t,n.return=e,n.effectTag=Ca,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function n(e,t){switch(e.tag){case ba:return i(t,e.type,e.pendingProps);case _a:return a(t,e.pendingProps);default:return!1}}function r(e){for(e=e.return;null!==e&&e.tag!==ba&&e.tag!==wa;)e=e.return;p=e}var o=e.shouldSetTextContent,i=e.canHydrateInstance,a=e.canHydrateTextInstance,s=e.getNextHydratableSibling,u=e.getFirstHydratableChild,c=e.hydrateInstance,l=e.hydrateTextInstance,f=e.didNotHydrateInstance,d=e.didNotFindHydratableInstance;if(e=e.didNotFindHydratableTextInstance,!(i&&a&&s&&u&&c&&l&&f&&d&&e))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){h("175")},prepareToHydrateHostTextInstance:function(){h("176")},popHydrationState:function(){return!1}};var p=null,g=null,m=!1;return{enterHydrationState:function(e){return g=u(e.stateNode.containerInfo),p=e,m=!0},resetHydrationState:function(){g=p=null,m=!1},tryToClaimNextHydratableInstance:function(e){if(m){var r=g;if(r){if(!n(e,r)){if(!(r=s(r))||!n(e,r))return e.effectTag|=ka,m=!1,void(p=e);t(p,g)}e.stateNode=r,p=e,g=u(r)}else e.effectTag|=ka,m=!1,p=e}},prepareToHydrateHostInstance:function(e,t,n){return t=c(e.stateNode,e.type,e.memoizedProps,t,n,e),e.updateQueue=t,null!==t},prepareToHydrateHostTextInstance:function(e){return l(e.stateNode,e.memoizedProps,e)},popHydrationState:function(e){if(e!==p)return!1;if(!m)return r(e),m=!0,!1;var n=e.type;if(e.tag!==ba||"head"!==n&&"body"!==n&&!o(n,e.memoizedProps))for(n=g;n;)t(e,n),n=s(n);return r(e),g=p?s(e.stateNode):null,!0}}}(e),b=v.popHostContainer,_=v.popHostContext,w=v.resetHostContainer,C=Bi(e,v,y,d,g),k=C.beginWork,E=C.beginFailedWork,S=function(e,t,n){var r=e.createInstance,o=e.createTextInstance,i=e.appendInitialChild,a=e.finalizeInitialChildren,s=e.prepareUpdate,u=t.getRootHostContainer,c=t.popHostContext,l=t.getHostContext,f=t.popHostContainer,d=n.prepareToHydrateHostInstance,p=n.prepareToHydrateHostTextInstance,g=n.popHydrationState;return{completeWork:function(e,t,n){var m=t.pendingProps;switch(null===m?m=t.memoizedProps:t.pendingWorkPriority===Ji&&n!==Ji||(t.pendingProps=null),t.tag){case ji:return null;case Fi:return Mi(t),null;case Hi:return f(t),Di(t),(m=t.stateNode).pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),null!==e&&null!==e.child||(g(t),t.effectTag&=~Yi),null;case Ki:c(t),n=u();var v=t.type;if(null!==e&&null!=t.stateNode){var y=e.memoizedProps,b=t.stateNode,_=l();m=s(b,v,y,m,n,_),(t.updateQueue=m)&&(t.effectTag|=Qi),e.ref!==t.ref&&(t.effectTag|=Xi)}else{if(!m)return null===t.stateNode&&h("166"),null;if(e=l(),g(t))d(t,n,e)&&(t.effectTag|=Qi);else{e=r(v,m,n,e,t);e:for(y=t.child;null!==y;){if(y.tag===Ki||y.tag===Wi)i(e,y.stateNode);else if(y.tag!==qi&&null!==y.child){y=y.child;continue}if(y===t)break e;for(;null===y.sibling;){if(null===y.return||y.return===t)break e;y=y.return}y=y.sibling}a(e,v,m,n)&&(t.effectTag|=Qi),t.stateNode=e}null!==t.ref&&(t.effectTag|=Xi)}return null;case Wi:if(e&&null!=t.stateNode)e.memoizedProps!==m&&(t.effectTag|=Qi);else{if("string"!=typeof m)return null===t.stateNode&&h("166"),null;e=u(),n=l(),g(t)?p(t)&&(t.effectTag|=Qi):t.stateNode=o(m,e,n,t)}return null;case zi:(m=t.memoizedProps)||h("165"),t.tag=Gi,n=[];e:for((v=t.stateNode)&&(v.return=t);null!==v;){if(v.tag===Ki||v.tag===Wi||v.tag===qi)h("164");else if(v.tag===Vi)n.push(v.type);else if(null!==v.child){v.child.return=v,v=v.child;continue}for(;null===v.sibling;){if(null===v.return||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}return m=(v=m.handler)(m.props,n),t.child=Ui(t,null!==e?e.child:null,m,t.pendingWorkPriority),t.child;case Gi:return t.tag=zi,null;case Vi:case $i:return null;case qi:return t.effectTag|=Qi,f(t),null;case Ni:h("167");default:h("156")}}}}(e,v,y).completeWork,x=(v=function(e,t){function n(e){var n=e.ref;if(null!==n)try{n(null)}catch(n){t(e,n)}}function r(e){return e.tag===ia||e.tag===oa||e.tag===sa}function o(e){for(var t=e;;)if(a(t),null!==t.child&&t.tag!==sa)t.child.return=t,t=t.child;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function i(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&h("160"),n.tag){case ia:r=n.stateNode,i=!1;break e;case oa:case sa:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(t.tag===ia||t.tag===aa)o(t),i?v(r,t.stateNode):m(r,t.stateNode);else if(t.tag===sa?r=t.stateNode.containerInfo:a(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;(t=t.return).tag===sa&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function a(e){switch("function"==typeof la&&la(e),e.tag){case ra:n(e);var r=e.stateNode;if("function"==typeof r.componentWillUnmount)try{r.props=e.memoizedProps,r.state=e.memoizedState,r.componentWillUnmount()}catch(n){t(e,n)}break;case ia:n(e);break;case ua:o(e.stateNode);break;case sa:i(e)}}var s=e.commitMount,u=e.commitUpdate,c=e.resetTextContent,l=e.commitTextUpdate,f=e.appendChild,d=e.appendChildToContainer,p=e.insertBefore,g=e.insertInContainerBefore,m=e.removeChild,v=e.removeChildFromContainer,y=e.getPublicInstance;return{commitPlacement:function(e){e:{for(var t=e.return;null!==t;){if(r(t)){var n=t;break e}t=t.return}h("160"),n=void 0}var o=t=void 0;switch(n.tag){case ia:t=n.stateNode,o=!1;break;case oa:case sa:t=n.stateNode.containerInfo,o=!0;break;default:h("161")}n.effectTag&pa&&(c(t),n.effectTag&=~pa);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||r(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==ia&&n.tag!==aa;){if(n.effectTag&fa)continue t;if(null===n.child||n.tag===sa)continue t;n.child.return=n,n=n.child}if(!(n.effectTag&fa)){n=n.stateNode;break e}}for(var i=e;;){if(i.tag===ia||i.tag===aa)n?o?g(t,i.stateNode,n):p(t,i.stateNode,n):o?d(t,i.stateNode):f(t,i.stateNode);else if(i.tag!==sa&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},commitDeletion:function(e){i(e),e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)},commitWork:function(e,t){switch(t.tag){case ra:break;case ia:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var o=t.type,i=t.updateQueue;t.updateQueue=null,null!==i&&u(n,i,o,e,r,t)}break;case aa:null===t.stateNode&&h("162"),n=t.memoizedProps,l(t.stateNode,null!==e?e.memoizedProps:n,n);break;case oa:case sa:break;default:h("163")}},commitLifeCycles:function(e,t){switch(t.tag){case ra:var n=t.stateNode;if(t.effectTag&da)if(null===e)n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidMount();else{var r=e.memoizedProps;e=e.memoizedState,n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidUpdate(r,e)}t.effectTag&ha&&null!==t.updateQueue&&ca(t,t.updateQueue,n);break;case oa:null!==(e=t.updateQueue)&&ca(t,e,t.child&&t.child.stateNode);break;case ia:n=t.stateNode,null===e&&t.effectTag&da&&s(n,t.type,t.memoizedProps,t);break;case aa:case sa:break;default:h("163")}},commitAttachRef:function(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case ia:t(y(n));break;default:t(n)}}},commitDetachRef:function(e){null!==(e=e.ref)&&e(null)}}}(e,l)).commitPlacement,T=v.commitDeletion,A=v.commitWork,P=v.commitLifeCycles,O=v.commitAttachRef,R=v.commitDetachRef,I=e.scheduleDeferredCallback,L=e.useSyncScheduling,B=e.prepareForCommit,U=e.resetAfterCommit,M=Ra,D=!1,N=!1,j=!1,F=!1,H=null,K=Ra,W=null,q=null,z=null,G=null,V=!1,$=null,Y=null,X=null,Q=null,J=!1,Z=!1,ee=!1,te=1e3,ne=0,re=null;return{scheduleUpdate:d,getPriorityContext:g,batchedUpdates:function(e,t){var n=j;j=!0;try{return e(t)}finally{j=n,D||j||c(La,null)}},unbatchedUpdates:function(e){var t=F,n=j;F=j,j=!1;try{return e()}finally{j=n,F=t}},flushSync:function(e){var t=j,n=M;j=!0,M=Ia;try{return e()}finally{j=t,M=n,D&&h("187"),c(La,null)}},deferredUpdates:function(e){var t=M;M=Ua;try{return e()}finally{M=t}}}}function es(){h("196")}function ts(e){return e?"number"==typeof(e=ie.get(e)).tag?es(e):e._processChildContext(e._context):u}ts._injectFiber=function(e){es=e};var ns=nr,rs=Mr,os=Ar,is=Ir,as=B,ss=Pe,us=Oe;ts._injectFiber(function(e){var t=rs(e);return os(e)?is(e,t,!1):t});var cs=H;function ls(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fs(e,t){var n,r=ls(e);for(e=0;r;){if(r.nodeType===cs){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ls(r)}}var ds=null;function hs(){return!ds&&o.canUseDOM&&(ds="textContent"in document.documentElement?"textContent":"innerText"),ds}var ps=function(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,r=t.anchorOffset,o=t.focusNode,i=t.focusOffset,a=t.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(e){return null}t=t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset?0:a.toString().length;var s=a.cloneRange();return s.selectNodeContents(e),s.setEnd(a.startContainer,a.startOffset),a=(e=s.startContainer===s.endContainer&&s.startOffset===s.endOffset?0:s.toString().length)+t,(t=document.createRange()).setStart(n,r),t.setEnd(o,i),{start:(n=t.collapsed)?a:e,end:n?e:a}},gs=function(e,t){if(window.getSelection){var n=window.getSelection(),r=e[hs()].length,o=Math.min(t.start,r);if(t=void 0===t.end?o:Math.min(t.end,r),!n.extend&&o>t&&(r=t,t=o,o=r),r=fs(e,o),e=fs(e,t),r&&e){var i=document.createRange();i.setStart(r.node,r.offset),n.removeAllRanges(),o>t?(n.addRange(i),n.extend(e.node,e.offset)):(i.setEnd(e.node,e.offset),n.addRange(i))}}},ms=F,vs={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=d();return{focusedElem:e,selectionRange:vs.hasSelectionCapabilities(e)?vs.getSelection(e):null}},restoreSelection:function(e){var t=d(),n=e.focusedElem;if(e=e.selectionRange,t!==n&&l(document.documentElement,n)){for(vs.hasSelectionCapabilities(n)&&vs.setSelection(n,e),t=[],e=n;e=e.parentNode;)e.nodeType===ms&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(f(n),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}},getSelection:function(e){return("selectionStart"in e?{start:e.selectionStart,end:e.selectionEnd}:ps(e))||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;void 0===r&&(r=n),"selectionStart"in e?(e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length)):gs(e,t)}},ys=vs,bs=F;function _s(){h("211")}function ws(){h("212")}function Cs(e){if(null==e)return null;if(e.nodeType===bs)return e;var t=ie.get(e);if(t)return"number"==typeof t.tag?_s(t):ws(t);"function"==typeof e.render?h("188"):h("213",Object.keys(e))}Cs._injectFiber=function(e){_s=e},Cs._injectStack=function(e){ws=e};var ks=B;function Es(e){if(void 0!==e._hostParent)return e._hostParent;if("number"==typeof e.tag){do{e=e.return}while(e&&e.tag!==ks);if(e)return e}return null}function Ss(e,t){for(var n=0,r=e;r;r=Es(r))n++;r=0;for(var o=t;o;o=Es(o))r++;for(;0<n-r;)e=Es(e),n--;for(;0<r-n;)t=Es(t),r--;for(;n--;){if(e===t||e===t.alternate)return e;e=Es(e),t=Es(t)}return null}var xs={isAncestor:function(e,t){for(;t;){if(e===t||e===t.alternate)return!0;t=Es(t)}return!1},getLowestCommonAncestor:Ss,getParentInstance:function(e){return Es(e)},traverseTwoPhase:function(e,t,n){for(var r=[];e;)r.push(e),e=Es(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)},traverseEnterLeave:function(e,t,n,r,o){for(var i=e&&t?Ss(e,t):null,a=[];e&&e!==i;)a.push(e),e=Es(e);for(e=[];t&&t!==i;)e.push(t),t=Es(t);for(t=0;t<a.length;t++)n(a[t],"bubbled",r);for(t=e.length;0<t--;)n(e[t],"captured",o)}},Ts=ct.getListener;function As(e,t,n){(t=Ts(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=tt(n._dispatchListeners,t),n._dispatchInstances=tt(n._dispatchInstances,e))}function Ps(e){e&&e.dispatchConfig.phasedRegistrationNames&&xs.traverseTwoPhase(e._targetInst,As,e)}function Os(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;t=t?xs.getParentInstance(t):null,xs.traverseTwoPhase(t,As,e)}}function Rs(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Ts(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=tt(n._dispatchListeners,t),n._dispatchInstances=tt(n._dispatchInstances,e))}function Is(e){e&&e.dispatchConfig.registrationName&&Rs(e._targetInst,null,e)}var Ls={accumulateTwoPhaseDispatches:function(e){nt(e,Ps)},accumulateTwoPhaseDispatchesSkipTarget:function(e){nt(e,Os)},accumulateDirectDispatches:function(e){nt(e,Is)},accumulateEnterLeaveDispatches:function(e,t,n,r){xs.traverseEnterLeave(n,r,Rs,e,t)}},Bs={_root:null,_startText:null,_fallbackText:null},Us={initialize:function(e){return Bs._root=e,Bs._startText=Us.getText(),!0},reset:function(){Bs._root=null,Bs._startText=null,Bs._fallbackText=null},getData:function(){if(Bs._fallbackText)return Bs._fallbackText;var e,t,n=Bs._startText,r=n.length,o=Us.getText(),i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Bs._fallbackText=o.slice(e,1<t?1-t:void 0),Bs._fallbackText},getText:function(){return"value"in Bs._root?Bs._root.value:Bs._root[hs()]}},Ms=Us,Ds="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),Ns={type:null,target:null,currentTarget:s.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function js(e,t,n,r){for(var o in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(o)&&((t=e[o])?this[o]=t(n):"target"===o?this.target=r:this[o]=n[o]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?s.thatReturnsTrue:s.thatReturnsFalse,this.isPropagationStopped=s.thatReturnsFalse,this}function Fs(e,t,n,r){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,n,r),o}return new this(e,t,n,r)}function Hs(e){e instanceof this||h("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Ks(e){e.eventPool=[],e.getPooled=Fs,e.release=Hs}function Ws(e,t,n,r){return js.call(this,e,t,n,r)}function qs(e,t,n,r){return js.call(this,e,t,n,r)}i(js.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=s.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=s.thatReturnsTrue)},persist:function(){this.isPersistent=s.thatReturnsTrue},isPersistent:s.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<Ds.length;t++)this[Ds[t]]=null}}),js.Interface=Ns,js.augmentClass=function(e,t){function n(){}n.prototype=this.prototype;var r=new n;i(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=i({},this.Interface,t),e.augmentClass=this.augmentClass,Ks(e)},Ks(js),js.augmentClass(Ws,{data:null}),js.augmentClass(qs,{data:null});var zs,Gs=[9,13,27,32],Vs=o.canUseDOM&&"CompositionEvent"in window,$s=null;if(o.canUseDOM&&"documentMode"in document&&($s=document.documentMode),zs=o.canUseDOM&&"TextEvent"in window&&!$s){var Ys=window.opera;zs=!("object"==typeof Ys&&"function"==typeof Ys.version&&12>=parseInt(Ys.version(),10))}var Xs=zs,Qs=o.canUseDOM&&(!Vs||$s&&8<$s&&11>=$s),Js=String.fromCharCode(32),Zs={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},eu=!1;function tu(e,t){switch(e){case"topKeyUp":return-1!==Gs.indexOf(t.keyCode);case"topKeyDown":return 229!==t.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function nu(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var ru=!1;var ou={eventTypes:Zs,extractEvents:function(e,t,n,r){var o;if(Vs)e:{switch(e){case"topCompositionStart":var i=Zs.compositionStart;break e;case"topCompositionEnd":i=Zs.compositionEnd;break e;case"topCompositionUpdate":i=Zs.compositionUpdate;break e}i=void 0}else ru?tu(e,n)&&(i=Zs.compositionEnd):"topKeyDown"===e&&229===n.keyCode&&(i=Zs.compositionStart);return i?(Qs&&(ru||i!==Zs.compositionStart?i===Zs.compositionEnd&&ru&&(o=Ms.getData()):ru=Ms.initialize(r)),i=Ws.getPooled(i,t,n,r),o?i.data=o:null!==(o=nu(n))&&(i.data=o),Ls.accumulateTwoPhaseDispatches(i),o=i):o=null,(e=Xs?function(e,t){switch(e){case"topCompositionEnd":return nu(t);case"topKeyPress":return 32!==t.which?null:(eu=!0,Js);case"topTextInput":return(e=t.data)===Js&&eu?null:e;default:return null}}(e,n):function(e,t){if(ru)return"topCompositionEnd"===e||!Vs&&tu(e,t)?(e=Ms.getData(),Ms.reset(),ru=!1,e):null;switch(e){case"topPaste":return null;case"topKeyPress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return Qs?null:t.data;default:return null}}(e,n))?((t=qs.getPooled(Zs.beforeInput,t,n,r)).data=e,Ls.accumulateTwoPhaseDispatches(t)):t=null,[o,t]}},iu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function au(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!iu[e.type]:"textarea"===t}var su={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}};function uu(e,t,n){return(e=js.getPooled(su.change,e,t,n)).type="change",Ke.enqueueStateRestore(n),Ls.accumulateTwoPhaseDispatches(e),e}var cu=null,lu=null;function fu(e){ct.enqueueEvents(e),ct.processEventQueue(!1)}function du(e){var t=oe.getNodeFromInstance(e);if(en.updateValueIfChanged(t))return e}function hu(e,t){if("topChange"===e)return t}var pu=!1;function gu(){cu&&(cu.detachEvent("onpropertychange",mu),lu=cu=null)}function mu(e){"value"===e.propertyName&&du(lu)&&(e=uu(lu,e,Ye(e)),Ve.batchedUpdates(fu,e))}function vu(e,t,n){"topFocus"===e?(gu(),lu=n,(cu=t).attachEvent("onpropertychange",mu)):"topBlur"===e&&gu()}function yu(e){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return du(lu)}function bu(e,t){if("topClick"===e)return du(t)}function _u(e,t){if("topInput"===e||"topChange"===e)return du(t)}o.canUseDOM&&(pu=lt("input")&&(!document.documentMode||9<document.documentMode));var wu={eventTypes:su,_isInputEventSupported:pu,extractEvents:function(e,t,n,r){var o=t?oe.getNodeFromInstance(t):window,i=o.nodeName&&o.nodeName.toLowerCase();if("select"===i||"input"===i&&"file"===o.type)var a=hu;else if(au(o))if(pu)a=_u;else{a=yu;var s=vu}else!(i=o.nodeName)||"input"!==i.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type||(a=bu);if(a&&(a=a(e,t)))return uu(a,n,r);s&&s(e,o,t),"topBlur"===e&&null!=t&&(e=t._wrapperState||o._wrapperState)&&e.controlled&&"number"===o.type&&(e=""+o.value,o.getAttribute("value")!==e&&o.setAttribute("value",e))}};function Cu(e,t,n,r){return js.call(this,e,t,n,r)}js.augmentClass(Cu,{view:function(e){return e.view?e.view:(e=Ye(e)).window===e?e:(e=e.ownerDocument)?e.defaultView||e.parentWindow:window},detail:function(e){return e.detail||0}});var ku={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eu(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=ku[e])&&!!t[e]}function Su(){return Eu}function xu(e,t,n,r){return js.call(this,e,t,n,r)}Cu.augmentClass(xu,{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Su,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}});var Tu={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Au={eventTypes:Tu,extractEvents:function(e,t,n,r){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==e&&"topMouseOver"!==e)return null;var o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window;if("topMouseOut"===e?(e=t,t=(t=n.relatedTarget||n.toElement)?oe.getClosestInstanceFromNode(t):null):e=null,e===t)return null;var i=null==e?o:oe.getNodeFromInstance(e);o=null==t?o:oe.getNodeFromInstance(t);var a=xu.getPooled(Tu.mouseLeave,e,n,r);return a.type="mouseleave",a.target=i,a.relatedTarget=o,(n=xu.getPooled(Tu.mouseEnter,t,n,r)).type="mouseenter",n.target=o,n.relatedTarget=i,Ls.accumulateEnterLeaveDispatches(a,n,e,t),[a,n]}},Pu=W,Ou=o.canUseDOM&&"documentMode"in document&&11>=document.documentMode,Ru={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},Iu=null,Lu=null,Bu=null,Uu=!1,Mu=wt.isListeningToAllDependencies;function Du(e,t){if(Uu||null==Iu||Iu!==d())return null;var n=Iu;return"selectionStart"in n&&ys.hasSelectionCapabilities(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?n={anchorNode:(n=window.getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}:n=void 0,Bu&&c(Bu,n)?null:(Bu=n,(e=js.getPooled(Ru.select,Lu,e,t)).type="select",e.target=Iu,Ls.accumulateTwoPhaseDispatches(e),e)}var Nu={eventTypes:Ru,extractEvents:function(e,t,n,r){var o=r.window===r?r.document:r.nodeType===Pu?r:r.ownerDocument;if(!o||!Mu("onSelect",o))return null;switch(o=t?oe.getNodeFromInstance(t):window,e){case"topFocus":(au(o)||"true"===o.contentEditable)&&(Iu=o,Lu=t,Bu=null);break;case"topBlur":Bu=Lu=Iu=null;break;case"topMouseDown":Uu=!0;break;case"topContextMenu":case"topMouseUp":return Uu=!1,Du(n,r);case"topSelectionChange":if(Ou)break;case"topKeyDown":case"topKeyUp":return Du(n,r)}return null}};function ju(e,t,n,r){return js.call(this,e,t,n,r)}function Fu(e,t,n,r){return js.call(this,e,t,n,r)}function Hu(e,t,n,r){return js.call(this,e,t,n,r)}function Ku(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,32<=e||13===e?e:0}js.augmentClass(ju,{animationName:null,elapsedTime:null,pseudoElement:null}),js.augmentClass(Fu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cu.augmentClass(Hu,{relatedTarget:null});var Wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function zu(e,t,n,r){return js.call(this,e,t,n,r)}function Gu(e,t,n,r){return js.call(this,e,t,n,r)}function Vu(e,t,n,r){return js.call(this,e,t,n,r)}function $u(e,t,n,r){return js.call(this,e,t,n,r)}function Yu(e,t,n,r){return js.call(this,e,t,n,r)}Cu.augmentClass(zu,{key:function(e){if(e.key){var t=Wu[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ku(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?qu[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Su,charCode:function(e){return"keypress"===e.type?Ku(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ku(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xu.augmentClass(Gu,{dataTransfer:null}),Cu.augmentClass(Vu,{touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Su}),js.augmentClass($u,{propertyName:null,elapsedTime:null,pseudoElement:null}),xu.augmentClass(Yu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null});var Xu={},Qu={};"abort animationEnd animationIteration animationStart blur cancel canPlay canPlayThrough click close contextMenu copy cut doubleClick drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error focus input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing progress rateChange reset scroll seeked seeking stalled submit suspend timeUpdate toggle touchCancel touchEnd touchMove touchStart transitionEnd volumeChange waiting wheel".split(" ").forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t;n={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[t="top"+t]},Xu[e]=n,Qu[t]=n});var Ju={eventTypes:Xu,extractEvents:function(e,t,n,r){var o=Qu[e];if(!o)return null;switch(e){case"topAbort":case"topCancel":case"topCanPlay":case"topCanPlayThrough":case"topClose":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topToggle":case"topVolumeChange":case"topWaiting":var i=js;break;case"topKeyPress":if(0===Ku(n))return null;case"topKeyDown":case"topKeyUp":i=zu;break;case"topBlur":case"topFocus":i=Hu;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":i=xu;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":i=Gu;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":i=Vu;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":i=ju;break;case"topTransitionEnd":i=$u;break;case"topScroll":i=Cu;break;case"topWheel":i=Yu;break;case"topCopy":case"topCut":case"topPaste":i=Fu}return i||h("86",e),e=i.getPooled(o,t,n,r),Ls.accumulateTwoPhaseDispatches(e),e}};et.setHandleTopLevel(wt.handleTopLevel),ct.injection.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),De.injection.injectComponentTree(oe),ct.injection.injectEventPluginsByName({SimpleEventPlugin:Ju,EnterLeaveEventPlugin:Au,ChangeEventPlugin:wu,SelectEventPlugin:Nu,BeforeInputEventPlugin:ou});var Zu=A.injection.MUST_USE_PROPERTY,ec=A.injection.HAS_BOOLEAN_VALUE,tc=A.injection.HAS_NUMERIC_VALUE,nc=A.injection.HAS_POSITIVE_NUMERIC_VALUE,rc=A.injection.HAS_STRING_BOOLEAN_VALUE,oc={Properties:{allowFullScreen:ec,allowTransparency:rc,async:ec,autoPlay:ec,capture:ec,checked:Zu|ec,cols:nc,contentEditable:rc,controls:ec,default:ec,defer:ec,disabled:ec,download:A.injection.HAS_OVERLOADED_BOOLEAN_VALUE,draggable:rc,formNoValidate:ec,hidden:ec,loop:ec,multiple:Zu|ec,muted:Zu|ec,noValidate:ec,open:ec,playsInline:ec,readOnly:ec,required:ec,reversed:ec,rows:nc,rowSpan:tc,scoped:ec,seamless:ec,selected:Zu|ec,size:nc,start:tc,span:nc,spellCheck:rc,style:0,itemScope:ec,acceptCharset:0,className:0,htmlFor:0,httpEquiv:0,value:rc},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}},ic=A.injection.HAS_STRING_BOOLEAN_VALUE,ac="http://www.w3.org/1999/xlink",sc="http://www.w3.org/XML/1998/namespace",uc={Properties:{autoReverse:ic,externalResourcesRequired:ic,preserveAlpha:ic},DOMAttributeNames:{autoReverse:"autoReverse",externalResourcesRequired:"externalResourcesRequired",preserveAlpha:"preserveAlpha"},DOMAttributeNamespaces:{xlinkActuate:ac,xlinkArcrole:ac,xlinkHref:ac,xlinkRole:ac,xlinkShow:ac,xlinkTitle:ac,xlinkType:ac,xmlBase:sc,xmlLang:sc,xmlSpace:sc}},cc=/[\-\:]([a-z])/g;function lc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode x-height xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xmlns:xlink xml:lang xml:space".split(" ").forEach(function(e){var t=e.replace(cc,lc);uc.Properties[t]=0,uc.DOMAttributeNames[t]=e}),A.injection.injectDOMPropertyConfig(oc),A.injection.injectDOMPropertyConfig(uc);var fc=na,dc=F,hc=H,pc=K,gc=W,mc=q,vc=A.ROOT_ATTRIBUTE_NAME,yc=v,bc=bn.createElement,_c=bn.createTextNode,wc=bn.setInitialProperties,Cc=bn.diffProperties,kc=bn.updateProperties,Ec=bn.diffHydratedProperties,Sc=bn.diffHydratedText,xc=bn.warnForDeletedHydratableElement,Tc=bn.warnForDeletedHydratableText,Ac=bn.warnForInsertedHydratedElement,Pc=bn.warnForInsertedHydratedText,Oc=oe.precacheFiberNode,Rc=oe.updateFiberProps;Ke.injection.injectFiberControlledHostComponent(bn),Cs._injectFiber(function(e){return Uc.findHostInstance(e)});var Ic=null,Lc=null;function Bc(e){return!(!e||e.nodeType!==dc&&e.nodeType!==gc&&e.nodeType!==mc&&(e.nodeType!==pc||" react-mount-point-unstable "!==e.nodeValue))}var Uc=function(e){var t=e.getPublicInstance,n=(e=Za(e)).scheduleUpdate,r=e.getPriorityContext;return{createContainer:function(e){var t=co();return e={current:t,containerInfo:e,isScheduled:!1,nextScheduledRoot:null,context:null,pendingContext:null},t.stateNode=e},updateContainer:function(e,t,o,i){var a=t.current;o=ts(o),null===t.context?t.context=o:t.pendingContext=o,t=i,i=r(a,In.enableAsyncSubtreeAPI&&null!=e&&null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent),ns(a,e={element:e},void 0===t?null:t,i),n(a,i)},batchedUpdates:e.batchedUpdates,unbatchedUpdates:e.unbatchedUpdates,deferredUpdates:e.deferredUpdates,flushSync:e.flushSync,getPublicRootInstance:function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case as:return t(e.child.stateNode);default:return e.child.stateNode}},findHostInstance:function(e){return null===(e=ss(e))?null:e.stateNode},findHostInstanceWithNoPortals:function(e){return null===(e=us(e))?null:e.stateNode}}}({getRootHostContext:function(e){if(e.nodeType===gc)e=(e=e.documentElement)?e.namespaceURI:yc(null,"");else{var t=e.nodeType===pc?e.parentNode:e;e=t.namespaceURI||null,t=t.tagName,e=yc(e,t)}return e},getChildHostContext:function(e,t){return yc(e,t)},getPublicInstance:function(e){return e},prepareForCommit:function(){Ic=wt.isEnabled(),Lc=ys.getSelectionInformation(),wt.setEnabled(!1)},resetAfterCommit:function(){ys.restoreSelection(Lc),Lc=null,wt.setEnabled(Ic),Ic=null},createInstance:function(e,t,n,r,o){return e=bc(e,t,n,r),Oc(o,e),Rc(e,t),e},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,r){wc(e,t,n,r);e:{switch(t){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e}e=!1}return e},prepareUpdate:function(e,t,n,r,o){return Cc(e,t,n,r,o)},commitMount:function(e){e.focus()},commitUpdate:function(e,t,n,r,o){Rc(e,o),kc(e,t,n,r,o)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"==typeof t.dangerouslySetInnerHTML.__html},resetTextContent:function(e){e.textContent=""},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,r){return e=_c(e,t),Oc(r,e),e},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){e.nodeType===pc?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){e.nodeType===pc?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){e.nodeType===pc?e.parentNode.removeChild(t):e.removeChild(t)},canHydrateInstance:function(e,t){return e.nodeType===dc&&t===e.nodeName.toLowerCase()},canHydrateTextInstance:function(e,t){return""!==t&&e.nodeType===hc},getNextHydratableSibling:function(e){for(e=e.nextSibling;e&&e.nodeType!==dc&&e.nodeType!==hc;)e=e.nextSibling;return e},getFirstHydratableChild:function(e){for(e=e.firstChild;e&&e.nodeType!==dc&&e.nodeType!==hc;)e=e.nextSibling;return e},hydrateInstance:function(e,t,n,r,o,i){return Oc(i,e),Rc(e,n),Ec(e,t,n,o,r)},hydrateTextInstance:function(e,t,n){return Oc(n,e),Sc(e,t)},didNotHydrateInstance:function(e,t){1===t.nodeType?xc(e,t):Tc(e,t)},didNotFindHydratableInstance:function(e,t,n){Ac(e,t,n)},didNotFindHydratableTextInstance:function(e,t){Pc(e,t)},scheduleDeferredCallback:Rn.rIC,useSyncScheduling:!0});function Mc(e,t,n,r,o){Bc(n)||h("200");var i=n._reactRootContainer;if(i)Uc.updateContainer(t,i,e,o);else{if(!r&&!function(e){return!(!(e=e?e.nodeType===gc?e.documentElement:e.firstChild:null)||e.nodeType!==dc||!e.hasAttribute(vc))}(n))for(r=void 0;r=n.lastChild;)n.removeChild(r);var a=Uc.createContainer(n);i=n._reactRootContainer=a,Uc.unbatchedUpdates(function(){Uc.updateContainer(t,a,e,o)})}return Uc.getPublicRootInstance(i)}function Dc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Bc(t)||h("200"),vo.createPortal(e,t,null,n)}Ve.injection.injectFiberBatchedUpdates(Uc.batchedUpdates);var Nc={createPortal:Dc,hydrate:function(e,t,n){return Mc(null,e,t,!0,n)},render:function(e,t,n){return Mc(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return null!=e&&ie.has(e)||h("38"),Mc(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Bc(e)||h("40"),!!e._reactRootContainer&&(Uc.unbatchedUpdates(function(){Mc(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},findDOMNode:Cs,unstable_createPortal:Dc,unstable_batchedUpdates:Ve.batchedUpdates,unstable_deferredUpdates:Uc.deferredUpdates,flushSync:Uc.flushSync,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:ct,EventPluginRegistry:k,EventPropagators:Ls,ReactControlledComponent:Ke,ReactDOMComponentTree:oe,ReactDOMEventListener:et}};fc({findFiberByHostInstance:oe.getClosestInstanceFromNode,findHostInstanceByFiber:Uc.findHostInstance,bundleType:0,version:"16.0.0",rendererPackageName:"react-dom"}),e.exports=Nc},function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=o},function(e,t,n){"use strict";var r=n(15),o={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=o},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function o(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}e.exports=function(e,t){if(o(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!r.call(t,n[a])||!o(e[n[a]],t[n[a]]))return!1;return!0}},function(e,t,n){"use strict";var r=n(66);e.exports=function e(t,n){return!(!t||!n)&&(t===n||!r(t)&&(r(n)?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}},function(e,t,n){"use strict";var r=n(67);e.exports=function(e){return r(e)&&3==e.nodeType}},function(e,t,n){"use strict";e.exports=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}},function(e,t,n){"use strict";e.exports=function(e){try{e.focus()}catch(e){}}},function(e,t,n){"use strict";e.exports=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}},function(e,t,n){"use strict";var r=n(2),o=n.n(r),i=n(0),a=n.n(i),s=n(1),u=n.n(s),c=n(73),l=n.n(c),f=n(23);function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=d(this,e.call.apply(e,[this].concat(i))),r.history=l()(r.props),d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){o()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return a.a.createElement(f.a,{history:this.history,children:this.props.children})},t}(a.a.Component);h.propTypes={basename:u.a.string,forceRefresh:u.a.bool,getUserConfirmation:u.a.func,keyLength:u.a.number,children:u.a.node},t.a=h},function(e,t,n){"use strict";var r=n(15),o=n(20),i=n(72);e.exports=function(){function e(e,t,n,r,a,s){s!==i&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=f(n(2)),a=f(n(4)),s=n(21),u=n(11),c=f(n(22)),l=n(34);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(){try{return window.history.state||{}}catch(e){return{}}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(l.canUseDOM,"Browser history needs a DOM");var t=window.history,n=(0,l.supportsHistory)(),f=!(0,l.supportsPopStateOnHashChange)(),h=e.forceRefresh,p=void 0!==h&&h,g=e.getUserConfirmation,m=void 0===g?l.getConfirmation:g,v=e.keyLength,y=void 0===v?6:v,b=e.basename?(0,u.stripTrailingSlash)((0,u.addLeadingSlash)(e.basename)):"",_=function(e){var t=e||{},n=t.key,r=t.state,o=window.location,a=o.pathname+o.search+o.hash;return(0,i.default)(!b||(0,u.hasBasename)(a,b),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+a+'" to begin with "'+b+'".'),b&&(a=(0,u.stripBasename)(a,b)),(0,s.createLocation)(a,r,n)},w=function(){return Math.random().toString(36).substr(2,y)},C=(0,c.default)(),k=function(e){o(M,e),M.length=t.length,C.notifyListeners(M.location,M.action)},E=function(e){(0,l.isExtraneousPopstateEvent)(e)||T(_(e.state))},S=function(){T(_(d()))},x=!1,T=function(e){x?(x=!1,k()):C.confirmTransitionTo(e,"POP",m,function(t){t?k({action:"POP",location:e}):A(e)})},A=function(e){var t=M.location,n=O.indexOf(t.key);-1===n&&(n=0);var r=O.indexOf(e.key);-1===r&&(r=0);var o=n-r;o&&(x=!0,I(o))},P=_(d()),O=[P.key],R=function(e){return b+(0,u.createPath)(e)},I=function(e){t.go(e)},L=0,B=function(e){1===(L+=e)?((0,l.addEventListener)(window,"popstate",E),f&&(0,l.addEventListener)(window,"hashchange",S)):0===L&&((0,l.removeEventListener)(window,"popstate",E),f&&(0,l.removeEventListener)(window,"hashchange",S))},U=!1,M={length:t.length,action:"POP",location:P,createHref:R,push:function(e,o){(0,i.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==o),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var a=(0,s.createLocation)(e,o,w(),M.location);C.confirmTransitionTo(a,"PUSH",m,function(e){if(e){var r=R(a),o=a.key,s=a.state;if(n)if(t.pushState({key:o,state:s},null,r),p)window.location.href=r;else{var u=O.indexOf(M.location.key),c=O.slice(0,-1===u?0:u+1);c.push(a.key),O=c,k({action:"PUSH",location:a})}else(0,i.default)(void 0===s,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=r}})},replace:function(e,o){(0,i.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==o),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var a=(0,s.createLocation)(e,o,w(),M.location);C.confirmTransitionTo(a,"REPLACE",m,function(e){if(e){var r=R(a),o=a.key,s=a.state;if(n)if(t.replaceState({key:o,state:s},null,r),p)window.location.replace(r);else{var u=O.indexOf(M.location.key);-1!==u&&(O[u]=a.key),k({action:"REPLACE",location:a})}else(0,i.default)(void 0===s,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(r)}})},go:I,goBack:function(){return I(-1)},goForward:function(){return I(1)},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=C.setPrompt(e);return U||(B(1),U=!0),function(){return U&&(U=!1,B(-1)),t()}},listen:function(e){var t=C.appendListener(e);return B(1),function(){B(-1),t()}}};return M}},function(e,t,n){"use strict";var r=n(2),o=n.n(r),i=n(0),a=n.n(i),s=n(1),u=n.n(s),c=n(75),l=n.n(c),f=n(23);function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=d(this,e.call.apply(e,[this].concat(i))),r.history=l()(r.props),d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){o()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return a.a.createElement(f.a,{history:this.history,children:this.props.children})},t}(a.a.Component);h.propTypes={basename:u.a.string,getUserConfirmation:u.a.func,hashType:u.a.oneOf(["hashbang","noslash","slash"]),children:u.a.node},t.a=h},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=l(n(2)),i=l(n(4)),a=n(21),s=n(11),u=l(n(22)),c=n(34);function l(e){return e&&e.__esModule?e:{default:e}}var f={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+(0,s.stripLeadingSlash)(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:s.stripLeadingSlash,decodePath:s.addLeadingSlash},slash:{encodePath:s.addLeadingSlash,decodePath:s.addLeadingSlash}},d=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},h=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(c.canUseDOM,"Hash history needs a DOM");var t=window.history,n=(0,c.supportsGoWithoutReloadUsingHash)(),l=e.getUserConfirmation,p=void 0===l?c.getConfirmation:l,g=e.hashType,m=void 0===g?"slash":g,v=e.basename?(0,s.stripTrailingSlash)((0,s.addLeadingSlash)(e.basename)):"",y=f[m],b=y.encodePath,_=y.decodePath,w=function(){var e=_(d());return(0,o.default)(!v||(0,s.hasBasename)(e,v),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+v+'".'),v&&(e=(0,s.stripBasename)(e,v)),(0,a.createLocation)(e)},C=(0,u.default)(),k=function(e){r(D,e),D.length=t.length,C.notifyListeners(D.location,D.action)},E=!1,S=null,x=function(){var e=d(),t=b(e);if(e!==t)h(t);else{var n=w(),r=D.location;if(!E&&(0,a.locationsAreEqual)(r,n))return;if(S===(0,s.createPath)(n))return;S=null,T(n)}},T=function(e){E?(E=!1,k()):C.confirmTransitionTo(e,"POP",p,function(t){t?k({action:"POP",location:e}):A(e)})},A=function(e){var t=D.location,n=I.lastIndexOf((0,s.createPath)(t));-1===n&&(n=0);var r=I.lastIndexOf((0,s.createPath)(e));-1===r&&(r=0);var o=n-r;o&&(E=!0,L(o))},P=d(),O=b(P);P!==O&&h(O);var R=w(),I=[(0,s.createPath)(R)],L=function(e){(0,o.default)(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},B=0,U=function(e){1===(B+=e)?(0,c.addEventListener)(window,"hashchange",x):0===B&&(0,c.removeEventListener)(window,"hashchange",x)},M=!1,D={length:t.length,action:"POP",location:R,createHref:function(e){return"#"+b(v+(0,s.createPath)(e))},push:function(e,t){(0,o.default)(void 0===t,"Hash history cannot push state; it is ignored");var n=(0,a.createLocation)(e,void 0,void 0,D.location);C.confirmTransitionTo(n,"PUSH",p,function(e){if(e){var t=(0,s.createPath)(n),r=b(v+t);if(d()!==r){S=t,function(e){window.location.hash=e}(r);var i=I.lastIndexOf((0,s.createPath)(D.location)),a=I.slice(0,-1===i?0:i+1);a.push(t),I=a,k({action:"PUSH",location:n})}else(0,o.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),k()}})},replace:function(e,t){(0,o.default)(void 0===t,"Hash history cannot replace state; it is ignored");var n=(0,a.createLocation)(e,void 0,void 0,D.location);C.confirmTransitionTo(n,"REPLACE",p,function(e){if(e){var t=(0,s.createPath)(n),r=b(v+t);d()!==r&&(S=t,h(r));var o=I.indexOf((0,s.createPath)(D.location));-1!==o&&(I[o]=t),k({action:"REPLACE",location:n})}})},go:L,goBack:function(){return L(-1)},goForward:function(){return L(1)},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=C.setPrompt(e);return M||(U(1),M=!0),function(){return M&&(M=!1,U(-1)),t()}},listen:function(e){var t=C.appendListener(e);return U(1),function(){U(-1),t()}}};return D}},function(e,t,n){"use strict";var r=n(77);t.a=r.a},function(e,t,n){"use strict";var r=n(2),o=n.n(r),i=n(0),a=n.n(i),s=n(1),u=n.n(s),c=n(78),l=n.n(c),f=n(24);function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=d(this,e.call.apply(e,[this].concat(i))),r.history=l()(r.props),d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){o()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return a.a.createElement(f.a,{history:this.history,children:this.props.children})},t}(a.a.Component);h.propTypes={initialEntries:u.a.array,initialIndex:u.a.number,getUserConfirmation:u.a.func,keyLength:u.a.number,children:u.a.node},t.a=h},function(e,t,n){"use strict";t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=c(n(2)),a=n(11),s=n(21),u=c(n(22));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e,t,n){return Math.min(Math.max(e,t),n)};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getUserConfirmation,n=e.initialEntries,c=void 0===n?["/"]:n,f=e.initialIndex,d=void 0===f?0:f,h=e.keyLength,p=void 0===h?6:h,g=(0,u.default)(),m=function(e){o(C,e),C.length=C.entries.length,g.notifyListeners(C.location,C.action)},v=function(){return Math.random().toString(36).substr(2,p)},y=l(d,0,c.length-1),b=c.map(function(e){return"string"==typeof e?(0,s.createLocation)(e,void 0,v()):(0,s.createLocation)(e,void 0,e.key||v())}),_=a.createPath,w=function(e){var n=l(C.index+e,0,C.entries.length-1),r=C.entries[n];g.confirmTransitionTo(r,"POP",t,function(e){e?m({action:"POP",location:r,index:n}):m()})},C={length:b.length,action:"POP",location:b[y],index:y,entries:b,createHref:_,push:function(e,n){(0,i.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var o=(0,s.createLocation)(e,n,v(),C.location);g.confirmTransitionTo(o,"PUSH",t,function(e){if(e){var t=C.index+1,n=C.entries.slice(0);n.length>t?n.splice(t,n.length-t,o):n.push(o),m({action:"PUSH",location:o,index:t,entries:n})}})},replace:function(e,n){(0,i.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var o=(0,s.createLocation)(e,n,v(),C.location);g.confirmTransitionTo(o,"REPLACE",t,function(e){e&&(C.entries[C.index]=o,m({action:"REPLACE",location:o}))})},go:w,goBack:function(){return w(-1)},goForward:function(){return w(1)},canGo:function(e){var t=C.index+e;return t>=0&&t<C.entries.length},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return g.setPrompt(e)},listen:function(e){return g.appendListener(e)}};return C}},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=n(36),u=n(35),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var f=function(e){var t=e.to,n=e.exact,r=e.strict,i=e.location,a=e.activeClassName,f=e.className,d=e.activeStyle,h=e.style,p=e.isActive,g=e.ariaCurrent,m=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","ariaCurrent"]);return o.a.createElement(s.a,{path:"object"===(void 0===t?"undefined":l(t))?t.pathname:t,exact:n,strict:r,location:i,children:function(e){var n=e.location,r=e.match,i=!!(p?p(r,n):r);return o.a.createElement(u.a,c({to:t,className:i?[f,a].filter(function(e){return e}).join(" "):f,style:i?c({},h,d):h,"aria-current":i&&g},m))}})};f.propTypes={to:u.a.propTypes.to,exact:a.a.bool,strict:a.a.bool,location:a.a.object,activeClassName:a.a.string,className:a.a.string,activeStyle:a.a.object,style:a.a.object,isActive:a.a.func,ariaCurrent:a.a.oneOf(["page","step","location","true"])},f.defaultProps={activeClassName:"active",ariaCurrent:"true"},t.a=f},function(e,t,n){var r=n(81);e.exports=h,e.exports.parse=i,e.exports.compile=function(e,t){return s(i(e,t))},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=d;var o=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function i(e,t){for(var n,r=[],i=0,a=0,s="",l=t&&t.delimiter||"/";null!=(n=o.exec(e));){var f=n[0],d=n[1],h=n.index;if(s+=e.slice(a,h),a=h+f.length,d)s+=d[1];else{var p=e[a],g=n[2],m=n[3],v=n[4],y=n[5],b=n[6],_=n[7];s&&(r.push(s),s="");var w=null!=g&&null!=p&&p!==g,C="+"===b||"*"===b,k="?"===b||"*"===b,E=n[2]||l,S=v||y;r.push({name:m||i++,prefix:g||"",delimiter:E,optional:k,repeat:C,partial:w,asterisk:!!_,pattern:S?c(S):_?".*":"[^"+u(E)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,o){for(var i="",s=n||{},u=(o||{}).pretty?a:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!=typeof l){var f,d=s[l.name];if(null==d){if(l.optional){l.partial&&(i+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(d)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<d.length;h++){if(f=u(d[h]),!t[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");i+=(0===h?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(d).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):u(d),!t[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');i+=l.prefix+f}}else i+=l}return i}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var o=(n=n||{}).strict,i=!1!==n.end,a="",s=0;s<e.length;s++){var c=e[s];if("string"==typeof c)a+=u(c);else{var d=u(c.prefix),h="(?:"+c.pattern+")";t.push(c),c.repeat&&(h+="(?:"+d+h+")*"),a+=h=c.optional?c.partial?d+"("+h+")?":"(?:"+d+"("+h+"))?":d+"("+h+")"}}var p=u(n.delimiter||"/"),g=a.slice(-p.length)===p;return o||(a=(g?a.slice(0,-p.length):a)+"(?:"+p+"(?=$))?"),a+=i?"$":o&&g?"":"(?="+p+"|$)",l(new RegExp("^"+a,f(n)),t)}function h(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],o=0;o<e.length;o++)r.push(h(e[o],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return d(i(e,n),t,n)}(e,t,n)}},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=n(83);t.a=r.a},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=n(4),u=n.n(s);var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){u()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(o.a.Component);c.propTypes={when:a.a.bool,message:a.a.oneOfType([a.a.func,a.a.string]).isRequired},c.defaultProps={when:!0},c.contextTypes={router:a.a.shape({history:a.a.shape({block:a.a.func.isRequired}).isRequired}).isRequired},t.a=c},function(e,t,n){"use strict";var r=n(85);t.a=r.a},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=n(2),u=n.n(s),c=n(4),l=n.n(c),f=n(86);var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){l()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=Object(f.a)(e.to),n=Object(f.a)(this.props.to);Object(f.b)(t,n)?u()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"'):this.perform()},t.prototype.perform=function(){var e=this.context.router.history,t=this.props,n=t.push,r=t.to;n?e.push(r):e.replace(r)},t.prototype.render=function(){return null},t}(o.a.Component);d.propTypes={push:a.a.bool,from:a.a.string,to:a.a.oneOfType([a.a.string,a.a.object]).isRequired},d.defaultProps={push:!1},d.contextTypes={router:a.a.shape({history:a.a.shape({push:a.a.func.isRequired,replace:a.a.func.isRequired}).isRequired,staticContext:a.a.object}).isRequired},t.a=d},function(e,t,n){"use strict";n(87),n(88),n(89);var r=n(16);n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return r.b});n(12)},function(e,t,n){"use strict";var r=n(2),o=(n.n(r),n(4));n.n(o),n(16),n(12),n(26),n(38),"function"==typeof Symbol&&Symbol.iterator,Object.assign},function(e,t,n){"use strict";var r=n(2),o=(n.n(r),n(4)),i=(n.n(o),n(16),n(12));n(26),n(38),Object.assign,i.f,i.a,i.a,i.a},function(e,t,n){"use strict";var r=n(2);n.n(r),n(12),n(16),n(26),"function"==typeof Symbol&&Symbol.iterator,Object.assign},function(e,t,n){"use strict";var r=n(91);t.a=r.a},function(e,t,n){"use strict";var r=n(2),o=n.n(r),i=n(4),a=n.n(i),s=n(0),u=n.n(s),c=n(1),l=n.n(c),f=n(11),d=(n.n(f),n(24)),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e,t){return e?h({},t,{pathname:Object(f.addLeadingSlash)(e)+t.pathname}):t},m=function(e){return"string"==typeof e?Object(f.parsePath)(e):(n=(t=e).pathname,r=void 0===n?"/":n,o=t.search,i=void 0===o?"":o,a=t.hash,{pathname:r,search:"?"===i?"":i,hash:"#"===(s=void 0===a?"":a)?"":s});var t,n,r,o,i,a,s},v=function(e){return"string"==typeof e?e:Object(f.createPath)(e)},y=function(e){return function(){a()(!1,"You cannot %s with <StaticRouter>",e)}},b=function(){},_=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=p(this,e.call.apply(e,[this].concat(i))),r.createHref=function(e){return Object(f.addLeadingSlash)(r.props.basename+v(e))},r.handlePush=function(e){var t=r.props,n=t.basename,o=t.context;o.action="PUSH",o.location=g(n,m(e)),o.url=v(o.location)},r.handleReplace=function(e){var t=r.props,n=t.basename,o=t.context;o.action="REPLACE",o.location=g(n,m(e)),o.url=v(o.location)},r.handleListen=function(){return b},r.handleBlock=function(){return b},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){o()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,n=(e.context,e.location),r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["basename","context","location"]),o={createHref:this.createHref,action:"POP",location:function(e,t){if(!e)return t;var n=Object(f.addLeadingSlash)(e);return 0!==t.pathname.indexOf(n)?t:h({},t,{pathname:t.pathname.substr(n.length)})}(t,m(n)),push:this.handlePush,replace:this.handleReplace,go:y("go"),goBack:y("goBack"),goForward:y("goForward"),listen:this.handleListen,block:this.handleBlock};return u.a.createElement(d.a,h({},r,{history:o}))},t}(u.a.Component);_.propTypes={basename:l.a.string,context:l.a.object.isRequired,location:l.a.oneOfType([l.a.string,l.a.object])},_.defaultProps={basename:"",location:"/"},_.childContextTypes={router:l.a.object.isRequired},t.a=_},function(e,t,n){"use strict";var r=n(93);t.a=r.a},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=n(2),u=n.n(s),c=n(4),l=n.n(c),f=n(25);var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){l()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){u()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),u()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,r=void 0,i=void 0;return o.a.Children.forEach(t,function(t){if(o.a.isValidElement(t)){var a=t.props,s=a.path,u=a.exact,c=a.strict,l=a.sensitive,d=a.from,h=s||d;null==r&&(i=t,r=h?Object(f.a)(n.pathname,{path:h,exact:u,strict:c,sensitive:l}):e.match)}}),r?o.a.cloneElement(i,{location:n,computedMatch:r}):null},t}(o.a.Component);d.contextTypes={router:a.a.shape({route:a.a.object.isRequired}).isRequired},d.propTypes={children:a.a.node,location:a.a.object},t.a=d},function(e,t,n){"use strict";var r=n(25);t.a=r.a},function(e,t,n){"use strict";var r=n(96);t.a=r.a},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=n(97),u=n.n(s),c=n(37),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.a=function(e){var t=function(t){var n=t.wrappedComponentRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["wrappedComponentRef"]);return o.a.createElement(c.a,{render:function(t){return o.a.createElement(e,l({},r,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:a.a.func},u()(t,e)}},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i=Object.defineProperty,a=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,c=Object.getPrototypeOf,l=c&&c(Object);e.exports=function e(t,n,f){if("string"!=typeof n){if(l){var d=c(n);d&&d!==l&&e(t,d,f)}var h=a(n);s&&(h=h.concat(s(n)));for(var p=0;p<h.length;++p){var g=h[p];if(!(r[g]||o[g]||f&&f[g])){var m=u(n,g);try{i(t,g,m)}catch(e){}}}return t}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(0)),o=n(3),i=n(39),a=d(n(101)),s=d(n(106)),u=d(n(107)),c=d(n(108)),l=d(n(141)),f=d(n(142));function d(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return r.default.createElement("div",null,r.default.createElement(a.default,null),r.default.createElement(i.Video,null),r.default.createElement(o.Route,{exact:!0,path:"/",component:s.default}),r.default.createElement(o.Route,{path:"/search/:term",component:u.default}),r.default.createElement(o.Route,{path:"/video/:id",component:c.default}),r.default.createElement(o.Route,{path:"/list",component:l.default}),r.default.createElement(o.Route,{path:"/new",component:f.default}))}},function(e,t,n){(function(t,n){var r,o;o=function(){var e=Math.abs,o=Math.pow,i=Math.floor,a=String.fromCharCode,s=Math.ceil,u=Math.max,c=Math.min;return function e(t,n,o){function i(s,u){if(!n[s]){if(!t[s]){if(!u&&("function"==typeof r&&r))return r(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n||e)},l,l.exports,e,t,n,o)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t){function n(e,t){i.Readable.call(this,t),this.destroyed=!1,this._torrent=e._torrent;var n=t&&t.start||0,r=t&&t.end&&t.end<e.length?t.end:e.length-1,o=e._torrent.pieceLength;this._startPiece=0|(n+e.offset)/o,this._endPiece=0|(r+e.offset)/o,this._piece=this._startPiece,this._offset=n+e.offset-this._startPiece*o,this._missing=r-n+1,this._reading=!1,this._notifying=!1,this._criticalLength=c(0|1048576/o,2)}t.exports=n;var r=e("debug")("webtorrent:file-stream"),o=e("inherits"),i=e("readable-stream");o(n,i.Readable),n.prototype._read=function(){this._reading||(this._reading=!0,this._notify())},n.prototype._notify=function(){var e=this;if(e._reading&&0!==e._missing){if(!e._torrent.bitfield.get(e._piece))return e._torrent.critical(e._piece,e._piece+e._criticalLength);if(!e._notifying){e._notifying=!0;var t=e._piece;e._torrent.store.get(t,function(n,o){return e._notifying=!1,e.destroyed?void 0:n?e._destroy(n):(r("read %s (length %s) (err %s)",t,o.length,n&&n.message),e._offset&&(o=o.slice(e._offset),e._offset=0),e._missing<o.length&&(o=o.slice(0,e._missing)),e._missing-=o.length,r("pushing buffer of length %s",o.length),e._reading=!1,e.push(o),void(0===e._missing&&e.push(null)))}),e._piece+=1}}},n.prototype.destroy=function(e){this._destroy(null,e)},n.prototype._destroy=function(e,t){this.destroyed||(this.destroyed=!0,!this._torrent.destroyed&&this._torrent.deselect(this._startPiece,this._endPiece,!0),e&&this.emit("error",e),this.emit("close"),t&&t())}},{debug:29,inherits:40,"readable-stream":82}],2:[function(e,t){(function(n){function r(e,t){i.call(this),this._torrent=e,this._destroyed=!1,this.name=t.name,this.path=t.path,this.length=t.length,this.offset=t.offset,this.done=!1;var n=t.offset,r=n+t.length-1;this._startPiece=0|n/this._torrent.pieceLength,this._endPiece=0|r/this._torrent.pieceLength,0===this.length&&(this.done=!0,this.emit("done"))}t.exports=r;var o=e("end-of-stream"),i=e("events").EventEmitter,a=e("./file-stream"),s=e("inherits"),u=e("path"),c=e("render-media"),l=e("readable-stream"),f=e("stream-to-blob"),d=e("stream-to-blob-url"),h=e("stream-with-known-length-to-buffer");s(r,i),Object.defineProperty(r.prototype,"downloaded",{get:function(){if(!this._torrent.bitfield)return 0;for(var e=0,t=this._startPiece;t<=this._endPiece;++t)if(this._torrent.bitfield.get(t))e+=this._torrent.pieceLength;else{var n=this._torrent.pieces[t];e+=n.length-n.missing}return e}}),Object.defineProperty(r.prototype,"progress",{get:function(){return this.length?this.downloaded/this.length:0}}),r.prototype.select=function(e){0===this.length||this._torrent.select(this._startPiece,this._endPiece,e)},r.prototype.deselect=function(){0===this.length||this._torrent.deselect(this._startPiece,this._endPiece,!1)},r.prototype.createReadStream=function(e){var t=this;if(0===this.length){var r=new l.PassThrough;return n.nextTick(function(){r.end()}),r}var i=new a(t,e);return t._torrent.select(i._startPiece,i._endPiece,!0,function(){i._notify()}),o(i,function(){t._destroyed||!t._torrent.destroyed&&t._torrent.deselect(i._startPiece,i._endPiece,!0)}),i},r.prototype.getBuffer=function(e){h(this.createReadStream(),this.length,e)},r.prototype.getBlob=function(e){if("undefined"==typeof window)throw new Error("browser-only method");f(this.createReadStream(),this._getMimeType(),e)},r.prototype.getBlobURL=function(e){if("undefined"==typeof window)throw new Error("browser-only method");d(this.createReadStream(),this._getMimeType(),e)},r.prototype.appendTo=function(e,t,n){if("undefined"==typeof window)throw new Error("browser-only method");c.append(this,e,t,n)},r.prototype.renderTo=function(e,t,n){if("undefined"==typeof window)throw new Error("browser-only method");c.render(this,e,t,n)},r.prototype._getMimeType=function(){return c.mime[u.extname(this.name).toLowerCase()]},r.prototype._destroy=function(){this._destroyed=!0,this._torrent=null}}).call(this,e("_process"))},{"./file-stream":1,_process:65,"end-of-stream":32,events:33,inherits:40,path:62,"readable-stream":82,"render-media":83,"stream-to-blob":100,"stream-to-blob-url":99,"stream-with-known-length-to-buffer":101}],3:[function(e,t,n){function r(e,t){var n=this;n.id=e,n.type=t,a("new Peer %s",e),n.addr=null,n.conn=null,n.swarm=null,n.wire=null,n.connected=!1,n.destroyed=!1,n.timeout=null,n.retries=0,n.sentHandshake=!1}function o(){}var i=e("unordered-array-remove"),a=e("debug")("webtorrent:peer"),s=e("bittorrent-protocol"),u=e("./webconn");n.createWebRTCPeer=function(e,t){var n=new r(e.id,"webrtc");return n.conn=e,n.swarm=t,n.conn.connected?n.onConnect():(n.conn.once("connect",function(){n.onConnect()}),n.conn.once("error",function(e){n.destroy(e)}),n.startConnectTimeout()),n},n.createTCPIncomingPeer=function(e){var t=e.remoteAddress+":"+e.remotePort,n=new r(t,"tcpIncoming");return n.conn=e,n.addr=t,n.onConnect(),n},n.createTCPOutgoingPeer=function(e,t){var n=new r(e,"tcpOutgoing");return n.addr=e,n.swarm=t,n},n.createWebSeedPeer=function(e,t){var n=new r(e,"webSeed");return n.swarm=t,n.conn=new u(e,t),n.onConnect(),n},r.prototype.onConnect=function(){var e=this;if(!e.destroyed){e.connected=!0,a("Peer %s connected",e.id),clearTimeout(e.connectTimeout);var t=e.conn;t.once("end",function(){e.destroy()}),t.once("close",function(){e.destroy()}),t.once("finish",function(){e.destroy()}),t.once("error",function(t){e.destroy(t)});var n=e.wire=new s;n.type=e.type,n.once("end",function(){e.destroy()}),n.once("close",function(){e.destroy()}),n.once("finish",function(){e.destroy()}),n.once("error",function(t){e.destroy(t)}),n.once("handshake",function(t,n){e.onHandshake(t,n)}),e.startHandshakeTimeout(),t.pipe(n).pipe(t),e.swarm&&!e.sentHandshake&&e.handshake()}},r.prototype.onHandshake=function(e,t){var n=this;if(n.swarm&&!n.destroyed){if(n.swarm.destroyed)return n.destroy(new Error("swarm already destroyed"));if(e!==n.swarm.infoHash)return n.destroy(new Error("unexpected handshake info hash for this swarm"));if(t===n.swarm.peerId)return n.destroy(new Error("refusing to connect to ourselves"));a("Peer %s got handshake %s",n.id,e),clearTimeout(n.handshakeTimeout),n.retries=0;var r=n.addr;!r&&n.conn.remoteAddress&&(r=n.conn.remoteAddress+":"+n.conn.remotePort),n.swarm._onWire(n.wire,r),n.swarm&&!n.swarm.destroyed&&(n.sentHandshake||n.handshake())}},r.prototype.handshake=function(){var e=this,t={dht:!e.swarm.private&&!!e.swarm.client.dht};e.wire.handshake(e.swarm.infoHash,e.swarm.client.peerId,t),e.sentHandshake=!0},r.prototype.startConnectTimeout=function(){var e=this;clearTimeout(e.connectTimeout),e.connectTimeout=setTimeout(function(){e.destroy(new Error("connect timeout"))},"webrtc"===e.type?25e3:5e3),e.connectTimeout.unref&&e.connectTimeout.unref()},r.prototype.startHandshakeTimeout=function(){var e=this;clearTimeout(e.handshakeTimeout),e.handshakeTimeout=setTimeout(function(){e.destroy(new Error("handshake timeout"))},25e3),e.handshakeTimeout.unref&&e.handshakeTimeout.unref()},r.prototype.destroy=function(e){var t=this;if(!t.destroyed){t.destroyed=!0,t.connected=!1,a("destroy %s (error: %s)",t.id,e&&(e.message||e)),clearTimeout(t.connectTimeout),clearTimeout(t.handshakeTimeout);var n=t.swarm,r=t.conn,s=t.wire;t.swarm=null,t.conn=null,t.wire=null,n&&s&&i(n.wires,n.wires.indexOf(s)),r&&(r.on("error",o),r.destroy()),s&&s.destroy(),n&&n.removePeer(t.id)}}},{"./webconn":6,"bittorrent-protocol":14,debug:29,"unordered-array-remove":111}],4:[function(e,t){function n(e){var t=this;t._torrent=e,t._numPieces=e.pieces.length,t._pieces=[],t._onWire=function(e){t.recalculate(),t._initWire(e)},t._onWireHave=function(e){t._pieces[e]+=1},t._onWireBitfield=function(){t.recalculate()},t._torrent.wires.forEach(function(e){t._initWire(e)}),t._torrent.on("wire",t._onWire),t.recalculate()}function r(){return!0}t.exports=n,n.prototype.getRarestPiece=function(e){e||(e=r);for(var t=[],n=1/0,o=0;o<this._numPieces;++o)if(e(o)){var i=this._pieces[o];i===n?t.push(o):i<n&&(t=[o],n=i)}return 0<t.length?t[0|Math.random()*t.length]:-1},n.prototype.destroy=function(){var e=this;e._torrent.removeListener("wire",e._onWire),e._torrent.wires.forEach(function(t){e._cleanupWireEvents(t)}),e._torrent=null,e._pieces=null,e._onWire=null,e._onWireHave=null,e._onWireBitfield=null},n.prototype._initWire=function(e){var t=this;e._onClose=function(){t._cleanupWireEvents(e);for(var n=0;n<this._numPieces;++n)t._pieces[n]-=e.peerPieces.get(n)},e.on("have",t._onWireHave),e.on("bitfield",t._onWireBitfield),e.once("close",e._onClose)},n.prototype.recalculate=function(){var e;for(e=0;e<this._numPieces;++e)this._pieces[e]=0;var t=this._torrent.wires.length;for(e=0;e<t;++e)for(var n=this._torrent.wires[e],r=0;r<this._numPieces;++r)this._pieces[r]+=n.peerPieces.get(r)},n.prototype._cleanupWireEvents=function(e){e.removeListener("have",this._onWireHave),e.removeListener("bitfield",this._onWireBitfield),e._onClose&&e.removeListener("close",e._onClose),e._onClose=null}},{}],5:[function(e,n){(function(t,r){function o(e,t,n){v.call(this),this._debugId="unknown infohash",this.client=t,this.announce=n.announce,this.urlList=n.urlList,this.path=n.path,this._store=n.store||w,this._getAnnounceOpts=n.getAnnounceOpts,this.strategy=n.strategy||"sequential",this.maxWebConns=n.maxWebConns||4,this._rechokeNumSlots=!1===n.uploads||0===n.uploads?0:+n.uploads||10,this._rechokeOptimisticWire=null,this._rechokeOptimisticTime=0,this._rechokeIntervalId=null,this.ready=!1,this.destroyed=!1,this.paused=!1,this.done=!1,this.metadata=null,this.store=null,this.files=[],this.pieces=[],this._amInterested=!1,this._selections=[],this._critical=[],this.wires=[],this._queue=[],this._peers={},this._peersLength=0,this.received=0,this.uploaded=0,this._downloadSpeed=M(),this._uploadSpeed=M(),this._servers=[],this._xsRequests=[],this._fileModtimes=n.fileModtimes,null!==e&&this._onTorrentId(e),this._debug("new torrent")}function i(e,t){return 2+s(t*e.downloadSpeed()/I.BLOCK_LENGTH)}function a(e,t,n){return 1+s(t*e.downloadSpeed()/n)}function l(){}n.exports=o;var f,d=e("addr-to-ip-port"),h=e("bitfield"),p=e("chunk-store-stream/write"),g=e("debug")("webtorrent:torrent"),m=e("torrent-discovery"),v=e("events").EventEmitter,y=e("xtend"),b=e("xtend/mutable"),_=e("fs"),w=e("fs-chunk-store"),C=e("simple-get"),k=e("immediate-chunk-store"),E=e("inherits"),S=e("multistream"),x=e("net"),T=e("os"),A=e("run-parallel"),P=e("run-parallel-limit"),O=e("parse-torrent"),R=e("path"),I=e("torrent-piece"),L=e("pump"),B=e("random-iterate"),U=e("simple-sha1"),M=e("speedometer"),D=e("uniq"),N=e("ut_metadata"),j=e("ut_pex"),F=e("./file"),H=e("./peer"),K=e("./rarity-map"),W=e("./server"),q=5e3,z=3*I.BLOCK_LENGTH,G=[1e3,5e3,15e3],V="WebTorrent/"+e("../package.json").version+" (https://webtorrent.io)";try{f=R.join(_.statSync("/tmp")&&"/tmp","webtorrent")}catch(e){f=R.join("function"==typeof T.tmpdir?T.tmpdir():"/","webtorrent")}E(o,v),Object.defineProperty(o.prototype,"timeRemaining",{get:function(){return this.done?0:0===this.downloadSpeed?1/0:(this.length-this.downloaded)/this.downloadSpeed*1e3}}),Object.defineProperty(o.prototype,"downloaded",{get:function(){if(!this.bitfield)return 0;for(var e=0,t=0,n=this.pieces.length;t<n;++t)if(this.bitfield.get(t))e+=t===n-1?this.lastPieceLength:this.pieceLength;else{var r=this.pieces[t];e+=r.length-r.missing}return e}}),Object.defineProperty(o.prototype,"downloadSpeed",{get:function(){return this._downloadSpeed()}}),Object.defineProperty(o.prototype,"uploadSpeed",{get:function(){return this._uploadSpeed()}}),Object.defineProperty(o.prototype,"progress",{get:function(){return this.length?this.downloaded/this.length:0}}),Object.defineProperty(o.prototype,"ratio",{get:function(){return this.uploaded/(this.received||1)}}),Object.defineProperty(o.prototype,"numPeers",{get:function(){return this.wires.length}}),Object.defineProperty(o.prototype,"torrentFileBlobURL",{get:function(){if("undefined"==typeof window)throw new Error("browser-only property");return this.torrentFile?URL.createObjectURL(new Blob([this.torrentFile],{type:"application/x-bittorrent"})):null}}),Object.defineProperty(o.prototype,"_numQueued",{get:function(){return this._queue.length+(this._peersLength-this._numConns)}}),Object.defineProperty(o.prototype,"_numConns",{get:function(){var e=0;for(var t in this._peers)this._peers[t].connected&&(e+=1);return e}}),Object.defineProperty(o.prototype,"swarm",{get:function(){return console.warn("WebTorrent: `torrent.swarm` is deprecated. Use `torrent` directly instead."),this}}),o.prototype._onTorrentId=function(e){var n=this;if(!n.destroyed){var r;try{r=O(e)}catch(e){}r?(n.infoHash=r.infoHash,n._debugId=r.infoHash.toString("hex").substring(0,7),t.nextTick(function(){n.destroyed||n._onParsedTorrent(r)})):O.remote(e,function(e,t){return n.destroyed?void 0:e?n._destroy(e):void n._onParsedTorrent(t)})}},o.prototype._onParsedTorrent=function(e){var t=this;if(!t.destroyed){if(t._processParsedTorrent(e),!t.infoHash)return t._destroy(new Error("Malformed torrent data: No info hash"));t.path||(t.path=R.join(f,t.infoHash)),t._rechokeIntervalId=setInterval(function(){t._rechoke()},1e4),t._rechokeIntervalId.unref&&t._rechokeIntervalId.unref(),t.emit("_infoHash",t.infoHash),!t.destroyed&&(t.emit("infoHash",t.infoHash),t.destroyed||(t.client.listening?t._onListening():t.client.once("listening",function(){t._onListening()})))}},o.prototype._processParsedTorrent=function(e){this._debugId=e.infoHash.toString("hex").substring(0,7),this.announce&&(e.announce=e.announce.concat(this.announce)),this.client.tracker&&r.WEBTORRENT_ANNOUNCE&&!this.private&&(e.announce=e.announce.concat(r.WEBTORRENT_ANNOUNCE)),this.urlList&&(e.urlList=e.urlList.concat(this.urlList)),D(e.announce),D(e.urlList),b(this,e),this.magnetURI=O.toMagnetURI(e),this.torrentFile=O.toTorrentFile(e)},o.prototype._onListening=function(){var e=this;if(!e.discovery&&!e.destroyed){var t=e.client.tracker;t&&(t=y(e.client.tracker,{getAnnounceOpts:function(){var t={uploaded:e.uploaded,downloaded:e.downloaded,left:u(e.length-e.downloaded,0)};return e.client.tracker.getAnnounceOpts&&b(t,e.client.tracker.getAnnounceOpts()),e._getAnnounceOpts&&b(t,e._getAnnounceOpts()),t}})),e.discovery=new m({infoHash:e.infoHash,announce:e.announce,peerId:e.client.peerId,dht:!e.private&&e.client.dht,tracker:t,port:e.client.torrentPort,userAgent:V}),e.discovery.on("error",function(t){e._destroy(t)}),e.discovery.on("peer",function(t){"string"==typeof t&&e.done||e.addPeer(t)}),e.discovery.on("trackerAnnounce",function(){e.emit("trackerAnnounce"),0===e.numPeers&&e.emit("noPeers","tracker")}),e.discovery.on("dhtAnnounce",function(){e.emit("dhtAnnounce"),0===e.numPeers&&e.emit("noPeers","dht")}),e.discovery.on("warning",function(t){e.emit("warning",t)}),e.info?e._onMetadata(e):e.xs&&e._getMetadataFromServer()}},o.prototype._getMetadataFromServer=function(){function e(e,n){if(0!==e.indexOf("http://")&&0!==e.indexOf("https://"))return t.emit("warning",new Error("skipping non-http xs param: "+e)),n(null);var r;try{r=C.concat({url:e,method:"GET",headers:{"user-agent":V}},function(r,o,i){if(t.destroyed)return n(null);if(t.metadata)return n(null);if(r)return t.emit("warning",new Error("http error from xs param: "+e)),n(null);if(200!==o.statusCode)return t.emit("warning",new Error("non-200 status code "+o.statusCode+" from xs param: "+e)),n(null);var a;try{a=O(i)}catch(e){}return a?a.infoHash===t.infoHash?(t._onMetadata(a),void n(null)):(t.emit("warning",new Error("got torrent file with incorrect info hash from xs param: "+e)),n(null)):(t.emit("warning",new Error("got invalid torrent file from xs param: "+e)),n(null))})}catch(r){return t.emit("warning",new Error("skipping invalid url xs param: "+e)),n(null)}t._xsRequests.push(r)}var t=this,n=(Array.isArray(t.xs)?t.xs:[t.xs]).map(function(t){return function(n){e(t,n)}});A(n)},o.prototype._onMetadata=function(e){var t=this;if(!t.metadata&&!t.destroyed){var n;if(t._debug("got metadata"),t._xsRequests.forEach(function(e){e.abort()}),t._xsRequests=[],e&&e.infoHash)n=e;else try{n=O(e)}catch(e){return t._destroy(e)}t._processParsedTorrent(n),t.metadata=t.torrentFile,t.client.enableWebSeeds&&t.urlList.forEach(function(e){t.addWebSeed(e)}),0!==t.pieces.length&&t.select(0,t.pieces.length-1,!1),t._rarityMap=new K(t),t.store=new k(new t._store(t.pieceLength,{torrent:{infoHash:t.infoHash},files:t.files.map(function(e){return{path:R.join(t.path,e.path),length:e.length,offset:e.offset}}),length:t.length})),t.files=t.files.map(function(e){return new F(t,e)}),t._hashes=t.pieces,t.pieces=t.pieces.map(function(e,n){var r=n===t.pieces.length-1?t.lastPieceLength:t.pieceLength;return new I(r)}),t._reservations=t.pieces.map(function(){return[]}),t.bitfield=new h(t.pieces.length),t.wires.forEach(function(e){e.ut_metadata&&e.ut_metadata.setMetadata(t.metadata),t._onWireWithMetadata(e)}),t._debug("verifying existing torrent data"),t._fileModtimes&&t._store===w?t.getFileModtimes(function(e,n){if(e)return t._destroy(e);if(t.files.map(function(e,r){return n[r]===t._fileModtimes[r]}).every(function(e){return e})){for(var r=0;r<t.pieces.length;r++)t._markVerified(r);t._onStore()}else t._verifyPieces()}):t._verifyPieces(),t.emit("metadata")}},o.prototype.getFileModtimes=function(e){var t=this,n=[];P(t.files.map(function(e,r){return function(o){_.stat(R.join(t.path,e.path),function(e,t){return e&&"ENOENT"!==e.code?o(e):(n[r]=t&&t.mtime.getTime(),void o(null))})}}),2,function(r){t._debug("done getting file modtimes"),e(r,n)})},o.prototype._verifyPieces=function(){var e=this;P(e.pieces.map(function(n,r){return function(n){return e.destroyed?n(new Error("torrent is destroyed")):void e.store.get(r,function(o,i){return e.destroyed?n(new Error("torrent is destroyed")):o?t.nextTick(n,null):void U(i,function(t){if(e.destroyed)return n(new Error("torrent is destroyed"));if(t===e._hashes[r]){if(!e.pieces[r])return;e._debug("piece verified %s",r),e._markVerified(r)}else e._debug("piece invalid %s",r);n(null)})})}}),2,function(t){return t?e._destroy(t):(e._debug("done verifying"),void e._onStore())})},o.prototype._markVerified=function(e){this.pieces[e]=null,this._reservations[e]=null,this.bitfield.set(e,!0)},o.prototype._onStore=function(){var e=this;e.destroyed||(e._debug("on store"),e.ready=!0,e.emit("ready"),e._checkDone(),e._updateSelections())},o.prototype.destroy=function(e){this._destroy(null,e)},o.prototype._destroy=function(e,t){var n=this;if(!n.destroyed){for(var r in n.destroyed=!0,n._debug("destroy"),n.client._remove(n),clearInterval(n._rechokeIntervalId),n._xsRequests.forEach(function(e){e.abort()}),n._rarityMap&&n._rarityMap.destroy(),n._peers)n.removePeer(r);n.files.forEach(function(e){e instanceof F&&e._destroy()});var o=n._servers.map(function(e){return function(t){e.destroy(t)}});n.discovery&&o.push(function(e){n.discovery.destroy(e)}),n.store&&o.push(function(e){n.store.close(e)}),A(o,t),e&&(0===n.listenerCount("error")?n.client.emit("error",e):n.emit("error",e)),n.emit("close"),n.client=null,n.files=[],n.discovery=null,n.store=null,n._rarityMap=null,n._peers=null,n._servers=null,n._xsRequests=null}},o.prototype.addPeer=function(e){var t=this;if(t.destroyed)throw new Error("torrent is destroyed");if(!t.infoHash)throw new Error("addPeer() must not be called before the `infoHash` event");if(t.client.blocked){var n;if("string"==typeof e){var r;try{r=d(e)}catch(n){return t._debug("ignoring peer: invalid %s",e),t.emit("invalidPeer",e),!1}n=r[0]}else"string"==typeof e.remoteAddress&&(n=e.remoteAddress);if(n&&t.client.blocked.contains(n))return t._debug("ignoring peer: blocked %s",e),"string"!=typeof e&&e.destroy(),t.emit("blockedPeer",e),!1}var o=!!t._addPeer(e);return o?t.emit("peer",e):t.emit("invalidPeer",e),o},o.prototype._addPeer=function(e){var t=this;if(t.destroyed)return"string"!=typeof e&&e.destroy(),null;if("string"==typeof e&&!t._validAddr(e))return t._debug("ignoring peer: invalid %s",e),null;var n,r=e&&e.id||e;return t._peers[r]?(t._debug("ignoring peer: duplicate (%s)",r),"string"!=typeof e&&e.destroy(),null):t.paused?(t._debug("ignoring peer: torrent is paused"),"string"!=typeof e&&e.destroy(),null):(t._debug("add peer %s",r),n="string"==typeof e?H.createTCPOutgoingPeer(e,t):H.createWebRTCPeer(e,t),t._peers[n.id]=n,t._peersLength+=1,"string"==typeof e&&(t._queue.push(n),t._drain()),n)},o.prototype.addWebSeed=function(e){if(this.destroyed)throw new Error("torrent is destroyed");if(!/^https?:\/\/.+/.test(e))return this.emit("warning",new Error("ignoring invalid web seed: "+e)),void this.emit("invalidPeer",e);if(this._peers[e])return this.emit("warning",new Error("ignoring duplicate web seed: "+e)),void this.emit("invalidPeer",e);this._debug("add web seed %s",e);var t=H.createWebSeedPeer(e,this);this._peers[t.id]=t,this._peersLength+=1,this.emit("peer",e)},o.prototype._addIncomingPeer=function(e){var t=this;return t.destroyed?e.destroy(new Error("torrent is destroyed")):t.paused?e.destroy(new Error("torrent is paused")):(this._debug("add incoming peer %s",e.id),t._peers[e.id]=e,void(t._peersLength+=1))},o.prototype.removePeer=function(e){var t=this,n=e&&e.id||e;(e=t._peers[n])&&(this._debug("removePeer %s",n),delete t._peers[n],t._peersLength-=1,e.destroy(),t._drain())},o.prototype.select=function(e,t,n,r){var o=this;if(o.destroyed)throw new Error("torrent is destroyed");if(0>e||t<e||o.pieces.length<=t)throw new Error("invalid selection ",e,":",t);n=+n||0,o._debug("select %s-%s (priority %s)",e,t,n),o._selections.push({from:e,to:t,offset:0,priority:n,notify:r||l}),o._selections.sort(function(e,t){return t.priority-e.priority}),o._updateSelections()},o.prototype.deselect=function(e,t,n){var r=this;if(r.destroyed)throw new Error("torrent is destroyed");n=+n||0,r._debug("deselect %s-%s (priority %s)",e,t,n);for(var o,i=0;i<r._selections.length;++i)if((o=r._selections[i]).from===e&&o.to===t&&o.priority===n){r._selections.splice(i,1);break}r._updateSelections()},o.prototype.critical=function(e,t){var n=this;if(n.destroyed)throw new Error("torrent is destroyed");n._debug("critical %s-%s",e,t);for(var r=e;r<=t;++r)n._critical[r]=!0;n._updateSelections()},o.prototype._onWire=function(e,n){var r=this;if(r._debug("got wire %s (%s)",e._debugId,n||"Unknown"),e.on("download",function(e){r.destroyed||(r.received+=e,r._downloadSpeed(e),r.client._downloadSpeed(e),r.emit("download",e),r.client.emit("download",e))}),e.on("upload",function(e){r.destroyed||(r.uploaded+=e,r._uploadSpeed(e),r.client._uploadSpeed(e),r.emit("upload",e),r.client.emit("upload",e))}),r.wires.push(e),n){var o=d(n);e.remoteAddress=o[0],e.remotePort=o[1]}r.client.dht&&r.client.dht.listening&&e.on("port",function(t){return r.destroyed||r.client.dht.destroyed?void 0:e.remoteAddress?0===t||65536<t?r._debug("ignoring invalid PORT from peer"):(r._debug("port: %s (from %s)",t,n),void r.client.dht.addNode({host:e.remoteAddress,port:t})):r._debug("ignoring PORT from peer with no address")}),e.on("timeout",function(){r._debug("wire timeout (%s)",n),e.destroy()}),e.setTimeout(3e4,!0),e.setKeepAlive(!0),e.use(N(r.metadata)),e.ut_metadata.on("warning",function(e){r._debug("ut_metadata warning: %s",e.message)}),r.metadata||(e.ut_metadata.on("metadata",function(e){r._debug("got metadata via ut_metadata"),r._onMetadata(e)}),e.ut_metadata.fetch()),"function"!=typeof j||r.private||(e.use(j()),e.ut_pex.on("peer",function(e){r.done||(r._debug("ut_pex: got peer: %s (from %s)",e,n),r.addPeer(e))}),e.ut_pex.on("dropped",function(e){var t=r._peers[e];t&&!t.connected&&(r._debug("ut_pex: dropped peer: %s (from %s)",e,n),r.removePeer(e))}),e.once("close",function(){e.ut_pex.reset()})),r.emit("wire",e,n),r.metadata&&t.nextTick(function(){r._onWireWithMetadata(e)})},o.prototype._onWireWithMetadata=function(e){function t(){o.destroyed||e.destroyed||(o._numQueued>2*(o._numConns-o.numPeers)&&e.amInterested?e.destroy():(i=setTimeout(t,q)).unref&&i.unref())}function n(){if(e.peerPieces.buffer.length===o.bitfield.buffer.length){for(r=0;r<o.pieces.length;++r)if(!e.peerPieces.get(r))return;e.isSeeder=!0,e.choke()}}var r,o=this,i=null;e.on("bitfield",function(){n(),o._update()}),e.on("have",function(){n(),o._update()}),e.once("interested",function(){e.unchoke()}),e.once("close",function(){clearTimeout(i)}),e.on("choke",function(){clearTimeout(i),(i=setTimeout(t,q)).unref&&i.unref()}),e.on("unchoke",function(){clearTimeout(i),o._update()}),e.on("request",function(t,n,r,i){return r>131072?e.destroy():void(o.pieces[t]||o.store.get(t,{offset:n,length:r},i))}),e.bitfield(o.bitfield),e.interested(),e.peerExtensions.dht&&o.client.dht&&o.client.dht.listening&&e.port(o.client.dht.address().port),"webSeed"!==e.type&&((i=setTimeout(t,q)).unref&&i.unref()),e.isSeeder=!1,n()},o.prototype._updateSelections=function(){var e=this;!e.ready||e.destroyed||(t.nextTick(function(){e._gcSelections()}),e._updateInterest(),e._update())},o.prototype._gcSelections=function(){for(var e=this,t=0;t<e._selections.length;++t){for(var n=e._selections[t],r=n.offset;e.bitfield.get(n.from+n.offset)&&n.from+n.offset<n.to;)n.offset+=1;r!==n.offset&&n.notify(),n.to===n.from+n.offset&&e.bitfield.get(n.from+n.offset)&&(e._selections.splice(t,1),t-=1,n.notify(),e._updateInterest())}e._selections.length||e.emit("idle")},o.prototype._updateInterest=function(){var e=this,t=e._amInterested;e._amInterested=!!e._selections.length,e.wires.forEach(function(t){e._amInterested?t.interested():t.uninterested()}),t===e._amInterested||(e._amInterested?e.emit("interested"):e.emit("uninterested"))},o.prototype._update=function(){var e=this;if(!e.destroyed)for(var t,n=B(e.wires);t=n();)e._updateWire(t)},o.prototype._updateWire=function(e){function t(t,n,r,o){return function(i){return i>=t&&i<=n&&!(i in r)&&e.peerPieces.get(i)&&(!o||o(i))}}function n(){var t=e.downloadSpeed()||1;if(t>z)return function(){return!0};var n=u(1,e.requests.length)*I.BLOCK_LENGTH/t,r=10,o=0;return function(e){if(!r||a.bitfield.get(e))return!0;for(var i=a.pieces[e].missing;o<a.wires.length;o++){var s=a.wires[o],u=s.downloadSpeed();if(!(u<z)&&!(u<=t)&&s.peerPieces.get(e)&&!(0<(i-=u*n)))return r--,!1}return!0}}function r(e){for(var t=e,n=e;n<a._selections.length&&a._selections[n].priority;n++)t=n;var r=a._selections[e];a._selections[e]=a._selections[t],a._selections[t]=r}function o(o){if(e.requests.length>=c)return!0;for(var i=n(),s=0;s<a._selections.length;s++){var u,l=a._selections[s];if("rarest"===a.strategy)for(var f=l.from+l.offset,d=l.to,h={},p=0,g=t(f,d,h,i);p<d-f+1&&!(0>(u=a._rarityMap.getRarestPiece(g)));){for(;a._request(e,u,a._critical[u]||o););if(!(e.requests.length<c))return l.priority&&r(s),!0;h[u]=!0,p++}else for(u=l.from+l.offset;u<=l.to;u++)if(e.peerPieces.get(u)&&i(u)){for(;a._request(e,u,a._critical[u]||o););if(!(e.requests.length<c))return l.priority&&r(s),!0}}return!1}var a=this;if(!e.peerChoking){if(!e.downloaded)return function(){if(!e.requests.length)for(var n=a._selections.length;n--;){var r,o=a._selections[n];if("rarest"===a.strategy)for(var i=o.from+o.offset,s=o.to,u={},c=0,l=t(i,s,u);c<s-i+1&&!(0>(r=a._rarityMap.getRarestPiece(l)));){if(a._request(e,r,!1))return;u[r]=!0,c+=1}else for(r=o.to;r>=o.from+o.offset;--r)if(e.peerPieces.get(r)&&a._request(e,r,!1))return}}();var s=i(e,.5);if(!(e.requests.length>=s)){var c=i(e,1);o(!1)||o(!0)}}},o.prototype._rechoke=function(){var e=this;if(e.ready){0<e._rechokeOptimisticTime?e._rechokeOptimisticTime-=1:e._rechokeOptimisticWire=null;var t=[];e.wires.forEach(function(n){n.isSeeder||n===e._rechokeOptimisticWire||t.push({wire:n,downloadSpeed:n.downloadSpeed(),uploadSpeed:n.uploadSpeed(),salt:Math.random(),isChoked:!0})}),t.sort(function(e,t){return e.downloadSpeed===t.downloadSpeed?e.uploadSpeed===t.uploadSpeed?e.wire.amChoking===t.wire.amChoking?e.salt-t.salt:e.wire.amChoking?1:-1:t.uploadSpeed-e.uploadSpeed:t.downloadSpeed-e.downloadSpeed});for(var n=0,r=0;r<t.length&&n<e._rechokeNumSlots;++r)t[r].isChoked=!1,t[r].wire.peerInterested&&(n+=1);if(!e._rechokeOptimisticWire&&r<t.length&&e._rechokeNumSlots){var o=t.slice(r).filter(function(e){return e.wire.peerInterested}),i=o[function(e){return 0|Math.random()*e}(o.length)];i&&(i.isChoked=!1,e._rechokeOptimisticWire=i.wire,e._rechokeOptimisticTime=2)}t.forEach(function(e){e.wire.amChoking!==e.isChoked&&(e.isChoked?e.wire.choke():e.wire.unchoke())})}},o.prototype._hotswap=function(e,t){var n=this,r=e.downloadSpeed();if(r<I.BLOCK_LENGTH)return!1;if(!n._reservations[t])return!1;var o=n._reservations[t];if(!o)return!1;var i,a,s=1/0;for(a=0;a<o.length;a++){var u=o[a];if(u&&u!==e){var c=u.downloadSpeed();c>=z||2*c>r||c>s||(i=u,s=c)}}if(!i)return!1;for(a=0;a<o.length;a++)o[a]===i&&(o[a]=null);for(a=0;a<i.requests.length;a++){var l=i.requests[a];l.piece===t&&n.pieces[t].cancel(0|l.offset/I.BLOCK_LENGTH)}return n.emit("hotswap",i,e,t),!0},o.prototype._request=function(e,n,r){function o(){t.nextTick(function(){s._update()})}var s=this,u=e.requests.length,l="webSeed"===e.type;if(s.bitfield.get(n))return!1;if(u>=(l?c(a(e,1,s.pieceLength),s.maxWebConns):i(e,1)))return!1;var f=s.pieces[n],d=l?f.reserveRemaining():f.reserve();if(-1===d&&r&&s._hotswap(e,n)&&(d=l?f.reserveRemaining():f.reserve()),-1===d)return!1;var h=s._reservations[n];h||(h=s._reservations[n]=[]);var p=h.indexOf(null);-1===p&&(p=h.length),h[p]=e;var g=f.chunkOffset(d),m=l?f.chunkLengthRemaining(d):f.chunkLength(d);return e.request(n,g,m,function t(r,i){if(!s.destroyed){if(!s.ready)return s.once("ready",function(){t(r,i)});if(h[p]===e&&(h[p]=null),f!==s.pieces[n])return o();if(r)return s._debug("error getting piece %s (offset: %s length: %s) from %s: %s",n,g,m,e.remoteAddress+":"+e.remotePort,r.message),l?f.cancelRemaining(d):f.cancel(d),void o();if(s._debug("got piece %s (offset: %s length: %s) from %s",n,g,m,e.remoteAddress+":"+e.remotePort),!f.set(d,i,e))return o();var a=f.flush();U(a,function(e){if(!s.destroyed){if(e===s._hashes[n]){if(!s.pieces[n])return;s._debug("piece verified %s",n),s.pieces[n]=null,s._reservations[n]=null,s.bitfield.set(n,!0),s.store.put(n,a),s.wires.forEach(function(e){e.have(n)}),s._checkDone()&&!s.destroyed&&s.discovery.complete()}else s.pieces[n]=new I(f.length),s.emit("warning",new Error("Piece "+n+" failed verification"));o()}})}}),!0},o.prototype._checkDone=function(){var e=this;if(!e.destroyed){e.files.forEach(function(t){if(!t.done){for(var n=t._startPiece;n<=t._endPiece;++n)if(!e.bitfield.get(n))return;t.done=!0,t.emit("done"),e._debug("file done: "+t.name)}});for(var t,n=!0,r=0;r<e._selections.length;r++){for(var o=(t=e._selections[r]).from;o<=t.to;o++)if(!e.bitfield.get(o)){n=!1;break}if(!n)break}return!e.done&&n&&(e.done=!0,e._debug("torrent done: "+e.infoHash),e.emit("done")),e._gcSelections(),n}},o.prototype.load=function(e,t){var n=this;if(n.destroyed)throw new Error("torrent is destroyed");if(!n.ready)return n.once("ready",function(){n.load(e,t)});Array.isArray(e)||(e=[e]),t||(t=l);var r=new S(e),o=new p(n.store,n.pieceLength);L(r,o,function(e){return e?t(e):(n.pieces.forEach(function(e,t){n.pieces[t]=null,n._reservations[t]=null,n.bitfield.set(t,!0)}),n._checkDone(),void t(null))})},o.prototype.createServer=function(e){if("function"!=typeof W)throw new Error("node.js-only method");if(this.destroyed)throw new Error("torrent is destroyed");var t=new W(this,e);return this._servers.push(t),t},o.prototype.pause=function(){this.destroyed||(this._debug("pause"),this.paused=!0)},o.prototype.resume=function(){this.destroyed||(this._debug("resume"),this.paused=!1,this._drain())},o.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this.client._debugId+"] ["+this._debugId+"] "+e[0],g.apply(null,e)},o.prototype._drain=function(){var e=this;if(this._debug("_drain numConns %s maxConns %s",e._numConns,e.client.maxConns),!("function"!=typeof x.connect||e.destroyed||e.paused||e._numConns>=e.client.maxConns)){this._debug("drain (%s queued, %s/%s peers)",e._numQueued,e.numPeers,e.client.maxConns);var t=e._queue.shift();if(t){this._debug("tcp connect attempt to %s",t.addr);var n=d(t.addr),r={host:n[0],port:n[1]},o=t.conn=x.connect(r);o.once("connect",function(){t.onConnect()}),o.once("error",function(e){t.destroy(e)}),t.startConnectTimeout(),o.on("close",function(){if(!e.destroyed){if(t.retries>=G.length)return void e._debug("conn %s closed: will not re-add (max %s attempts)",t.addr,G.length);var n=G[t.retries];e._debug("conn %s closed: will re-add to queue in %sms (attempt %s)",t.addr,n,t.retries+1);var r=setTimeout(function(){var n=e._addPeer(t.addr);n&&(n.retries=t.retries+1)},n);r.unref&&r.unref()}})}}},o.prototype._validAddr=function(e){var t;try{t=d(e)}catch(t){return!1}var n=t[0],r=t[1];return 0<r&&65535>r&&("127.0.0.1"!==n||r!==this.client.torrentPort)}}).call(this,e("_process"),void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{"../package.json":122,"./file":2,"./peer":3,"./rarity-map":4,"./server":21,_process:65,"addr-to-ip-port":7,bitfield:13,"chunk-store-stream/write":25,debug:29,events:33,fs:22,"fs-chunk-store":49,"immediate-chunk-store":39,inherits:40,multistream:57,net:21,os:21,"parse-torrent":61,path:62,pump:66,"random-iterate":71,"run-parallel":86,"run-parallel-limit":85,"simple-get":90,"simple-sha1":92,speedometer:94,"torrent-discovery":106,"torrent-piece":107,uniq:110,ut_metadata:114,ut_pex:21,xtend:119,"xtend/mutable":120}],6:[function(e,t){function n(e,t){f.call(this),this.url=e,this.webPeerId=l.sync(e),this._torrent=t,this._init()}t.exports=n;var r=e("bitfield"),o=e("safe-buffer").Buffer,i=e("debug")("webtorrent:webconn"),a=e("simple-get"),s=e("inherits"),l=e("simple-sha1"),f=e("bittorrent-protocol"),d=e("../package.json").version;s(n,f),n.prototype._init=function(){var e=this;e.setKeepAlive(!0),e.once("handshake",function(t){if(!e.destroyed){e.handshake(t,e.webPeerId);for(var n=e._torrent.pieces.length,o=new r(n),i=0;i<=n;i++)o.set(i,!0);e.bitfield(o)}}),e.once("interested",function(){i("interested"),e.unchoke()}),e.on("uninterested",function(){i("uninterested")}),e.on("choke",function(){i("choke")}),e.on("unchoke",function(){i("unchoke")}),e.on("bitfield",function(){i("bitfield")}),e.on("request",function(t,n,r,o){i("request pieceIndex=%d offset=%d length=%d",t,n,r),e.httpRequest(t,n,r,o)})},n.prototype.httpRequest=function(e,t,n,r){var s,l=this,f=e*l._torrent.pieceLength+t,h=f+n-1,p=l._torrent.files;if(1>=p.length)s=[{url:l.url,start:f,end:h}];else{var g=p.filter(function(e){return e.offset<=h&&e.offset+e.length>f});if(1>g.length)return r(new Error("Could not find file corresponnding to web seed range request"));s=g.map(function(e){var t=e.offset+e.length-1;return{url:l.url+("/"===l.url[l.url.length-1]?"":"/")+e.path,fileOffsetInRange:u(e.offset-f,0),start:u(f-e.offset,0),end:c(t,h-e.offset)}})}var m,v=0,y=!1;1<s.length&&(m=o.alloc(n)),s.forEach(function(o){function u(e,t){return 200>e.statusCode||300<=e.statusCode?(y=!0,r(new Error("Unexpected HTTP status code "+e.statusCode))):(i("Got data of length %d",t.length),void(1===s.length?r(null,t):(t.copy(m,o.fileOffsetInRange),++v===s.length&&r(null,m))))}var c=o.url,l=o.start,f=o.end;i("Requesting url=%s pieceIndex=%d offset=%d length=%d start=%d end=%d",c,e,t,n,l,f);var h={url:c,method:"GET",headers:{"user-agent":"WebTorrent/"+d+" (https://webtorrent.io)",range:"bytes="+l+"-"+f}};a.concat(h,function(e,t,n){return y?void 0:e?"undefined"==typeof window||c.startsWith(window.location.origin+"/")?(y=!0,r(e)):a.head(c,function(t,n){return y?void 0:t?(y=!0,r(t)):200>n.statusCode||300<=n.statusCode?(y=!0,r(new Error("Unexpected HTTP status code "+n.statusCode))):n.url===c?(y=!0,r(e)):(h.url=n.url,void a.concat(h,function(e,t,n){return y?void 0:e?(y=!0,r(e)):void u(t,n)}))}):void u(t,n)})})},n.prototype.destroy=function(){f.prototype.destroy.call(this),this._torrent=null}},{"../package.json":122,bitfield:13,"bittorrent-protocol":14,debug:29,inherits:40,"safe-buffer":88,"simple-get":90,"simple-sha1":92}],7:[function(e,t){var n=/^\[?([^\]]+)\]?:(\d+)$/,r={},o=0;t.exports=function(e){if(1e5==o&&t.exports.reset(),!r[e]){var i=n.exec(e);if(!i)throw new Error("invalid addr: "+e);r[e]=[i[1],+i[2]],o+=1}return r[e]},t.exports.reset=function(){r={},o=0}},{}],8:[function(e,t,n){"use strict";function r(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function o(e){return a[63&e>>18]+a[63&e>>12]+a[63&e>>6]+a[63&e]}function i(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],i.push(o(r));return i.join("")}n.byteLength=function(e){return 3*e.length/4-r(e)},n.toByteArray=function(e){var t,n,o,i,a,c=e.length;i=r(e),a=new u(3*c/4-i),n=0<i?c-4:c;var l=0;for(t=0;t<n;t+=4)o=s[e.charCodeAt(t)]<<18|s[e.charCodeAt(t+1)]<<12|s[e.charCodeAt(t+2)]<<6|s[e.charCodeAt(t+3)],a[l++]=255&o>>16,a[l++]=255&o>>8,a[l++]=255&o;return 2===i?(o=s[e.charCodeAt(t)]<<2|s[e.charCodeAt(t+1)]>>4,a[l++]=255&o):1===i&&(o=s[e.charCodeAt(t)]<<10|s[e.charCodeAt(t+1)]<<4|s[e.charCodeAt(t+2)]>>2,a[l++]=255&o>>8,a[l++]=255&o),a},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,o="",s=[],u=16383,c=0,l=n-r;c<l;c+=u)s.push(i(e,c,c+u>l?l:c+u));return 1==r?(t=e[n-1],o+=a[t>>2],o+=a[63&t<<4],o+="=="):2==r&&(t=(e[n-2]<<8)+e[n-1],o+=a[t>>10],o+=a[63&t>>4],o+=a[63&t<<2],o+="="),s.push(o),s.join("")};for(var a=[],s=[],u="undefined"==typeof Uint8Array?Array:Uint8Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,f=c.length;l<f;++l)a[l]=c[l],s[c.charCodeAt(l)]=l;s[45]=62,s[95]=63},{}],9:[function(e,t){(function(e){function n(e,t,n){for(var r,o=0,i=1,a=t;a<n;a++)if(58>(r=e[a])&&48<=r)o=10*o+(r-48);else if(a!==t||43!==r){if(a===t&&45===r){i=-1;continue}if(46===r)break;throw new Error("not a number: buffer["+a+"] = "+r)}return o*i}function r(t,n,o,i){return null==t||0===t.length?null:("number"!=typeof n&&null==i&&(i=n,n=void 0),"number"!=typeof o&&null==i&&(i=o,o=void 0),r.position=0,r.encoding=i||null,r.data=e.isBuffer(t)?t.slice(n,o):new e(t),r.bytes=r.data.length,r.next())}r.bytes=0,r.position=0,r.data=null,r.encoding=null,r.next=function(){switch(r.data[r.position]){case 100:return r.dictionary();case 108:return r.list();case 105:return r.integer();default:return r.buffer()}},r.find=function(e){for(var t=r.position,n=r.data.length,o=r.data;t<n;){if(o[t]===e)return t;t++}throw new Error('Invalid data: Missing delimiter "'+a(e)+'" [0x'+e.toString(16)+"]")},r.dictionary=function(){r.position++;for(var e={};101!==r.data[r.position];)e[r.buffer()]=r.next();return r.position++,e},r.list=function(){r.position++;for(var e=[];101!==r.data[r.position];)e.push(r.next());return r.position++,e},r.integer=function(){var e=r.find(101),t=n(r.data,r.position+1,e);return r.position+=e+1-r.position,t},r.buffer=function(){var e=r.find(58),t=n(r.data,r.position,e),o=++e+t;return r.position=o,r.encoding?r.data.toString(r.encoding,e,o):r.data.slice(e,o)},t.exports=r}).call(this,e("buffer").Buffer)},{buffer:23}],10:[function(e,t){function n(e,t,o){var i=[],a=null;return n._encode(i,e),a=r.concat(i),n.bytes=a.length,r.isBuffer(t)?(a.copy(t,o),t):a}var r=e("safe-buffer").Buffer;n.bytes=-1,n._floatConversionDetected=!1,n._encode=function(e,t){if(r.isBuffer(t))return e.push(r.from(t.length+":")),void e.push(t);if(null!=t)switch(typeof t){case"string":n.buffer(e,t);break;case"number":n.number(e,t);break;case"object":t.constructor===Array?n.list(e,t):n.dict(e,t);break;case"boolean":n.number(e,t?1:0)}};var o=r.from("e"),i=r.from("d"),a=r.from("l");n.buffer=function(e,t){e.push(r.from(r.byteLength(t)+":"+t))},n.number=function(e,t){var o=2147483648,i=(t/o<<0)*o+(t%o<<0);e.push(r.from("i"+i+"e")),i===t||n._floatConversionDetected||(n._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+t+'":','Bencoding only defines support for integers, value was converted to "'+i+'"'),console.trace())},n.dict=function(e,t){e.push(i);for(var r,a=0,s=Object.keys(t).sort(),u=s.length;a<u;a++)null==t[r=s[a]]||(n.buffer(e,r),n._encode(e,t[r]));e.push(o)},n.list=function(e,t){var r=0,i=t.length;for(e.push(a);r<i;r++)null!=t[r]&&n._encode(e,t[r]);e.push(o)},t.exports=n},{"safe-buffer":88}],11:[function(e,t){var n=t.exports;n.encode=e("./encode"),n.decode=e("./decode"),n.byteLength=n.encodingLength=function(e){return n.encode(e).length}},{"./decode":9,"./encode":10}],12:[function(e,t){t.exports=function(e,t,n,r,o){var i,a;if(void 0===r)r=0;else if(0>(r|=0)||r>=e.length)throw new RangeError("invalid lower bound");if(void 0===o)o=e.length-1;else if((o|=0)<r||o>=e.length)throw new RangeError("invalid upper bound");for(;r<=o;)if(0>(a=+n(e[i=r+(o-r>>1)],t,i,e)))r=i+1;else{if(!(0<a))return i;o=i-1}return~r}},{}],13:[function(e,t){(function(e){function n(e,t){return this instanceof n?(0===arguments.length&&(e=0),this.grow=t&&(isFinite(t.grow)&&r(t.grow)||t.grow)||0,("number"==typeof e||void 0===e)&&((e=new o(r(e))).fill&&!e._isBuffer&&e.fill(0)),void(this.buffer=e)):new n(e,t)}function r(e){var t=e>>3;return 0!=e%8&&t++,t}var o=void 0===e?"undefined"==typeof Int8Array?function(e){for(var t=Array(e),n=0;n<e;n++)t[n]=0}:Int8Array:e;n.prototype.get=function(e){var t=e>>3;return t<this.buffer.length&&!!(this.buffer[t]&128>>e%8)},n.prototype.set=function(e,t){var n=e>>3;t||1===arguments.length?(this.buffer.length<n+1&&this._grow(u(n+1,c(2*this.buffer.length,this.grow))),this.buffer[n]|=128>>e%8):n<this.buffer.length&&(this.buffer[n]&=~(128>>e%8))},n.prototype._grow=function(e){if(this.buffer.length<e&&e<=this.grow){var t=new o(e);if(t.fill&&t.fill(0),this.buffer.copy)this.buffer.copy(t,0);else for(var n=0;n<this.buffer.length;n++)t[n]=this.buffer[n];this.buffer=t}},void 0!==t&&(t.exports=n)}).call(this,e("buffer").Buffer)},{buffer:23}],14:[function(e,t){function n(e,t,n,r){this.piece=e,this.offset=t,this.length=n,this.callback=r}function r(){return this instanceof r?(p.Duplex.call(this),this._debugId=d(4).toString("hex"),this._debug("new wire"),this.peerId=null,this.peerIdBuffer=null,this.type=null,this.amChoking=!0,this.amInterested=!1,this.peerChoking=!0,this.peerInterested=!1,this.peerPieces=new s(0,{grow:g}),this.peerExtensions={},this.requests=[],this.peerRequests=[],this.extendedMapping={},this.peerExtendedMapping={},this.extendedHandshake={},this.peerExtendedHandshake={},this._ext={},this._nextExt=1,this.uploaded=0,this.downloaded=0,this.uploadSpeed=h(),this.downloadSpeed=h(),this._keepAliveInterval=null,this._timeout=null,this._timeoutMs=0,this.destroyed=!1,this._finished=!1,this._parserSize=0,this._parser=null,this._buffer=[],this._bufferSize=0,this.on("finish",this._onFinish),void this._parseHandshake()):new r}function o(e,t,n,r){for(var o,a=0;a<e.length;a++)if((o=e[a]).piece===t&&o.offset===n&&o.length===r)return i(e,a),o;return null}t.exports=r;var i=e("unordered-array-remove"),a=e("bencode"),s=e("bitfield"),u=e("safe-buffer").Buffer,c=e("debug")("bittorrent-protocol"),l=e("xtend"),f=e("inherits"),d=e("randombytes"),h=e("speedometer"),p=e("readable-stream"),g=4e5,m=u.from("BitTorrent protocol"),v=u.from([0,0,0,0]),y=u.from([0,0,0,1,0]),b=u.from([0,0,0,1,1]),_=u.from([0,0,0,1,2]),w=u.from([0,0,0,1,3]),C=[0,0,0,0,0,0,0,0],k=[0,0,0,3,9,0,0];f(r,p.Duplex),r.prototype.setKeepAlive=function(e){var t=this;t._debug("setKeepAlive %s",e),clearInterval(t._keepAliveInterval),!1===e||(t._keepAliveInterval=setInterval(function(){t.keepAlive()},55e3))},r.prototype.setTimeout=function(e,t){this._debug("setTimeout ms=%d unref=%s",e,t),this._clearTimeout(),this._timeoutMs=e,this._timeoutUnref=!!t,this._updateTimeout()},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this._debug("destroy"),this.emit("close"),this.end())},r.prototype.end=function(){this._debug("end"),this._onUninterested(),this._onChoke(),p.Duplex.prototype.end.apply(this,arguments)},r.prototype.use=function(e){function t(){}var n=e.prototype.name;if(!n)throw new Error('Extension class requires a "name" property on the prototype');this._debug("use extension.name=%s",n);var r=this._nextExt,o=new e(this);"function"!=typeof o.onHandshake&&(o.onHandshake=t),"function"!=typeof o.onExtendedHandshake&&(o.onExtendedHandshake=t),"function"!=typeof o.onMessage&&(o.onMessage=t),this.extendedMapping[r]=n,this._ext[n]=o,this[n]=o,this._nextExt+=1},r.prototype.keepAlive=function(){this._debug("keep-alive"),this._push(v)},r.prototype.handshake=function(e,t,n){var r,o;if("string"==typeof e?r=u.from(e,"hex"):e=(r=e).toString("hex"),"string"==typeof t?o=u.from(t,"hex"):t=(o=t).toString("hex"),20!==r.length||20!==o.length)throw new Error("infoHash and peerId MUST have length 20");this._debug("handshake i=%s p=%s exts=%o",e,t,n);var i=u.from(C);i[5]|=16,n&&n.dht&&(i[7]|=1),this._push(u.concat([m,i,r,o])),this._handshakeSent=!0,this.peerExtensions.extended&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()},r.prototype._sendExtendedHandshake=function(){var e=l(this.extendedHandshake);for(var t in e.m={},this.extendedMapping){var n=this.extendedMapping[t];e.m[n]=+t}this.extended(0,a.encode(e)),this._extendedHandshakeSent=!0},r.prototype.choke=function(){if(!this.amChoking){for(this.amChoking=!0,this._debug("choke");this.peerRequests.length;)this.peerRequests.pop();this._push(y)}},r.prototype.unchoke=function(){this.amChoking&&(this.amChoking=!1,this._debug("unchoke"),this._push(b))},r.prototype.interested=function(){this.amInterested||(this.amInterested=!0,this._debug("interested"),this._push(_))},r.prototype.uninterested=function(){this.amInterested&&(this.amInterested=!1,this._debug("uninterested"),this._push(w))},r.prototype.have=function(e){this._debug("have %d",e),this._message(4,[e],null)},r.prototype.bitfield=function(e){this._debug("bitfield"),u.isBuffer(e)||(e=e.buffer),this._message(5,[],e)},r.prototype.request=function(e,t,r,o){return o||(o=function(){}),this._finished?o(new Error("wire is closed")):this.peerChoking?o(new Error("peer is choking")):(this._debug("request index=%d offset=%d length=%d",e,t,r),this.requests.push(new n(e,t,r,o)),this._updateTimeout(),void this._message(6,[e,t,r],null))},r.prototype.piece=function(e,t,n){this._debug("piece index=%d offset=%d",e,t),this.uploaded+=n.length,this.uploadSpeed(n.length),this.emit("upload",n.length),this._message(7,[e,t],n)},r.prototype.cancel=function(e,t,n){this._debug("cancel index=%d offset=%d length=%d",e,t,n),this._callback(o(this.requests,e,t,n),new Error("request was cancelled"),null),this._message(8,[e,t,n],null)},r.prototype.port=function(e){this._debug("port %d",e);var t=u.from(k);t.writeUInt16BE(e,5),this._push(t)},r.prototype.extended=function(e,t){if(this._debug("extended ext=%s",e),"string"==typeof e&&this.peerExtendedMapping[e]&&(e=this.peerExtendedMapping[e]),"number"!=typeof e)throw new Error("Unrecognized extension: "+e);var n=u.from([e]),r=u.isBuffer(t)?t:a.encode(t);this._message(20,[],u.concat([n,r]))},r.prototype._read=function(){},r.prototype._message=function(e,t,n){var r=n?n.length:0,o=u.allocUnsafe(5+4*t.length);o.writeUInt32BE(o.length+r-4,0),o[4]=e;for(var i=0;i<t.length;i++)o.writeUInt32BE(t[i],5+4*i);this._push(o),n&&this._push(n)},r.prototype._push=function(e){return this._finished?void 0:this.push(e)},r.prototype._onKeepAlive=function(){this._debug("got keep-alive"),this.emit("keep-alive")},r.prototype._onHandshake=function(e,t,n){var r=e.toString("hex"),o=t.toString("hex");for(var i in this._debug("got handshake i=%s p=%s exts=%o",r,o,n),this.peerId=o,this.peerIdBuffer=t,this.peerExtensions=n,this.emit("handshake",r,o,n),this._ext)this._ext[i].onHandshake(r,o,n);n.extended&&this._handshakeSent&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()},r.prototype._onChoke=function(){for(this.peerChoking=!0,this._debug("got choke"),this.emit("choke");this.requests.length;)this._callback(this.requests.pop(),new Error("peer is choking"),null)},r.prototype._onUnchoke=function(){this.peerChoking=!1,this._debug("got unchoke"),this.emit("unchoke")},r.prototype._onInterested=function(){this.peerInterested=!0,this._debug("got interested"),this.emit("interested")},r.prototype._onUninterested=function(){this.peerInterested=!1,this._debug("got uninterested"),this.emit("uninterested")},r.prototype._onHave=function(e){this.peerPieces.get(e)||(this._debug("got have %d",e),this.peerPieces.set(e,!0),this.emit("have",e))},r.prototype._onBitField=function(e){this.peerPieces=new s(e),this._debug("got bitfield"),this.emit("bitfield",this.peerPieces)},r.prototype._onRequest=function(e,t,r){var i=this;if(!i.amChoking){i._debug("got request index=%d offset=%d length=%d",e,t,r);var a=function(n,a){return s===o(i.peerRequests,e,t,r)?n?i._debug("error satisfying request index=%d offset=%d length=%d (%s)",e,t,r,n.message):void i.piece(e,t,a):void 0},s=new n(e,t,r,a);i.peerRequests.push(s),i.emit("request",e,t,r,a)}},r.prototype._onPiece=function(e,t,n){this._debug("got piece index=%d offset=%d",e,t),this._callback(o(this.requests,e,t,n.length),null,n),this.downloaded+=n.length,this.downloadSpeed(n.length),this.emit("download",n.length),this.emit("piece",e,t,n)},r.prototype._onCancel=function(e,t,n){this._debug("got cancel index=%d offset=%d length=%d",e,t,n),o(this.peerRequests,e,t,n),this.emit("cancel",e,t,n)},r.prototype._onPort=function(e){this._debug("got port %d",e),this.emit("port",e)},r.prototype._onExtended=function(e,t){if(0===e){var n;try{n=a.decode(t)}catch(e){this._debug("ignoring invalid extended handshake: %s",e.message||e)}if(!n)return;if(this.peerExtendedHandshake=n,"object"==typeof n.m)for(var r in n.m)this.peerExtendedMapping[r]=+n.m[r].toString();for(r in this._ext)this.peerExtendedMapping[r]&&this._ext[r].onExtendedHandshake(this.peerExtendedHandshake);this._debug("got extended handshake"),this.emit("extended","handshake",this.peerExtendedHandshake)}else this.extendedMapping[e]&&(e=this.extendedMapping[e],this._ext[e]&&this._ext[e].onMessage(t)),this._debug("got extended message ext=%s",e),this.emit("extended",e,t)},r.prototype._onTimeout=function(){this._debug("request timed out"),this._callback(this.requests.shift(),new Error("request has timed out"),null),this.emit("timeout")},r.prototype._write=function(e,t,n){for(this._bufferSize+=e.length,this._buffer.push(e);this._bufferSize>=this._parserSize;){var r=1===this._buffer.length?this._buffer[0]:u.concat(this._buffer);this._bufferSize-=this._parserSize,this._buffer=this._bufferSize?[r.slice(this._parserSize)]:[],this._parser(r.slice(0,this._parserSize))}n(null)},r.prototype._callback=function(e,t,n){e&&(this._clearTimeout(),!this.peerChoking&&!this._finished&&this._updateTimeout(),e.callback(t,n))},r.prototype._clearTimeout=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)},r.prototype._updateTimeout=function(){var e=this;e._timeoutMs&&e.requests.length&&!e._timeout&&(e._timeout=setTimeout(function(){e._onTimeout()},e._timeoutMs),e._timeoutUnref&&e._timeout.unref&&e._timeout.unref())},r.prototype._parse=function(e,t){this._parserSize=e,this._parser=t},r.prototype._onMessageLength=function(e){var t=e.readUInt32BE(0);0<t?this._parse(t,this._onMessage):(this._onKeepAlive(),this._parse(4,this._onMessageLength))},r.prototype._onMessage=function(e){switch(this._parse(4,this._onMessageLength),e[0]){case 0:return this._onChoke();case 1:return this._onUnchoke();case 2:return this._onInterested();case 3:return this._onUninterested();case 4:return this._onHave(e.readUInt32BE(1));case 5:return this._onBitField(e.slice(1));case 6:return this._onRequest(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 7:return this._onPiece(e.readUInt32BE(1),e.readUInt32BE(5),e.slice(9));case 8:return this._onCancel(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 9:return this._onPort(e.readUInt16BE(1));case 20:return this._onExtended(e.readUInt8(1),e.slice(2));default:return this._debug("got unknown message"),this.emit("unknownmessage",e)}},r.prototype._parseHandshake=function(){var e=this;e._parse(1,function(t){var n=t.readUInt8(0);e._parse(n+48,function(t){var r=t.slice(0,n);return"BitTorrent protocol"===r.toString()?(t=t.slice(n),e._onHandshake(t.slice(8,28),t.slice(28,48),{dht:!!(1&t[7]),extended:!!(16&t[5])}),void e._parse(4,e._onMessageLength)):(e._debug("Error: wire not speaking BitTorrent protocol (%s)",r.toString()),void e.end())})})},r.prototype._onFinish=function(){for(this._finished=!0,this.push(null);this.read(););for(clearInterval(this._keepAliveInterval),this._parse(Number.MAX_VALUE,function(){});this.peerRequests.length;)this.peerRequests.pop();for(;this.requests.length;)this._callback(this.requests.pop(),new Error("wire was closed"),null)},r.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this._debugId+"] "+e[0],c.apply(null,e)}},{bencode:11,bitfield:13,debug:29,inherits:40,randombytes:72,"readable-stream":82,"safe-buffer":88,speedometer:94,"unordered-array-remove":111,xtend:119}],15:[function(e,t){(function(n){function r(e){function t(e){n.nextTick(function(){s.emit("warning",e)})}var s=this;if(!(s instanceof r))return new r(e);if(a.call(s),e||(e={}),!e.peerId)throw new Error("Option `peerId` is required");if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");if(!n.browser&&!e.port)throw new Error("Option `port` is required");s.peerId="string"==typeof e.peerId?e.peerId:e.peerId.toString("hex"),s._peerIdBuffer=o.from(s.peerId,"hex"),s._peerIdBinary=s._peerIdBuffer.toString("binary"),s.infoHash="string"==typeof e.infoHash?e.infoHash:e.infoHash.toString("hex"),s._infoHashBuffer=o.from(s.infoHash,"hex"),s._infoHashBinary=s._infoHashBuffer.toString("binary"),i("new client %s",s.infoHash),s.destroyed=!1,s._port=e.port,s._getAnnounceOpts=e.getAnnounceOpts,s._rtcConfig=e.rtcConfig,s._userAgent=e.userAgent,s._wrtc="function"==typeof e.wrtc?e.wrtc():e.wrtc;var u="string"==typeof e.announce?[e.announce]:null==e.announce?[]:e.announce;u=u.map(function(e){return"/"===(e=e.toString())[e.length-1]&&(e=e.substring(0,e.length-1)),e}),u=d(u);var c=!1!==s._wrtc&&(!!s._wrtc||f.WEBRTC_SUPPORT);s._trackers=u.map(function(e){var n=h.parse(e).protocol;return"http:"!==n&&"https:"!==n||"function"!=typeof g?"udp:"===n&&"function"==typeof m?new m(s,e):"ws:"!==n&&"wss:"!==n||!c?(t(new Error("Unsupported tracker protocol: "+e)),null):"ws:"===n&&"undefined"!=typeof window&&"https:"===window.location.protocol?(t(new Error("Unsupported tracker protocol: "+e)),null):new v(s,e):new g(s,e)}).filter(Boolean)}t.exports=r;var o=e("safe-buffer").Buffer,i=e("debug")("bittorrent-tracker:client"),a=e("events").EventEmitter,s=e("xtend"),u=e("inherits"),c=e("once"),l=e("run-parallel"),f=e("simple-peer"),d=e("uniq"),h=e("url"),p=e("./lib/common"),g=e("./lib/client/http-tracker"),m=e("./lib/client/udp-tracker"),v=e("./lib/client/websocket-tracker");u(r,a),r.scrape=function(e,t){if(t=c(t),!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");var n=new r(s(e,{infoHash:Array.isArray(e.infoHash)?e.infoHash[0]:e.infoHash,peerId:o.from("01234567890123456789"),port:6881}));n.once("error",t),n.once("warning",t);var i=Array.isArray(e.infoHash)?e.infoHash.length:1,a={};return n.on("scrape",function(e){if(i-=1,a[e.infoHash]=e,0===i){n.destroy();var r=Object.keys(a);1===r.length?t(null,a[r[0]]):t(null,a)}}),e.infoHash=Array.isArray(e.infoHash)?e.infoHash.map(function(e){return o.from(e,"hex")}):o.from(e.infoHash,"hex"),n.scrape({infoHash:e.infoHash}),n},r.prototype.start=function(e){var t=this;i("send `start`"),(e=t._defaultAnnounceOpts(e)).event="started",t._announce(e),t._trackers.forEach(function(e){e.setInterval()})},r.prototype.stop=function(e){i("send `stop`"),(e=this._defaultAnnounceOpts(e)).event="stopped",this._announce(e)},r.prototype.complete=function(e){i("send `complete`"),e||(e={}),(e=this._defaultAnnounceOpts(e)).event="completed",this._announce(e)},r.prototype.update=function(e){i("send `update`"),(e=this._defaultAnnounceOpts(e)).event&&delete e.event,this._announce(e)},r.prototype._announce=function(e){this._trackers.forEach(function(t){t.announce(e)})},r.prototype.scrape=function(e){i("send `scrape`"),e||(e={}),this._trackers.forEach(function(t){t.scrape(e)})},r.prototype.setInterval=function(e){i("setInterval %d",e),this._trackers.forEach(function(t){t.setInterval(e)})},r.prototype.destroy=function(e){var t=this;if(!t.destroyed){t.destroyed=!0,i("destroy");var n=t._trackers.map(function(e){return function(t){e.destroy(t)}});l(n,e),t._trackers=[],t._getAnnounceOpts=null}},r.prototype._defaultAnnounceOpts=function(e){return e||(e={}),null==e.numwant&&(e.numwant=p.DEFAULT_ANNOUNCE_PEERS),null==e.uploaded&&(e.uploaded=0),null==e.downloaded&&(e.downloaded=0),this._getAnnounceOpts&&(e=s(e,this._getAnnounceOpts())),e}}).call(this,e("_process"))},{"./lib/client/http-tracker":21,"./lib/client/udp-tracker":21,"./lib/client/websocket-tracker":17,"./lib/common":18,_process:65,debug:29,events:33,inherits:40,once:59,"run-parallel":86,"safe-buffer":88,"simple-peer":91,uniq:110,url:112,xtend:119}],16:[function(e,t){function n(e,t){var n=this;r.call(n),n.client=e,n.announceUrl=t,n.interval=null,n.destroyed=!1}t.exports=n;var r=e("events").EventEmitter;e("inherits")(n,r),n.prototype.setInterval=function(e){var t=this;null==e&&(e=t.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(t.interval),e&&(t.interval=setInterval(function(){t.announce(t.client._defaultAnnounceOpts())},e),t.interval.unref&&t.interval.unref())}},{events:33,inherits:40}],17:[function(e,t){function n(e,t){var n=this;p.call(n,e,t),a("new websocket tracker %s",t),n.peers={},n.socket=null,n.reconnecting=!1,n.retries=0,n.reconnectTimer=null,n.expectingResponse=!1,n._openSocket()}function r(){}t.exports=n;var a=e("debug")("bittorrent-tracker:websocket-tracker"),s=e("xtend"),u=e("inherits"),l=e("simple-peer"),f=e("randombytes"),d=e("simple-websocket"),h=e("../common"),p=e("./tracker"),g={};u(n,p),n.prototype.DEFAULT_ANNOUNCE_INTERVAL=3e4,n.prototype.announce=function(e){var t=this;if(!t.destroyed&&!t.reconnecting){if(!t.socket.connected)return void t.socket.once("connect",function(){t.announce(e)});var n=s(e,{action:"announce",info_hash:t.client._infoHashBinary,peer_id:t.client._peerIdBinary});if(t._trackerId&&(n.trackerid=t._trackerId),"stopped"===e.event||"completed"===e.event)t._send(n);else{var r=c(e.numwant,10);t._generateOffers(r,function(e){n.numwant=r,n.offers=e,t._send(n)})}}},n.prototype.scrape=function(e){var t=this;if(!t.destroyed&&!t.reconnecting){if(!t.socket.connected)return void t.socket.once("connect",function(){t.scrape(e)});var n=Array.isArray(e.infoHash)&&0<e.infoHash.length?e.infoHash.map(function(e){return e.toString("binary")}):e.infoHash&&e.infoHash.toString("binary")||t.client._infoHashBinary;t._send({action:"scrape",info_hash:n})}},n.prototype.destroy=function(e){function t(){s&&(clearTimeout(s),s=null),a.removeListener("data",t),a.destroy(),a=null}var n=this;if(e||(e=r),n.destroyed)return e(null);for(var o in n.destroyed=!0,clearInterval(n.interval),clearTimeout(n.reconnectTimer),n.peers){var i=n.peers[o];clearTimeout(i.trackerTimeout),i.destroy()}if(n.peers=null,n.socket&&(n.socket.removeListener("connect",n._onSocketConnectBound),n.socket.removeListener("data",n._onSocketDataBound),n.socket.removeListener("close",n._onSocketCloseBound),n.socket.removeListener("error",n._onSocketErrorBound),n.socket=null),n._onSocketConnectBound=null,n._onSocketErrorBound=null,n._onSocketDataBound=null,n._onSocketCloseBound=null,g[n.announceUrl]&&(g[n.announceUrl].consumers-=1),0<g[n.announceUrl].consumers)return e();var a=g[n.announceUrl];if(delete g[n.announceUrl],a.on("error",r),a.once("close",e),!n.expectingResponse)return t();var s=setTimeout(t,h.DESTROY_TIMEOUT);a.once("data",t)},n.prototype._openSocket=function(){var e=this;e.destroyed=!1,e.peers||(e.peers={}),e._onSocketConnectBound=function(){e._onSocketConnect()},e._onSocketErrorBound=function(t){e._onSocketError(t)},e._onSocketDataBound=function(t){e._onSocketData(t)},e._onSocketCloseBound=function(){e._onSocketClose()},e.socket=g[e.announceUrl],e.socket?g[e.announceUrl].consumers+=1:(e.socket=g[e.announceUrl]=new d(e.announceUrl),e.socket.consumers=1,e.socket.once("connect",e._onSocketConnectBound)),e.socket.on("data",e._onSocketDataBound),e.socket.once("close",e._onSocketCloseBound),e.socket.once("error",e._onSocketErrorBound)},n.prototype._onSocketConnect=function(){var e=this;e.destroyed||e.reconnecting&&(e.reconnecting=!1,e.retries=0,e.announce(e.client._defaultAnnounceOpts()))},n.prototype._onSocketData=function(e){var t=this;if(!t.destroyed){t.expectingResponse=!1;try{e=JSON.parse(e)}catch(e){return void t.client.emit("warning",new Error("Invalid tracker response"))}"announce"===e.action?t._onAnnounceResponse(e):"scrape"===e.action?t._onScrapeResponse(e):t._onSocketError(new Error("invalid action in WS response: "+e.action))}},n.prototype._onAnnounceResponse=function(e){var t=this;if(e.info_hash===t.client._infoHashBinary){if(!e.peer_id||e.peer_id!==t.client._peerIdBinary){a("received %s from %s for %s",JSON.stringify(e),t.announceUrl,t.client.infoHash);var n=e["failure reason"];if(n)return t.client.emit("warning",new Error(n));var r=e["warning message"];r&&t.client.emit("warning",new Error(r));var o=e.interval||e["min interval"];o&&t.setInterval(1e3*o);var i,s=e["tracker id"];if(s&&(t._trackerId=s),null!=e.complete){var u=Object.assign({},e,{announce:t.announceUrl,infoHash:h.binaryToHex(e.info_hash)});t.client.emit("update",u)}if(e.offer&&e.peer_id&&(a("creating peer (from remote offer)"),(i=t._createPeer()).id=h.binaryToHex(e.peer_id),i.once("signal",function(n){var r={action:"announce",info_hash:t.client._infoHashBinary,peer_id:t.client._peerIdBinary,to_peer_id:e.peer_id,answer:n,offer_id:e.offer_id};t._trackerId&&(r.trackerid=t._trackerId),t._send(r)}),i.signal(e.offer),t.client.emit("peer",i)),e.answer&&e.peer_id){var c=h.binaryToHex(e.offer_id);(i=t.peers[c])?(i.id=h.binaryToHex(e.peer_id),i.signal(e.answer),t.client.emit("peer",i),clearTimeout(i.trackerTimeout),i.trackerTimeout=null,delete t.peers[c]):a("got unexpected answer: "+JSON.stringify(e.answer))}}}else a("ignoring websocket data from %s for %s (looking for %s: reused socket)",t.announceUrl,h.binaryToHex(e.info_hash),t.client.infoHash)},n.prototype._onScrapeResponse=function(e){var t=this;e=e.files||{};var n=Object.keys(e);return 0===n.length?void t.client.emit("warning",new Error("invalid scrape response")):void n.forEach(function(n){var r=Object.assign(e[n],{announce:t.announceUrl,infoHash:h.binaryToHex(n)});t.client.emit("scrape",r)})},n.prototype._onSocketClose=function(){var e=this;e.destroyed||(e.destroy(),e._startReconnectTimer())},n.prototype._onSocketError=function(e){var t=this;t.destroyed||(t.destroy(),t.client.emit("warning",e),t._startReconnectTimer())},n.prototype._startReconnectTimer=function(){var e=this,t=i(3e4*Math.random())+c(15e3*o(2,e.retries),18e5);e.reconnecting=!0,clearTimeout(e.reconnectTimer),e.reconnectTimer=setTimeout(function(){e.retries++,e._openSocket()},t),e.reconnectTimer.unref&&e.reconnectTimer.unref(),a("reconnecting socket in %s ms",t)},n.prototype._send=function(e){var t=this;if(!t.destroyed){t.expectingResponse=!0;var n=JSON.stringify(e);a("send %s",n),t.socket.send(n)}},n.prototype._generateOffers=function(e,t){function n(){var e=f(20).toString("hex");a("creating peer (from _generateOffers)");var t=o.peers[e]=o._createPeer({initiator:!0});t.once("signal",function(t){i.push({offer:t,offer_id:h.hexToBinary(e)}),r()}),t.trackerTimeout=setTimeout(function(){a("tracker timeout: destroying peer"),t.trackerTimeout=null,delete o.peers[e],t.destroy()},5e4),t.trackerTimeout.unref&&t.trackerTimeout.unref()}function r(){i.length===e&&(a("generated %s offers",e),t(i))}var o=this,i=[];a("generating %s offers",e);for(var s=0;s<e;++s)n();r()},n.prototype._createPeer=function(e){function t(e){n.client.emit("warning",new Error("Connection error: "+e.message)),r.destroy()}var n=this;e=Object.assign({trickle:!1,config:n.client._rtcConfig,wrtc:n.client._wrtc},e);var r=new l(e);return r.once("error",t),r.once("connect",function e(){r.removeListener("error",t),r.removeListener("connect",e)}),r}},{"../common":18,"./tracker":16,debug:29,inherits:40,randombytes:72,"simple-peer":91,"simple-websocket":93,xtend:119}],18:[function(e,t,n){var r=e("safe-buffer").Buffer,o=e("xtend/mutable");n.DEFAULT_ANNOUNCE_PEERS=50,n.MAX_ANNOUNCE_PEERS=82,n.binaryToHex=function(e){return"string"!=typeof e&&(e+=""),r.from(e,"binary").toString("hex")},n.hexToBinary=function(e){return"string"!=typeof e&&(e+=""),r.from(e,"hex").toString("binary")},o(n,e("./common-node"))},{"./common-node":21,"safe-buffer":88,"xtend/mutable":120}],19:[function(e,t){(function(e){t.exports=function(t,n){if("undefined"==typeof Blob||!(t instanceof Blob))throw new Error("first argument must be a Blob");if("function"!=typeof n)throw new Error("second argument must be a function");var r=new FileReader;r.addEventListener("loadend",function t(o){r.removeEventListener("loadend",t,!1),o.error?n(o.error):n(null,new e(r.result))},!1),r.readAsArrayBuffer(t)}}).call(this,e("buffer").Buffer)},{buffer:23}],20:[function(e,t){(function(n){function r(e,t){return this instanceof r?(i.call(this),!t&&(t={}),"object"==typeof e&&(e=(t=e).size),this.size=e||512,this._zeroPadding=!t.nopad&&a(t.zeroPadding,!0),this._buffered=[],void(this._bufferedBytes=0)):new r(e,t)}var o=e("inherits"),i=e("readable-stream").Transform,a=e("defined");t.exports=r,o(r,i),r.prototype._transform=function(e,t,r){for(this._bufferedBytes+=e.length,this._buffered.push(e);this._bufferedBytes>=this.size;){var o=n.concat(this._buffered);this._bufferedBytes-=this.size,this.push(o.slice(0,this.size)),this._buffered=[o.slice(this.size,o.length)]}r()},r.prototype._flush=function(){if(this._bufferedBytes&&this._zeroPadding){var e=new n(this.size-this._bufferedBytes);e.fill(0),this._buffered.push(e),this.push(n.concat(this._buffered)),this._buffered=null}else this._bufferedBytes&&(this.push(n.concat(this._buffered)),this._buffered=null);this.push(null)}}).call(this,e("buffer").Buffer)},{buffer:23,defined:31,inherits:40,"readable-stream":82}],21:[function(){},{}],22:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{dup:21}],23:[function(e,t,n){"use strict";function r(e){if(e>W)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=i.prototype,t}function i(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(e)}return s(e,t,n)}function s(e,t,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return e instanceof ArrayBuffer?function(e,t,n){if(0>t||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");var r;return(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=i.prototype,r}(e,t,n):"string"==typeof e?function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!i.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=0|h(e,t),o=r(n),a=o.write(e,t);return a!==n&&(o=o.slice(0,a)),o}(e,t):function(e){if(i.isBuffer(e)){var t=0|d(e.length),n=r(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(e){if(j(e)||"length"in e)return"number"!=typeof e.length||F(e.length)?r(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative')}function l(e){return u(e),r(0>e?0:0|d(e))}function f(e){for(var t=0>e.length?0:0|d(e.length),n=r(t),o=0;o<t;o+=1)n[o]=255&e[o];return n}function d(e){if(e>=W)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+W.toString(16)+" bytes");return 0|e}function h(e,t){if(i.isBuffer(e))return e.length;if(j(e)||e instanceof ArrayBuffer)return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return D(e).length;default:if(r)return M(e).length;t=(""+t).toLowerCase(),r=!0}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),F(n=+n)&&(n=o?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(0>n){if(!o)return-1;n=0}if("string"==typeof t&&(t=i.from(t,r)),i.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,o){function i(e,t){return 1==s?e[t]:e.readUInt16BE(t*s)}var a,s=1,u=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=(r+"").toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(2>e.length||2>t.length)return-1;s=2,u/=2,c/=2,n/=2}if(o){var l=-1;for(a=n;a<u;a++)if(i(e,a)!==i(t,-1==l?0:a-l))-1!=l&&(a-=a-l),l=-1;else if(-1==l&&(l=a),a-l+1===c)return l*s}else for(n+c>u&&(n=u-c),a=n;0<=a;a--){for(var f=!0,d=0;d<c;d++)if(i(e,a+d)!==i(t,d)){f=!1;break}if(f)return a}return-1}function v(e,t,n,r){n=+n||0;var o=e.length-n;r?(r=+r)>o&&(r=o):r=o;var i=t.length;if(0!=i%2)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a,s=0;s<r;++s){if(F(a=parseInt(t.substr(2*s,2),16)))return s;e[n+s]=a}return s}function y(e,t,n,r){return N(M(t,e.length-n),e,n,r)}function b(e,t,n,r){return N(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return b(e,t,n,r)}function w(e,t,n,r){return N(D(t),e,n,r)}function C(e,t,n,r){return N(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!(0>(t-=2));++a)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?H.fromByteArray(e):H.fromByteArray(e.slice(t,n))}function E(e,t,n){n=c(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,u,l=e[o],f=null,d=239<l?4:223<l?3:191<l?2:1;if(o+d<=n)1==d?128>l&&(f=l):2==d?128==(192&(i=e[o+1]))&&(127<(u=(31&l)<<6|63&i)&&(f=u)):3==d?(i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(2047<(u=(15&l)<<12|(63&i)<<6|63&a)&&(55296>u||57343<u)&&(f=u))):4==d&&(i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(65535<(u=(15&l)<<18|(63&i)<<12|(63&a)<<6|63&s)&&1114112>u&&(f=u)));null===f?(f=65533,d=1):65535<f&&(f-=65536,r.push(55296|1023&f>>>10),f=56320|1023&f),r.push(f),o+=d}return S(r)}function S(e){var t=e.length;if(t<=q)return a.apply(String,e);for(var n="",r=0;r<t;)n+=a.apply(String,e.slice(r,r+=q));return n}function x(e,t,n){var r="";n=c(e.length,n);for(var o=t;o<n;++o)r+=a(127&e[o]);return r}function T(e,t,n){var r="";n=c(e.length,n);for(var o=t;o<n;++o)r+=a(e[o]);return r}function A(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=U(e[i]);return o}function P(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=a(r[i]+256*r[i+1]);return o}function O(e,t,n){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,o,a){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function L(e,t,n,r,o){return t=+t,n>>>=0,o||I(e,0,n,4),K.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,o){return t=+t,n>>>=0,o||I(e,0,n,8),K.write(e,t,n,r,52,8),n+8}function U(e){return 16>e?"0"+e.toString(16):e.toString(16)}function M(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&57344>n){if(!o){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&i.push(239,191,189);continue}o=n;continue}if(56320>n){-1<(t-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,128>n){if(0>(t-=1))break;i.push(n)}else if(2048>n){if(0>(t-=2))break;i.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(t-=3))break;i.push(224|n>>12,128|63&n>>6,128|63&n)}else{if(!(1114112>n))throw new Error("Invalid code point");if(0>(t-=4))break;i.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}}return i}function D(e){return H.toByteArray(function(e){if(2>(e=e.trim().replace(z,"")).length)return"";for(;0!=e.length%4;)e+="=";return e}(e))}function N(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function j(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function F(e){return e!=e}var H=e("base64-js"),K=e("ieee754");n.Buffer=i,n.SlowBuffer=function(e){return+e!=e&&(e=0),i.alloc(+e)},n.INSPECT_MAX_BYTES=50;var W=2147483647;n.kMaxLength=W,i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(e,t,n){return s(e,t,n)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(e,t,n){return function(e,t,n){return u(e),0>=e?r(e):void 0===t?r(e):"string"==typeof n?r(e).fill(t,n):r(e).fill(t)}(e,t,n)},i.allocUnsafe=function(e){return l(e)},i.allocUnsafeSlow=function(e){return l(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,a=c(n,r);o<a;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=i.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},i.byteLength=h,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},i.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):function(e,t,n){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e,t,n,r,o){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),0>t||n>e.length||0>r||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),u=c(a,s),l=this.slice(r,o),f=e.slice(t,n),d=0;d<u;++d)if(l[d]!==f[d]){a=l[d],s=f[d];break}return a<s?-1:s<a?1:0},i.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},i.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},i.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},i.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return _(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var q=4096;i.prototype.slice=function(e,t){var n=this.length;0>(e=~~e)?0>(e+=n)&&(e=0):e>n&&(e=n),0>(t=void 0===t?n:~~t)?0>(t+=n)&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=i.prototype,r},i.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},i.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var r=this[e+--t],o=1;0<t&&(o*=256);)r+=this[e+--t]*o;return r},i.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=o(2,8*t)),r},i.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);for(var r=t,i=1,a=this[e+--r];0<r&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=o(2,8*t)),a},i.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),K.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),K.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),K.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),K.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||R(this,e,t,n,o(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=255&e/i;return t+n},i.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||R(this,e,t,n,o(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;0<=--i&&(a*=256);)this[t+i]=255&e/a;return t+n},i.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},i.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=o(2,8*n-1);R(this,e,t,n,i-1,-i)}var a=0,s=1,u=0;for(this[t]=255&e;++a<n&&(s*=256);)0>e&&0==u&&0!==this[t+a-1]&&(u=1),this[t+a]=255&(e/s>>0)-u;return t+n},i.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=o(2,8*n-1);R(this,e,t,n,i-1,-i)}var a=n-1,s=1,u=0;for(this[t+a]=255&e;0<=--a&&(s*=256);)0>e&&0==u&&0!==this[t+a+1]&&(u=1),this[t+a]=255&(e/s>>0)-u;return t+n},i.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},i.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;0<=o;--o)e[o+t]=this[o+n];else if(1e3>i)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},i.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);256>o&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=i.isBuffer(e)?e:new i(e,r),u=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%u]}return this};var z=/[^+/0-9A-Za-z-_]/g},{"base64-js":8,ieee754:38}],24:[function(e,t){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],25:[function(e,t){function n(e,t,o){var a=this;if(!(a instanceof n))return new n(e,t,o);if(i.Writable.call(a,o),o||(o={}),!e||!e.put||!e.get)throw new Error("First argument must be an abstract-chunk-store compliant store");if(!(t=+t))throw new Error("Second argument must be a chunk length");a._blockstream=new r(t,{zeroPadding:!1}),a._blockstream.on("data",function(t){a.destroyed||(e.put(s,t),s+=1)}).on("error",function(e){a.destroy(e)});var s=0;a.on("finish",function(){this._blockstream.end()})}t.exports=n;var r=e("block-stream2"),o=e("inherits"),i=e("readable-stream");o(n,i.Writable),n.prototype._write=function(e,t,n){this._blockstream.write(e,t,n)},n.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e),this.emit("close"))}},{"block-stream2":20,inherits:40,"readable-stream":82}],26:[function(t,n){n.exports=function(t,n,r){for(var o,i,a,s=1/0,u=0,c=n.length-1;u<=c&&(0>(a=n[o=u+(c-u>>1)]-t)?u=o+1:0<a&&(c=o-1),(a=e(a))<s&&(s=a,i=o),n[o]!==t););return r?i:n[i]}},{}],27:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":42}],28:[function(e,n){(function(t,r,o){function i(e,n,r){function i(){x(e.map(function(e){return function(t){var n={};if(d(e))n.getStream=function(e){return function(){return new b(e)}}(e),n.length=e.size;else if(o.isBuffer(e))n.getStream=function(e){return function(){var t=new A.PassThrough;return t.end(e),t}}(e),n.length=e.length;else{if(!h(e)){if("string"==typeof e){if("function"!=typeof w.stat)throw new Error("filesystem paths do not work in the browser");return void function(e,t,n){!function e(t,n,r){w.stat(t,function(o,i){return o?r(o):void(i.isDirectory()?w.readdir(t,function(o,i){return o?r(o):void x(i.filter(u).filter(k.not).map(function(r){return function(o){e(v.join(t,r),n,o)}}),r)}):i.isFile()&&n(t,r))})}(e,a,function(r,o){return r?n(r):(o=Array.isArray(o)?_(o):[o],e=v.normalize(e),t&&(e=e.slice(0,e.lastIndexOf(v.sep)+1)),e[e.length-1]!==v.sep&&(e+=v.sep),o.forEach(function(t){t.getStream=function(e){return function(){return w.createReadStream(e)}}(t.path),t.path=t.path.replace(e,"").split(v.sep)}),void n(null,o))})}(e,1<c||l,t)}throw new Error("invalid input type")}n.getStream=function(e,t){return function(){var n=new A.Transform;return n._transform=function(e,n,r){t.length+=e.length,this.push(e),r()},e.pipe(n),n}}(e,n),n.length=0}n.path=e.path,t(null,n)}}),function(e,t){return e?r(e):(t=_(t),void r(null,t,l))})}if(Array.isArray(e)&&0===e.length)throw new Error("invalid input type");(function(e){return"undefined"!=typeof FileList&&e instanceof FileList})(e)&&(e=Array.prototype.slice.call(e)),Array.isArray(e)||(e=[e]),1!==(e=e.map(function(e){return d(e)&&"string"==typeof e.path&&"function"==typeof w.stat?e.path:e})).length||"string"==typeof e[0]||e[0].name||(e[0].name=n.name);var s=null;e.forEach(function(t,n){if("string"!=typeof t){var r=t.fullPath||t.name;r||(r="Unknown File "+(n+1),t.unknownName=!0),t.path=r.split("/"),t.path[0]||t.path.shift(),2>t.path.length?s=null:0===n&&1<e.length?s=t.path[0]:t.path[0]!==s&&(s=null)}}),e=e.filter(function(e){if("string"==typeof e)return!0;var t=e.path[e.path.length-1];return u(t)&&k.not(t)}),s&&e.forEach(function(e){var t=(o.isBuffer(e)||h(e))&&!e.path;"string"==typeof e||t||e.path.shift()}),!n.name&&s&&(n.name=s),n.name||e.some(function(e){return"string"==typeof e?(n.name=v.basename(e),!0):e.unknownName?void 0:(n.name=e.path[e.path.length-1],!0)}),n.name||(n.name="Unnamed Torrent "+Date.now());var c=e.reduce(function(e,t){return e+ +("string"==typeof t)},0),l=1===e.length;if(1===e.length&&"string"==typeof e[0]){if("function"!=typeof w.stat)throw new Error("filesystem paths do not work in the browser");C(e[0],function(e,t){return e?r(e):(l=t,void i())})}else t.nextTick(function(){i()})}function a(e,t){t=S(t),w.stat(e,function(n,r){if(n)return t(n);var o={length:r.size,path:e};t(null,o)})}function u(e){return"."!==e[0]}function c(e,t,n){function r(e){l+=e.length;var t=h;T(e,function(e){c[t]=e,d-=1,u()}),d+=1,h+=1}function i(){p=!0,u()}function a(e){s(),n(e)}function s(){m.removeListener("error",a),v.removeListener("data",r),v.removeListener("end",i),v.removeListener("error",a)}function u(){p&&0==d&&(s(),n(null,o.from(c.join(""),"hex"),l))}n=S(n);var c=[],l=0,f=e.map(function(e){return e.getStream}),d=0,h=0,p=!1,m=new E(f),v=new g(t,{zeroPadding:!1});m.on("error",a),m.pipe(v).on("data",r).on("end",i).on("error",a)}function l(e,t,o){var i=t.announceList;i||("string"==typeof t.announce?i=[[t.announce]]:Array.isArray(t.announce)&&(i=t.announce.map(function(e){return[e]}))),i||(i=[]),r.WEBTORRENT_ANNOUNCE&&("string"==typeof r.WEBTORRENT_ANNOUNCE?i.push([[r.WEBTORRENT_ANNOUNCE]]):Array.isArray(r.WEBTORRENT_ANNOUNCE)&&(i=i.concat(r.WEBTORRENT_ANNOUNCE.map(function(e){return[e]})))),void 0===t.announce&&void 0===t.announceList&&(i=i.concat(n.exports.announceList)),"string"==typeof t.urlList&&(t.urlList=[t.urlList]);var a={info:{name:t.name},"creation date":s((+t.creationDate||Date.now())/1e3),encoding:"UTF-8"};0!==i.length&&(a.announce=i[0][0],a["announce-list"]=i),void 0!==t.comment&&(a.comment=t.comment),void 0!==t.createdBy&&(a["created by"]=t.createdBy),void 0!==t.private&&(a.info.private=+t.private),void 0!==t.sslCert&&(a.info["ssl-cert"]=t.sslCert),void 0!==t.urlList&&(a["url-list"]=t.urlList);var u=t.pieceLength||m(e.reduce(f,0));a.info["piece length"]=u,c(e,u,function(n,r,i){return n?o(n):(a.info.pieces=r,e.forEach(function(e){delete e.getStream}),t.singleFileTorrent?a.info.length=i:a.info.files=e,void o(null,p.encode(a)))})}function f(e,t){return e+t.length}function d(e){return"undefined"!=typeof Blob&&e instanceof Blob}function h(e){return"object"==typeof e&&null!=e&&"function"==typeof e.pipe}n.exports=function e(t,n,r){return"function"==typeof n?e(t,null,n):void i(t,n=n?y(n):{},function(e,t,o){return e?r(e):(n.singleFileTorrent=o,void l(t,n,r))})},n.exports.parseInput=function e(t,n,r){return"function"==typeof n?e(t,null,n):void i(t,n=n?y(n):{},r)},n.exports.announceList=[["udp://tracker.leechers-paradise.org:6969"],["udp://tracker.coppersurfer.tk:6969"],["udp://tracker.opentrackr.org:1337"],["udp://explodie.org:6969"],["udp://tracker.empire-js.us:1337"],["wss://tracker.btorrent.xyz"],["wss://tracker.openwebtorrent.com"],["wss://tracker.fastcast.nz"]];var p=e("bencode"),g=e("block-stream2"),m=e("piece-length"),v=e("path"),y=e("xtend"),b=e("filestream/read"),_=e("flatten"),w=e("fs"),C=e("is-file"),k=e("junk"),E=e("multistream"),S=e("once"),x=e("run-parallel"),T=e("simple-sha1"),A=e("readable-stream")}).call(this,e("_process"),void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t,e("buffer").Buffer)},{_process:65,bencode:11,"block-stream2":20,buffer:23,"filestream/read":34,flatten:35,fs:22,"is-file":43,junk:46,multistream:57,once:59,path:62,"piece-length":63,"readable-stream":82,"run-parallel":86,"simple-sha1":92,xtend:119}],29:[function(e,t,n){(function(r){function o(){var e;try{e=n.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(n=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),t){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"===e||"%c"===e&&(i=++o)}),e.splice(i,0,r)}},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=o,n.useColors=function(){return"undefined"!=typeof window&&window.process&&"renderer"===window.process.type||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(o())}).call(this,e("_process"))},{"./debug":30,_process:65}],30:[function(t,n,r){function o(t){var n,o=0;for(n in t)o=(o<<5)-o+t.charCodeAt(n),o|=0;return r.colors[e(o)%r.colors.length]}function i(e){function t(){if(t.enabled){var e=t,n=+new Date,o=n-(a||n);e.diff=o,e.prev=a,e.curr=n,a=n;for(var i=Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=r.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var u=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;u++;var o=r.formatters[n];if("function"==typeof o){var a=i[u];t=o.call(e,a),i.splice(u,1),u--}return t}),r.formatArgs.call(e,i),(t.log||r.log||console.log.bind(console)).apply(e,i)}}return t.namespace=e,t.enabled=r.enabled(e),t.useColors=r.useColors(),t.color=o(e),"function"==typeof r.init&&r.init(t),t}var a;(r=n.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){r.save(e),r.names=[],r.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,o=0;o<n;o++)t[o]&&("-"===(e=t[o].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))},r.enabled=function(e){var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=t("ms"),r.names=[],r.skips=[],r.formatters={}},{ms:56}],31:[function(e,t){t.exports=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}},{}],32:[function(e,t){var n=e("once"),r=function(){},o=function(e,t,i){if("function"==typeof t)return o(e,null,t);t||(t={}),i=n(i||r);var a=e._writableState,s=e._readableState,u=t.readable||!1!==t.readable&&e.readable,c=t.writable||!1!==t.writable&&e.writable,l=function(){e.writable||f()},f=function(){c=!1,u||i.call(e)},d=function(){u=!1,c||i.call(e)},h=function(t){i.call(e,t?new Error("exited with error code: "+t):null)},p=function(){return(!u||s&&s.ended)&&(!c||a&&a.ended)?void 0:i.call(e,new Error("premature close"))},g=function(){e.req.on("finish",f)};return function(e){return e.setHeader&&"function"==typeof e.abort}(e)?(e.on("complete",f),e.on("abort",p),e.req?g():e.on("request",g)):c&&!a&&(e.on("end",l),e.on("close",l)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",h),e.on("end",d),e.on("finish",f),!1!==t.error&&e.on("error",i),e.on("close",p),function(){e.removeListener("complete",f),e.removeListener("abort",p),e.removeListener("request",g),e.req&&e.req.removeListener("finish",f),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",f),e.removeListener("exit",h),e.removeListener("end",d),e.removeListener("error",i),e.removeListener("close",p)}};t.exports=o},{once:59}],33:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(i(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),a=(c=n.slice()).length,u=0;u<a;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var a;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&((a=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&0<a&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;0<s--;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],34:[function(e,t){function n(e,t){var o=this;return this instanceof n?(t=t||{},r.call(this,t),this._offset=0,this._ready=!1,this._file=e,this._size=e.size,this._chunkSize=t.chunkSize||u(this._size/1e3,204800),this.reader=new FileReader,void this._generateHeaderBlocks(e,t,function(e,t){return e?o.emit("error",e):(Array.isArray(t)&&t.forEach(function(e){o.push(e)}),o._ready=!0,void o.emit("_ready"))})):new n(e,t)}var r=e("readable-stream").Readable,o=e("inherits"),i=e("typedarray-to-buffer");o(n,r),t.exports=n,n.prototype._generateHeaderBlocks=function(e,t,n){n(null,[])},n.prototype._read=function(){if(this._ready){var e=this,t=this.reader,n=this._offset,r=this._offset+this._chunkSize;return r>this._size&&(r=this._size),n===this._size?(this.destroy(),void this.push(null)):(t.onload=function(){e._offset=r,e.push(i(t.result))},t.onerror=function(){e.emit("error",t.error)},void t.readAsArrayBuffer(this._file.slice(n,r)))}this.once("_ready",this._read.bind(this))},n.prototype.destroy=function(){if(this._file=null,this.reader){this.reader.onload=null,this.reader.onerror=null;try{this.reader.abort()}catch(e){}}this.reader=null}},{inherits:40,"readable-stream":82,"typedarray-to-buffer":108}],35:[function(e,t){t.exports=function(e,t){return(t="number"==typeof t?t:1/0)?function e(n,r){return n.reduce(function(n,o){return Array.isArray(o)&&r<t?n.concat(e(o,r+1)):n.concat(o)},[])}(e,1):Array.isArray(e)?e.map(function(e){return e}):e}},{}],36:[function(e,t){t.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],37:[function(e,t){function n(e){if("string"==typeof e&&(e=o.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}var r=e("http"),o=e("url"),i=t.exports;for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);i.request=function(e,t){return e=n(e),r.request.call(this,e,t)},i.get=function(e,t){return e=n(e),r.get.call(this,e,t)}},{http:95,url:112}],38:[function(t,n,r){r.read=function(e,t,n,r,i){var a,s,u=8*i-r-1,c=(1<<u)-1,l=c>>1,f=-7,d=n?i-1:0,h=n?-1:1,p=e[t+d];for(d+=h,a=p&(1<<-f)-1,p>>=-f,f+=u;0<f;a=256*a+e[t+d],d+=h,f-=8);for(s=a&(1<<-f)-1,a>>=-f,f+=r;0<f;s=256*s+e[t+d],d+=h,f-=8);if(0===a)a=1-l;else{if(a===c)return s?NaN:1/0*(p?-1:1);s+=o(2,r),a-=l}return(p?-1:1)*s*o(2,a-r)},r.write=function(t,n,r,a,s,u){var c,l,f,d=8*u-s-1,h=(1<<d)-1,p=h>>1,g=23===s?5.960464477539062e-8:0,m=a?0:u-1,v=a?1:-1,y=0>n||0===n&&0>1/n?1:0;for(n=e(n),isNaN(n)||n===1/0?(l=isNaN(n)?1:0,c=h):(c=i(Math.log(n)/Math.LN2),1>n*(f=o(2,-c))&&(c--,f*=2),2<=(n+=1<=c+p?g/f:g*o(2,1-p))*f&&(c++,f/=2),c+p>=h?(l=0,c=h):1<=c+p?(l=(n*f-1)*o(2,s),c+=p):(l=n*o(2,p-1)*o(2,s),c=0));8<=s;t[r+m]=255&l,m+=v,l/=256,s-=8);for(c=c<<s|l,d+=s;0<d;t[r+m]=255&c,m+=v,c/=256,d-=8);t[r+m-v]|=128*y}},{}],39:[function(e,t){(function(e){function n(e){if(!(this instanceof n))return new n(e);if(this.store=e,this.chunkLength=e.chunkLength,!this.store||!this.store.get||!this.store.put)throw new Error("First argument must be abstract-chunk-store compliant");this.mem=[]}function r(t,n,r){e.nextTick(function(){t&&t(n,r)})}t.exports=n,n.prototype.put=function(e,t,n){var r=this;r.mem[e]=t,r.store.put(e,t,function(t){r.mem[e]=null,n&&n(t)})},n.prototype.get=function(e,t,n){if("function"==typeof t)return this.get(e,null,t);var o=t&&t.offset||0,i=t&&t.length&&o+t.length,a=this.mem[e];return a?r(n,null,t?a.slice(o,i):a):void this.store.get(e,t,n)},n.prototype.close=function(e){this.store.close(e)},n.prototype.destroy=function(e){this.store.destroy(e)}}).call(this,e("_process"))},{_process:65}],40:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],41:[function(e,t){t.exports=function(e){for(var t=0,n=e.length;t<n;++t)if(e.charCodeAt(t)>127)return!1;return!0}},{}],42:[function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],43:[function(e,t){"use strict";function n(e){return r.existsSync(e)&&r.statSync(e).isFile()}var r=e("fs");t.exports=function(e,t){return t?void r.stat(e,function(e,n){return e?t(e):t(null,n.isFile())}):n(e)},t.exports.sync=n},{fs:22}],44:[function(e,t){function n(e){return r(e)||o(e)}function r(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function o(e){return a[i.call(e)]}t.exports=n,n.strict=r,n.loose=o;var i=Object.prototype.toString,a={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0}},{}],45:[function(e,t){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],46:[function(e,t,n){"use strict";n.regex=n.re=/^npm-debug\.log$|^\..*\.swp$|^\.DS_Store$|^\.AppleDouble$|^\.LSOverride$|^Icon\r$|^\._.*|^\.Spotlight-V100(?:$|\/)|\.Trashes|^__MACOSX$|~$|^Thumbs\.db$|^ehthumbs\.db$|^Desktop\.ini$|^@eaDir$/,n.is=(e=>n.re.test(e)),n.not=(e=>!n.is(e))},{}],47:[function(e,t){function n(e){var t,n={},i=e.split("magnet:?")[1];((i&&0<=i.length?i.split("&"):[]).forEach(function(e){var t=e.split("=");if(2===t.length){var r=t[0],o=t[1];if("dn"===r&&(o=decodeURIComponent(o).replace(/\+/g," ")),("tr"===r||"xs"===r||"as"===r||"ws"===r)&&(o=decodeURIComponent(o)),"kt"===r&&(o=decodeURIComponent(o).split("+")),"ix"===r&&(o=+o),n[r])if(Array.isArray(n[r]))n[r].push(o);else{var i=n[r];n[r]=[i,o]}else n[r]=o}}),n.xt)&&(Array.isArray(n.xt)?n.xt:[n.xt]).forEach(function(e){if(t=e.match(/^urn:btih:(.{40})/))n.infoHash=t[1].toLowerCase();else if(t=e.match(/^urn:btih:(.{32})/)){var i=r.decode(t[1]);n.infoHash=o.from(i,"binary").toString("hex")}});return n.infoHash&&(n.infoHashBuffer=o.from(n.infoHash,"hex")),n.dn&&(n.name=n.dn),n.kt&&(n.keywords=n.kt),n.announce="string"==typeof n.tr?[n.tr]:Array.isArray(n.tr)?n.tr:[],n.urlList=[],("string"==typeof n.as||Array.isArray(n.as))&&(n.urlList=n.urlList.concat(n.as)),("string"==typeof n.ws||Array.isArray(n.ws))&&(n.urlList=n.urlList.concat(n.ws)),a(n.announce),a(n.urlList),n}t.exports=n,t.exports.decode=n,t.exports.encode=function(e){(e=i(e)).infoHashBuffer&&(e.xt="urn:btih:"+e.infoHashBuffer.toString("hex")),e.infoHash&&(e.xt="urn:btih:"+e.infoHash),e.name&&(e.dn=e.name),e.keywords&&(e.kt=e.keywords),e.announce&&(e.tr=e.announce),e.urlList&&(e.ws=e.urlList,delete e.as);var t="magnet:?";return Object.keys(e).filter(function(e){return 2===e.length}).forEach(function(n,r){(Array.isArray(e[n])?e[n]:[e[n]]).forEach(function(e,o){(0<r||0<o)&&("kt"!==n||0===o)&&(t+="&"),"dn"===n&&(e=encodeURIComponent(e).replace(/%20/g,"+")),("tr"===n||"xs"===n||"as"===n||"ws"===n)&&(e=encodeURIComponent(e)),"kt"===n&&(e=encodeURIComponent(e)),t+="kt"===n&&0<o?"+"+e:n+"="+e})}),t};var r=e("thirty-two"),o=e("safe-buffer").Buffer,i=e("xtend"),a=e("uniq")},{"safe-buffer":88,"thirty-two":103,uniq:110,xtend:119}],48:[function(e,t){function n(e,t){var r=this;if(!(r instanceof n))return new n(e,t);if(!s)throw new Error("web browser lacks MediaSource support");t||(t={}),r._bufferDuration=t.bufferDuration||u,r._elem=e,r._mediaSource=new s,r._streams=[],r.detailedError=null,r._errorHandler=function(){r._elem.removeEventListener("error",r._errorHandler),r._streams.slice().forEach(function(e){e.destroy(r._elem.error)})},r._elem.addEventListener("error",r._errorHandler),r._elem.src=window.URL.createObjectURL(r._mediaSource)}function r(e,t){var n=this;if(i.Writable.call(n),n._wrapper=e,n._elem=e._elem,n._mediaSource=e._mediaSource,n._allStreams=e._streams,n._allStreams.push(n),n._bufferDuration=e._bufferDuration,n._sourceBuffer=null,n._openHandler=function(){n._onSourceOpen()},n._flowHandler=function(){n._flow()},"string"==typeof t)n._type=t,"open"===n._mediaSource.readyState?n._createSourceBuffer():n._mediaSource.addEventListener("sourceopen",n._openHandler);else if(null===t._sourceBuffer)t.destroy(),n._type=t._type,n._mediaSource.addEventListener("sourceopen",n._openHandler);else{if(!t._sourceBuffer)throw new Error("The argument to MediaElementWrapper.createWriteStream must be a string or a previous stream returned from that function");t.destroy(),n._type=t._type,n._sourceBuffer=t._sourceBuffer,n._sourceBuffer.addEventListener("updateend",n._flowHandler)}n._elem.addEventListener("timeupdate",n._flowHandler),n.on("error",function(e){n._wrapper.error(e)}),n.on("finish",function(){if(!n.destroyed&&(n._finished=!0,n._allStreams.every(function(e){return e._finished})))try{n._mediaSource.endOfStream()}catch(e){}})}t.exports=n;var o=e("inherits"),i=e("readable-stream"),a=e("to-arraybuffer"),s="undefined"!=typeof window&&window.MediaSource,u=60;n.prototype.createWriteStream=function(e){return new r(this,e)},n.prototype.error=function(e){var t=this;t.detailedError||(t.detailedError=e);try{t._mediaSource.endOfStream("decode")}catch(e){}},o(r,i.Writable),r.prototype._onSourceOpen=function(){var e=this;e.destroyed||(e._mediaSource.removeEventListener("sourceopen",e._openHandler),e._createSourceBuffer())},r.prototype.destroy=function(e){var t=this;t.destroyed||(t.destroyed=!0,t._allStreams.splice(t._allStreams.indexOf(t),1),t._mediaSource.removeEventListener("sourceopen",t._openHandler),t._elem.removeEventListener("timeupdate",t._flowHandler),t._sourceBuffer&&(t._sourceBuffer.removeEventListener("updateend",t._flowHandler),"open"===t._mediaSource.readyState&&t._sourceBuffer.abort()),e&&t.emit("error",e),t.emit("close"))},r.prototype._createSourceBuffer=function(){var e=this;if(!e.destroyed)if(s.isTypeSupported(e._type)){if(e._sourceBuffer=e._mediaSource.addSourceBuffer(e._type),e._sourceBuffer.addEventListener("updateend",e._flowHandler),e._cb){var t=e._cb;e._cb=null,t()}}else e.destroy(new Error("The provided type is not supported"))},r.prototype._write=function(e,t,n){var r=this;if(!r.destroyed){if(!r._sourceBuffer)return void(r._cb=function(o){return o?n(o):void r._write(e,t,n)});if(r._sourceBuffer.updating)return n(new Error("Cannot append buffer while source buffer updating"));try{r._sourceBuffer.appendBuffer(a(e))}catch(e){return void r.destroy(e)}r._cb=n}},r.prototype._flow=function(){var e=this;if(!e.destroyed&&e._sourceBuffer&&!e._sourceBuffer.updating&&!("open"===e._mediaSource.readyState&&e._getBufferDuration()>e._bufferDuration)&&e._cb){var t=e._cb;e._cb=null,t()}},r.prototype._getBufferDuration=function(){for(var e=this._sourceBuffer.buffered,t=this._elem.currentTime,n=-1,r=0;r<e.length;r++){var o=e.start(r),i=e.end(r)+0;if(o>t)break;(0<=n||t<=i)&&(n=i)}var a=n-t;return 0>a&&(a=0),a}},{inherits:40,"readable-stream":82,"to-arraybuffer":105}],49:[function(e,t){(function(e){function n(e,t){if(!(this instanceof n))return new n(e,t);if(t||(t={}),this.chunkLength=+e,!this.chunkLength)throw new Error("First argument must be a chunk length");this.chunks=[],this.closed=!1,this.length=+t.length||1/0,this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=s(this.length/this.chunkLength)-1)}function r(t,n,r){e.nextTick(function(){t&&t(n,r)})}t.exports=n,n.prototype.put=function(e,t,n){if(this.closed)return r(n,new Error("Storage is closed"));var o=e===this.lastChunkIndex;return o&&t.length!==this.lastChunkLength?r(n,new Error("Last chunk length must be "+this.lastChunkLength)):o||t.length===this.chunkLength?(this.chunks[e]=t,void r(n,null)):r(n,new Error("Chunk length must be "+this.chunkLength))},n.prototype.get=function(e,t,n){if("function"==typeof t)return this.get(e,null,t);if(this.closed)return r(n,new Error("Storage is closed"));var o=this.chunks[e];if(!o)return r(n,new Error("Chunk not found"));if(!t)return r(n,null,o);var i=t.offset||0,a=t.length||o.length-i;r(n,null,o.slice(i,a+i))},n.prototype.close=n.prototype.destroy=function(e){return this.closed?r(e,new Error("Storage is closed")):(this.closed=!0,this.chunks=null,void r(e,null))}}).call(this,e("_process"))},{_process:65}],50:[function(e,t,n){(function(t){function r(e,t,n){for(var r=t;r<n;r++)e[r]=0}function o(e,t,n){t.writeUInt32BE(i((e.getTime()+g)/1e3),n)}function a(e,t,n){t.writeUInt16BE(i(e)%65536,n),t.writeUInt16BE(i(256*e*256)%65536,n+2)}function s(e,t,n){t[n]=i(e)%256,t[n+1]=i(256*e)%256}function u(e,t,n){e||(e=[0,0,0,0,0,0,0,0,0]);for(var r=0;r<e.length;r++)a(e[r],t,n+4*r)}function l(e){for(var t=Array(e.length/4),n=0;n<t.length;n++)t[n]=d(e,4*n);return t}function f(e,t){return new Date(1e3*e.readUInt32BE(t)-g)}function d(e,t){return e.readUInt16BE(t)+e.readUInt16BE(t+2)/65536}var h=e("./index"),p=e("./descriptor"),g=20828448e5;n.fullBoxes={},["mvhd","tkhd","mdhd","vmhd","smhd","stsd","esds","stsz","stco","stss","stts","ctts","stsc","dref","elst","hdlr","mehd","trex","mfhd","tfhd","tfdt","trun"].forEach(function(e){n.fullBoxes[e]=!0}),n.ftyp={},n.ftyp.encode=function(e,r,o){r=r?r.slice(o):new t(n.ftyp.encodingLength(e));var i=e.compatibleBrands||[];r.write(e.brand,0,4,"ascii"),r.writeUInt32BE(e.brandVersion,4);for(var a=0;a<i.length;a++)r.write(i[a],8+4*a,4,"ascii");return n.ftyp.encode.bytes=8+4*i.length,r},n.ftyp.decode=function(e,t){for(var n=(e=e.slice(t)).toString("ascii",0,4),r=e.readUInt32BE(4),o=[],i=8;i<e.length;i+=4)o.push(e.toString("ascii",i,i+4));return{brand:n,brandVersion:r,compatibleBrands:o}},n.ftyp.encodingLength=function(e){return 8+4*(e.compatibleBrands||[]).length},n.mvhd={},n.mvhd.encode=function(e,i,c){return i=i?i.slice(c):new t(96),o(e.ctime||new Date,i,0),o(e.mtime||new Date,i,4),i.writeUInt32BE(e.timeScale||0,8),i.writeUInt32BE(e.duration||0,12),a(e.preferredRate||0,i,16),s(e.preferredVolume||0,i,20),r(i,22,32),u(e.matrix,i,32),i.writeUInt32BE(e.previewTime||0,68),i.writeUInt32BE(e.previewDuration||0,72),i.writeUInt32BE(e.posterTime||0,76),i.writeUInt32BE(e.selectionTime||0,80),i.writeUInt32BE(e.selectionDuration||0,84),i.writeUInt32BE(e.currentTime||0,88),i.writeUInt32BE(e.nextTrackId||0,92),n.mvhd.encode.bytes=96,i},n.mvhd.decode=function(e,t){return{ctime:f(e=e.slice(t),0),mtime:f(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),preferredRate:d(e,16),preferredVolume:function(e,t){return e[t]+e[t+1]/256}(e,20),matrix:l(e.slice(32,68)),previewTime:e.readUInt32BE(68),previewDuration:e.readUInt32BE(72),posterTime:e.readUInt32BE(76),selectionTime:e.readUInt32BE(80),selectionDuration:e.readUInt32BE(84),currentTime:e.readUInt32BE(88),nextTrackId:e.readUInt32BE(92)}},n.mvhd.encodingLength=function(){return 96},n.tkhd={},n.tkhd.encode=function(e,i,a){return i=i?i.slice(a):new t(80),o(e.ctime||new Date,i,0),o(e.mtime||new Date,i,4),i.writeUInt32BE(e.trackId||0,8),r(i,12,16),i.writeUInt32BE(e.duration||0,16),r(i,20,28),i.writeUInt16BE(e.layer||0,28),i.writeUInt16BE(e.alternateGroup||0,30),i.writeUInt16BE(e.volume||0,32),u(e.matrix,i,36),i.writeUInt32BE(e.trackWidth||0,72),i.writeUInt32BE(e.trackHeight||0,76),n.tkhd.encode.bytes=80,i},n.tkhd.decode=function(e,t){return{ctime:f(e=e.slice(t),0),mtime:f(e,4),trackId:e.readUInt32BE(8),duration:e.readUInt32BE(16),layer:e.readUInt16BE(28),alternateGroup:e.readUInt16BE(30),volume:e.readUInt16BE(32),matrix:l(e.slice(36,72)),trackWidth:e.readUInt32BE(72),trackHeight:e.readUInt32BE(76)}},n.tkhd.encodingLength=function(){return 80},n.mdhd={},n.mdhd.encode=function(e,r,i){return r=r?r.slice(i):new t(20),o(e.ctime||new Date,r,0),o(e.mtime||new Date,r,4),r.writeUInt32BE(e.timeScale||0,8),r.writeUInt32BE(e.duration||0,12),r.writeUInt16BE(e.language||0,16),r.writeUInt16BE(e.quality||0,18),n.mdhd.encode.bytes=20,r},n.mdhd.decode=function(e,t){return{ctime:f(e=e.slice(t),0),mtime:f(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),language:e.readUInt16BE(16),quality:e.readUInt16BE(18)}},n.mdhd.encodingLength=function(){return 20},n.vmhd={},n.vmhd.encode=function(e,r,o){(r=r?r.slice(o):new t(8)).writeUInt16BE(e.graphicsMode||0,0);var i=e.opcolor||[0,0,0];return r.writeUInt16BE(i[0],2),r.writeUInt16BE(i[1],4),r.writeUInt16BE(i[2],6),n.vmhd.encode.bytes=8,r},n.vmhd.decode=function(e,t){return{graphicsMode:(e=e.slice(t)).readUInt16BE(0),opcolor:[e.readUInt16BE(2),e.readUInt16BE(4),e.readUInt16BE(6)]}},n.vmhd.encodingLength=function(){return 8},n.smhd={},n.smhd.encode=function(e,o,i){return(o=o?o.slice(i):new t(4)).writeUInt16BE(e.balance||0,0),r(o,2,4),n.smhd.encode.bytes=4,o},n.smhd.decode=function(e,t){return{balance:(e=e.slice(t)).readUInt16BE(0)}},n.smhd.encodingLength=function(){return 4},n.stsd={},n.stsd.encode=function(e,r,o){r=r?r.slice(o):new t(n.stsd.encodingLength(e));var i=e.entries||[];r.writeUInt32BE(i.length,0);for(var a,s=4,u=0;u<i.length;u++)a=i[u],h.encode(a,r,s),s+=h.encode.bytes;return n.stsd.encode.bytes=s,r},n.stsd.decode=function(e,t,n){for(var r,o=(e=e.slice(t)).readUInt32BE(0),i=Array(o),a=4,s=0;s<o;s++)r=h.decode(e,a,n),i[s]=r,a+=r.length;return{entries:i}},n.stsd.encodingLength=function(e){var t=4;if(!e.entries)return t;for(var n=0;n<e.entries.length;n++)t+=h.encodingLength(e.entries[n]);return t},n.avc1=n.VisualSampleEntry={},n.VisualSampleEntry.encode=function(e,o,i){r(o=o?o.slice(i):new t(n.VisualSampleEntry.encodingLength(e)),0,6),o.writeUInt16BE(e.dataReferenceIndex||0,6),r(o,8,24),o.writeUInt16BE(e.width||0,24),o.writeUInt16BE(e.height||0,26),o.writeUInt32BE(e.hResolution||4718592,28),o.writeUInt32BE(e.vResolution||4718592,32),r(o,36,40),o.writeUInt16BE(e.frameCount||1,40);var a=e.compressorName||"",s=c(a.length,31);o.writeUInt8(s,42),o.write(a,43,s,"utf8"),o.writeUInt16BE(e.depth||24,74),o.writeInt16BE(-1,76);var u=78;(e.children||[]).forEach(function(e){h.encode(e,o,u),u+=h.encode.bytes}),n.VisualSampleEntry.encode.bytes=u},n.VisualSampleEntry.decode=function(e,t,n){e=e.slice(t);for(var r=n-t,o=c(e.readUInt8(42),31),i={dataReferenceIndex:e.readUInt16BE(6),width:e.readUInt16BE(24),height:e.readUInt16BE(26),hResolution:e.readUInt32BE(28),vResolution:e.readUInt32BE(32),frameCount:e.readUInt16BE(40),compressorName:e.toString("utf8",43,43+o),depth:e.readUInt16BE(74),children:[]},a=78;8<=r-a;){var s=h.decode(e,a,r);i.children.push(s),i[s.type]=s,a+=s.length}return i},n.VisualSampleEntry.encodingLength=function(e){var t=78;return(e.children||[]).forEach(function(e){t+=h.encodingLength(e)}),t},n.avcC={},n.avcC.encode=function(e,r,o){r=r?r.slice(o):t(e.buffer.length),e.buffer.copy(r),n.avcC.encode.bytes=e.buffer.length},n.avcC.decode=function(e,n,r){return{mimeCodec:(e=e.slice(n,r)).toString("hex",1,4),buffer:new t(e)}},n.avcC.encodingLength=function(e){return e.buffer.length},n.mp4a=n.AudioSampleEntry={},n.AudioSampleEntry.encode=function(e,o,i){r(o=o?o.slice(i):new t(n.AudioSampleEntry.encodingLength(e)),0,6),o.writeUInt16BE(e.dataReferenceIndex||0,6),r(o,8,16),o.writeUInt16BE(e.channelCount||2,16),o.writeUInt16BE(e.sampleSize||16,18),r(o,20,24),o.writeUInt32BE(e.sampleRate||0,24);var a=28;(e.children||[]).forEach(function(e){h.encode(e,o,a),a+=h.encode.bytes}),n.AudioSampleEntry.encode.bytes=a},n.AudioSampleEntry.decode=function(e,t,n){for(var r=n-t,o={dataReferenceIndex:(e=e.slice(t,n)).readUInt16BE(6),channelCount:e.readUInt16BE(16),sampleSize:e.readUInt16BE(18),sampleRate:e.readUInt32BE(24),children:[]},i=28;8<=r-i;){var a=h.decode(e,i,r);o.children.push(a),o[a.type]=a,i+=a.length}return o},n.AudioSampleEntry.encodingLength=function(e){var t=28;return(e.children||[]).forEach(function(e){t+=h.encodingLength(e)}),t},n.esds={},n.esds.encode=function(e,r,o){r=r?r.slice(o):t(e.buffer.length),e.buffer.copy(r,0),n.esds.encode.bytes=e.buffer.length},n.esds.decode=function(e,n,r){e=e.slice(n,r);var o=p.Descriptor.decode(e,0,e.length),i=("ESDescriptor"===o.tagName?o:{}).DecoderConfigDescriptor||{},a=i.oti||0,s=i.DecoderSpecificInfo,u=s?(248&s.buffer.readUInt8(0))>>3:0,c=null;return a&&(c=a.toString(16),u&&(c+="."+u)),{mimeCodec:c,buffer:new t(e.slice(0))}},n.esds.encodingLength=function(e){return e.buffer.length},n.stsz={},n.stsz.encode=function(e,r,o){var i=e.entries||[];(r=r?r.slice(o):t(n.stsz.encodingLength(e))).writeUInt32BE(0,0),r.writeUInt32BE(i.length,4);for(var a=0;a<i.length;a++)r.writeUInt32BE(i[a],4*a+8);return n.stsz.encode.bytes=8+4*i.length,r},n.stsz.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=e.readUInt32BE(4),o=Array(r),i=0;i<r;i++)o[i]=0===n?e.readUInt32BE(4*i+8):n;return{entries:o}},n.stsz.encodingLength=function(e){return 8+4*e.entries.length},n.stss=n.stco={},n.stco.encode=function(e,r,o){var i=e.entries||[];(r=r?r.slice(o):new t(n.stco.encodingLength(e))).writeUInt32BE(i.length,0);for(var a=0;a<i.length;a++)r.writeUInt32BE(i[a],4*a+4);return n.stco.encode.bytes=4+4*i.length,r},n.stco.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=Array(n),o=0;o<n;o++)r[o]=e.readUInt32BE(4*o+4);return{entries:r}},n.stco.encodingLength=function(e){return 4+4*e.entries.length},n.stts={},n.stts.encode=function(e,r,o){var i=e.entries||[];(r=r?r.slice(o):new t(n.stts.encodingLength(e))).writeUInt32BE(i.length,0);for(var a,s=0;s<i.length;s++)a=8*s+4,r.writeUInt32BE(i[s].count||0,a),r.writeUInt32BE(i[s].duration||0,a+4);return n.stts.encode.bytes=4+8*e.entries.length,r},n.stts.decode=function(e,t){for(var n,r=(e=e.slice(t)).readUInt32BE(0),o=Array(r),i=0;i<r;i++)n=8*i+4,o[i]={count:e.readUInt32BE(n),duration:e.readUInt32BE(n+4)};return{entries:o}},n.stts.encodingLength=function(e){return 4+8*e.entries.length},n.ctts={},n.ctts.encode=function(e,r,o){var i=e.entries||[];(r=r?r.slice(o):new t(n.ctts.encodingLength(e))).writeUInt32BE(i.length,0);for(var a,s=0;s<i.length;s++)a=8*s+4,r.writeUInt32BE(i[s].count||0,a),r.writeUInt32BE(i[s].compositionOffset||0,a+4);return n.ctts.encode.bytes=4+8*i.length,r},n.ctts.decode=function(e,t){for(var n,r=(e=e.slice(t)).readUInt32BE(0),o=Array(r),i=0;i<r;i++)n=8*i+4,o[i]={count:e.readUInt32BE(n),compositionOffset:e.readInt32BE(n+4)};return{entries:o}},n.ctts.encodingLength=function(e){return 4+8*e.entries.length},n.stsc={},n.stsc.encode=function(e,r,o){var i=e.entries||[];(r=r?r.slice(o):new t(n.stsc.encodingLength(e))).writeUInt32BE(i.length,0);for(var a,s=0;s<i.length;s++)a=12*s+4,r.writeUInt32BE(i[s].firstChunk||0,a),r.writeUInt32BE(i[s].samplesPerChunk||0,a+4),r.writeUInt32BE(i[s].sampleDescriptionId||0,a+8);return n.stsc.encode.bytes=4+12*i.length,r},n.stsc.decode=function(e,t){for(var n,r=(e=e.slice(t)).readUInt32BE(0),o=Array(r),i=0;i<r;i++)n=12*i+4,o[i]={firstChunk:e.readUInt32BE(n),samplesPerChunk:e.readUInt32BE(n+4),sampleDescriptionId:e.readUInt32BE(n+8)};return{entries:o}},n.stsc.encodingLength=function(e){return 4+12*e.entries.length},n.dref={},n.dref.encode=function(e,r,o){r=r?r.slice(o):new t(n.dref.encodingLength(e));var i=e.entries||[];r.writeUInt32BE(i.length,0);for(var a=4,s=0;s<i.length;s++){var u=i[s],c=(u.buf?u.buf.length:0)+4+4;r.writeUInt32BE(c,a),a+=4,r.write(u.type,a,4,"ascii"),a+=4,u.buf&&(u.buf.copy(r,a),a+=u.buf.length)}return n.dref.encode.bytes=a,r},n.dref.decode=function(e,t){for(var n=(e=e.slice(t)).readUInt32BE(0),r=Array(n),o=4,i=0;i<n;i++){var a=e.readUInt32BE(o),s=e.toString("ascii",o+4,o+8),u=e.slice(o+8,o+a);o+=a,r[i]={type:s,buf:u}}return{entries:r}},n.dref.encodingLength=function(e){var t=4;if(!e.entries)return t;for(var n,r=0;r<e.entries.length;r++)t+=((n=e.entries[r].buf)?n.length:0)+4+4;return t},n.elst={},n.elst.encode=function(e,r,o){var i=e.entries||[];(r=r?r.slice(o):new t(n.elst.encodingLength(e))).writeUInt32BE(i.length,0);for(var s,u=0;u<i.length;u++)s=12*u+4,r.writeUInt32BE(i[u].trackDuration||0,s),r.writeUInt32BE(i[u].mediaTime||0,s+4),a(i[u].mediaRate||0,r,s+8);return n.elst.encode.bytes=4+12*i.length,r},n.elst.decode=function(e,t){for(var n,r=(e=e.slice(t)).readUInt32BE(0),o=Array(r),i=0;i<r;i++)n=12*i+4,o[i]={trackDuration:e.readUInt32BE(n),mediaTime:e.readInt32BE(n+4),mediaRate:d(e,n+8)};return{entries:o}},n.elst.encodingLength=function(e){return 4+12*e.entries.length},n.hdlr={},n.hdlr.encode=function(e,r,o){r=r?r.slice(o):new t(n.hdlr.encodingLength(e));var i=21+(e.name||"").length;return r.fill(0,0,i),r.write(e.handlerType||"",4,4,"ascii"),function(e,n,r){var o=new t(e,"utf8");o.copy(n,r),n[r+o.length]=0}(e.name||"",r,20),n.hdlr.encode.bytes=i,r},n.hdlr.decode=function(e,t,n){return{handlerType:(e=e.slice(t)).toString("ascii",4,8),name:function(e,t,n){var r;for(r=0;r<n&&0!==e[t+r];r++);return e.toString("utf8",t,t+r)}(e,20,n)}},n.hdlr.encodingLength=function(e){return 21+(e.name||"").length},n.mehd={},n.mehd.encode=function(e,r,o){return(r=r?r.slice(o):new t(4)).writeUInt32BE(e.fragmentDuration||0,0),n.mehd.encode.bytes=4,r},n.mehd.decode=function(e,t){return{fragmentDuration:(e=e.slice(t)).readUInt32BE(0)}},n.mehd.encodingLength=function(){return 4},n.trex={},n.trex.encode=function(e,r,o){return(r=r?r.slice(o):new t(20)).writeUInt32BE(e.trackId||0,0),r.writeUInt32BE(e.defaultSampleDescriptionIndex||0,4),r.writeUInt32BE(e.defaultSampleDuration||0,8),r.writeUInt32BE(e.defaultSampleSize||0,12),r.writeUInt32BE(e.defaultSampleFlags||0,16),n.trex.encode.bytes=20,r},n.trex.decode=function(e,t){return{trackId:(e=e.slice(t)).readUInt32BE(0),defaultSampleDescriptionIndex:e.readUInt32BE(4),defaultSampleDuration:e.readUInt32BE(8),defaultSampleSize:e.readUInt32BE(12),defaultSampleFlags:e.readUInt32BE(16)}},n.trex.encodingLength=function(){return 20},n.mfhd={},n.mfhd.encode=function(e,r,o){return(r=r?r.slice(o):new t(4)).writeUInt32BE(e.sequenceNumber||0,0),n.mfhd.encode.bytes=4,r},n.mfhd.decode=function(e){return{sequenceNumber:e.readUint32BE(0)}},n.mfhd.encodingLength=function(){return 4},n.tfhd={},n.tfhd.encode=function(e,r,o){return(r=r?r.slice(o):new t(4)).writeUInt32BE(e.trackId,0),n.tfhd.encode.bytes=4,r},n.tfhd.decode=function(){},n.tfhd.encodingLength=function(){return 4},n.tfdt={},n.tfdt.encode=function(e,r,o){return(r=r?r.slice(o):new t(4)).writeUInt32BE(e.baseMediaDecodeTime||0,0),n.tfdt.encode.bytes=4,r},n.tfdt.decode=function(){},n.tfdt.encodingLength=function(){return 4},n.trun={},n.trun.encode=function(e,r,o){(r=r?r.slice(o):new t(8+16*e.entries.length)).writeUInt32BE(e.entries.length,0),r.writeInt32BE(e.dataOffset,4);for(var i,a=8,s=0;s<e.entries.length;s++)i=e.entries[s],r.writeUInt32BE(i.sampleDuration,a),a+=4,r.writeUInt32BE(i.sampleSize,a),a+=4,r.writeUInt32BE(i.sampleFlags,a),a+=4,r.writeUInt32BE(i.sampleCompositionTimeOffset,a),a+=4;n.trun.encode.bytes=a},n.trun.decode=function(){},n.trun.encodingLength=function(e){return 8+16*e.entries.length},n.mdat={},n.mdat.encode=function(e,t,r){e.buffer?(e.buffer.copy(t,r),n.mdat.encode.bytes=e.buffer.length):n.mdat.encode.bytes=n.mdat.encodingLength(e)},n.mdat.decode=function(e,n,r){return{buffer:new t(e.slice(n,r))}},n.mdat.encodingLength=function(e){return e.buffer?e.buffer.length:e.contentLength}}).call(this,e("buffer").Buffer)},{"./descriptor":51,"./index":52,buffer:23}],51:[function(e,t,n){(function(e){var t={3:"ESDescriptor",4:"DecoderConfigDescriptor",5:"DecoderSpecificInfo",6:"SLConfigDescriptor"};n.Descriptor={},n.Descriptor.decode=function(r,o,i){var a,s=r.readUInt8(o),u=o+1,c=0;do{c=c<<7|127&(a=r.readUInt8(u++))}while(128&a);var l,f=t[s];return(l=n[f]?n[f].decode(r,u,i):{buffer:new e(r.slice(u,u+c))}).tag=s,l.tagName=f,l.length=u-o+c,l.contentsLen=c,l},n.DescriptorArray={},n.DescriptorArray.decode=function(e,r,o){for(var i=r,a={};i+2<=o;){var s=n.Descriptor.decode(e,i,o);i+=s.length,a[t[s.tag]||"Descriptor"+s.tag]=s}return a},n.ESDescriptor={},n.ESDescriptor.decode=function(e,t,r){var o=e.readUInt8(t+2),i=t+3;(128&o&&(i+=2),64&o)&&(i+=e.readUInt8(i)+1);return 32&o&&(i+=2),n.DescriptorArray.decode(e,i,r)},n.DecoderConfigDescriptor={},n.DecoderConfigDescriptor.decode=function(e,t,r){var o=e.readUInt8(t),i=n.DescriptorArray.decode(e,t+13,r);return i.oti=o,i}}).call(this,e("buffer").Buffer)},{buffer:23}],52:[function(e,t,n){(function(t){var r=e("uint64be"),o=e("./boxes"),i=4294967295,a=n,s=n.containers={moov:["mvhd","meta","traks","mvex"],trak:["tkhd","tref","trgr","edts","meta","mdia","udta"],edts:["elst"],mdia:["mdhd","hdlr","elng","minf"],minf:["vmhd","smhd","hmhd","sthd","nmhd","dinf","stbl"],dinf:["dref"],stbl:["stsd","stts","ctts","cslg","stsc","stsz","stz2","stco","co64","stss","stsh","padb","stdp","sdtp","sbgps","sgpds","subss","saizs","saios"],mvex:["mehd","trexs","leva"],moof:["mfhd","meta","trafs"],traf:["tfhd","trun","sbgps","sgpds","subss","saizs","saios","tfdt","meta"]};a.encode=function(e,n,r){return a.encodingLength(e),r=r||0,n=n||new t(e.length),a._encode(e,n,r)},a._encode=function(e,t,n){var u=e.type,c=e.length;c>i&&(c=1),t.writeUInt32BE(c,n),t.write(e.type,n+4,4,"ascii");var l=n+8;if(1===c&&(r.encode(e.length,t,l),l+=8),o.fullBoxes[u]&&(t.writeUInt32BE(e.flags||0,l),t.writeUInt8(e.version||0,l),l+=4),s[u])s[u].forEach(function(n){if(5===n.length){var r=e[n]||[];n=n.substr(0,4),r.forEach(function(e){a._encode(e,t,l),l+=a.encode.bytes})}else e[n]&&(a._encode(e[n],t,l),l+=a.encode.bytes)}),e.otherBoxes&&e.otherBoxes.forEach(function(e){a._encode(e,t,l),l+=a.encode.bytes});else if(o[u]){var f=o[u].encode;f(e,t,l),l+=f.bytes}else{if(!e.buffer)throw new Error("Either `type` must be set to a known type (not'"+u+"') or `buffer` must be set");e.buffer.copy(t,l),l+=e.buffer.length}return a.encode.bytes=l-n,t},a.readHeaders=function(e,t,n){if(t=t||0,8>(n=n||e.length)-t)return 8;var i,a,s=e.readUInt32BE(t),u=e.toString("ascii",t+4,t+8),c=t+8;if(1===s){if(16>n-t)return 16;s=r.decode(e,c),c+=8}return o.fullBoxes[u]&&(i=e.readUInt8(c),a=16777215&e.readUInt32BE(c),c+=4),{length:s,headersLen:c-t,contentLen:s-(c-t),type:u,version:i,flags:a}},a.decode=function(e,t,n){t=t||0,n=n||e.length;var r=a.readHeaders(e,t,n);if(!r||r.length>n-t)throw new Error("Data too short");return a.decodeWithoutHeaders(r,e,t+r.headersLen,t+r.length)},a.decodeWithoutHeaders=function(e,n,r,i){r=r||0,i=i||n.length;var u=e.type,c={};if(s[u]){c.otherBoxes=[];for(var l,f=s[u],d=r;8<=i-d;)if(d+=(l=a.decode(n,d,i)).length,0<=f.indexOf(l.type))c[l.type]=l;else if(0<=f.indexOf(l.type+"s")){var h=l.type+"s";(c[h]=c[h]||[]).push(l)}else c.otherBoxes.push(l)}else if(o[u]){c=(0,o[u].decode)(n,r,i)}else c.buffer=new t(n.slice(r,i));return c.length=e.length,c.contentLen=e.contentLen,c.type=e.type,c.version=e.version,c.flags=e.flags,c},a.encodingLength=function(e){var t=e.type,n=8;if(o.fullBoxes[t]&&(n+=4),s[t])s[t].forEach(function(t){if(5===t.length){var r=e[t]||[];t=t.substr(0,4),r.forEach(function(e){e.type=t,n+=a.encodingLength(e)})}else if(e[t]){var o=e[t];o.type=t,n+=a.encodingLength(o)}}),e.otherBoxes&&e.otherBoxes.forEach(function(e){n+=a.encodingLength(e)});else if(o[t])n+=o[t].encodingLength(e);else{if(!e.buffer)throw new Error("Either `type` must be set to a known type (not'"+t+"') or `buffer` must be set");n+=e.buffer.length}return n>i&&(n+=8),e.length=n,n}}).call(this,e("buffer").Buffer)},{"./boxes":50,buffer:23,uint64be:109}],53:[function(e,t){(function(n){function r(){return this instanceof r?(i.Writable.call(this),this.destroyed=!1,this._pending=0,this._missing=0,this._buf=null,this._str=null,this._cb=null,this._ondrain=null,this._writeBuffer=null,this._writeCb=null,this._ondrain=null,void this._kick()):new r}function o(e){this._parent=e,this.destroyed=!1,i.PassThrough.call(this)}var i=e("readable-stream"),a=e("inherits"),s=e("next-event"),u=e("mp4-box-encoding"),c=new n(0);t.exports=r,a(r,i.Writable),r.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e),this.emit("close"))},r.prototype._write=function(e,t,n){if(!this.destroyed){for(var r=!this._str||!this._str._writableState.needDrain;e.length&&!this.destroyed;){if(!this._missing)return this._writeBuffer=e,void(this._writeCb=n);var o=e.length<this._missing?e.length:this._missing;if(this._buf?e.copy(this._buf,this._buf.length-this._missing):this._str&&(r=this._str.write(o===e.length?e:e.slice(0,o))),this._missing-=o,!this._missing){var i=this._buf,a=this._cb,s=this._str;this._buf=this._cb=this._str=this._ondrain=null,r=!0,s&&s.end(),a&&a(i)}e=o===e.length?c:e.slice(o)}return this._pending&&!this._missing?(this._writeBuffer=e,void(this._writeCb=n)):void(r?n():this._ondrain(n))}},r.prototype._buffer=function(e,t){this._missing=e,this._buf=new n(e),this._cb=t},r.prototype._stream=function(e,t){var n=this;return this._missing=e,this._str=new o(this),this._ondrain=s(this._str,"drain"),this._pending++,this._str.on("end",function(){n._pending--,n._kick()}),this._cb=t,this._str},r.prototype._readBox=function(){var e=this;!function t(r,o){e._buffer(r,function(r){o=o?n.concat([o,r]):r;var i=u.readHeaders(o);"number"==typeof i?t(i-o.length,o):(e._pending++,e._headers=i,e.emit("box",i))})}(8)},r.prototype.stream=function(){var e=this;if(!e._headers)throw new Error("this function can only be called once after 'box' is emitted");var t=e._headers;return e._headers=null,e._stream(t.contentLen,null)},r.prototype.decode=function(e){var t=this;if(!t._headers)throw new Error("this function can only be called once after 'box' is emitted");var n=t._headers;t._headers=null,t._buffer(n.contentLen,function(r){var o=u.decodeWithoutHeaders(n,r);e(o),t._pending--,t._kick()})},r.prototype.ignore=function(){var e=this;if(!e._headers)throw new Error("this function can only be called once after 'box' is emitted");var t=e._headers;e._headers=null,this._missing=t.contentLen,this._cb=function(){e._pending--,e._kick()}},r.prototype._kick=function(){if(!this._pending&&(this._buf||this._str||this._readBox(),this._writeBuffer)){var e=this._writeCb,t=this._writeBuffer;this._writeBuffer=null,this._writeCb=null,this._write(t,null,e)}},a(o,i.PassThrough),o.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,this._parent.destroy(e),e&&this.emit("error",e),this.emit("close"))}}).call(this,e("buffer").Buffer)},{buffer:23,inherits:40,"mp4-box-encoding":52,"next-event":58,"readable-stream":82}],54:[function(e,t){(function(n,r){function o(){}function i(){if(!(this instanceof i))return new i;s.Readable.call(this),this.destroyed=!1,this._reading=!1,this._stream=null,this._drain=null,this._want=!1,this._onreadable=function(){e._want&&(e._want=!1,e._read())},this._onend=function(){e._stream=null};var e=this}function a(e){this._parent=e,this.destroyed=!1,s.PassThrough.call(this)}var s=e("readable-stream"),u=e("inherits"),c=e("mp4-box-encoding");t.exports=i,u(i,s.Readable),i.prototype.mediaData=i.prototype.mdat=function(e,t){var n=new a(this);return this.box({type:"mdat",contentLength:e,encodeBufferLen:8,stream:n},t),n},i.prototype.box=function(e,t){if(t||(t=o),this.destroyed)return t(new Error("Encoder is destroyed"));var i;if(e.encodeBufferLen&&(i=new r(e.encodeBufferLen)),e.stream)e.buffer=null,i=c.encode(e,i),this.push(i),this._stream=e.stream,this._stream.on("readable",this._onreadable),this._stream.on("end",this._onend),this._stream.on("end",t),this._forward();else{if(i=c.encode(e,i),this.push(i))return n.nextTick(t);this._drain=t}},i.prototype.destroy=function(e){if(!this.destroyed){if(this.destroyed=!0,this._stream&&this._stream.destroy&&this._stream.destroy(),this._stream=null,this._drain){var t=this._drain;this._drain=null,t(e)}e&&this.emit("error",e),this.emit("close")}},i.prototype.finalize=function(){this.push(null)},i.prototype._forward=function(){if(this._stream)for(;!this.destroyed;){var e=this._stream.read();if(!e)return void(this._want=!!this._stream);if(!this.push(e))return}},i.prototype._read=function(){if(!this._reading&&!this.destroyed){if(this._reading=!0,this._stream&&this._forward(),this._drain){var e=this._drain;this._drain=null,e()}this._reading=!1}},u(a,s.PassThrough),a.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,this._parent.destroy(e),e&&this.emit("error",e),this.emit("close"))}}).call(this,e("_process"),e("buffer").Buffer)},{_process:65,buffer:23,inherits:40,"mp4-box-encoding":52,"readable-stream":82}],55:[function(e,t,n){n.decode=e("./decode"),n.encode=e("./encode")},{"./decode":53,"./encode":54}],56:[function(e,t){function n(e,t,n){return e<t?void 0:e<1.5*t?i(e/t)+" "+n:s(e/t)+" "+n+"s"}var r=1e3,o=60*r,a=60*o,u=24*a,c=365.25*u;t.exports=function(e,t){t=t||{};var i=typeof e;if("string"==i&&0<e.length)return function(e){if(!(100<(e+="").length)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();return"years"===i||"year"===i||"yrs"===i||"yr"===i||"y"===i?n*c:"days"===i||"day"===i||"d"===i?n*u:"hours"===i||"hour"===i||"hrs"===i||"hr"===i||"h"===i?n*a:"minutes"===i||"minute"===i||"mins"===i||"min"===i||"m"===i?n*o:"seconds"===i||"second"===i||"secs"===i||"sec"===i||"s"===i?n*r:"milliseconds"===i||"millisecond"===i||"msecs"===i||"msec"===i||"ms"===i?n:void 0}}}(e);if("number"==i&&!1===isNaN(e))return t.long?function(e){return n(e,u,"day")||n(e,a,"hour")||n(e,o,"minute")||n(e,r,"second")||e+" ms"}(e):function(e){var t=Math.round;return e>=u?t(e/u)+"d":e>=a?t(e/a)+"h":e>=o?t(e/o)+"m":e>=r?t(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],57:[function(e,t){function n(e,t){var o=this;return o instanceof n?(i.Readable.call(o,t),o.destroyed=!1,o._drained=!1,o._forwarding=!1,o._current=null,"function"==typeof e?o._queue=e:(o._queue=e.map(r),o._queue.forEach(function(e){"function"!=typeof e&&o._attachErrorListener(e)})),void o._next()):new n(e,t)}function r(e){if(!e||"function"==typeof e||e._readableState)return e;var t=(new i.Readable).wrap(e);return e.destroy&&(t.destroy=e.destroy.bind(e)),t}t.exports=n;var o=e("inherits"),i=e("readable-stream");o(n,i.Readable),n.obj=function(e){return new n(e,{objectMode:!0,highWaterMark:16})},n.prototype._read=function(){this._drained=!0,this._forward()},n.prototype._forward=function(){if(!this._forwarding&&this._drained&&this._current){this._forwarding=!0;for(var e;null!==(e=this._current.read());)this._drained=this.push(e);this._forwarding=!1}},n.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,this._current&&this._current.destroy&&this._current.destroy(),"function"!=typeof this._queue&&this._queue.forEach(function(e){e.destroy&&e.destroy()}),e&&this.emit("error",e),this.emit("close"))},n.prototype._next=function(){var e=this;if(e._current=null,"function"==typeof e._queue)e._queue(function(t,n){return t?e.destroy(t):(n=r(n),e._attachErrorListener(n),void e._gotNextStream(n))});else{var t=e._queue.shift();"function"==typeof t&&(t=r(t()),e._attachErrorListener(t)),e._gotNextStream(t)}},n.prototype._gotNextStream=function(e){function t(){r._forward()}function n(){e._readableState.ended||r.destroy()}var r=this;return e?(r._current=e,r._forward(),e.on("readable",t),e.once("end",function o(){r._current=null,e.removeListener("readable",t),e.removeListener("end",o),e.removeListener("close",n),r._next()}),void e.once("close",n)):(r.push(null),void r.destroy())},n.prototype._attachErrorListener=function(e){var t=this;e&&e.once("error",function n(r){e.removeListener("error",n),t.destroy(r)})}},{inherits:40,"readable-stream":82}],58:[function(e,t){t.exports=function(e,t){var n=null;return e.on(t,function(e){if(n){var t=n;n=null,t(e)}}),function(e){n=e}}},{}],59:[function(e,t){function n(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function r(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}var o=e("wrappy");t.exports=o(n),t.exports.strict=o(r),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return r(this)},configurable:!0})})},{wrappy:118}],60:[function(e,t){(function(n){function r(e){n.isBuffer(e)&&(e=a.decode(e)),i(e.info,"info"),i(e.info["name.utf-8"]||e.info.name,"info.name"),i(e.info["piece length"],"info['piece length']"),i(e.info.pieces,"info.pieces"),e.info.files?e.info.files.forEach(function(e){i("number"==typeof e.length,"info.files[0].length"),i(e["path.utf-8"]||e.path,"info.files[0].path")}):i("number"==typeof e.info.length,"info.length");var t={};t.info=e.info,t.infoBuffer=a.encode(e.info),t.infoHash=u.sync(t.infoBuffer),t.infoHashBuffer=n.from(t.infoHash,"hex"),t.name=(e.info["name.utf-8"]||e.info.name).toString(),void 0!==e.info.private&&(t.private=!!e.info.private),e["creation date"]&&(t.created=new Date(1e3*e["creation date"])),e["created by"]&&(t.createdBy=e["created by"].toString()),n.isBuffer(e.comment)&&(t.comment=e.comment.toString()),t.announce=[],e["announce-list"]&&e["announce-list"].length?e["announce-list"].forEach(function(e){e.forEach(function(e){t.announce.push(e.toString())})}):e.announce&&t.announce.push(e.announce.toString()),n.isBuffer(e["url-list"])&&(e["url-list"]=0<e["url-list"].length?[e["url-list"]]:[]),t.urlList=(e["url-list"]||[]).map(function(e){return e.toString()}),c(t.announce),c(t.urlList);var r=e.info.files||[e.info];t.files=r.map(function(e,n){var i=[].concat(t.name,e["path.utf-8"]||e.path||[]).map(function(e){return e.toString()});return{path:s.join.apply(null,[s.sep].concat(i)).slice(1),name:i[i.length-1],length:e.length,offset:r.slice(0,n).reduce(o,0)}}),t.length=r.reduce(o,0);var l=t.files[t.files.length-1];return t.pieceLength=e.info["piece length"],t.lastPieceLength=(l.offset+l.length)%t.pieceLength||t.pieceLength,t.pieces=function(e){for(var t=[],n=0;n<e.length;n+=20)t.push(e.slice(n,n+20).toString("hex"));return t}(e.info.pieces),t}function o(e,t){return e+t.length}function i(e,t){if(!e)throw new Error("Torrent is missing required field: "+t)}t.exports=r,t.exports.decode=r,t.exports.encode=function(e){var t={info:e.info};return t["announce-list"]=(e.announce||[]).map(function(e){return t.announce||(t.announce=e),[e=n.from(e,"utf8")]}),t["url-list"]=e.urlList||[],e.created&&(t["creation date"]=0|e.created.getTime()/1e3),e.createdBy&&(t["created by"]=e.createdBy),e.comment&&(t.comment=e.comment),a.encode(t)};var a=e("bencode"),s=e("path"),u=e("simple-sha1"),c=e("uniq")}).call(this,e("buffer").Buffer)},{bencode:11,buffer:23,path:62,"simple-sha1":92,uniq:110}],61:[function(e,t){(function(n,r){function o(e){if("string"==typeof e&&/^(stream-)?magnet:/.test(e))return u(e);if("string"==typeof e&&(/^[a-f0-9]{40}$/i.test(e)||/^[a-z2-7]{32}$/i.test(e)))return u("magnet:?xt=urn:btih:"+e);if(r.isBuffer(e)&&20===e.length)return u("magnet:?xt=urn:btih:"+e.toString("hex"));if(r.isBuffer(e))return c(e);if(e&&e.infoHash)return e.announce||(e.announce=[]),"string"==typeof e.announce&&(e.announce=[e.announce]),e.urlList||(e.urlList=[]),e;throw new Error("Invalid torrent identifier")}t.exports=o,t.exports.remote=function(e,t){function r(e){try{u=o(e)}catch(e){return t(e)}u&&u.infoHash?t(null,u):t(new Error("Invalid torrent identifier"))}var u;if("function"!=typeof t)throw new Error("second argument must be a Function");try{u=o(e)}catch(e){}u&&u.infoHash?n.nextTick(function(){t(null,u)}):function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)?i(e,function(e,n){return e?t(new Error("Error converting Blob: "+e.message)):void r(n)}):"function"==typeof s&&/^https?:/.test(e)?s.concat({url:e,timeout:3e4,headers:{"user-agent":"WebTorrent (http://webtorrent.io)"}},function(e,n,o){return e?t(new Error("Error downloading torrent: "+e.message)):void r(o)}):"function"==typeof a.readFile&&"string"==typeof e?a.readFile(e,function(e,n){return e?t(new Error("Invalid torrent identifier")):void r(n)}):n.nextTick(function(){t(new Error("Invalid torrent identifier"))})};var i=e("blob-to-buffer"),a=e("fs"),s=e("simple-get"),u=e("magnet-uri"),c=e("parse-torrent-file");t.exports.toMagnetURI=u.encode,t.exports.toTorrentFile=c.encode,r.alloc(0)}).call(this,e("_process"),e("buffer").Buffer)},{_process:65,"blob-to-buffer":19,buffer:23,fs:22,"magnet-uri":47,"parse-torrent-file":60,"simple-get":90}],62:[function(e,t,n){(function(e){function t(e,t){for(var n,r=0,o=e.length-1;0<=o;o--)"."===(n=e[o])?e.splice(o,1):".."===n?(e.splice(o,1),r++):r&&(e.splice(o,1),r--);if(t)for(;r--;r)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return o.exec(e).slice(1)};n.resolve=function(){for(var n,o="",i=!1,a=arguments.length-1;-1<=a&&!i;a--){if("string"!=typeof(n=0<=a?arguments[a]:e.cwd()))throw new TypeError("Arguments to path.resolve must be strings");n&&(o=n+"/"+o,i="/"===n.charAt(0))}return(i?"/":"")+(o=t(r(o.split("/"),function(e){return!!e}),!i).join("/"))||"."},n.normalize=function(e){var o=n.isAbsolute(e),i="/"===a(e,-1);return(e=t(r(e.split("/"),function(e){return!!e}),!o).join("/"))||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var o=r(e.split("/")),i=r(t.split("/")),a=c(o.length,i.length),s=a,u=0;u<a;u++)if(o[u]!==i[u]){s=u;break}var l=[];for(u=s;u<o.length;u++)l.push("..");return(l=l.concat(i.slice(s))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=i(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=i(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return i(e)[3]};var a=function(e,t,n){return e.substr(t,n)}}).call(this,e("_process"))},{_process:65}],63:[function(e,t){for(var n=e("closest-to"),r=13,i=[];22>r++;)i.push(o(2,r));t.exports=function(e){return n(e/1024,i)}},{"closest-to":26}],64:[function(e,t){(function(e){"use strict";t.exports=!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?function(t,n,r,o){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var i,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,o)});default:for(i=Array(s-1),a=0;a<i.length;)i[a++]=arguments[a];return e.nextTick(function(){t.apply(null,i)})}}:e.nextTick}).call(this,e("_process"))},{_process:65}],65:[function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(){p&&d&&(p=!1,d.length?h=d.concat(h):g=-1,h.length&&a())}function a(){if(!p){var e=o(i);p=!0;for(var t=h.length;t;){for(d=h,h=[];++g<t;)d&&d[g].run();g=-1,t=h.length}d=null,p=!1,function(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var c,l,f=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var d,h=[],p=!1,g=-1;f.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new s(e,t)),1!==h.length||p||o(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(){return[]},f.binding=function(){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],66:[function(e,t){var n=e("once"),r=e("end-of-stream"),o=e("fs"),i=function(){},a=function(e){return"function"==typeof e},s=function(e){return!!o&&(e instanceof(o.ReadStream||i)||e instanceof(o.WriteStream||i))&&a(e.close)},u=function(e,t,o,i){i=n(i);var u=!1;e.on("close",function(){u=!0}),r(e,{readable:t,writable:o},function(e){return e?i(e):(u=!0,void i())});var c=!1;return function(t){if(!u)return c?void 0:(c=!0,s(e)?e.close():function(e){return e.setHeader&&a(e.abort)}(e)?e.abort():a(e.destroy)?e.destroy():void i(t||new Error("stream was destroyed")))}},c=function(e){e()},l=function(e,t){return e.pipe(t)};t.exports=function(){var e=Array.prototype.slice.call(arguments),t=a(e[e.length-1]||i)&&e.pop()||i;if(Array.isArray(e[0])&&(e=e[0]),2>e.length)throw new Error("pump requires two streams per minimum");var n,r=e.map(function(o,i){var a=i<e.length-1;return u(o,a,0<i,function(e){n||(n=e),e&&r.forEach(c),a||(r.forEach(c),t(n))})});return e.reduce(l)}},{"end-of-stream":32,fs:21,once:59}],67:[function(e,n,r){(function(e){!function(t){function o(e){throw new RangeError(L[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function u(e,t){var n=e.split("@"),r="";return 1<n.length&&(r=n[0]+"@",e=n[1]),r+s((e=e.replace(I,".")).split("."),t).join(".")}function c(e){for(var t,n,r=[],o=0,i=e.length;o<i;)55296<=(t=e.charCodeAt(o++))&&56319>=t&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function l(e){return s(e,function(e){var t="";return 65535<e&&(t+=M(55296|1023&(e-=65536)>>>10),e=56320|1023&e),t+=M(e)}).join("")}function f(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:C}function d(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?U(e/x):e>>1,e+=U(e/t);e>B*E>>1;r+=C)e=U(e/B);return U(r+(B+1)*e/(e+S))}function p(e){var t,n,r,i,a,s,u,c,d,p,g=[],m=e.length,v=0,y=A,b=T;for(0>(n=e.lastIndexOf(P))&&(n=0),r=0;r<n;++r)128<=e.charCodeAt(r)&&o("not-basic"),g.push(e.charCodeAt(r));for(i=0<n?n+1:0;i<m;){for(a=v,s=1,u=C;i>=m&&o("invalid-input"),((c=f(e.charCodeAt(i++)))>=C||c>U((w-v)/s))&&o("overflow"),v+=c*s,!(c<(d=u<=b?k:u>=b+E?E:u-b));u+=C)s>U(w/(p=C-d))&&o("overflow"),s*=p;b=h(v-a,t=g.length+1,0==a),U(v/t)>w-y&&o("overflow"),y+=U(v/t),v%=t,g.splice(v++,0,y)}return l(g)}function g(e){var t,n,r,i,a,s,u,l,f,p,g,m,v,y,b,_=[];for(m=(e=c(e)).length,t=A,n=0,a=T,s=0;s<m;++s)128>(g=e[s])&&_.push(M(g));for(r=i=_.length,i&&_.push(P);r<m;){for(u=w,s=0;s<m;++s)(g=e[s])>=t&&g<u&&(u=g);for(u-t>U((w-n)/(v=r+1))&&o("overflow"),n+=(u-t)*v,t=u,s=0;s<m;++s)if((g=e[s])<t&&++n>w&&o("overflow"),g==t){for(l=n,f=C;!(l<(p=f<=a?k:f>=a+E?E:f-a));f+=C)b=l-p,y=C-p,_.push(M(d(p+b%y,0))),l=U(b/y);_.push(M(d(l,0))),a=h(n,v,r==i),n=0,++r}++n,++t}return _.join("")}var m="object"==typeof r&&r&&!r.nodeType&&r,v="object"==typeof n&&n&&!n.nodeType&&n,y="object"==typeof e&&e;(y.global===y||y.window===y||y.self===y)&&(t=y);var b,_,w=2147483647,C=36,k=1,E=26,S=38,x=700,T=72,A=128,P="-",O=/^xn--/,R=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=C-k,U=i,M=a;if(b={version:"1.4.1",ucs2:{decode:c,encode:l},decode:p,encode:g,toASCII:function(e){return u(e,function(e){return R.test(e)?"xn--"+g(e):e})},toUnicode:function(e){return u(e,function(e){return O.test(e)?p(e.slice(4).toLowerCase()):e})}},m&&v)if(n.exports==m)v.exports=b;else for(_ in b)b.hasOwnProperty(_)&&(m[_]=b[_]);else t.punycode=b}(this)}).call(this,void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{}],68:[function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,o,i){t=t||"&",o=o||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=e.length;0<u&&c>u&&(c=u);for(var l=0;l<c;++l){var f,d,h,p,g=e[l].replace(s,"%20"),m=g.indexOf(o);0<=m?(f=g.substr(0,m),d=g.substr(m+1)):(f=g,d=""),h=decodeURIComponent(f),p=decodeURIComponent(d),n(a,h)?r(a[h])?a[h].push(p):a[h]=[a[h],p]:a[h]=p}return a};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],69:[function(e,t){"use strict";function n(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,a,s){return t=t||"&",a=a||"=",null===e&&(e=void 0),"object"==typeof e?n(i(e),function(i){var s=encodeURIComponent(r(i))+a;return o(e[i])?n(e[i],function(e){return s+encodeURIComponent(r(e))}).join(t):s+encodeURIComponent(r(e[i]))}).join(t):s?encodeURIComponent(r(s))+a+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],70:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":68,"./encode":69}],71:[function(e,t){t.exports=function(e){var t=0;return function(){if(t===e.length)return null;var n=e.length-t,r=0|Math.random()*n,o=e[t+r],i=e[t];return e[t]=o,e[t+r]=i,t++,o}}},{}],72:[function(e,n){(function(t,r){"use strict";var o=e("safe-buffer").Buffer,i=r.crypto||r.msCrypto;n.exports=i&&i.getRandomValues?function(e,n){if(65536<e)throw new Error("requested too many random bytes");var a=new r.Uint8Array(e);0<e&&i.getRandomValues(a);var s=o.from(a.buffer);return"function"==typeof n?t.nextTick(function(){n(null,s)}):s}:function(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}).call(this,e("_process"),void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{_process:65,"safe-buffer":88}],73:[function(e,t){function n(e,t){var r=this;return r instanceof n?(o.Writable.call(r,t),r.destroyed=!1,r._queue=[],r._position=e||0,r._cb=null,r._buffer=null,void(r._out=null)):new n(e)}var r=e("inherits"),o=e("readable-stream");t.exports=n,r(n,o.Writable),n.prototype._write=function(e,t,n){for(var r=this,o=!0;;){if(r.destroyed)return;if(0===r._queue.length)return r._buffer=e,void(r._cb=n);r._buffer=null;var i,a=r._queue[0],s=u(a.start-r._position,0),c=a.end-r._position;if(s>=e.length)return r._position+=e.length,n(null);if(c>e.length){r._position+=e.length,i=0===s?e:e.slice(s),o=a.stream.write(i)&&o;break}r._position+=c,i=0===s&&c===e.length?e:e.slice(s,c),o=a.stream.write(i)&&o,a.last&&a.stream.end(),e=e.slice(c),r._queue.shift()}o?n(null):a.stream.once("drain",n.bind(null,null))},n.prototype.slice=function(e){var t=this;if(t.destroyed)return null;e instanceof Array||(e=[e]);var n=new o.PassThrough;return e.forEach(function(r,o){t._queue.push({start:r.start,end:r.end,stream:n,last:o===e.length-1})}),t._buffer&&t._write(t._buffer,null,t._cb),n},n.prototype.destroy=function(e){var t=this;t.destroyed||(t.destroyed=!0,e&&t.emit("error",e))}},{inherits:40,"readable-stream":82}],74:[function(e,t){"use strict";function n(e){return this instanceof n?(u.call(this,e),c.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),void this.once("end",r)):new n(e)}function r(){this.allowHalfOpen||this._writableState.ended||i(o,this)}function o(e){e.end()}var i=e("process-nextick-args"),a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=n;var s=e("core-util-is");s.inherits=e("inherits");var u=e("./_stream_readable"),c=e("./_stream_writable");s.inherits(n,u);for(var l,f=a(c.prototype),d=0;d<f.length;d++)l=f[d],n.prototype[l]||(n.prototype[l]=c.prototype[l]);Object.defineProperty(n.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),n.prototype._destroy=function(e,t){this.push(null),this.end(),i(t,e)}},{"./_stream_readable":76,"./_stream_writable":78,"core-util-is":27,inherits:40,"process-nextick-args":64}],75:[function(e,t){"use strict";function n(e){return this instanceof n?void r.call(this,e):new n(e)}t.exports=n;var r=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(n,r),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":77,"core-util-is":27,inherits:40}],76:[function(e,t){(function(n){"use strict";function r(t,n){C=C||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof C&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=i(this.highWaterMark),this.buffer=new R,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!O&&(O=e("string_decoder/").StringDecoder),this.decoder=new O(t.encoding),this.encoding=t.encoding)}function o(t){return C=C||e("./_stream_duplex"),this instanceof o?(this._readableState=new r(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),void S.call(this)):new o(t)}function a(e,t,n,r,o){var i,a=e._readableState;null===t?(a.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,l(e)}}(e,a)):(o||(i=u(a,t)),i?e.emit("error",i):a.objectMode||t&&0<t.length?("string"!=typeof t&&Object.getPrototypeOf(t)!==x.prototype&&!a.objectMode&&(t=function(e){return x.from(e)}(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):s(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?s(e,a,t,!1):d(e,a)):s(e,a,t,!1))):!r&&(a.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function s(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&l(e)),d(e,t)}function u(e,t){var n;return function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)||x.isBuffer(e)}(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function c(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e==e?(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=B?e=B:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function l(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(A("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?w(f,e):f(e))}function f(e){A("emit readable"),e.emit("readable"),m(e)}function d(e,t){t.readingMore||(t.readingMore=!0,w(h,e,t))}function h(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(A("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function p(e){A("readable nexttick read 0"),e.read(0)}function g(e,t){t.reading||(A("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),m(e),t.flowing&&!t.reading&&e.read(0)}function m(e){var t=e._readableState;for(A("flow",t.flowing);t.flowing&&null!==e.read(););}function v(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,o=n.data;for(e-=o.length;n=n.next;){var i=n.data,a=e>i.length?i.length:e;if(o+=a===i.length?i:i.slice(0,e),0===(e-=a)){a===i.length?(++r,t.head=n.next?n.next:t.tail=null):(t.head=n,n.data=i.slice(a));break}++r}return t.length-=r,o}(e,t):function(e,t){var n=x.allocUnsafe(e),r=t.head,o=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,a),0===(e-=a)){a===i.length?(++o,t.head=r.next?r.next:t.tail=null):(t.head=r,r.data=i.slice(a));break}++o}return t.length-=o,n}(e,t),r}(e,t.buffer,t.decoder),n);var n}function y(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,w(b,t,e))}function b(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function _(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var w=e("process-nextick-args");t.exports=o;var C,k=e("isarray");o.ReadableState=r;e("events").EventEmitter;var E=function(e,t){return e.listeners(t).length},S=e("./internal/streams/stream"),x=e("safe-buffer").Buffer,T=e("core-util-is");T.inherits=e("inherits");var A,P=e("util");A=P&&P.debuglog?P.debuglog("stream"):function(){};var O,R=e("./internal/streams/BufferList"),I=e("./internal/streams/destroy");T.inherits(o,S);var L=["error","close","destroy","pause","resume"];Object.defineProperty(o.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),o.prototype.destroy=I.destroy,o.prototype._undestroy=I.undestroy,o.prototype._destroy=function(e,t){this.push(null),t(e)},o.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=x.from(e,t),t=""),n=!0),a(this,e,t,!1,n)},o.prototype.unshift=function(e){return a(this,e,null,!0,!1)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(t){return O||(O=e("string_decoder/").StringDecoder),this._readableState.decoder=new O(t),this._readableState.encoding=t,this};var B=8388608;o.prototype.read=function(e){A("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return A("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?y(this):l(this),null;if(0===(e=c(e,t))&&t.ended)return 0===t.length&&y(this),null;var r,o=t.needReadable;return A("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&A("length less than watermark",o=!0),t.ended||t.reading?A("reading or ended",o=!1):o&&(A("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=c(n,t))),null===(r=0<e?v(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(!t.ended&&(t.needReadable=!0),n!==e&&t.ended&&y(this)),null!==r&&this.emit("data",r),r},o.prototype._read=function(){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,t){function r(e,t){A("onunpipe"),e===f&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,i())}function o(){A("onend"),e.end()}function i(){A("cleanup"),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("drain",p),e.removeListener("error",s),e.removeListener("unpipe",r),f.removeListener("end",o),f.removeListener("end",l),f.removeListener("data",a),g=!0,d.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&p()}function a(t){A("ondata"),v=!1,!1!==e.write(t)||v||((1===d.pipesCount&&d.pipes===e||1<d.pipesCount&&-1!==_(d.pipes,e))&&!g&&(A("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,v=!0),f.pause())}function s(t){A("onerror",t),l(),e.removeListener("error",s),0===E(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",c),l()}function c(){A("onfinish"),e.removeListener("close",u),l()}function l(){A("unpipe"),f.unpipe(e)}var f=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,A("pipe count=%d opts=%j",d.pipesCount,t);var h=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?o:l;d.endEmitted?w(h):f.once("end",h),e.on("unpipe",r);var p=function(e){return function(){var t=e._readableState;A("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&E(e,"data")&&(t.flowing=!0,m(e))}}(f);e.on("drain",p);var g=!1,v=!1;return f.on("data",a),function(e,t,n){"function"==typeof e.prependListener?e.prependListener(t,n):e._events&&e._events[t]?k(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",s),e.once("close",u),e.once("finish",c),e.emit("pipe",f),d.flowing||(A("pipe resume"),f.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)r[i].emit("unpipe",this,n);return this}var a=_(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},o.prototype.on=function(e,t){var n=S.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&l(this):w(p,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(A("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,w(g,e,t))}(this,e)),this},o.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;for(var o in e.on("end",function(){if(A("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(o){(A("wrapped data"),t.decoder&&(o=t.decoder.write(o)),t.objectMode&&null==o||!(t.objectMode||o&&o.length))||(r.push(o)||(n=!0,e.pause()))}),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<L.length;i++)e.on(L[i],r.emit.bind(r,L[i]));return r._read=function(t){A("wrapped _read",t),n&&(n=!1,e.resume())},r},o._fromList=v}).call(this,e("_process"))},{"./_stream_duplex":74,"./internal/streams/BufferList":79,"./internal/streams/destroy":80,"./internal/streams/stream":81,_process:65,"core-util-is":27,events:33,inherits:40,isarray:45,"process-nextick-args":64,"safe-buffer":88,"string_decoder/":102,util:21}],77:[function(e,t){"use strict";function n(e){this.afterTransform=function(t,n){return function(e,t,n){var r=e._transformState;r.transforming=!1;var o=r.writecb;if(!o)return e.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=n&&e.push(n),o(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(e){if(!(this instanceof r))return new r(e);i.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){o(t,e,n)}):o(t)})}function o(e,t,n){if(t)return e.emit("error",t);null!=n&&e.push(n);var r=e._writableState,o=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(o.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=r;var i=e("./_stream_duplex"),a=e("core-util-is");a.inherits=e("inherits"),a.inherits(r,i),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},r.prototype._transform=function(){throw new Error("_transform() is not implemented")},r.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},r.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},r.prototype._destroy=function(e,t){var n=this;i.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{"./_stream_duplex":74,"core-util-is":27,inherits:40}],78:[function(e,t){(function(r){"use strict";function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var o=r.callback;t.pendingcb--,o(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}function a(){}function s(t,n){v=v||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof v&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:a,this.highWaterMark=i(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,o){--t.pendingcb,n?(m(o,r),m(g,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(o(r),e._writableState.errorEmitted=!0,e.emit("error",r),g(e,t))}(e,n,r,t,o);else{var i=h(n);i||n.corked||n.bufferProcessing||!n.bufferedRequest||d(e,n),r?y(f,e,n,i,o):f(e,n,i,o)}}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function u(t){return v=v||e("./_stream_duplex"),_.call(u,this)||this instanceof v?(this._writableState=new s(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),void C.call(this)):new u(t)}function c(e,t,n,r,o,i){if(!n){var a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=k.from(t,n)),t}(t,r,o);r!==a&&(n=!0,o="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:i,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else l(e,t,!1,s,r,o,i);return u}function l(e,t,n,r,o,i,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function f(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),g(e,t)}function d(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,l(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t)}else{for(;n;){var c=n.chunk,f=n.encoding,d=n.callback;if(l(e,t,!1,t.objectMode?1:c.length,c,f,d),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function h(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function p(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),g(e,t)})}function g(e,t){var n=h(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,m(p,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}var m=e("process-nextick-args");t.exports=u;var v,y=!r.browser&&-1<["v0.10","v0.9."].indexOf(r.version.slice(0,5))?n:m;u.WritableState=s;var b=e("core-util-is");b.inherits=e("inherits");var _,w={deprecate:e("util-deprecate")},C=e("./internal/streams/stream"),k=e("safe-buffer").Buffer,E=e("./internal/streams/destroy");b.inherits(u,C),s.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(s.prototype,"buffer",{get:w.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(_=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(e){return!!_.call(this,e)||e&&e._writableState instanceof s}})):_=function(e){return e instanceof this},u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},u.prototype.write=function(e,t,n){var r=this._writableState,o=!1,i=function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)||k.isBuffer(e)}(e)&&!r.objectMode;return i&&!k.isBuffer(e)&&(e=function(e){return k.from(e)}(e)),"function"==typeof t&&(n=t,t=null),i?t="buffer":!t&&(t=r.defaultEncoding),"function"!=typeof n&&(n=a),r.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),m(t,n)}(this,n):(i||function(e,t,n,r){var o=!0,i=!1;return null===n?i=new TypeError("May not write null values to stream"):"string"!=typeof n&&void 0!==n&&!t.objectMode&&(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),m(r,i),o=!1),o}(this,r,e,n))&&(r.pendingcb++,o=c(this,r,i,e,t,n)),o},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&d(this,e))},u.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},u.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},u.prototype._writev=null,u.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,g(e,t),n&&(t.finished?m(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),u.prototype.destroy=E.destroy,u.prototype._undestroy=E.undestroy,u.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"))},{"./_stream_duplex":74,"./internal/streams/destroy":80,"./internal/streams/stream":81,_process:65,"core-util-is":27,inherits:40,"process-nextick-args":64,"safe-buffer":88,"util-deprecate":115}],79:[function(e,t){"use strict";function n(e,t,n){e.copy(t,n)}var r=e("safe-buffer").Buffer;t.exports=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),o=this.head,i=0;o;)n(o.data,t,i),i+=o.data.length,o=o.next;return t},e}()},{"safe-buffer":88}],80:[function(e,t){"use strict";function n(e,t){e.emit("error",t)}var r=e("process-nextick-args");t.exports={destroy:function(e,t){var o=this,i=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return i||a?void(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&r(n,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),void this._destroy(e||null,function(e){!t&&e?(r(n,o,e),o._writableState&&(o._writableState.errorEmitted=!0)):t&&t(e)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":64}],81:[function(e,t){t.exports=e("events").EventEmitter},{events:33}],82:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":74,"./lib/_stream_passthrough.js":75,"./lib/_stream_readable.js":76,"./lib/_stream_transform.js":77,"./lib/_stream_writable.js":78}],83:[function(e,t,n){function r(e,t,n,r){function i(){C.removeEventListener("loadstart",i),n.autoplay&&C.play()}function s(){C.removeEventListener("canplay",s),r(null,C)}function d(){C=t("iframe"),o(e,function(e,t){return e?_(e):(C.src=t,".pdf"!==k&&(C.sandbox="allow-forms allow-scripts"),void r(null,C))})}function _(t){t.message='Error rendering file "'+e.name+'": '+t.message,u(t.message),r(t)}var C,k=f.extname(e.name).toLowerCase(),E=0;0<=m.indexOf(k)?function(){function r(){u("Use MediaSource API for "+e.name),m(),C.addEventListener("error",d),C.addEventListener("loadstart",i),C.addEventListener("canplay",s);var t=new l(C).createWriteStream(a(e.name));e.createReadStream().pipe(t),E&&(C.currentTime=E)}function c(){u("Use Blob URL for "+e.name),m(),C.addEventListener("error",_),C.addEventListener("loadstart",i),C.addEventListener("canplay",s),o(e,function(e,t){return e?_(e):(C.src=t,void(E&&(C.currentTime=E)))})}function f(e){u("videostream error: fallback to MediaSource API: %o",e.message||e),C.removeEventListener("error",f),C.removeEventListener("canplay",s),r()}function d(t){return u("MediaSource API error: fallback to Blob URL: %o",t.message||t),"number"==typeof e.length&&e.length>n.maxBlobLength?(u("File length too large for Blob URL approach: %d (max: %d)",e.length,n.maxBlobLength),_(new Error("File length too large for Blob URL approach: "+e.length+" (max: "+n.maxBlobLength+")"))):(C.removeEventListener("error",d),C.removeEventListener("canplay",s),void c())}function m(){C||(C=t(v)).addEventListener("progress",function(){E=C.currentTime})}var v=0<=g.indexOf(k)?"video":"audio";w?0<=p.indexOf(k)?(u("Use `videostream` package for "+e.name),m(),C.addEventListener("error",f),C.addEventListener("loadstart",i),C.addEventListener("canplay",s),h(e,C)):r():c()}():0<=v.indexOf(k)?(C=t("audio"),o(e,function(e,t){return e?_(e):(C.addEventListener("error",_),C.addEventListener("loadstart",i),C.addEventListener("canplay",s),void(C.src=t))})):0<=y.indexOf(k)?(C=t("img"),o(e,function(t,n){return t?_(t):(C.src=n,C.alt=e.name,void r(null,C))})):0<=b.indexOf(k)?d():function(){u('Unknown file extension "%s" - will attempt to render into iframe',k);var t="";e.createReadStream({start:0,end:1e3}).setEncoding("utf8").on("data",function(e){t+=e}).on("end",function(){c(t)?(u('File extension "%s" appears ascii, so will render.',k),d()):(u('File extension "%s" appears non-ascii, will not render.',k),r(new Error('Unsupported file type "'+k+'": Cannot append to DOM')))}).on("error",r)}()}function o(e,t){var r=f.extname(e.name).toLowerCase();d(e.createReadStream(),n.mime[r],t)}function i(e){if(null==e)throw new Error("file cannot be null or undefined");if("string"!=typeof e.name)throw new Error("missing or invalid file.name property");if("function"!=typeof e.createReadStream)throw new Error("missing or invalid file.createReadStream property")}function a(e){return{".m4a":'audio/mp4; codecs="mp4a.40.5"',".m4v":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".mkv":'video/webm; codecs="avc1.640029, mp4a.40.5"',".mp3":"audio/mpeg",".mp4":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".webm":'video/webm; codecs="vorbis, vp8"'}[f.extname(e).toLowerCase()]}function s(e){null==e.autoplay&&(e.autoplay=!0),null==e.controls&&(e.controls=!0),null==e.maxBlobLength&&(e.maxBlobLength=_)}n.render=function(e,t,n,o){"function"==typeof n&&(o=n,n={}),n||(n={}),o||(o=function(){}),i(e),s(n),"string"==typeof t&&(t=document.querySelector(t)),r(e,function(n){if(t.nodeName!==n.toUpperCase()){var r=f.extname(e.name).toLowerCase();throw new Error('Cannot render "'+r+'" inside a "'+t.nodeName.toLowerCase()+'" element, expected "'+n+'"')}return t},n,o)},n.append=function(e,t,n,o){function a(e){var n=document.createElement(e);return t.appendChild(n),n}if("function"==typeof n&&(o=n,n={}),n||(n={}),o||(o=function(){}),i(e),s(n),"string"==typeof t&&(t=document.querySelector(t)),t&&("VIDEO"===t.nodeName||"AUDIO"===t.nodeName))throw new Error("Invalid video/audio node argument. Argument must be root element that video/audio tag will be appended to.");r(e,function(e){return"video"===e||"audio"===e?function(e){var r=a(e);return n.controls&&(r.controls=!0),n.autoplay&&(r.autoplay=!0),t.appendChild(r),r}(e):a(e)},n,function(e,t){e&&t&&t.remove(),o(e,t)})},n.mime=e("./lib/mime.json");var u=e("debug")("render-media"),c=e("is-ascii"),l=e("mediasource"),f=e("path"),d=e("stream-to-blob-url"),h=e("videostream"),p=[".m4a",".m4v",".mp4"],g=[".m4v",".mkv",".mp4",".webm"],m=[].concat(g,[".m4a",".mp3"]),v=[".aac",".oga",".ogg",".wav"],y=[".bmp",".gif",".jpeg",".jpg",".png",".svg"],b=[".css",".html",".js",".md",".pdf",".txt"],_=2e8,w="undefined"!=typeof window&&window.MediaSource},{"./lib/mime.json":84,debug:29,"is-ascii":41,mediasource:48,path:62,"stream-to-blob-url":99,videostream:117}],84:[function(e,t){t.exports={".3gp":"video/3gpp",".aac":"audio/aac",".aif":"audio/x-aiff",".aiff":"audio/x-aiff",".atom":"application/atom+xml",".avi":"video/x-msvideo",".bmp":"image/bmp",".bz2":"application/x-bzip2",".conf":"text/plain",".css":"text/css",".csv":"text/plain",".diff":"text/x-diff",".doc":"application/msword",".flv":"video/x-flv",".gif":"image/gif",".gz":"application/x-gzip",".htm":"text/html",".html":"text/html",".ico":"image/vnd.microsoft.icon",".ics":"text/calendar",".iso":"application/octet-stream",".jar":"application/java-archive",".jpeg":"image/jpeg",".jpg":"image/jpeg",".js":"application/javascript",".json":"application/json",".less":"text/css",".log":"text/plain",".m3u":"audio/x-mpegurl",".m4a":"audio/mp4",".m4v":"video/mp4",".manifest":"text/cache-manifest",".markdown":"text/x-markdown",".mathml":"application/mathml+xml",".md":"text/x-markdown",".mid":"audio/midi",".midi":"audio/midi",".mov":"video/quicktime",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4v":"video/mp4",".mpeg":"video/mpeg",".mpg":"video/mpeg",".odp":"application/vnd.oasis.opendocument.presentation",".ods":"application/vnd.oasis.opendocument.spreadsheet",".odt":"application/vnd.oasis.opendocument.text",".oga":"audio/ogg",".ogg":"application/ogg",".pdf":"application/pdf",".png":"image/png",".pps":"application/vnd.ms-powerpoint",".ppt":"application/vnd.ms-powerpoint",".ps":"application/postscript",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".rar":"application/x-rar-compressed",".rdf":"application/rdf+xml",".rss":"application/rss+xml",".rtf":"application/rtf",".svg":"image/svg+xml",".svgz":"image/svg+xml",".swf":"application/x-shockwave-flash",".tar":"application/x-tar",".tbz":"application/x-bzip-compressed-tar",".text":"text/plain",".tif":"image/tiff",".tiff":"image/tiff",".torrent":"application/x-bittorrent",".ttf":"application/x-font-ttf",".txt":"text/plain",".wav":"audio/wav",".webm":"video/webm",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".xls":"application/vnd.ms-excel",".xml":"application/xml",".yaml":"text/yaml",".yml":"text/yaml",".zip":"application/zip"}},{}],85:[function(e,t){(function(e){t.exports=function(t,n,r){function o(t){function n(){r&&r(t,a),r=null}f?e.nextTick(n):n()}function i(e,n,r){if(a[e]=r,n&&(l=!0),0==--u||n)o(n);else if(!l&&d<s){var f;c?(f=c[d],d+=1,t[f](function(e,t){i(f,e,t)})):(f=d,d+=1,t[f](function(e,t){i(f,e,t)}))}}if("number"!=typeof n)throw new Error("second argument must be a Number");var a,s,u,c,l,f=!0;Array.isArray(t)?(a=[],u=s=t.length):(c=Object.keys(t),a={},u=s=c.length);var d=n;u?c?c.some(function(e,r){if(t[e](function(t,n){i(e,t,n)}),r===n-1)return!0}):t.some(function(e,t){if(e(function(e,n){i(t,e,n)}),t===n-1)return!0}):o(null),f=!1}}).call(this,e("_process"))},{_process:65}],86:[function(e,t){(function(e){t.exports=function(t,n){function r(t){function r(){n&&n(t,i),n=null}u?e.nextTick(r):r()}function o(e,t,n){i[e]=n,(0==--a||t)&&r(t)}var i,a,s,u=!0;Array.isArray(t)?(i=[],a=t.length):(s=Object.keys(t),i={},a=s.length),a?s?s.forEach(function(e){t[e](function(t,n){o(e,t,n)})}):t.forEach(function(e,t){e(function(e,n){o(t,e,n)})}):r(null),u=!1}}).call(this,e("_process"))},{_process:65}],87:[function(e,n){(function(e){!function(){function t(e){"use strict";for(var n={fill:0},i=function(e){for(e+=9;0<e%64;e+=1);return e},a=function(e,t,n,r,o){var i,a=this,s=o%4,u=(r+s)%4,c=r-u;switch(s){case 0:e[o]=a[n+3];case 1:e[0|o+1-(s<<1)]=a[n+2];case 2:e[0|o+2-(s<<1)]=a[n+1];case 3:e[0|o+3-(s<<1)]=a[n]}if(!(r<u+s)){for(i=4-s;i<c;i=0|i+4)t[0|o+i>>2]=a[n+i]<<24|a[n+i+1]<<16|a[n+i+2]<<8|a[n+i+3];switch(u){case 3:e[0|o+c+1]=a[n+c+2];case 2:e[0|o+c+2]=a[n+c+1];case 1:e[0|o+c+3]=a[n+c]}}},s=function(e){switch(r.getDataType(e)){case"string":return function(e,t,n,r,o){var i,a=this,s=o%4,u=(r+s)%4,c=r-u;switch(s){case 0:e[o]=a.charCodeAt(n+3);case 1:e[0|o+1-(s<<1)]=a.charCodeAt(n+2);case 2:e[0|o+2-(s<<1)]=a.charCodeAt(n+1);case 3:e[0|o+3-(s<<1)]=a.charCodeAt(n)}if(!(r<u+s)){for(i=4-s;i<c;i=0|i+4)t[o+i>>2]=a.charCodeAt(n+i)<<24|a.charCodeAt(n+i+1)<<16|a.charCodeAt(n+i+2)<<8|a.charCodeAt(n+i+3);switch(u){case 3:e[0|o+c+1]=a.charCodeAt(n+c+2);case 2:e[0|o+c+2]=a.charCodeAt(n+c+1);case 1:e[0|o+c+3]=a.charCodeAt(n+c)}}}.bind(e);case"array":case"buffer":return a.bind(e);case"arraybuffer":return a.bind(new Uint8Array(e));case"view":return a.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return function(e,t,n,r,i){var a,s=i%4,u=(r+s)%4,c=r-u,l=new Uint8Array(o.readAsArrayBuffer(this.slice(n,n+r)));switch(s){case 0:e[i]=l[3];case 1:e[0|i+1-(s<<1)]=l[2];case 2:e[0|i+2-(s<<1)]=l[1];case 3:e[0|i+3-(s<<1)]=l[0]}if(!(r<u+s)){for(a=4-s;a<c;a=0|a+4)t[0|i+a>>2]=l[a]<<24|l[a+1]<<16|l[a+2]<<8|l[a+3];switch(u){case 3:e[0|i+c+1]=l[c+2];case 2:e[0|i+c+2]=l[c+1];case 1:e[0|i+c+3]=l[c]}}}.bind(e)}},u=Array(256),l=0;256>l;l++)u[l]=(16>l?"0":"")+l.toString(16);var f=function(e){for(var t=new Uint8Array(e),n=Array(e.byteLength),r=0;r<n.length;r++)n[r]=u[t[r]];return n.join("")};!function(e){if(0<e%64)throw new Error("Chunk size must be a multiple of 128 bit");n.offset=0,n.maxChunkLen=e,n.padMaxChunkLen=i(e),n.heap=new ArrayBuffer(function(e){var t;if(65536>=e)return 65536;if(16777216>e)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t}(n.padMaxChunkLen+320+20)),n.h32=new Int32Array(n.heap),n.h8=new Int8Array(n.heap),n.core=new t._core({Int32Array:Int32Array,DataView:DataView},{},n.heap),n.buffer=null}(e||65536);var d=function(e,t){n.offset=0;var r=new Int32Array(e,t+320,5);r[0]=1732584193,r[1]=-271733879,r[2]=-1732584194,r[3]=271733878,r[4]=-1009589776},h=function(e,t){var r=i(e),o=new Int32Array(n.heap,0,r>>2);return function(e,t){var n=new Uint8Array(e.buffer),r=t%4,o=t-r;switch(r){case 0:n[o+3]=0;case 1:n[o+2]=0;case 2:n[o+1]=0;case 3:n[o+0]=0}for(var i=1+(t>>2);i<e.length;i++)e[i]=0}(o,e),function(e,t,n){e[t>>2]|=128<<24-(t%4<<3),e[14+(-16&2+(t>>2))]=0|n/536870912,e[15+(-16&2+(t>>2))]=n<<3}(o,e,t),r},p=function(e,t,r,o){s(e)(n.h8,n.h32,t,r,o||0)},g=function(e,t,r,o,i){var a=r;p(e,t,r),i&&(a=h(r,o)),n.core.hash(a,n.padMaxChunkLen)},m=function(e,t){var n=new Int32Array(e,t+320,5),r=new Int32Array(5),o=new DataView(r.buffer);return o.setInt32(0,n[0],!1),o.setInt32(4,n[1],!1),o.setInt32(8,n[2],!1),o.setInt32(12,n[3],!1),o.setInt32(16,n[4],!1),r},v=this.rawDigest=function(e){var t=e.byteLength||e.length||e.size||0;d(n.heap,n.padMaxChunkLen);var r=0,o=n.maxChunkLen;for(r=0;t>r+o;r+=o)g(e,r,o,t,!1);return g(e,r,t-r,t,!0),m(n.heap,n.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return f(v(e).buffer)},this.resetState=function(){return d(n.heap,n.padMaxChunkLen),this},this.append=function(e){var t,r=0,o=e.byteLength||e.length||e.size||0,i=n.offset%n.maxChunkLen;for(n.offset+=o;r<o;)t=c(o-r,n.maxChunkLen-i),p(e,r,t,i),r+=t,(i+=t)===n.maxChunkLen&&(n.core.hash(n.maxChunkLen,n.padMaxChunkLen),i=0);return this},this.getState=function(){var e;if(n.offset%n.maxChunkLen)e=n.heap.slice(0);else{var t=new Int32Array(n.heap,n.padMaxChunkLen+320,5);e=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}return{offset:n.offset,heap:e}},this.setState=function(e){(n.offset=e.offset,20===e.heap.byteLength)?new Int32Array(n.heap,n.padMaxChunkLen+320,5).set(new Int32Array(e.heap)):n.h32.set(new Int32Array(e.heap));return this};var y=this.rawEnd=function(){var e=n.offset,t=e%n.maxChunkLen,r=h(t,e);n.core.hash(r,n.padMaxChunkLen);var o=m(n.heap,n.padMaxChunkLen);return d(n.heap,n.padMaxChunkLen),o};this.end=function(){return f(y().buffer)}}var r={getDataType:function(t){if("string"==typeof t)return"string";if(t instanceof Array)return"array";if(void 0!==e&&e.Buffer&&e.Buffer.isBuffer(t))return"buffer";if(t instanceof ArrayBuffer)return"arraybuffer";if(t.buffer instanceof ArrayBuffer)return"view";if(t instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};if(t._core=function(e,t,n){"use asm";var r=new e.Int32Array(n);return{hash:function(e,t){e|=0,t|=0;var n=0,o=0,i=0,a=0,s=0,u=0,c=0,l=0,f=0,d=0,h=0,p=0,g=0,m=0;for(i=0|r[t+320>>2],s=0|r[t+324>>2],c=0|r[t+328>>2],f=0|r[t+332>>2],h=0|r[t+336>>2],n=0;(0|n)<(0|e);n=0|n+64){for(a=i,u=s,l=c,d=f,p=h,o=0;64>(0|o);o=0|o+4)m=0|r[n+o>>2],g=0|(0|(i<<5|i>>>27)+(s&c|~s&f))+(0|(0|m+h)+1518500249),h=f,f=c,c=s<<30|s>>>2,s=i,i=g,r[e+o>>2]=m;for(o=0|e+64;(0|o)<(0|e+80);o=0|o+4)m=(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])<<1|(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])>>>31,g=0|(0|(i<<5|i>>>27)+(s&c|~s&f))+(0|(0|m+h)+1518500249),h=f,f=c,c=s<<30|s>>>2,s=i,i=g,r[o>>2]=m;for(o=0|e+80;(0|o)<(0|e+160);o=0|o+4)m=(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])<<1|(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])>>>31,g=0|(0|(i<<5|i>>>27)+(s^c^f))+(0|(0|m+h)+1859775393),h=f,f=c,c=s<<30|s>>>2,s=i,i=g,r[o>>2]=m;for(o=0|e+160;(0|o)<(0|e+240);o=0|o+4)m=(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])<<1|(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])>>>31,g=0|(0|(i<<5|i>>>27)+(s&c|s&f|c&f))+(0|(0|m+h)-1894007588),h=f,f=c,c=s<<30|s>>>2,s=i,i=g,r[o>>2]=m;for(o=0|e+240;(0|o)<(0|e+320);o=0|o+4)m=(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])<<1|(r[o-12>>2]^r[o-32>>2]^r[o-56>>2]^r[o-64>>2])>>>31,g=0|(0|(i<<5|i>>>27)+(s^c^f))+(0|(0|m+h)-899497514),h=f,f=c,c=s<<30|s>>>2,s=i,i=g,r[o>>2]=m;i=0|i+a,s=0|s+u,c=0|c+l,f=0|f+d,h=0|h+p}r[t+320>>2]=i,r[t+324>>2]=s,r[t+328>>2]=c,r[t+332>>2]=f,r[t+336>>2]=h}}},void 0===n?"undefined"!=typeof window&&(window.Rusha=t):n.exports=t,"undefined"!=typeof FileReaderSync){var o=new FileReaderSync,i=function(e,t,n,r,o){var a=new self.FileReader;a.onloadend=function(){var s=a.result;t+=a.result.byteLength;try{e.append(s)}catch(e){return void o(e)}t<r.size?i(e,t,n,r,o):o(null,e.end())},a.readAsArrayBuffer(r.slice(t,t+n))};self.onmessage=function(e){var n=e.data.data,r=e.data.file,o=e.data.id;if(void 0!==o&&(r||n)){var a=e.data.blockSize||4194304,s=new t(a);s.resetState();var u=function(e,t){e?self.postMessage({id:o,error:e.name}):self.postMessage({id:o,hash:t})};n&&function(e,t,n){try{n(null,e.digest(t))}catch(t){return n(t)}}(s,n,u),r&&i(s,0,a,r,u)}}}}()}).call(this,void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{}],88:[function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return a(e,t,n)}var i=e("buffer"),a=i.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=i:(r(i,n),n.Buffer=o),r(a,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0===t?r.fill(0):"string"==typeof n?r.fill(t,n):r.fill(t),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},{buffer:23}],89:[function(e,t){(function(e){t.exports=function(t,n){var r=[];t.on("data",function(e){r.push(e)}),t.once("end",function(){n&&n(null,e.concat(r)),n=null}),t.once("error",function(e){n&&n(e),n=null})}}).call(this,e("buffer").Buffer)},{buffer:23}],90:[function(e,t){(function(n){function r(e,t){var a;e="string"==typeof e?{url:e}:Object.assign({},e),t=c(t),e.url&&o(e),null==e.headers&&(e.headers={}),null==e.maxRedirects&&(e.maxRedirects=10),e.form&&(a="string"==typeof e.form?e.form:l.stringify(e.form)),e.body&&(a=e.json?JSON.stringify(e.body):e.body),e.json&&(e.headers.accept="application/json"),e.json&&a&&(e.headers["content-type"]="application/json"),e.form&&(e.headers["content-type"]="application/x-www-form-urlencoded"),a&&!i(a)&&(e.headers["content-length"]=n.byteLength(a)),delete e.body,delete e.form,a&&!e.method&&(e.method="POST"),e.method&&(e.method=e.method.toUpperCase()),Object.keys(e.headers).some(function(e){return"accept-encoding"===e.toLowerCase()})||(e.headers["accept-encoding"]="gzip, deflate");var d=("https:"===e.protocol?u:s).request(e,function(n){if(300<=n.statusCode&&400>n.statusCode&&"location"in n.headers)return e.url=n.headers.location,n.resume(),void(0<e.maxRedirects?(e.maxRedirects-=1,r(e,t)):t(new Error("too many redirects")));var o="function"==typeof f&&"HEAD"!==e.method;t(null,o?f(n):n)});return d.on("timeout",function(){d.abort(),t(new Error("Request timed out"))}),d.on("error",t),a&&i(a)?a.on("error",t).pipe(d):d.end(a),d}function o(e){var t=d.parse(e.url);t.hostname&&(e.hostname=t.hostname),t.port&&(e.port=t.port),t.protocol&&(e.protocol=t.protocol),t.auth&&(e.auth=t.auth),e.path=t.path,delete e.url}function i(e){return"function"==typeof e.pipe}t.exports=r;var a=e("simple-concat"),s=e("http"),u=e("https"),c=e("once"),l=e("querystring"),f=e("unzip-response"),d=e("url");r.concat=function(e,t){return r(e,function(n,r){return n?t(n):void a(r,function(n,o){if(n)return t(n);if(e.json)try{o=JSON.parse(o.toString())}catch(e){return t(e,r,o)}t(null,r,o)})})},["get","post","put","patch","head","delete"].forEach(function(e){r[e]=function(t,n){return"string"==typeof t&&(t={url:t}),t.method=e.toUpperCase(),r(t,n)}})}).call(this,e("buffer").Buffer)},{buffer:23,http:95,https:37,once:59,querystring:70,"simple-concat":89,"unzip-response":21,url:112}],91:[function(e,t){(function(n){function r(e){var t=this;if(!(t instanceof r))return new r(e);if(t._id=u(4).toString("hex").slice(0,7),t._debug("new peer %o",e),e=Object.assign({allowHalfOpen:!1},e),c.Duplex.call(t,e),t.channelName=e.initiator?e.channelName||u(20).toString("hex"):null,t._isChromium="undefined"!=typeof window&&!!window.webkitRTCPeerConnection,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||r.channelConfig,t.config=e.config||r.config,t.constraints=t._transformConstraints(e.constraints||r.constraints),t.offerConstraints=t._transformConstraints(e.offerConstraints||{}),t.answerConstraints=t._transformConstraints(e.answerConstraints||{}),t.reconnectTimer=e.reconnectTimer||!1,t.sdpTransform=e.sdpTransform||function(e){return e},t.stream=e.stream||!1,t.trickle=void 0===e.trickle||e.trickle,t._earlyMessage=null,t.destroyed=!1,t.connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localPort=void 0,t._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:a(),!t._wrtc)throw"undefined"==typeof window?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser");if(t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._channel=null,t._pendingCandidates=[],t._previousStreams=[],t._chunk=null,t._cb=null,t._interval=null,t._reconnectTimeout=null,t._pc=new t._wrtc.RTCPeerConnection(t.config,t.constraints),t._isWrtc=Array.isArray(t._pc.RTCIceConnectionStates),t._isReactNativeWebrtc="number"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.initiator){var n=!1;t._pc.onnegotiationneeded=function(){n||t._createOffer(),n=!0},t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)})}else t._pc.ondatachannel=function(e){t._setupData(e)};"addTrack"in t._pc?(t.stream&&t.stream.getTracks().forEach(function(e){t._pc.addTrack(e,t.stream)}),t._pc.ontrack=function(e){t._onTrack(e)}):(t.stream&&t._pc.addStream(t.stream),t._pc.onaddstream=function(e){t._onAddStream(e)}),t.initiator&&t._isWrtc&&t._pc.onnegotiationneeded(),t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound)}function o(){}t.exports=r;var i=e("debug")("simple-peer"),a=e("get-browser-rtc"),s=e("inherits"),u=e("randombytes"),c=e("readable-stream"),l=65536;s(r,c.Duplex),r.WEBRTC_SUPPORT=!!a(),r.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}]},r.constraints={},r.channelConfig={},Object.defineProperty(r.prototype,"bufferSize",{get:function(){return this._channel&&this._channel.bufferedAmount||0}}),r.prototype.address=function(){return{port:this.localPort,family:"IPv4",address:this.localAddress}},r.prototype.signal=function(e){var t=this;if(t.destroyed)throw new Error("cannot signal after peer is destroyed");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}t._debug("signal()"),e.candidate&&(t._pc.remoteDescription?t._addIceCandidate(e.candidate):t._pendingCandidates.push(e.candidate)),e.sdp&&t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e),function(){t.destroyed||(t._pendingCandidates.forEach(function(e){t._addIceCandidate(e)}),t._pendingCandidates=[],"offer"===t._pc.remoteDescription.type&&t._createAnswer())},function(e){t._destroy(e)}),e.sdp||e.candidate||t._destroy(new Error("signal() called with invalid signal data"))},r.prototype._addIceCandidate=function(e){var t=this;try{t._pc.addIceCandidate(new t._wrtc.RTCIceCandidate(e),o,function(e){t._destroy(e)})}catch(e){t._destroy(new Error("error adding candidate: "+e.message))}},r.prototype.send=function(e){this._isWrtc&&n.isBuffer(e)&&(e=new Uint8Array(e)),this._channel.send(e)},r.prototype.destroy=function(e){this._destroy(null,e)},r.prototype._destroy=function(e,t){var n=this;if(!n.destroyed){if(t&&n.once("close",t),n._debug("destroy (error: %s)",e&&(e.message||e)),n.readable=n.writable=!1,n._readableState.ended||n.push(null),n._writableState.finished||n.end(),n.destroyed=!0,n.connected=!1,n._pcReady=!1,n._channelReady=!1,n._previousStreams=null,n._earlyMessage=null,clearInterval(n._interval),clearTimeout(n._reconnectTimeout),n._interval=null,n._reconnectTimeout=null,n._chunk=null,n._cb=null,n._onFinishBound&&n.removeListener("finish",n._onFinishBound),n._onFinishBound=null,n._pc){try{n._pc.close()}catch(e){}n._pc.oniceconnectionstatechange=null,n._pc.onicegatheringstatechange=null,n._pc.onsignalingstatechange=null,n._pc.onicecandidate=null,"addTrack"in n._pc?n._pc.ontrack=null:n._pc.onaddstream=null,n._pc.onnegotiationneeded=null,n._pc.ondatachannel=null}if(n._channel){try{n._channel.close()}catch(e){}n._channel.onmessage=null,n._channel.onopen=null,n._channel.onclose=null,n._channel.onerror=null}n._pc=null,n._channel=null,e&&n.emit("error",e),n.emit("close")}},r.prototype._setupData=function(e){var t=this;return e.channel?(t._channel=e.channel,t._channel.binaryType="arraybuffer","number"==typeof t._channel.bufferedAmountLowThreshold&&(t._channel.bufferedAmountLowThreshold=l),t.channelName=t._channel.label,t._channel.onmessage=function(e){t._channelReady?t._onChannelMessage(e):(t._earlyMessage=e,t._onChannelOpen())},t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},t._channel.onopen=function(){t._channelReady||t._onChannelOpen()},t._channel.onclose=function(){t._onChannelClose()},void(t._channel.onerror=function(e){t._destroy(e)})):t._destroy(new Error("Data channel event is missing `channel` property"))},r.prototype._read=function(){},r.prototype._write=function(e,t,n){var r=this;if(r.destroyed)return n(new Error("cannot write after peer is destroyed"));if(r.connected){try{r.send(e)}catch(e){return r._destroy(e)}r._channel.bufferedAmount>l?(r._debug("start backpressure: bufferedAmount %d",r._channel.bufferedAmount),r._cb=n):n(null)}else r._debug("write before connect"),r._chunk=e,r._cb=n},r.prototype._onFinish=function(){function e(){setTimeout(function(){t._destroy()},1e3)}var t=this;t.destroyed||(t.connected?e():t.once("connect",e))},r.prototype._createOffer=function(){var e=this;e.destroyed||e._pc.createOffer(function(t){function n(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,function(){e.destroyed||(e.trickle||e._iceComplete?n():e.once("_iceComplete",n))},function(t){e._destroy(t)}))},function(t){e._destroy(t)},e.offerConstraints)},r.prototype._createAnswer=function(){var e=this;e.destroyed||e._pc.createAnswer(function(t){function n(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,function(){e.destroyed||(e.trickle||e._iceComplete?n():e.once("_iceComplete",n))},function(t){e._destroy(t)}))},function(t){e._destroy(t)},e.answerConstraints)},r.prototype._onIceStateChange=function(){var e=this;if(!e.destroyed){var t=e._pc.iceConnectionState,n=e._pc.iceGatheringState;e._debug("iceStateChange (connection: %s) (gathering: %s)",t,n),e.emit("iceStateChange",t,n),("connected"===t||"completed"===t)&&(clearTimeout(e._reconnectTimeout),e._pcReady=!0,e._maybeReady()),"disconnected"===t&&(e.reconnectTimer?(clearTimeout(e._reconnectTimeout),e._reconnectTimeout=setTimeout(function(){e._destroy()},e.reconnectTimer)):e._destroy()),"failed"===t&&e._destroy(new Error("Ice connection failed.")),"closed"===t&&e._destroy()}},r.prototype.getStats=function(e){var t=this;0===t._pc.getStats.length?t._pc.getStats().then(function(t){var n=[];t.forEach(function(e){n.push(e)}),e(null,n)},function(t){e(t)}):t._isReactNativeWebrtc?t._pc.getStats(null,function(t){var n=[];t.forEach(function(e){n.push(e)}),e(null,n)},function(t){e(t)}):0<t._pc.getStats.length?t._pc.getStats(function(t){var n=[];t.result().forEach(function(e){var t={};e.names().forEach(function(n){t[n]=e.stat(n)}),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,n.push(t)}),e(null,n)},function(t){e(t)}):e(null,[])},r.prototype._maybeReady=function(){var e=this;e._debug("maybeReady pc %s channel %s",e._pcReady,e._channelReady),e.connected||e._connecting||!e._pcReady||!e._channelReady||(e._connecting=!0,e.getStats(function(t,n){function r(t){var n=i[t.localCandidateId];n&&n.ip?(e.localAddress=n.ip,e.localPort=+n.port):n&&n.ipAddress?(e.localAddress=n.ipAddress,e.localPort=+n.portNumber):"string"==typeof t.googLocalAddress&&(n=t.googLocalAddress.split(":"),e.localAddress=n[0],e.localPort=+n[1]);var r=o[t.remoteCandidateId];r&&r.ip?(e.remoteAddress=r.ip,e.remotePort=+r.port):r&&r.ipAddress?(e.remoteAddress=r.ipAddress,e.remotePort=+r.portNumber):"string"==typeof t.googRemoteAddress&&(r=t.googRemoteAddress.split(":"),e.remoteAddress=r[0],e.remotePort=+r[1]),e.remoteFamily="IPv4",e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort)}if(!e.destroyed){t&&(n=[]),e._connecting=!1,e.connected=!0;var o={},i={},a={};if(n.forEach(function(e){("remotecandidate"===e.type||"remote-candidate"===e.type)&&(o[e.id]=e),("localcandidate"===e.type||"local-candidate"===e.type)&&(i[e.id]=e),("candidatepair"===e.type||"candidate-pair"===e.type)&&(a[e.id]=e)}),n.forEach(function(e){"transport"===e.type&&r(a[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&r(e)}),e._chunk){try{e.send(e._chunk)}catch(t){return e._destroy(t)}e._chunk=null,e._debug('sent chunk from "write before connect"');var s=e._cb;e._cb=null,s(null)}"number"!=typeof e._channel.bufferedAmountLowThreshold&&(e._interval=setInterval(function(){e._onInterval()},150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect"),e._earlyMessage&&(e._onChannelMessage(e._earlyMessage),e._earlyMessage=null)}}))},r.prototype._onInterval=function(){this._cb&&this._channel&&!(this._channel.bufferedAmount>l)&&this._onChannelBufferedAmountLow()},r.prototype._onSignalingStateChange=function(){var e=this;e.destroyed||(e._debug("signalingStateChange %s",e._pc.signalingState),e.emit("signalingStateChange",e._pc.signalingState))},r.prototype._onIceCandidate=function(e){var t=this;t.destroyed||(e.candidate&&t.trickle?t.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&(t._iceComplete=!0,t.emit("_iceComplete")))},r.prototype._onChannelMessage=function(e){if(!this.destroyed){var t=e.data;t instanceof ArrayBuffer&&(t=n.from(t)),this.push(t)}},r.prototype._onChannelBufferedAmountLow=function(){var e=this;if(!e.destroyed&&e._cb){e._debug("ending backpressure: bufferedAmount %d",e._channel.bufferedAmount);var t=e._cb;e._cb=null,t(null)}},r.prototype._onChannelOpen=function(){var e=this;e.connected||e.destroyed||(e._debug("on channel open"),e._channelReady=!0,e._maybeReady())},r.prototype._onChannelClose=function(){var e=this;e.destroyed||(e._debug("on channel close"),e._destroy())},r.prototype._onAddStream=function(e){var t=this;t.destroyed||(t._debug("on add stream"),t.emit("stream",e.stream))},r.prototype._onTrack=function(e){var t=this;if(!t.destroyed){t._debug("on track");var n=e.streams[0].id;-1!==t._previousStreams.indexOf(n)||(t._previousStreams.push(n),t.emit("stream",e.streams[0]))}},r.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],i.apply(null,e)},r.prototype._transformConstraints=function(e){if(0===Object.keys(e).length)return e;if((e.mandatory||e.optional)&&!this._isChromium){var t=Object.assign({},e.optional,e.mandatory);return void 0!==t.OfferToReceiveVideo&&(t.offerToReceiveVideo=t.OfferToReceiveVideo,delete t.OfferToReceiveVideo),void 0!==t.OfferToReceiveAudio&&(t.offerToReceiveAudio=t.OfferToReceiveAudio,delete t.OfferToReceiveAudio),t}return e.mandatory||e.optional||!this._isChromium?e:(void 0!==e.offerToReceiveVideo&&(e.OfferToReceiveVideo=e.offerToReceiveVideo,delete e.offerToReceiveVideo),void 0!==e.offerToReceiveAudio&&(e.OfferToReceiveAudio=e.offerToReceiveAudio,delete e.offerToReceiveAudio),{mandatory:e})}}).call(this,e("buffer").Buffer)},{buffer:23,debug:29,"get-browser-rtc":36,inherits:40,randombytes:72,"readable-stream":82}],92:[function(e,t){function n(e){return r.digest(e)}var r=new(e("rusha")),o="undefined"==typeof window?self:window,i=o.crypto||o.msCrypto||{},a=i.subtle||i.webkitSubtle;try{a.digest({name:"sha-1"},new Uint8Array).catch(function(){a=!1})}catch(e){a=!1}t.exports=function(e,t){return a?("string"==typeof e&&(e=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n}(e)),void a.digest({name:"sha-1"},e).then(function(e){t(function(e){for(var t,n=e.length,r=[],o=0;o<n;o++)t=e[o],r.push((t>>>4).toString(16)),r.push((15&t).toString(16));return r.join("")}(new Uint8Array(e)))},function(){t(n(e))})):void setTimeout(t,0,n(e))},t.exports.sync=n},{rusha:87}],93:[function(e,t){(function(n){function r(e){var t=this;if(!(t instanceof r))return new r(e);if(e||(e={}),"string"==typeof e&&(e={url:e}),null==e.url&&null==e.socket)throw new Error("Missing required `url` or `socket` option");if(null!=e.url&&null!=e.socket)throw new Error("Must specify either `url` or `socket` option, not both");if(t._id=s(4).toString("hex").slice(0,7),t._debug("new websocket: %o",e),e=Object.assign({allowHalfOpen:!1},e),u.Duplex.call(t,e),t.connected=!1,t.destroyed=!1,t._chunk=null,t._cb=null,t._interval=null,e.socket)t.url=e.socket.url,t._ws=e.socket;else{t.url=e.url;try{t._ws="function"==typeof c?new l(e.url,e):new l(e.url)}catch(e){return void n.nextTick(function(){t._destroy(e)})}}t._ws.binaryType="arraybuffer",t._ws.onopen=function(){t._onOpen()},t._ws.onmessage=function(e){t._onMessage(e)},t._ws.onclose=function(){t._onClose()},t._ws.onerror=function(){t._destroy(new Error("connection error to "+t.url))},t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound)}t.exports=r;var o=e("safe-buffer").Buffer,i=e("debug")("simple-websocket"),a=e("inherits"),s=e("randombytes"),u=e("readable-stream"),c=e("ws"),l="function"==typeof c?c:WebSocket;a(r,u.Duplex),r.WEBSOCKET_SUPPORT=!!l,r.prototype.send=function(e){this._ws.send(e)},r.prototype.destroy=function(e){this._destroy(null,e)},r.prototype._destroy=function(e,t){var n=this;if(!n.destroyed){if(t&&n.once("close",t),n._debug("destroy (error: %s)",e&&(e.message||e)),n.readable=n.writable=!1,n._readableState.ended||n.push(null),n._writableState.finished||n.end(),n.connected=!1,n.destroyed=!0,clearInterval(n._interval),n._interval=null,n._chunk=null,n._cb=null,n._onFinishBound&&n.removeListener("finish",n._onFinishBound),n._onFinishBound=null,n._ws){var r=n._ws,o=function(){r.onclose=null};if(r.readyState===l.CLOSED)o();else try{r.onclose=o,r.close()}catch(e){o()}r.onopen=null,r.onmessage=null,r.onerror=null}n._ws=null,e&&n.emit("error",e),n.emit("close")}},r.prototype._read=function(){},r.prototype._write=function(e,t,n){if(this.destroyed)return n(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(e)}catch(e){return this._destroy(e)}"function"!=typeof c&&this._ws.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n},r.prototype._onFinish=function(){function e(){setTimeout(function(){t._destroy()},1e3)}var t=this;t.destroyed||(t.connected?e():t.once("connect",e))},r.prototype._onMessage=function(e){if(!this.destroyed){var t=e.data;t instanceof ArrayBuffer&&(t=o.from(t)),this.push(t)}},r.prototype._onOpen=function(){var e=this;if(!e.connected&&!e.destroyed){if(e.connected=!0,e._chunk){try{e.send(e._chunk)}catch(t){return e._destroy(t)}e._chunk=null,e._debug('sent chunk from "write before connect"');var t=e._cb;e._cb=null,t(null)}"function"!=typeof c&&(e._interval=setInterval(function(){e._onInterval()},150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect")}},r.prototype._onInterval=function(){if(this._cb&&this._ws&&!(this._ws.bufferedAmount>65536)){this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);var e=this._cb;this._cb=null,e(null)}},r.prototype._onClose=function(){this.destroyed||(this._debug("on close"),this._destroy())},r.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],i.apply(null,e)}}).call(this,e("_process"))},{_process:65,debug:29,inherits:40,randombytes:72,"readable-stream":82,"safe-buffer":88,ws:21}],94:[function(e,t){var n=1,r=65535,o=setInterval(function(){n=n+1&r},250);o.unref&&o.unref(),t.exports=function(e){var t=4*(e||5),o=[0],i=1,a=n-1&r;return function(e){var s=n-a&r;for(s>t&&(s=t),a=n;s--;)i==t&&(i=0),o[i]=o[0==i?t-1:i-1],i++;e&&(o[i-1]+=e);var u=o[i-1],c=o.length<t?0:o[i==t?0:i];return o.length<4?u:4*(u-c)/o.length}}},{}],95:[function(e,n,r){(function(t){var n=e("./lib/request"),o=e("xtend"),i=e("builtin-status-codes"),a=e("url"),s=r;s.request=function(e,r){e="string"==typeof e?a.parse(e):o(e);var i=-1===t.location.protocol.search(/^https?:$/)?"http:":"",s=e.protocol||i,u=e.hostname||e.host,c=e.port,l=e.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),e.url=(u?s+"//"+u:"")+(c?":"+c:"")+l,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var f=new n(e);return r&&f.on("response",r),f},s.get=function(e,t){var n=s.request(e,t);return n.end(),n},s.Agent=function(){},s.Agent.defaultMaxSockets=4,s.STATUS_CODES=i,s.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{"./lib/request":97,"builtin-status-codes":24,url:112,xtend:119}],96:[function(e,n,r){(function(e){function t(){if(null!=i)return i;if(e.XMLHttpRequest){i=new e.XMLHttpRequest;try{i.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){i=null}}else i=null;return i}function n(e){var n=t();if(!n)return!1;try{return n.responseType=e,n.responseType===e}catch(e){}return!1}function o(e){return"function"==typeof e}r.fetch=o(e.fetch)&&o(e.ReadableStream),r.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),r.blobConstructor=!0}catch(t){}var i,a=void 0!==e.ArrayBuffer,s=a&&o(e.ArrayBuffer.prototype.slice);r.arraybuffer=r.fetch||a&&n("arraybuffer"),r.msstream=!r.fetch&&s&&n("ms-stream"),r.mozchunkedarraybuffer=!r.fetch&&a&&n("moz-chunked-arraybuffer"),r.overrideMimeType=r.fetch||!!t()&&o(t().overrideMimeType),r.vbArray=o(e.VBArray),i=null}).call(this,void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{}],97:[function(e,n){(function(t,r,o){var i=e("./capability"),a=e("inherits"),s=e("./response"),u=e("readable-stream"),c=e("to-arraybuffer"),l=s.IncomingMessage,f=s.readyStates,d=n.exports=function(e){var t=this;u.Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new o(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(n){t.setHeader(n,e.headers[n])});var n,r=!0;if("disable-fetch"===e.mode||"timeout"in e)r=!1,n=!0;else if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!i.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");n=!0}t._mode=function(e,t){return i.fetch&&t?"fetch":i.mozchunkedarraybuffer?"moz-chunked-arraybuffer":i.msstream?"ms-stream":i.arraybuffer&&e?"arraybuffer":i.vbArray&&e?"text:vbarray":"text"}(n,r),t.on("finish",function(){t._onFinish()})};a(d,u.Writable),d.prototype.setHeader=function(e,t){var n=e.toLowerCase();-1!==h.indexOf(n)||(this._headers[n]={name:e,value:t})},d.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},d.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},d.prototype._onFinish=function(){var e=this;if(!e._destroyed){var n=e._opts,a=e._headers,s=null;"GET"!==n.method&&"HEAD"!==n.method&&(s=i.blobConstructor?new r.Blob(e._body.map(function(e){return c(e)}),{type:(a["content-type"]||{}).value||""}):o.concat(e._body).toString());var u=[];if(Object.keys(a).forEach(function(e){var t=a[e].name,n=a[e].value;Array.isArray(n)?n.forEach(function(e){u.push([t,e])}):u.push([t,n])}),"fetch"===e._mode)r.fetch(e._opts.url,{method:e._opts.method,headers:u,body:s||void 0,mode:"cors",credentials:n.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t,e._connect()},function(t){e.emit("error",t)});else{var l=e._xhr=new r.XMLHttpRequest;try{l.open(e._opts.method,e._opts.url,!0)}catch(n){return void t.nextTick(function(){e.emit("error",n)})}"responseType"in l&&(l.responseType=e._mode.split(":")[0]),"withCredentials"in l&&(l.withCredentials=!!n.withCredentials),"text"===e._mode&&"overrideMimeType"in l&&l.overrideMimeType("text/plain; charset=x-user-defined"),"timeout"in n&&(l.timeout=n.timeout,l.ontimeout=function(){e.emit("timeout")}),u.forEach(function(e){l.setRequestHeader(e[0],e[1])}),e._response=null,l.onreadystatechange=function(){switch(l.readyState){case f.LOADING:case f.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(l.onprogress=function(){e._onXHRProgress()}),l.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{l.send(s)}catch(n){return void t.nextTick(function(){e.emit("error",n)})}}}},d.prototype._onXHRProgress=function(){var e=this;!function(e){try{var t=e.status;return null!==t&&0!==t}catch(t){return!1}}(e._xhr)||e._destroyed||(!e._response&&e._connect(),e._response._onXHRProgress())},d.prototype._connect=function(){var e=this;e._destroyed||(e._response=new l(e._xhr,e._fetchResponse,e._mode),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},d.prototype._write=function(e,t,n){this._body.push(e),n()},d.prototype.abort=d.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},d.prototype.end=function(e,t,n){"function"==typeof e&&(n=e,e=void 0),u.Writable.prototype.end.call(this,e,t,n)},d.prototype.flushHeaders=function(){},d.prototype.setTimeout=function(){},d.prototype.setNoDelay=function(){},d.prototype.setSocketKeepAlive=function(){};var h=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,e("_process"),void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t,e("buffer").Buffer)},{"./capability":96,"./response":98,_process:65,buffer:23,inherits:40,"readable-stream":82,"to-arraybuffer":105}],98:[function(e,n,r){(function(t,n,o){var i=e("./capability"),a=e("inherits"),s=e("readable-stream"),u=r.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=r.IncomingMessage=function(e,n,r){var a=this;if(s.Readable.call(a),a._mode=r,a.headers={},a.rawHeaders=[],a.trailers={},a.rawTrailers=[],a.on("end",function(){t.nextTick(function(){a.emit("close")})}),"fetch"===r){function e(){u.read().then(function(t){return a._destroyed?void 0:t.done?void a.push(null):(a.push(new o(t.value)),void e())}).catch(function(e){a.emit("error",e)})}a._fetchResponse=n,a.url=n.url,a.statusCode=n.status,a.statusMessage=n.statusText,n.headers.forEach(function(e,t){a.headers[t.toLowerCase()]=e,a.rawHeaders.push(t,e)});var u=n.body.getReader();e()}else{if(a._xhr=e,a._pos=0,a.url=e.responseURL,a.statusCode=e.status,a.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();"set-cookie"===n?(void 0===a.headers[n]&&(a.headers[n]=[]),a.headers[n].push(t[2])):void 0===a.headers[n]?a.headers[n]=t[2]:a.headers[n]+=", "+t[2],a.rawHeaders.push(t[1],t[2])}}),a._charset="x-user-defined",!i.overrideMimeType){var c=a.rawHeaders["mime-type"];if(c){var l=c.match(/;\s*charset=([^;])(;|$)/);l&&(a._charset=l[1].toLowerCase())}a._charset||(a._charset="utf-8")}}};a(c,s.Readable),c.prototype._read=function(){},c.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{r=new n.VBArray(t.responseBody).toArray()}catch(t){}if(null!==r){e.push(new o(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var i=r.substr(e._pos);if("x-user-defined"===e._charset){for(var a=new o(i.length),s=0;s<i.length;s++)a[s]=255&i.charCodeAt(s);e.push(a)}else e.push(i,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;r=t.response,e.push(new o(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==u.LOADING||!r)break;e.push(new o(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==u.LOADING)break;var c=new n.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(new o(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(r)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,e("_process"),void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t,e("buffer").Buffer)},{"./capability":96,_process:65,buffer:23,inherits:40,"readable-stream":82}],99:[function(e,t){var n=e("stream-to-blob");t.exports=function e(t,r,o){return"function"==typeof r?e(t,null,r):void n(t,r,function(e,t){if(e)return o(e);var n=URL.createObjectURL(t);o(null,n)})}},{"stream-to-blob":100}],100:[function(e,t){var n=e("once");t.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);o=n(o);var i=[];t.on("data",function(e){i.push(e)}).on("end",function(){var e=r?new Blob(i,{type:r}):new Blob(i);o(null,e)}).on("error",o)}},{once:59}],101:[function(e,t){(function(n){var r=e("once");t.exports=function(e,t,o){o=r(o);var i=new n(t),a=0;e.on("data",function(e){e.copy(i,a),a+=e.length}).on("end",function(){o(null,i)}).on("error",o)}}).call(this,e("buffer").Buffer)},{buffer:23,once:59}],102:[function(e,t,n){"use strict";function r(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(d.isEncoding===h||!h(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=a,this.end=s,t=4;break;case"utf8":this.fillLast=i,t=4;break;case"base64":this.text=u,this.end=c,t=3;break;default:return this.write=l,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(t)}function o(e){return 127>=e?0:6==e>>5?2:14==e>>4?3:30==e>>3?4:-1}function i(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(n);if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(n+1);if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(n+2)}}(this,e,t);return void 0===n?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length)):n}function a(e,t){if(0==(e.length-t)%2){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&56319>=r)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function s(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function l(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}var d=e("safe-buffer").Buffer,h=d.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=r,r.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t},r.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);return 0<=i?(0<i&&(e.lastNeed=i-1),i):--r<n?0:0<=(i=o(t[r]))?(0<i&&(e.lastNeed=i-2),i):--r<n?0:0<=(i=o(t[r]))?(0<i&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},r.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},{"safe-buffer":88}],103:[function(e,t,n){var r=e("./thirty-two");n.encode=r.encode,n.decode=r.decode},{"./thirty-two":104}],104:[function(e,t,n){(function(e){"use strict";function t(e){var t=i(e.length/5);return 0==e.length%5?t:t+1}var r=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];n.encode=function(n){e.isBuffer(n)||(n=new e(n));for(var r=0,o=0,i=0,a=0,s=new e(8*t(n));r<n.length;){var u=n[r];3<i?(a=(a=u&255>>i)<<(i=(i+5)%8)|(r+1<n.length?n[r+1]:0)>>8-i,r++):(a=31&u>>8-(i+5),0==(i=(i+5)%8)&&r++),s[o]="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".charCodeAt(a),o++}for(r=o;r<s.length;r++)s[r]=61;return s},n.decode=function(t){var n,o=0,i=0,a=0;e.isBuffer(t)||(t=new e(t));for(var u=new e(s(5*t.length/8)),c=0;c<t.length&&61!==t[c];c++){var l=t[c]-48;if(!(l<r.length))throw new Error("Invalid input - it is not base32 encoded string");i=r[l],3>=o?0==(o=(o+5)%8)?(n|=i,u[a]=n,a++,n=0):n|=255&i<<8-o:(n|=255&i>>>(o=(o+5)%8),u[a]=n,a++,n=255&i<<8-o)}return u.slice(0,a)}}).call(this,e("buffer").Buffer)},{buffer:23}],105:[function(e,t){var n=e("buffer").Buffer;t.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(n.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,o=0;o<r;o++)t[o]=e[o];return t.buffer}throw new Error("Argument must be a Buffer")}},{buffer:23}],106:[function(e,t){(function(n){function r(e){function t(e,t){var n=new a(t);return n.on("warning",o._onWarning),n.on("error",o._onError),n.listen(e),o._internalDHT=!0,n}var o=this;if(!(o instanceof r))return new r(e);if(s.call(o),!e.peerId)throw new Error("Option `peerId` is required");if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!n.browser&&!e.port)throw new Error("Option `port` is required");o.peerId="string"==typeof e.peerId?e.peerId:e.peerId.toString("hex"),o.infoHash="string"==typeof e.infoHash?e.infoHash:e.infoHash.toString("hex"),o._port=e.port,o._userAgent=e.userAgent,o.destroyed=!1,o._announce=e.announce||[],o._intervalMs=e.intervalMs||9e5,o._trackerOpts=null,o._dhtAnnouncing=!1,o._dhtTimeout=!1,o._internalDHT=!1,o._onWarning=function(e){o.emit("warning",e)},o._onError=function(e){o.emit("error",e)},o._onDHTPeer=function(e,t){t.toString("hex")!==o.infoHash||o.emit("peer",e.host+":"+e.port,"dht")},o._onTrackerPeer=function(e){o.emit("peer",e,"tracker")},o._onTrackerAnnounce=function(){o.emit("trackerAnnounce")},!1===e.tracker?o.tracker=null:e.tracker&&"object"==typeof e.tracker?(o._trackerOpts=u(e.tracker),o.tracker=o._createTracker()):o.tracker=o._createTracker(),o.dht=!1===e.dht||"function"!=typeof a?null:e.dht&&"function"==typeof e.dht.addNode?e.dht:e.dht&&"object"==typeof e.dht?t(e.dhtPort,e.dht):t(e.dhtPort),o.dht&&(o.dht.on("peer",o._onDHTPeer),o._dhtAnnounce())}t.exports=r;var o=e("debug")("torrent-discovery"),a=e("bittorrent-dht/client"),s=e("events").EventEmitter,u=e("xtend"),c=e("inherits"),l=e("run-parallel"),f=e("bittorrent-tracker/client");c(r,s),r.prototype.updatePort=function(e){var t=this;e===t._port||(t._port=e,t.dht&&t._dhtAnnounce(),t.tracker&&(t.tracker.stop(),t.tracker.destroy(function(){t.tracker=t._createTracker()})))},r.prototype.complete=function(e){this.tracker&&this.tracker.complete(e)},r.prototype.destroy=function(e){var t=this;if(!t.destroyed){t.destroyed=!0,clearTimeout(t._dhtTimeout);var n=[];t.tracker&&(t.tracker.stop(),t.tracker.removeListener("warning",t._onWarning),t.tracker.removeListener("error",t._onError),t.tracker.removeListener("peer",t._onTrackerPeer),t.tracker.removeListener("update",t._onTrackerAnnounce),n.push(function(e){t.tracker.destroy(e)})),t.dht&&t.dht.removeListener("peer",t._onDHTPeer),t._internalDHT&&(t.dht.removeListener("warning",t._onWarning),t.dht.removeListener("error",t._onError),n.push(function(e){t.dht.destroy(e)})),l(n,e),t.dht=null,t.tracker=null,t._announce=null}},r.prototype._createTracker=function(){var e=u(this._trackerOpts,{infoHash:this.infoHash,announce:this._announce,peerId:this.peerId,port:this._port,userAgent:this._userAgent}),t=new f(e);return t.on("warning",this._onWarning),t.on("error",this._onError),t.on("peer",this._onTrackerPeer),t.on("update",this._onTrackerAnnounce),t.setInterval(this._intervalMs),t.start(),t},r.prototype._dhtAnnounce=function(){var e=this;e._dhtAnnouncing||(o("dht announce"),e._dhtAnnouncing=!0,clearTimeout(e._dhtTimeout),e.dht.announce(e.infoHash,e._port,function(t){e._dhtAnnouncing=!1,o("dht announce complete"),t&&e.emit("warning",t),e.emit("dhtAnnounce"),e.destroyed||(e._dhtTimeout=setTimeout(function(){e._dhtAnnounce()},e._intervalMs+i(Math.random()*e._intervalMs/5)),e._dhtTimeout.unref&&e._dhtTimeout.unref())}))}}).call(this,e("_process"))},{_process:65,"bittorrent-dht/client":21,"bittorrent-tracker/client":15,debug:29,events:33,inherits:40,"run-parallel":86,xtend:119}],107:[function(e,t){(function(e){function n(e){return this instanceof n?(this.length=e,this.missing=e,this.sources=null,this._chunks=s(e/r),this._remainder=e%r||r,this._buffered=0,this._buffer=null,this._cancellations=null,this._reservations=0,void(this._flushed=!1)):new n(e)}t.exports=n;var r=16384;n.BLOCK_LENGTH=r,n.prototype.chunkLength=function(e){return e===this._chunks-1?this._remainder:r},n.prototype.chunkLengthRemaining=function(e){return this.length-e*r},n.prototype.chunkOffset=function(e){return e*r},n.prototype.reserve=function(){return this.init()?this._cancellations.length?this._cancellations.pop():this._reservations<this._chunks?this._reservations++:-1:-1},n.prototype.reserveRemaining=function(){if(!this.init())return-1;if(this._reservations<this._chunks){var e=this._reservations;return this._reservations=this._chunks,e}return-1},n.prototype.cancel=function(e){this.init()&&this._cancellations.push(e)},n.prototype.cancelRemaining=function(e){this.init()&&(this._reservations=e)},n.prototype.get=function(e){return this.init()?this._buffer[e]:null},n.prototype.set=function(e,t,n){if(!this.init())return!1;for(var o=t.length,i=s(o/r),a=0;a<i;a++)if(!this._buffer[e+a]){var u=a*r,c=t.slice(u,u+r);this._buffered++,this._buffer[e+a]=c,this.missing-=c.length,-1===this.sources.indexOf(n)&&this.sources.push(n)}return this._buffered===this._chunks},n.prototype.flush=function(){if(!this._buffer||this._chunks!==this._buffered)return null;var t=e.concat(this._buffer,this.length);return this._buffer=null,this._cancellations=null,this.sources=null,this._flushed=!0,t},n.prototype.init=function(){return!(this._flushed||!this._buffer&&(this._buffer=Array(this._chunks),this._cancellations=[],this.sources=[],0))}}).call(this,e("buffer").Buffer)},{buffer:23}],108:[function(e,t){(function(n){var r=e("is-typedarray").strict;t.exports=function(e){if(r(e)){var t=new n(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return new n(e)}}).call(this,e("buffer").Buffer)},{buffer:23,"is-typedarray":44}],109:[function(e,t,n){(function(e){var t=4294967295;n.encodingLength=function(){return 8},n.encode=function(n,r,o){r||(r=new e(8)),o||(o=0);var a=i(n/t);return r.writeUInt32BE(a,o),r.writeUInt32BE(n-a*t,o+4),r},n.decode=function(n,r){r||(r=0),n||(n=new e(4)),r||(r=0);var o=n.readUInt32BE(r),i=n.readUInt32BE(r+4);return o*t+i},n.encode.bytes=8,n.decode.bytes=8}).call(this,e("buffer").Buffer)},{buffer:23}],110:[function(e,t){"use strict";t.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,r=e.length,o=e[0],i=e[0],a=1;a<r;++a)if(i=o,t(o=e[a],i)){if(a===n){n++;continue}e[n++]=o}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,r=e[0],o=e[0],i=1;i<n;++i,o=r)if(o=r,(r=e[i])!==o){if(i===t){t++;continue}e[t++]=r}return e.length=t,e}(e))}},{}],111:[function(e,t){t.exports=function(e,t){if(!(t>=e.length||0>t)){var n=e.pop();if(t<e.length){var r=e[t];return e[t]=n,r}return n}}},{}],112:[function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,n){if(e&&a.isObject(e)&&e instanceof r)return e;var o=new r;return o.parse(e,t,n),o}var i=e("punycode"),a=e("./util");n.parse=o,n.resolve=function(e,t){return o(e,!1,!0).resolve(t)},n.resolveObject=function(e,t){return e?o(e,!1,!0).resolveObject(t):t},n.format=function(e){return a.isString(e)&&(e=o(e)),e instanceof r?e.format():r.prototype.format.call(e)},n.Url=r;var s=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),f=["'"].concat(l),d=["%","/","?",";","#"].concat(f),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=e("querystring");r.prototype.parse=function(e,t,n){if(!a.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),o=-1!==r&&r<e.indexOf("#")?"?":"#",u=e.split(o);u[0]=u[0].replace(/\\/g,"/");var l=e=u.join(o);if(l=l.trim(),!n&&1===e.split("#").length){var _=c.exec(l);if(_)return this.path=l,this.href=l,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=s.exec(l);if(w){var C=(w=w[0]).toLowerCase();this.protocol=C,l=l.substr(w.length)}if(n||w||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===l.substr(0,2);k&&(!w||!v[w])&&(l=l.substr(2),this.slashes=!0)}if(!v[w]&&(k||w&&!y[w])){for(var E=-1,S=0;S<h.length;S++)-1!==(A=l.indexOf(h[S]))&&(-1==E||A<E)&&(E=A);var x,T;-1!==(T=-1===E?l.lastIndexOf("@"):l.lastIndexOf("@",E))&&(x=l.slice(0,T),l=l.slice(T+1),this.auth=decodeURIComponent(x)),E=-1;var A;for(S=0;S<d.length;S++)-1!==(A=l.indexOf(d[S]))&&(-1===E||A<E)&&(E=A);-1===E&&(E=l.length),this.host=l.slice(0,E),l=l.slice(E),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var O,R=this.hostname.split(/\./),I=(S=0,R.length);S<I;S++)if((O=R[S])&&!O.match(p)){for(var L="",B=0,U=O.length;B<U;B++)L+=127<O.charCodeAt(B)?"x":O[B];if(!L.match(p)){var M=R.slice(0,S),D=R.slice(S+1),N=O.match(g);N&&(M.push(N[1]),D.unshift(N[2])),D.length&&(l="/"+D.join(".")+l),this.hostname=M.join(".");break}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),P||(this.hostname=i.toASCII(this.hostname));var j=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+j,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==l[0]&&(l="/"+l))}if(!m[C]){var H;for(S=0,I=f.length;S<I;S++)if(H=f[S],-1!==l.indexOf(H)){var K=encodeURIComponent(H);K===H&&(K=escape(H)),l=l.split(H).join(K)}}var W=l.indexOf("#");-1!==W&&(this.hash=l.substr(W),l=l.slice(0,W));var q=l.indexOf("?");if(-1===q?t&&(this.search="",this.query={}):(this.search=l.substr(q),this.query=l.substr(q+1),t&&(this.query=b.parse(this.query)),l=l.slice(0,q)),l&&(this.pathname=l),y[C]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var z=this.search||"";this.path=j+z}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(i=b.stringify(this.query));var s=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):!o&&(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+r},r.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(a.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n,o=new r,i=Object.keys(this),s=0;s<i.length;s++)o[n=i[s]]=this[n];if(o.hash=e.hash,""===e.href)return o.href=o.format(),o;if(e.slashes&&!e.protocol){for(var u,c=Object.keys(e),l=0;l<c.length;l++)"protocol"!==(u=c[l])&&(o[u]=e[u]);return y[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname="/"),o.href=o.format(),o}if(e.protocol&&e.protocol!==o.protocol){if(!y[e.protocol]){for(var f,d=Object.keys(e),h=0;h<d.length;h++)o[f=d[h]]=e[f];return o.href=o.format(),o}if(o.protocol=e.protocol,e.host||v[e.protocol])o.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),2>p.length&&p.unshift(""),o.pathname=p.join("/")}if(o.search=e.search,o.query=e.query,o.host=e.host||"",o.auth=e.auth,o.hostname=e.hostname||e.host,o.port=e.port,o.pathname||o.search){var g=o.pathname||"",m=o.search||"";o.path=g+m}return o.slashes=o.slashes||e.slashes,o.href=o.format(),o}var b=o.pathname&&"/"===o.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=_||b||o.host&&e.pathname,C=w,k=o.pathname&&o.pathname.split("/")||[],E=(p=e.pathname&&e.pathname.split("/")||[],o.protocol&&!y[o.protocol]);if(E&&(o.hostname="",o.port=null,o.host&&(""===k[0]?k[0]=o.host:k.unshift(o.host)),o.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),w=w&&(""===p[0]||""===k[0])),_)o.host=e.host||""===e.host?e.host:o.host,o.hostname=e.hostname||""===e.hostname?e.hostname:o.hostname,o.search=e.search,o.query=e.query,k=p;else if(p.length)k||(k=[]),k.pop(),k=k.concat(p),o.search=e.search,o.query=e.query;else if(!a.isNullOrUndefined(e.search)){if(E)o.hostname=o.host=k.shift(),(P=o.host&&0<o.host.indexOf("@")&&o.host.split("@"))&&(o.auth=P.shift(),o.host=o.hostname=P.shift());return o.search=e.search,o.query=e.query,a.isNull(o.pathname)&&a.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.href=o.format(),o}if(!k.length)return o.pathname=null,o.path=o.search?"/"+o.search:null,o.href=o.format(),o;for(var S=k.slice(-1)[0],x=(o.host||e.host||1<k.length)&&("."===S||".."===S)||""===S,T=0,A=k.length;0<=A;A--)"."===(S=k[A])?k.splice(A,1):".."===S?(k.splice(A,1),T++):T&&(k.splice(A,1),T--);if(!w&&!C)for(;T--;T)k.unshift("..");w&&""!==k[0]&&(!k[0]||"/"!==k[0].charAt(0))&&k.unshift(""),x&&"/"!==k.join("/").substr(-1)&&k.push("");var P,O=""===k[0]||k[0]&&"/"===k[0].charAt(0);E&&(o.hostname=o.host=O?"":k.length?k.shift():"",(P=o.host&&0<o.host.indexOf("@")&&o.host.split("@"))&&(o.auth=P.shift(),o.host=o.hostname=P.shift()));return(w=w||o.host&&k.length)&&!O&&k.unshift(""),k.length?o.pathname=k.join("/"):(o.pathname=null,o.path=null),a.isNull(o.pathname)&&a.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.auth=e.auth||o.auth,o.slashes=o.slashes||e.slashes,o.href=o.format(),o},r.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":113,punycode:67,querystring:70}],113:[function(e,t){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],114:[function(e,t){var n=e("bencode"),r=e("bitfield"),o=e("safe-buffer").Buffer,i=e("debug")("ut_metadata"),a=e("events").EventEmitter,u=e("inherits"),c=e("simple-sha1"),l=1e3,f=16384;t.exports=function(e){function t(t){a.call(this),this._wire=t,this._metadataComplete=!1,this._metadataSize=null,this._remainingRejects=null,this._fetching=!1,this._bitfield=new r(0,{grow:l}),o.isBuffer(e)&&this.setMetadata(e)}return u(t,a),t.prototype.name="ut_metadata",t.prototype.onHandshake=function(e){this._infoHash=e},t.prototype.onExtendedHandshake=function(e){return e.m&&e.m.ut_metadata?e.metadata_size?"number"!=typeof e.metadata_size||1e7<e.metadata_size||0>=e.metadata_size?this.emit("warning",new Error("Peer gave invalid metadata size")):(this._metadataSize=e.metadata_size,this._numPieces=s(this._metadataSize/f),this._remainingRejects=2*this._numPieces,void(this._fetching&&this._requestPieces())):this.emit("warning",new Error("Peer does not have metadata")):this.emit("warning",new Error("Peer does not support ut_metadata"))},t.prototype.onMessage=function(e){var t,r;try{var o=e.toString(),i=o.indexOf("ee")+2;t=n.decode(o.substring(0,i)),r=e.slice(i)}catch(e){return}switch(t.msg_type){case 0:this._onRequest(t.piece);break;case 1:this._onData(t.piece,r,t.total_size);break;case 2:this._onReject(t.piece)}},t.prototype.fetch=function(){this._metadataComplete||(this._fetching=!0,this._metadataSize&&this._requestPieces())},t.prototype.cancel=function(){this._fetching=!1},t.prototype.setMetadata=function(e){if(this._metadataComplete)return!0;i("set metadata");try{var t=n.decode(e).info;t&&(e=n.encode(t))}catch(e){}return(!this._infoHash||this._infoHash===c.sync(e))&&(this.cancel(),this.metadata=e,this._metadataComplete=!0,this._metadataSize=this.metadata.length,this._wire.extendedHandshake.metadata_size=this._metadataSize,this.emit("metadata",n.encode({info:n.decode(this.metadata)})),!0)},t.prototype._send=function(e,t){var r=n.encode(e);o.isBuffer(t)&&(r=o.concat([r,t])),this._wire.extended("ut_metadata",r)},t.prototype._request=function(e){this._send({msg_type:0,piece:e})},t.prototype._data=function(e,t,n){var r={msg_type:1,piece:e};"number"==typeof n&&(r.total_size=n),this._send(r,t)},t.prototype._reject=function(e){this._send({msg_type:2,piece:e})},t.prototype._onRequest=function(e){if(this._metadataComplete){var t=e*f,n=t+f;n>this._metadataSize&&(n=this._metadataSize);var r=this.metadata.slice(t,n);this._data(e,r,this._metadataSize)}else this._reject(e)},t.prototype._onData=function(e,t){t.length>f||(t.copy(this.metadata,e*f),this._bitfield.set(e),this._checkDone())},t.prototype._onReject=function(e){0<this._remainingRejects&&this._fetching?(this._request(e),this._remainingRejects-=1):this.emit("warning",new Error('Peer sent "reject" too much'))},t.prototype._requestPieces=function(){this.metadata=o.alloc(this._metadataSize);for(var e=0;e<this._numPieces;e++)this._request(e)},t.prototype._checkDone=function(){for(var e=!0,t=0;t<this._numPieces;t++)if(!this._bitfield.get(t)){e=!1;break}e&&(this.setMetadata(this.metadata)||this._failedMetadata())},t.prototype._failedMetadata=function(){this._bitfield=new r(0,{grow:l}),this._remainingRejects-=this._numPieces,0<this._remainingRejects?this._requestPieces():this.emit("warning",new Error("Peer sent invalid metadata"))},t}},{bencode:11,bitfield:13,debug:29,events:33,inherits:40,"safe-buffer":88,"simple-sha1":92}],115:[function(e,n){(function(e){function t(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===(n+"").toLowerCase()}n.exports=function(e,n){if(t("noDeprecation"))return e;var r=!1;return function(){if(!r){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),r=!0}return e.apply(this,arguments)}}}).call(this,void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{}],116:[function(e,t){(function(n){function r(e){var t=this;s.call(t),t._tracks=[],t._fragmentSequence=1,t._file=e,t._decoder=null,t._findMoov(0)}function o(e,t){var n=this;n._entries=e,n._countName=t||"count",n._index=0,n._offset=0,n.value=n._entries[0]}var a=e("binary-search"),s=e("events").EventEmitter,u=e("inherits"),c=e("mp4-stream"),l=e("mp4-box-encoding"),f=e("range-slice-stream");t.exports=r,u(r,s),r.prototype._findMoov=function(e){var t=this;t._decoder&&t._decoder.destroy(),t._decoder=c.decode();var n=t._file.createReadStream({start:e});n.pipe(t._decoder),t._decoder.once("box",function(r){"moov"===r.type?t._decoder.decode(function(e){n.destroy();try{t._processMoov(e)}catch(e){e.message="Cannot parse mp4 file: "+e.message,t.emit("error",e)}}):(n.destroy(),t._findMoov(e+r.length))})},o.prototype.inc=function(){var e=this;e._offset++,e._offset>=e._entries[e._index][e._countName]&&(e._index++,e._offset=0),e.value=e._entries[e._index]},r.prototype._processMoov=function(e){var t=this,r=e.traks;t._tracks=[],t._hasVideo=!1,t._hasAudio=!1;for(var i=0;i<r.length;i++){var a,s,u=r[i],c=u.mdia.minf.stbl,f=c.stsd.entries[0],d=u.mdia.hdlr.handlerType;if("vide"===d&&"avc1"===f.type){if(t._hasVideo)continue;t._hasVideo=!0,a="avc1",f.avcC&&(a+="."+f.avcC.mimeCodec),s='video/mp4; codecs="'+a+'"'}else{if("soun"!==d||"mp4a"!==f.type)continue;if(t._hasAudio)continue;t._hasAudio=!0,a="mp4a",f.esds&&f.esds.mimeCodec&&(a+="."+f.esds.mimeCodec),s='audio/mp4; codecs="'+a+'"'}var h=[],p=0,g=0,m=0,v=0,y=0,b=0,_=new o(c.stts.entries),w=null;c.ctts&&(w=new o(c.ctts.entries));for(var C=0;;){var k=c.stsc.entries[y],E=c.stsz.entries[p],S=_.value.duration,x=w?w.value.compositionOffset:0,T=!0;if(c.stss&&(T=c.stss.entries[C]===p+1),h.push({size:E,duration:S,dts:b,presentationOffset:x,sync:T,offset:v+c.stco.entries[m]}),++p>=c.stsz.entries.length)break;if(v+=E,++g>=k.samplesPerChunk){g=0,v=0,m++;var A=c.stsc.entries[y+1];A&&m+1>=A.firstChunk&&y++}b+=S,_.inc(),w&&w.inc(),T&&C++}u.mdia.mdhd.duration=0,u.tkhd.duration=0;var P=k.sampleDescriptionId,O={type:"moov",mvhd:e.mvhd,traks:[{tkhd:u.tkhd,mdia:{mdhd:u.mdia.mdhd,hdlr:u.mdia.hdlr,elng:u.mdia.elng,minf:{vmhd:u.mdia.minf.vmhd,smhd:u.mdia.minf.smhd,dinf:u.mdia.minf.dinf,stbl:{stsd:c.stsd,stts:{version:0,flags:0,entries:[]},ctts:{version:0,flags:0,entries:[]},stsc:{version:0,flags:0,entries:[]},stsz:{version:0,flags:0,entries:[]},stco:{version:0,flags:0,entries:[]},stss:{version:0,flags:0,entries:[]}}}}}],mvex:{mehd:{fragmentDuration:e.mvhd.duration},trexs:[{trackId:u.tkhd.trackId,defaultSampleDescriptionIndex:P,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlags:0}]}};t._tracks.push({trackId:u.tkhd.trackId,timeScale:u.mdia.mdhd.timeScale,samples:h,currSample:null,currTime:null,moov:O,mime:s})}if(0!==t._tracks.length){e.mvhd.duration=0,t._ftyp={type:"ftyp",brand:"iso5",brandVersion:0,compatibleBrands:["iso5"]};var R=l.encode(t._ftyp),I=t._tracks.map(function(e){var t=l.encode(e.moov);return{mime:e.mime,init:n.concat([R,t])}});t.emit("ready",I)}else t.emit("error",new Error("no playable tracks"))},r.prototype.seek=function(e){var t=this;if(!t._tracks)throw new Error("Not ready yet; wait for 'ready' event");t._fileStream&&(t._fileStream.destroy(),t._fileStream=null);var n=-1;if(t._tracks.map(function(r,o){r.outStream&&r.outStream.destroy(),r.inStream&&(r.inStream.destroy(),r.inStream=null);var i=r.outStream=c.encode(),a=t._generateFragment(o,e);return a?((-1==n||a.ranges[0].start<n)&&(n=a.ranges[0].start),void function e(n){i.destroyed||i.box(n.moof,function(a){if(a)return t.emit("error",a);i.destroyed||r.inStream.slice(n.ranges).pipe(i.mediaData(n.length,function(n){if(n)return t.emit("error",n);if(!i.destroyed){var r=t._generateFragment(o);return r?void e(r):i.finalize()}}))})}(a)):i.finalize()}),0<=n){var r=t._fileStream=t._file.createReadStream({start:n});t._tracks.forEach(function(e){e.inStream=new f(n,{highWaterMark:1e7}),r.pipe(e.inStream)})}return t._tracks.map(function(e){return e.outStream})},r.prototype._findSampleBefore=function(e,t){var n=this._tracks[e],r=i(n.timeScale*t),o=a(n.samples,r,function(e,t){return e.dts+e.presentationOffset-t});for(-1===o?o=0:0>o&&(o=-o-2);!n.samples[o].sync;)o--;return o},r.prototype._generateFragment=function(e,t){var n,r=this,o=r._tracks[e];if((n=void 0===t?o.currSample:r._findSampleBefore(e,t))>=o.samples.length)return null;for(var i,a=o.samples[n].dts,s=0,u=[],c=n;c<o.samples.length&&!((i=o.samples[c]).sync&&i.dts-a>=1*o.timeScale);c++){s+=i.size;var l=u.length-1;0>l||u[l].end!==i.offset?u.push({start:i.offset,end:i.offset+i.size}):u[l].end+=i.size}return o.currSample=c,{moof:r._generateMoof(e,n,c),ranges:u,length:s}},r.prototype._generateMoof=function(e,t,n){for(var r,o=this._tracks[e],i=[],a=t;a<n;a++)r=o.samples[a],i.push({sampleDuration:r.duration,sampleSize:r.size,sampleFlags:r.sync?33554432:16842752,sampleCompositionTimeOffset:r.presentationOffset});var s={type:"moof",mfhd:{sequenceNumber:this._fragmentSequence++},trafs:[{tfhd:{flags:131072,trackId:o.trackId},tfdt:{baseMediaDecodeTime:o.samples[t].dts},trun:{flags:3841,dataOffset:8,entries:i}}]};return s.trafs[0].trun.dataOffset+=l.encodingLength(s),s}}).call(this,e("buffer").Buffer)},{"binary-search":12,buffer:23,events:33,inherits:40,"mp4-box-encoding":52,"mp4-stream":55,"range-slice-stream":73}],117:[function(e,t){function n(e,t,o){var i=this;return this instanceof n?(o=o||{},i.detailedError=null,i._elem=t,i._elemWrapper=new r(t),i._waitingFired=!1,i._trackMeta=null,i._file=e,i._tracks=null,"none"!==i._elem.preload&&i._createMuxer(),i._onError=function(){i.detailedError=i._elemWrapper.detailedError,i.destroy()},i._onWaiting=function(){i._waitingFired=!0,i._muxer?i._tracks&&i._pump():i._createMuxer()},i._elem.addEventListener("waiting",i._onWaiting),void i._elem.addEventListener("error",i._onError)):new n(e,t,o)}var r=e("mediasource"),o=e("pump"),i=e("./mp4-remuxer");t.exports=n,n.prototype._createMuxer=function(){var e=this;e._muxer=new i(e._file),e._muxer.on("ready",function(t){e._tracks=t.map(function(t){var n=e._elemWrapper.createWriteStream(t.mime);n.on("error",function(t){e._elemWrapper.error(t)});var r={muxed:null,mediaSource:n,initFlushed:!1,onInitFlushed:null};return n.write(t.init,function(e){r.initFlushed=!0,r.onInitFlushed&&r.onInitFlushed(e)}),r}),(e._waitingFired||"auto"===e._elem.preload)&&e._pump()}),e._muxer.on("error",function(t){e._elemWrapper.error(t)})},n.prototype._pump=function(){var e=this,t=e._muxer.seek(e._elem.currentTime,!e._tracks);e._tracks.forEach(function(n,r){var i=function(){n.muxed&&(n.muxed.destroy(),n.mediaSource=e._elemWrapper.createWriteStream(n.mediaSource),n.mediaSource.on("error",function(t){e._elemWrapper.error(t)})),n.muxed=t[r],o(n.muxed,n.mediaSource)};n.initFlushed?i():n.onInitFlushed=function(t){return t?void e._elemWrapper.error(t):void i()}})},n.prototype.destroy=function(){var e=this;e.destroyed||(e.destroyed=!0,e._elem.removeEventListener("waiting",e._onWaiting),e._elem.removeEventListener("error",e._onError),e._tracks&&e._tracks.forEach(function(e){e.muxed.destroy()}),e._elem.src="")}},{"./mp4-remuxer":116,mediasource:48,pump:66}],118:[function(e,t){t.exports=function e(t,n){function r(){for(var e=Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),o=e[e.length-1];return"function"==typeof r&&r!==o&&Object.keys(o).forEach(function(e){r[e]=o[e]}),r}if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(e){r[e]=t[e]}),r}},{}],119:[function(e,t){t.exports=function(){for(var e,t={},r=0;r<arguments.length;r++)for(var o in e=arguments[r])n.call(e,o)&&(t[o]=e[o]);return t};var n=Object.prototype.hasOwnProperty},{}],120:[function(e,t){t.exports=function(e){for(var t,r=1;r<arguments.length;r++)for(var o in t=arguments[r])n.call(t,o)&&(e[o]=t[o]);return e};var n=Object.prototype.hasOwnProperty},{}],121:[function(e,t){t.exports=function e(t,n,r){return void 0===n?function(n,r){return e(t,n,r)}:(void 0===r&&(r="0"),0<(t-=n.toString().length)?Array(t+(/\./.test(n)?2:1)).join(r)+n:n+"")}},{}],122:[function(e,t){t.exports={version:"0.98.19"}},{}],123:[function(e,n){(function(t,r){function o(e){function n(){a.destroyed||(a.ready=!0,a.emit("ready"))}var a=this;return a instanceof o?(l.call(a),!e&&(e={}),a.peerId="string"==typeof e.peerId?e.peerId:i.isBuffer(e.peerId)?e.peerId.toString("hex"):i.from(S+y(9).toString("base64")).toString("hex"),a.peerIdBuffer=i.from(a.peerId,"hex"),a.nodeId="string"==typeof e.nodeId?e.nodeId:i.isBuffer(e.nodeId)?e.nodeId.toString("hex"):y(20).toString("hex"),a.nodeIdBuffer=i.from(a.nodeId,"hex"),a._debugId=a.peerId.toString("hex").substring(0,7),a.destroyed=!1,a.listening=!1,a.torrentPort=e.torrentPort||0,a.dhtPort=e.dhtPort||0,a.tracker=void 0===e.tracker?{}:e.tracker,a.torrents=[],a.maxConns=+e.maxConns||55,a._debug("new webtorrent (peerId %s, nodeId %s, port %s)",a.peerId,a.nodeId,a.torrentPort),a.tracker&&("object"!=typeof a.tracker&&(a.tracker={}),e.rtcConfig&&(console.warn("WebTorrent: opts.rtcConfig is deprecated. Use opts.tracker.rtcConfig instead"),a.tracker.rtcConfig=e.rtcConfig),e.wrtc&&(console.warn("WebTorrent: opts.wrtc is deprecated. Use opts.tracker.wrtc instead"),a.tracker.wrtc=e.wrtc),r.WRTC&&!a.tracker.wrtc&&(a.tracker.wrtc=r.WRTC)),"function"==typeof w?a._tcpPool=new w(a):t.nextTick(function(){a._onListening()}),a._downloadSpeed=b(),a._uploadSpeed=b(),!1!==e.dht&&"function"==typeof c?(a.dht=new c(f({nodeId:a.nodeId},e.dht)),a.dht.once("error",function(e){a._destroy(e)}),a.dht.once("listening",function(){var e=a.dht.address();e&&(a.dhtPort=e.port)}),a.dht.setMaxListeners(0),a.dht.listen(a.dhtPort)):a.dht=!1,a.enableWebSeeds=!1!==e.webSeeds,void("function"==typeof h&&null!=e.blocklist?h(e.blocklist,{headers:{"user-agent":"WebTorrent/"+k+" (https://webtorrent.io)"}},function(e,t){return e?a.error("Failed to load blocklist: "+e.message):(a.blocked=t,void n())}):t.nextTick(n))):new o(e)}n.exports=o;var i=e("safe-buffer").Buffer,a=e("simple-concat"),s=e("create-torrent"),u=e("debug")("webtorrent"),c=e("bittorrent-dht/client"),l=e("events").EventEmitter,f=e("xtend"),d=e("inherits"),h=e("load-ip-set"),p=e("run-parallel"),g=e("parse-torrent"),m=e("path"),v=e("simple-peer"),y=e("randombytes"),b=e("speedometer"),_=e("zero-fill"),w=e("./lib/tcp-pool"),C=e("./lib/torrent"),k=e("./package.json").version,E=k.match(/([0-9]+)/g).slice(0,2).map(function(e){return _(2,e)}).join(""),S="-WW"+E+"-";d(o,l),o.WEBRTC_SUPPORT=v.WEBRTC_SUPPORT,Object.defineProperty(o.prototype,"downloadSpeed",{get:function(){return this._downloadSpeed()}}),Object.defineProperty(o.prototype,"uploadSpeed",{get:function(){return this._uploadSpeed()}}),Object.defineProperty(o.prototype,"progress",{get:function(){var e=this.torrents.filter(function(e){return 1!==e.progress});return e.reduce(function(e,t){return e+t.downloaded},0)/(e.reduce(function(e,t){return e+(t.length||0)},0)||1)}}),Object.defineProperty(o.prototype,"ratio",{get:function(){return this.torrents.reduce(function(e,t){return e+t.uploaded},0)/(this.torrents.reduce(function(e,t){return e+t.received},0)||1)}}),o.prototype.get=function(e){var t,n,r=this,o=r.torrents.length;if(e instanceof C){for(t=0;t<o;t++)if((n=r.torrents[t])===e)return n}else{var i;try{i=g(e)}catch(e){}if(!i)return null;if(!i.infoHash)throw new Error("Invalid torrent identifier");for(t=0;t<o;t++)if((n=r.torrents[t]).infoHash===i.infoHash)return n}return null},o.prototype.download=function(e,t,n){return console.warn("WebTorrent: client.download() is deprecated. Use client.add() instead"),this.add(e,t,n)},o.prototype.add=function(e,t,n){function r(){if(!i.destroyed)for(var e,t=0,n=i.torrents.length;t<n;t++)if((e=i.torrents[t]).infoHash===a.infoHash&&e!==a)return void a._destroy(new Error("Cannot add duplicate torrent "+a.infoHash))}function o(){i.destroyed||("function"==typeof n&&n(a),i.emit("torrent",a))}var i=this;if(i.destroyed)throw new Error("client is destroyed");if("function"==typeof t)return i.add(e,null,t);i._debug("add"),t=t?f(t):{};var a=new C(e,i,t);return i.torrents.push(a),a.once("_infoHash",r),a.once("ready",o),a.once("close",function e(){a.removeListener("_infoHash",r),a.removeListener("ready",o),a.removeListener("close",e)}),a},o.prototype.seed=function(e,t,n){var r=this;if(r.destroyed)throw new Error("client is destroyed");if("function"==typeof t)return r.seed(e,null,t);r._debug("seed"),t=t?f(t):{},"string"==typeof e&&(t.path=m.dirname(e)),t.createdBy||(t.createdBy="WebTorrent/"+E);var o,i=r.add(null,t,function(e){var t=[function(t){e.load(o,t)}];r.dht&&t.push(function(t){e.once("dhtAnnounce",t)}),p(t,function(t){return r.destroyed?void 0:t?e._destroy(t):void function(e){r._debug("on seed"),"function"==typeof n&&n(e),e.emit("seed"),r.emit("seed",e)}(e)})});return function(e){return"undefined"!=typeof FileList&&e instanceof FileList}(e)&&(e=Array.prototype.slice.call(e)),Array.isArray(e)||(e=[e]),p(e.map(function(e){return function(t){!function(e){return"object"==typeof e&&null!=e&&"function"==typeof e.pipe}(e)?t(null,e):a(e,t)}}),function(e,n){return r.destroyed?void 0:e?i._destroy(e):void s.parseInput(n,t,function(e,a){return r.destroyed?void 0:e?i._destroy(e):(o=a.map(function(e){return e.getStream}),void s(n,t,function(e,t){if(!r.destroyed){if(e)return i._destroy(e);var n=r.get(t);n?i._destroy(new Error("Cannot add duplicate torrent "+n.infoHash)):i._onTorrentId(t)}}))})}),i},o.prototype.remove=function(e,t){if(this._debug("remove"),!this.get(e))throw new Error("No torrent with id "+e);this._remove(e,t)},o.prototype._remove=function(e,t){var n=this.get(e);n&&(this.torrents.splice(this.torrents.indexOf(n),1),n.destroy(t))},o.prototype.address=function(){return this.listening?this._tcpPool?this._tcpPool.server.address():{address:"0.0.0.0",family:"IPv4",port:0}:null},o.prototype.destroy=function(e){if(this.destroyed)throw new Error("client already destroyed");this._destroy(null,e)},o.prototype._destroy=function(e,t){var n=this;n._debug("client destroy"),n.destroyed=!0;var r=n.torrents.map(function(e){return function(t){e.destroy(t)}});n._tcpPool&&r.push(function(e){n._tcpPool.destroy(e)}),n.dht&&r.push(function(e){n.dht.destroy(e)}),p(r,t),e&&n.emit("error",e),n.torrents=[],n._tcpPool=null,n.dht=null},o.prototype._onListening=function(){if(this._debug("listening"),this.listening=!0,this._tcpPool){var e=this._tcpPool.server.address();e&&(this.torrentPort=e.port)}this.emit("listening")},o.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this._debugId+"] "+e[0],u.apply(null,e)}}).call(this,e("_process"),void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{"./lib/tcp-pool":21,"./lib/torrent":5,"./package.json":122,_process:65,"bittorrent-dht/client":21,"create-torrent":28,debug:29,events:33,inherits:40,"load-ip-set":21,"parse-torrent":61,path:62,randombytes:72,"run-parallel":86,"safe-buffer":88,"simple-concat":89,"simple-peer":91,speedometer:94,xtend:119,"zero-fill":121}]},{},[123])(123)},e.exports=o()}).call(t,n(8),n(40).setImmediate)},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o,i,a,s,u=1,c={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){p(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){i.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return c[u]=o,r(u),u++},d.clearImmediate=h}function h(e){delete c[e]}function p(e){if(l)setTimeout(p,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{h(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(8),n(6))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(0)),i=(c(n(1)),n(3)),a=c(n(5)),s=c(n(102)),u=c(n(104));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={searchTerm:"",profile:{username:"",avatarUrl:"",download:0,upload:0}},n.handleKeyUp=n.handleKeyUp.bind(n),n.handleChange=n.handleChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentWillMount",value:function(){var e=this,t=a.default.getToken();$.ajax({url:"/api/profile",headers:{Authorization:"bearer "+t},contentType:"application/json",method:"GET"}).done(function(t){e.setState({profile:{username:t.username,avatarUrl:t.avatarUrl,download:t.download,upload:t.upload}})}).fail(function(){console.log("There is an error when getting user profile.")})}},{key:"handleKeyUp",value:function(e){"Enter"===e.key&&""!==this.state.searchTerm&&this.props.history.push("/search/title="+this.state.searchTerm)}},{key:"handleChange",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"render",value:function(){return o.default.createElement("header",{className:"Header"},o.default.createElement(i.Link,{to:"/"},o.default.createElement("div",{className:"logo"})),o.default.createElement(s.default,null),o.default.createElement("div",{id:"search",className:"Search"},o.default.createElement("input",{onKeyUp:this.handleKeyUp,onChange:this.handleChange,type:"search",placeholder:"Search for a title...",value:this.state.searchTerm})),o.default.createElement(u.default,{username:this.state.profile.username,avatarUrl:this.state.profile.avatarUrl,download:this.state.profile.download,upload:this.state.profile.upload}))}}]),t}();t.default=(0,i.withRouter)(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(0)),i=(l(n(1)),n(3)),a=l(n(27)),s=l(n(41)),u=l(n(5)),c=n(13);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.tags=[],n.openTagModal=n.openTagModal.bind(n),n.handleTagInputChange=n.handleTagInputChange.bind(n),n.addTag=n.addTag.bind(n),n.updateTags=n.updateTags.bind(n),n.searchTag=n.searchTag.bind(n),n.openEditVideoModal=n.openEditVideoModal.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentWillMount",value:function(){var e=this,t=u.default.getToken();$.ajax({url:"/api/profile",headers:{Authorization:"bearer "+t},contentType:"application/json",method:"GET"}).done(function(t){e.tags=t.tags,e.forceUpdate()}).fail(function(){console.log("There is an error when getting user profile.")})}},{key:"componentDidMount",value:function(){var e=this;$(".tags-box ul").sortable(),$(".tags-box").droppable({greedy:!0,drop:function(t,n){setTimeout(function(){var t=$(".tags-box ul").children().map(function(){if(""!=this.innerHTML)return this.innerHTML}).get(),n=u.default.getToken();if(!(0,c.arraysEqual)(t,e.tags)){var r={token:n,tags:t};$.ajax({url:"/update/tags",data:JSON.stringify(r),headers:{Authorization:"bearer "+n},contentType:"application/json",method:"POST"}).fail(function(){console.log("There has an error when updating tags.")}),e.tags=t,e.forceUpdate()}},100)},accepet:".tags-box .ui-sortable-handle"}),$("#root").droppable({drop:function(t,n){var r=n.draggable[0].innerHTML;console.log(r);var o=e.tags.filter(function(e){return e!==r}),i=u.default.getToken();if(!(0,c.arraysEqual)(o,e.tags)){var a={token:i,tags:o};$.ajax({url:"/update/tags",data:JSON.stringify(a),headers:{Authorization:"bearer "+i},contentType:"application/json",method:"POST"}).fail(function(){console.log("There has an error when updating tags.")}),e.tags=o,e.forceUpdate()}}.bind(this),accept:".tags-box .ui-sortable-handle"})}},{key:"updateTags",value:function(){var e=$(".tags-box ul").children().map(function(){return this.innerHTML}).get();console.log(e);var t=u.default.getToken();if(!(0,c.arraysEqual)(e,this.tags)){var n={token:t,tags:e};$.ajax({url:"/update/tags",data:JSON.stringify(n),headers:{Authorization:"bearer "+t},contentType:"application/json",method:"POST"}).fail(function(){console.log("There has an error when updating tags.")}),this.tags=e,this.forceUpdate}}},{key:"openTagModal",value:function(){$("#add-tag-modal").css({visibility:"visible",opacity:"1"})}},{key:"handleTagInputChange",value:function(e){""==e.target.value?$(".tag-modal-buttons div").css("top","0"):$(".tag-modal-buttons div").css("top","-50px")}},{key:"addTag",value:function(){var e=$(".add-navigation-tag").find("input").val();if(""!==e){this.tags=$(".tags-box ul").children().map(function(){return this.innerHTML}).get(),this.tags.push(e),this.forceUpdate();var t=u.default.getToken(),n={token:t,tags:this.tags};$.ajax({url:"/update/tags",data:JSON.stringify(n),headers:{Authorization:"bearer "+t},contentType:"application/json",method:"POST"}).fail(function(){console.log("There has an error when updating tags.")})}$("#add-tag-modal").css({visibility:"hidden",opacity:"0"}),$(".add-navigation-tag").find("input").val(""),$(".tag-modal-buttons").find("div").css("top","0")}},{key:"searchTag",value:function(e){this.props.history.push("/search/tag="+e.target.innerHTML)}},{key:"openEditVideoModal",value:function(){$("#edit-video-card").css({visibility:"visible",opacity:"1"})}},{key:"render",value:function(){var e=this;return o.default.createElement("div",{id:"navigation",className:"Navigation"},o.default.createElement("nav",null,o.default.createElement("ul",null,o.default.createElement("li",{className:"tags-box-wrapper"},"Tags",o.default.createElement("div",{id:"tagsbox",className:"tags-box"},o.default.createElement("div",{className:"tags-box-buttons"},o.default.createElement("i",{className:"fa fw fa-plus-square",onClick:this.openTagModal})),o.default.createElement("ul",null,this.tags.map(function(t){return o.default.createElement("li",{key:(0,c.uuidv8)(),className:"ui-sortable-handle",onClick:e.searchTag},t)})))),o.default.createElement(i.Link,{to:"/list",className:"link"},o.default.createElement("li",null,"My list")),o.default.createElement(i.Link,{to:"/new",className:"link"},o.default.createElement("li",null,"New")),o.default.createElement("li",null,"Download"),o.default.createElement("li",null,o.default.createElement("a",{href:"/doc",style:{textDecoration:"none",color:"#fff"}},"FAQ")),o.default.createElement("li",{onClick:this.openEditVideoModal},o.default.createElement("i",{className:"fa fa-fw fa-plus"})))),o.default.createElement(a.default,{id:"add-tag-modal"},o.default.createElement("div",{className:"add-navigation-tag"},o.default.createElement("input",{type:"text",onChange:this.handleTagInputChange}),o.default.createElement("div",{className:"tag-modal-buttons",onClick:this.addTag},o.default.createElement("div",null,o.default.createElement("i",{className:"fa fa-fw fa-times"}),o.default.createElement("i",{className:"fa fa-fw fa-check"}))))),o.default.createElement(a.default,{id:"edit-video-card",show:!0},o.default.createElement(s.default,{ref:"edit-video-card-ref"})))}}]),t}();t.default=(0,i.withRouter)(f)},function(e,t,n){var r,o,i,a;a=function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(n);i(r);function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function u(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var c={className:"react-tagsinput-input",placeholder:"Add a tag"},l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={tag:"",isFocused:!1},e.focus=e.focus.bind(e),e.blur=e.blur.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"_getTagDisplayValue",value:function(e){var t=this.props.tagDisplayProp;return t?e[t]:e}},{key:"_makeTag",value:function(e){var t,n,r,o=this.props.tagDisplayProp;return o?(r=e,(n=o)in(t={})?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t):e}},{key:"_removeTag",value:function(e){var t=this.props.value.concat([]);if(e>-1&&e<t.length){var n=t.splice(e,1);this.props.onChange(t,n,[e])}}},{key:"_clearInput",value:function(){this.hasControlledInput()?this.props.onChangeInput(""):this.setState({tag:""})}},{key:"_tag",value:function(){return this.hasControlledInput()?this.props.inputValue:this.state.tag}},{key:"_addTags",value:function(e){var t=this,n=this.props,r=n.validationRegex,o=n.onChange,i=n.onValidationReject,a=n.onlyUnique,s=n.maxTags,u=n.value;a&&(e=(e=function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(e)).filter(function(e){return u.every(function(n){return t._getTagDisplayValue(n)!==t._getTagDisplayValue(e)})}));var c=e.filter(function(e){return!r.test(t._getTagDisplayValue(e))});if(e=(e=e.filter(function(e){return r.test(t._getTagDisplayValue(e))})).filter(function(e){var n=t._getTagDisplayValue(e);return"function"==typeof n.trim?n.trim().length>0:n}),s>=0){var l=Math.max(s-u.length,0);e=e.slice(0,l)}if(i&&c.length>0&&i(c),e.length>0){for(var f=u.concat(e),d=[],h=0;h<e.length;h++)d.push(u.length+h);return o(f,e,d),this._clearInput(),!0}return!(c.length>0)&&(this._clearInput(),!1)}},{key:"_shouldPreventDefaultEventOnAdd",value:function(e,t,n){return!!e||13===n&&(this.props.preventSubmit||!this.props.preventSubmit&&!t)}},{key:"focus",value:function(){this.input&&"function"==typeof this.input.focus&&this.input.focus(),this.handleOnFocus()}},{key:"blur",value:function(){this.input&&"function"==typeof this.input.blur&&this.input.blur(),this.handleOnBlur()}},{key:"accept",value:function(){var e=this._tag();return""!==e&&(e=this._makeTag(e),this._addTags([e]))}},{key:"addTag",value:function(e){return this._addTags([e])}},{key:"clearInput",value:function(){this._clearInput()}},{key:"handlePaste",value:function(e){var t=this,n=this.props,r=n.addOnPaste,o=n.pasteSplit;if(r){e.preventDefault();var i=o(function(e){return window.clipboardData?window.clipboardData.getData("Text"):e.clipboardData?e.clipboardData.getData("text/plain"):""}(e)).map(function(e){return t._makeTag(e)});this._addTags(i)}}},{key:"handleKeyDown",value:function(e){if(!e.defaultPrevented){var t=this.props,n=t.value,r=t.removeKeys,o=t.addKeys,i=""===this._tag(),a=e.keyCode,s=e.key,u=-1!==o.indexOf(a)||-1!==o.indexOf(s),c=-1!==r.indexOf(a)||-1!==r.indexOf(s);if(u){var l=this.accept();this._shouldPreventDefaultEventOnAdd(l,i,a)&&e.preventDefault()}c&&n.length>0&&i&&(e.preventDefault(),this._removeTag(n.length-1))}}},{key:"handleClick",value:function(e){e.target===this.div&&this.focus()}},{key:"handleChange",value:function(e){var t=this.props.onChangeInput,n=this.props.inputProps.onChange,r=e.target.value;n&&n(e),this.hasControlledInput()?t(r):this.setState({tag:r})}},{key:"handleOnFocus",value:function(e){var t=this.props.inputProps.onFocus;t&&t(e),this.setState({isFocused:!0})}},{key:"handleOnBlur",value:function(e){var t=this.props.inputProps.onBlur;if(this.setState({isFocused:!1}),null!=e&&(t&&t(e),this.props.addOnBlur)){var n=this._makeTag(e.target.value);this._addTags([n])}}},{key:"handleRemove",value:function(e){this._removeTag(e)}},{key:"inputProps",value:function(){var e=this.props.inputProps,t=(e.onChange,e.onFocus,e.onBlur,u(e,["onChange","onFocus","onBlur"])),n=s({},c,t);return this.props.disabled&&(n.disabled=!0),n}},{key:"inputValue",value:function(e){return e.currentValue||e.inputValue||""}},{key:"hasControlledInput",value:function(){var e=this.props,t=e.inputValue;return"function"==typeof e.onChangeInput&&"string"==typeof t}},{key:"componentDidMount",value:function(){this.hasControlledInput()||this.setState({tag:this.inputValue(this.props)})}},{key:"componentWillReceiveProps",value:function(e){this.hasControlledInput()||this.inputValue(e)&&this.setState({tag:this.inputValue(e)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=(t.onChange,t.tagProps),i=t.renderLayout,a=t.renderTag,c=t.renderInput,l=(t.addKeys,t.removeKeys,t.className),f=t.focusedClassName,d=(t.addOnBlur,t.addOnPaste,t.inputProps,t.pasteSplit,t.onlyUnique,t.maxTags,t.validationRegex,t.disabled);t.tagDisplayProp,t.inputValue,t.onChangeInput,u(t,["value","onChange","tagProps","renderLayout","renderTag","renderInput","addKeys","removeKeys","className","focusedClassName","addOnBlur","addOnPaste","inputProps","pasteSplit","onlyUnique","maxTags","validationRegex","disabled","tagDisplayProp","inputValue","onChangeInput"]);this.state.isFocused&&(l+=" "+f);var h=n.map(function(t,n){return a(s({key:n,tag:t,onRemove:e.handleRemove.bind(e),disabled:d,getTagDisplayValue:e._getTagDisplayValue.bind(e)},r))}),p=c(s({ref:function(t){e.input=t},value:this._tag(),onPaste:this.handlePaste.bind(this),onKeyDown:this.handleKeyDown.bind(this),onChange:this.handleChange.bind(this),onFocus:this.handleOnFocus.bind(this),onBlur:this.handleOnBlur.bind(this),addTag:this.addTag.bind(this)},this.inputProps()));return o.default.createElement("div",{ref:function(t){e.div=t},onClick:this.handleClick.bind(this),className:l},i(h,p))}}]),t}();l.defaultProps={className:"react-tagsinput",focusedClassName:"react-tagsinput--focused",addKeys:[9,13],addOnBlur:!1,addOnPaste:!1,inputProps:{},removeKeys:[8],renderInput:function(e){e.addTag;var t=u(e,["addTag"]),n=t.onChange,r=t.value,i=u(t,["onChange","value"]);return o.default.createElement("input",s({type:"text",onChange:n,value:r},i))},renderTag:function(e){var t=e.tag,n=e.key,r=e.disabled,i=e.onRemove,a=e.classNameRemove,c=e.getTagDisplayValue,l=u(e,["tag","key","disabled","onRemove","classNameRemove","getTagDisplayValue"]);return o.default.createElement("span",s({key:n},l),c(t),!r&&o.default.createElement("a",{className:a,onClick:function(e){return i(n)}}))},renderLayout:function(e,t){return o.default.createElement("span",null,e,t)},pasteSplit:function(e){return e.split(" ").map(function(e){return e.trim()})},tagProps:{className:"react-tagsinput-tag",classNameRemove:"react-tagsinput-remove"},onlyUnique:!1,maxTags:-1,validationRegex:/.*/,disabled:!1,tagDisplayProp:null,preventSubmit:!0},t.default=l,e.exports=t.default},o=[e,t,n(0),n(1)],void 0===(i="function"==typeof(r=a)?r.apply(t,o):r)||(e.exports=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=d(n(0)),i=n(3),a=d(n(1)),s=d(n(105)),u=d(n(27)),c=d(n(5)),l=n(13),f=d(n(42));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(e){return h(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return g(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){$(document).click(function(e){var t=e.target;"1"!==$("#profile-card").css("opacity")||"0"!==$("#avatar-editor").css("opacity")||$(t).is("#profile-card")||$(t).parents().is("#profile-card")||$("#profile-card").css({visibility:"hidden",opacity:"0"})})}},{key:"showProfileCard",value:function(){$("#profile-card").css({visibility:"visible",opacity:"1"})}},{key:"render",value:function(){return o.default.createElement("div",{className:"profile"},o.default.createElement(y,{username:this.props.username,avatarUrl:this.props.avatarUrl,download:this.props.download,upload:this.props.upload}),o.default.createElement("div",{className:"user"},o.default.createElement("div",{className:"name"},this.props.username),o.default.createElement("div",{className:"image",onClick:this.showProfileCard},o.default.createElement("img",{src:"/avatar/"+this.props.avatarUrl,alt:"avatar"}))))}}]),t}(),v=function(e){function t(e){h(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={preview:null},n.openAvatarEditor=n.openAvatarEditor.bind(n),n.closeAvatarEditor=n.closeAvatarEditor.bind(n),n.onCrop=n.onCrop.bind(n),n.onClose=n.onClose.bind(n),n.updateAvatar=n.updateAvatar.bind(n),n.logout=n.logout.bind(n),n}return g(t,o.default.Component),r(t,[{key:"openAvatarEditor",value:function(){$("#avatar-editor").css({visibility:"visible",opacity:"1"})}},{key:"closeAvatarEditor",value:function(){this.setState({preview:null}),$("#avatar-editor").css({visibility:"hidden",opacity:"0"})}},{key:"onClose",value:function(){this.setState({preview:null})}},{key:"onCrop",value:function(e){this.setState({preview:e})}},{key:"updateAvatar",value:function(){var e=this;this.state.preview||alert("Please choose a file.");var t=c.default.getToken(),n=(0,l.dataURItoBlob)(this.state.preview);(new f.default).compress(n,{width:100,height:100,quality:1}).then(function(n){var r=(0,l.uuidv8)()+(0,l.uuidv8)()+"."+n.type.split("/")[1],o=new FormData;o.append("avatar",n,r),$.ajax({url:"/upload/avatar",headers:{Authorization:"bearer "+t},data:o,cache:!1,contentType:!1,processData:!1,method:"POST"}).done(function(){e.props.history.push("/"),window.location.reload(),console.log("Successfully upload avatar.")}).fail(function(){console.log("There is an error when uploading avatar.")})}).catch(function(e){console.log("Something wrong when compressing avatar.")}),this.closeAvatarEditor()}},{key:"logout",value:function(){c.default.deauthenticateUser(),this.props.history.push("/")}},{key:"render",value:function(){return o.default.createElement("div",{id:"profile-card"},o.default.createElement("div",{className:"left-panel"},o.default.createElement("div",{className:"avatar",onClick:this.openAvatarEditor},o.default.createElement("img",{src:"/avatar/"+this.props.avatarUrl,alt:"avatar"}),o.default.createElement("div",{className:"overlay"},"Change")),o.default.createElement("div",{className:"logout",onClick:this.logout},"Log out")),o.default.createElement("div",{className:"right-panel"},o.default.createElement("div",{className:"profile-data-wrapper"},o.default.createElement("div",{className:"profile-data","data-type":"download"},(0,l.MBtoSize)(this.props.download)),o.default.createElement("div",{className:"profile-data","data-type":"upload"},(0,l.MBtoSize)(this.props.upload)),o.default.createElement("div",{className:"profile-data","data-type":"rate"},((this.props.download+1)/(this.props.upload+1)).toFixed(2)))),o.default.createElement(u.default,{id:"avatar-editor"},o.default.createElement("div",{className:"modal"},o.default.createElement("div",{className:"avatar-file-loader"},o.default.createElement(s.default,{width:200,height:200,onCrop:this.onCrop,onClose:this.onClose,shadingColor:"black",shadingOpacity:.6,labelStyle:{fontSize:"1.25em",fontWeight:"700",color:"#ecf0f1",display:"inline-block",fontFamily:"sans-serif",cursor:"pointer"},borderStyle:{border:"2px solid #ecf0f1",borderStyle:"dashed",borderRadius:"8px",textAlign:"center"}})),o.default.createElement("div",{className:"avatar-editor-right"},o.default.createElement("img",{src:this.state.preview,alt:"Preview"}),o.default.createElement("div",{className:"button-wrapper"},o.default.createElement("div",{"button-type":"submit",onClick:this.updateAvatar},"Upload"),o.default.createElement("div",{"button-type":"cancel",onClick:this.closeAvatarEditor},"Cancel"))))))}}]),t}(),y=(0,i.withRouter)(v);m.propTypes={username:a.default.string.isRequired,avatarUrl:a.default.string.isRequired,download:a.default.number.isRequired,upload:a.default.number.isRequired},t.default=(0,i.withRouter)(m)},function(e,t,n){var r;r=function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=r(n(1)),s=r(n(2));n(19),n(20),n(21),n(22),n(23),n(24);var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.generateHash("avatar_container"),o=n.generateHash("avatar_loader");return n.onFileLoad=n.onFileLoad.bind(n),n.onCloseClick=n.onCloseClick.bind(n),n.state={imgWidth:0,imgHeight:0,scale:1,containerId:r,loaderId:o,showLoader:!(n.props.src||n.props.img)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),i(t,[{key:"generateHash",value:function(e){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e+"-"+t()+"-"+t()+"-"+t()}},{key:"onCloseCallback",value:function(){this.props.onClose()}},{key:"onCropCallback",value:function(e){this.props.onCrop(e)}},{key:"onFileLoadCallback",value:function(e){this.props.onFileLoad(e)}},{key:"onImageLoadCallback",value:function(e){this.props.onImageLoad(e)}},{key:"componentDidMount",value:function(){var e=this;if(!this.state.showLoader){var t=this.props.img||new Image;!this.props.img&&this.props.src&&(t.src=this.props.src),this.setState({image:t},function(){if(e.image.complete)return e.init();e.image.onload=function(){e.onImageLoadCallback(e.image),e.init()}})}}},{key:"onFileLoad",value:function(e){e.preventDefault();var t=new FileReader,n=e.target.files[0];this.onFileLoadCallback(n);var r=new Image,o=this;t.onloadend=function(){r.src=t.result,o.setState({image:r,file:n,showLoader:!1},function(){if(o.image.complete)return o.init();o.image.onload=function(){return o.init()}})},t.readAsDataURL(n)}},{key:"onCloseClick",value:function(){var e=this;this.setState({showLoader:!0},function(){return e.onCloseCallback()})}},{key:"init",value:function(){var e=this.image.width,t=this.image.height,n=t/e,r=this.props.height||t,o=r/t,i=r/n,a=i/4;this.setState({imgWidth:i,imgHeight:r,scale:o,cropRadius:a},this.initCanvas)}},{key:"initCanvas",value:function(){var e=this,t=this.initStage(),n=this.initBackground(),r=this.initShading(),o=this.initCrop(),i=this.initCropStroke(),a=this.initResize(),u=this.initResizeIcon(),c=new s.default.Layer;c.add(n),c.add(r),c.add(i),c.add(o),c.add(a),c.add(u),t.add(c);var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return o.radius()-e},f=function(e){return o.x()-l(e)<0},d=function(e){return o.y()-l(e)<0},h=function(e){return o.x()+l(e)>t.width()},p=function(){return t.width()-o.radius()-1},g=function(e){return o.y()+l(e)>t.height()},m=function(){return t.height()-o.radius()-1},v=function(t){return l(t)>=e.minCropRadius?t:o.radius()-e.minCropRadius},y=function(e){return e+.86*o.radius()},b=function(e){return e-.5*o.radius()},_=function(e,t){a.x(y(e)-8),a.y(b(t)-8),u.x(y(e)-8),u.y(b(t)-10)},w=function(){return o.toDataURL({x:o.x()-o.radius(),y:o.y()-o.radius(),width:2*o.radius(),height:2*o.radius()})},C=function(e){var t=e>0||function(e){return!(f(e)||h(e)||g(e)||d(e))}(e)?e:0;i.radius(i.radius()-v(t)),o.radius(o.radius()-v(t)),a.fire("resize")};this.onCropCallback(w()),o.on("dragmove",function(){return o.fire("resize")}),o.on("dragend",function(){return e.onCropCallback(w())}),o.on("resize",function(){var t=f()?o.radius()+1:h()?p():o.x(),n=d()?o.radius()+1:g()?m():o.y();_(t,n),o.setFillPatternOffset({x:t/e.scale,y:n/e.scale}),o.x(t),i.x(t),o.y(n),i.y(n)}),o.on("mouseenter",function(){return t.container().style.cursor="move"}),o.on("mouseleave",function(){return t.container().style.cursor="default"}),o.on("dragstart",function(){return t.container().style.cursor="move"}),o.on("dragend",function(){return t.container().style.cursor="default"}),a.on("touchstart",function(t){a.on("dragmove",function(n){if("touchmove"===n.evt.type){var r=n.evt.changedTouches[0].pageY-t.evt.changedTouches[0].pageY||0;C(r*e.mobileScaleSpeed)}})}),a.on("dragmove",function(e){if("touchmove"!==e.evt.type){var t=e.evt.movementY||0;C(t)}}),a.on("dragend",function(){return e.onCropCallback(w())}),a.on("resize",function(){return _(o.x(),o.y())}),a.on("mouseenter",function(){return t.container().style.cursor="nesw-resize"}),a.on("mouseleave",function(){return t.container().style.cursor="default"}),a.on("dragstart",function(){return t.container().style.cursor="nesw-resize"}),a.on("dragend",function(){return t.container().style.cursor="default"})}},{key:"initStage",value:function(){return new s.default.Stage({container:this.containerId,width:this.width,height:this.height})}},{key:"initBackground",value:function(){return new s.default.Image({x:0,y:0,width:this.width,height:this.height,image:this.image})}},{key:"initShading",value:function(){return new s.default.Rect({x:0,y:0,width:this.width,height:this.height,fill:this.shadingColor,strokeWidth:4,opacity:this.shadingOpacity})}},{key:"initCrop",value:function(){return new s.default.Circle({x:this.halfWidth,y:this.halfHeight,radius:this.cropRadius,fillPatternImage:this.image,fillPatternOffset:{x:this.halfWidth/this.scale,y:this.halfHeight/this.scale},fillPatternScale:{x:this.scale,y:this.scale},opacity:1,draggable:!0,dashEnabled:!0,dash:[10,5]})}},{key:"initCropStroke",value:function(){return new s.default.Circle({x:this.halfWidth,y:this.halfHeight,radius:this.cropRadius,stroke:this.cropColor,strokeWidth:this.lineWidth,strokeScaleEnabled:!0,dashEnabled:!0,dash:[10,5]})}},{key:"initResize",value:function(){return new s.default.Rect({x:this.halfWidth+.86*this.cropRadius-8,y:this.halfHeight+-.5*this.cropRadius-8,width:16,height:16,draggable:!0,dragBoundFunc:function(e){return{x:this.getAbsolutePosition().x,y:e.y}}})}},{key:"initResizeIcon",value:function(){return new s.default.Path({x:this.halfWidth+.86*this.cropRadius-8,y:this.halfHeight+-.5*this.cropRadius-10,data:"M47.624,0.124l12.021,9.73L44.5,24.5l10,10l14.661-15.161l9.963,12.285v-31.5H47.624z M24.5,44.5   L9.847,59.653L0,47.5V79h31.5l-12.153-9.847L34.5,54.5L24.5,44.5z",fill:this.cropColor,scale:{x:.2,y:.2}})}},{key:"render",value:function(){var e=this,t={display:"flex",justifyContent:"center",backgroundColor:this.backgroundColor,width:this.props.width||this.width,position:"relative"},n=o({},this.props.labelStyle,{lineHeight:(this.props.height||200)+"px"}),r=o({},this.props.borderStyle,{width:this.props.width||200,height:this.props.height||200});return a.default.createElement("div",null,this.state.showLoader?a.default.createElement("div",{style:r},a.default.createElement("input",{onChange:function(t){return e.onFileLoad(t)},name:this.loaderId,type:"file",id:this.loaderId,style:{width:.1,height:.1,opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},accept:this.mimeTypes}),a.default.createElement("label",{htmlFor:this.loaderId,style:n},"Choose a file")):a.default.createElement("div",{style:t},a.default.createElement("svg",{onClick:this.onCloseClick,style:{position:"absolute",zIndex:999,cursor:"pointer",left:"10px",top:"10px"},viewBox:"0 0 475.2 475.2",width:"20px",height:"20px"},a.default.createElement("g",null,a.default.createElement("path",{d:"M405.6,69.6C360.7,24.7,301.1,0,237.6,0s-123.1,24.7-168,69.6S0,174.1,0,237.6s24.7,123.1,69.6,168s104.5,69.6,168,69.6    s123.1-24.7,168-69.6s69.6-104.5,69.6-168S450.5,114.5,405.6,69.6z M386.5,386.5c-39.8,39.8-92.7,61.7-148.9,61.7    s-109.1-21.9-148.9-61.7c-82.1-82.1-82.1-215.7,0-297.8C128.5,48.9,181.4,27,237.6,27s109.1,21.9,148.9,61.7    C468.6,170.8,468.6,304.4,386.5,386.5z",fill:this.closeIconColor}),a.default.createElement("path",{d:"M342.3,132.9c-5.3-5.3-13.8-5.3-19.1,0l-85.6,85.6L152,132.9c-5.3-5.3-13.8-5.3-19.1,0c-5.3,5.3-5.3,13.8,0,19.1    l85.6,85.6l-85.6,85.6c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4l85.6-85.6l85.6,85.6c2.6,2.6,6.1,4,9.5,4    c3.5,0,6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1l-85.4-85.6l85.6-85.6C347.6,146.7,347.6,138.2,342.3,132.9z",fill:this.closeIconColor}))),a.default.createElement("div",{id:this.containerId})))}},{key:"lineWidth",get:function(){return this.props.lineWidth}},{key:"containerId",get:function(){return this.state.containerId}},{key:"closeIconColor",get:function(){return this.props.closeIconColor}},{key:"cropColor",get:function(){return this.props.cropColor}},{key:"loaderId",get:function(){return this.state.loaderId}},{key:"mimeTypes",get:function(){return this.props.mimeTypes}},{key:"backgroundColor",get:function(){return this.props.backgroundColor}},{key:"shadingColor",get:function(){return this.props.shadingColor}},{key:"shadingOpacity",get:function(){return this.props.shadingOpacity}},{key:"mobileScaleSpeed",get:function(){return this.props.mobileScaleSpeed}},{key:"cropRadius",get:function(){return this.state.cropRadius}},{key:"minCropRadius",get:function(){return this.props.minCropRadius}},{key:"scale",get:function(){return this.state.scale}},{key:"width",get:function(){return this.state.imgWidth}},{key:"halfWidth",get:function(){return this.state.imgWidth/2}},{key:"height",get:function(){return this.state.imgHeight}},{key:"halfHeight",get:function(){return this.state.imgHeight/2}},{key:"image",get:function(){return this.state.image}}]),t}();u.defaultProps={shadingColor:"grey",shadingOpacity:.6,cropRadius:100,cropColor:"white",closeIconColor:"white",lineWidth:4,minCropRadius:30,backgroundColor:"grey",mimeTypes:"image/jpeg,image/png",mobileScaleSpeed:.5,onClose:function(){},onCrop:function(){},onFileLoad:function(){},onImageLoad:function(){},labelStyle:{fontSize:"1.25em",fontWeight:"700",color:"black",display:"inline-block",fontFamily:"sans-serif",cursor:"pointer"},borderStyle:{border:"2px solid #979797",borderStyle:"dashed",borderRadius:"8px",textAlign:"center"}},t.default=u},function(t,n){t.exports=e},function(e,t,n){e.exports=n(3),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18)},function(e,t,n){(function(t){!function(t){"use strict";var r=Math.PI/180,o={version:"@@version",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,showWarnings:!0,Filters:{},isDragging:function(){var e=o.DD;return!!e&&e.isDragging},isDragReady:function(){var e=o.DD;return!!e&&!!e.node},_addId:function(e,t){void 0!==t&&(this.ids[t]=e)},_removeId:function(e){void 0!==e&&delete this.ids[e]},_addName:function(e,t){t&&(this.names[t]||(this.names[t]=[]),this.names[t].push(e))},_removeName:function(e,t){if(e){var n=this.names[e];if(n){for(var r=0;r<n.length;r++)n[r]._id===t&&n.splice(r,1);0===n.length&&delete this.names[e]}}},getAngle:function(e){return this.angleDeg?e*r:e},_detectIE:function(e){var t=e.indexOf("msie ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var r=e.indexOf("edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)},_parseUA:function(e){var t=e.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],r=!!e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),i=!!e.match(/IEMobile/i);return{browser:n[1]||"",version:n[2]||"0",isIE:o._detectIE(t),mobile:r,ieMobile:i}},UA:void 0},i=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{};if(o.UA=o._parseUA(i.navigator&&i.navigator.userAgent||""),i.Konva&&console.error("Konva instance is already exist in current eviroment. Please use only one instance."),i.Konva=o,o.global=i,i.window&&i.window.document)o.document=i.window.document,o.window=i.window;else{var a=n(5),s=n(6).jsdom;o.window=s("<!DOCTYPE html><html><head></head><body></body></html>").defaultView,o.document=o.window.document,o.window.Image=a.Image,o._nodeCanvas=a}e.exports=o}(void 0!==t?t:window)}).call(t,n(4))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){},function(e,t){},function(e,t){!function(){"use strict";Konva.Collection=function(){var e=[].slice.call(arguments),t=e.length,n=0;for(this.length=t;n<t;n++)this[n]=e[n];return this},Konva.Collection.prototype=[],Konva.Collection.prototype.each=function(e){for(var t=0;t<this.length;t++)e(this[t],t)},Konva.Collection.prototype.toArray=function(){var e,t=[],n=this.length;for(e=0;e<n;e++)t.push(this[e]);return t},Konva.Collection.toCollection=function(e){var t,n=new Konva.Collection,r=e.length;for(t=0;t<r;t++)n.push(e[t]);return n},Konva.Collection._mapMethod=function(e){Konva.Collection.prototype[e]=function(){var t,n=this.length,r=[].slice.call(arguments);for(t=0;t<n;t++)this[t][e].apply(this[t],r);return this}},Konva.Collection.mapMethods=function(e){var t=e.prototype;for(var n in t)Konva.Collection._mapMethod(n)},Konva.Transform=function(e){this.m=e&&e.slice()||[1,0,0,1,0,0]},Konva.Transform.prototype={copy:function(){return new Konva.Transform(this.m)},point:function(e){var t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}},translate:function(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this},scale:function(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.m[0]*t+this.m[2]*n,o=this.m[1]*t+this.m[3]*n,i=this.m[0]*-n+this.m[2]*t,a=this.m[1]*-n+this.m[3]*t;return this.m[0]=r,this.m[1]=o,this.m[2]=i,this.m[3]=a,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(e,t){var n=this.m[0]+this.m[2]*t,r=this.m[1]+this.m[3]*t,o=this.m[2]+this.m[0]*e,i=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=r,this.m[2]=o,this.m[3]=i,this},multiply:function(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],o=this.m[1]*e.m[2]+this.m[3]*e.m[3],i=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],a=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=o,this.m[4]=i,this.m[5]=a,this},invert:function(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,r=-this.m[2]*e,o=this.m[0]*e,i=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=o,this.m[4]=i,this.m[5]=a,this},getMatrix:function(){return this.m},setAbsolutePosition:function(e,t){var n=this.m[0],r=this.m[1],o=this.m[2],i=this.m[3],a=this.m[4],s=(n*(t-this.m[5])-r*(e-a))/(n*i-r*o),u=(e-a-o*s)/n;return this.translate(u,s)}};var e=Math.PI/180,n=180/Math.PI,r={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},o=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Konva.Util={_isElement:function(e){return!(!e||1!=e.nodeType)},_isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isObject:function(e){return!!e&&e.constructor===Object},_isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},_isNumber:function(e){return"[object Number]"===Object.prototype.toString.call(e)},_isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},_throttle:function(e,t,n){var r,o,i,a=null,s=0,u=n||{},c=function(){s=!1===u.leading?0:(new Date).getTime(),a=null,i=e.apply(r,o),r=o=null};return function(){var n=(new Date).getTime();s||!1!==u.leading||(s=n);var l=t-(n-s);return r=this,o=arguments,l<=0?(clearTimeout(a),a=null,s=n,i=e.apply(r,o),r=o=null):a||!1===u.trailing||(a=setTimeout(c,l)),i}},_hasMethods:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&this._isFunction(e[t])&&n.push(t);return n.length>0},isValidSelector:function(e){if("string"!=typeof e)return!1;var t=e[0];return"#"===t||"."===t||t===t.toUpperCase()},createCanvasElement:function(){var e=Konva.document.createElement("canvas");try{e.style=e.style||{}}catch(e){}return e},isBrowser:function(){return"object"!=typeof t},_isInDocument:function(e){for(;e=e.parentNode;)if(e==Konva.document)return!0;return!1},_simplifyArray:function(e){var t,n,r=[],o=e.length,i=Konva.Util;for(t=0;t<o;t++)n=e[t],i._isNumber(n)?n=Math.round(1e3*n)/1e3:i._isString(n)||(n=n.toString()),r.push(n);return r},_getImage:function(e,t){var n,r;if(e)if(this._isElement(e))t(e);else if(this._isString(e))(n=new Konva.window.Image).onload=function(){t(n)},n.src=e;else if(e.data){(r=Konva.Util.createCanvasElement()).width=e.width,r.height=e.height,r.getContext("2d").putImageData(e,0,0),this._getImage(r.toDataURL(),t)}else t(null);else t(null)},_getRGBAString:function(e){return["rgba(",e.red||0,",",e.green||0,",",e.blue||0,",",e.alpha||1,")"].join("")},_rgbToHex:function(e,t,n){return((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)},_hexToRgb:function(e){e=e.replace("#","");var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},getRandomColor:function(){for(var e=(16777215*Math.random()<<0).toString(16);e.length<6;)e="0"+e;return"#"+e},get:function(e,t){return void 0===e?t:e},getRGB:function(e){var t;return e in r?{r:(t=r[e])[0],g:t[1],b:t[2]}:"#"===e[0]?this._hexToRgb(e.substring(1)):"rgb("===e.substr(0,4)?(t=o.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(e){return e=e||"black",Konva.Util._namedColorToRBA(e)||Konva.Util._hex3ColorToRGBA(e)||Konva.Util._hex6ColorToRGBA(e)||Konva.Util._rgbColorToRGBA(e)||Konva.Util._rgbaColorToRGBA(e)},_namedColorToRBA:function(e){var t=r[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA:function(e){if(0===e.indexOf("rgb(")){var t=(e=e.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA:function(e){if(0===e.indexOf("rgba(")){var t=(e=e.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex6ColorToRGBA:function(e){if("#"===e[0]&&7===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(e){if("#"===e[0]&&4===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_merge:function(e,t){var n=this._clone(t);for(var r in e)this._isObject(e[r])?n[r]=this._merge(e[r],n[r]):n[r]=e[r];return n},cloneObject:function(e){var t={};for(var n in e)this._isObject(e[n])?t[n]=this.cloneObject(e[n]):this._isArray(e[n])?t[n]=this.cloneArray(e[n]):t[n]=e[n];return t},cloneArray:function(e){return e.slice(0)},_degToRad:function(t){return t*e},_radToDeg:function(e){return e*n},_capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},throw:function(e){throw new Error("Konva error: "+e)},error:function(e){console.error("Konva error: "+e)},warn:function(e){Konva.global.console&&console.warn&&Konva.showWarnings&&console.warn("Konva warning: "+e)},extend:function(e,t){function n(){this.constructor=e}n.prototype=t.prototype;var r=e.prototype;for(var o in e.prototype=new n,r)r.hasOwnProperty(o)&&(e.prototype[o]=r[o]);e.__super__=t.prototype,e.super=t},addMethods:function(e,t){var n;for(n in t)e.prototype[n]=t[n]},_getControlPoints:function(e,t,n,r,o,i,a){var s=Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2)),u=Math.sqrt(Math.pow(o-n,2)+Math.pow(i-r,2)),c=a*s/(s+u),l=a*u/(s+u);return[n-c*(o-e),r-c*(i-t),n+l*(o-e),r+l*(i-t)]},_expandPoints:function(e,t){var n,r,o=e.length,i=[];for(n=2;n<o-2;n+=2)r=Konva.Util._getControlPoints(e[n-2],e[n-1],e[n],e[n+1],e[n+2],e[n+3],t),i.push(r[0]),i.push(r[1]),i.push(e[n]),i.push(e[n+1]),i.push(r[2]),i.push(r[3]);return i},_removeLastLetter:function(e){return e.substring(0,e.length-1)},each:function(e,t){for(var n in e)t(n,e[n])},_getProjectionToSegment:function(e,t,n,r,o,i){var a,s,u,c=(e-n)*(e-n)+(t-r)*(t-r);if(0==c)a=e,s=t,u=(o-n)*(o-n)+(i-r)*(i-r);else{var l=((o-e)*(n-e)+(i-t)*(r-t))/c;l<0?(a=e,s=t,u=(e-o)*(e-o)+(t-i)*(t-i)):l>1?(a=n,s=r,u=(n-o)*(n-o)+(r-i)*(r-i)):u=((a=e+l*(n-e))-o)*(a-o)+((s=t+l*(r-t))-i)*(s-i)}return[a,s,u]},_getProjectionToLine:function(e,t,n){var r=Konva.Util.cloneObject(e),o=Number.MAX_VALUE;return t.forEach(function(i,a){if(n||a!==t.length-1){var s=t[(a+1)%t.length],u=Konva.Util._getProjectionToSegment(i.x,i.y,s.x,s.y,e.x,e.y),c=u[0],l=u[1],f=u[2];f<o&&(r.x=c,r.y=l,o=f)}}),r},_prepareArrayForTween:function(e,t,n){var r,o=[],i=[];if(e.length>t.length){var a=t;t=e,e=a}for(r=0;r<e.length;r+=2)o.push({x:e[r],y:e[r+1]});for(r=0;r<t.length;r+=2)i.push({x:t[r],y:t[r+1]});var s=[];return i.forEach(function(e){var t=Konva.Util._getProjectionToLine(e,o,n);s.push(t.x),s.push(t.y)}),s},_prepareToStringify:function(e){var t;for(var n in e.visitedByCircularReferenceRemoval=!0,e)if(e.hasOwnProperty(n)&&e[n]&&"object"==typeof e[n])if(t=Object.getOwnPropertyDescriptor(e,n),e[n].visitedByCircularReferenceRemoval||Konva.Util._isElement(e[n])){if(!t.configurable)return null;delete e[n]}else if(null===Konva.Util._prepareToStringify(e[n])){if(!t.configurable)return null;delete e[n]}return delete e.visitedByCircularReferenceRemoval,e}}}()},function(e,t){!function(){"use strict";var e=Konva.Util.createCanvasElement().getContext("2d"),t=(Konva.window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1);Konva.Canvas=function(e){this.init(e)},Konva.Canvas.prototype={init:function(e){var n=(e||{}).pixelRatio||Konva.pixelRatio||t;this.pixelRatio=n,this._canvas=Konva.Util.createCanvasElement(),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(e){var t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)},setWidth:function(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)},setHeight:function(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(e,t){this.setWidth(e),this.setHeight(t)},toDataURL:function(e,t){try{return this._canvas.toDataURL(e,t)}catch(e){try{return this._canvas.toDataURL()}catch(e){return Konva.Util.warn("Unable to get data URL. "+e.message),""}}}},Konva.SceneCanvas=function(e){var t=e||{},n=t.width||0,r=t.height||0;Konva.Canvas.call(this,t),this.context=new Konva.SceneContext(this),this.setSize(n,r)},Konva.Util.extend(Konva.SceneCanvas,Konva.Canvas),Konva.HitCanvas=function(e){var t=e||{},n=t.width||0,r=t.height||0;Konva.Canvas.call(this,t),this.context=new Konva.HitContext(this),this.setSize(n,r),this.hitCanvas=!0},Konva.Util.extend(Konva.HitCanvas,Konva.Canvas)}()},function(e,t){!function(){"use strict";var e=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Konva.Context=function(e){this.init(e)},Konva.Context.prototype={init:function(e){this.canvas=e,this._context=e._canvas.getContext("2d"),Konva.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(e){e.getFillEnabled()&&this._fill(e)},strokeShape:function(e){e.getStrokeEnabled()&&this._stroke(e)},fillStrokeShape:function(e){e.getFillEnabled()&&this._fill(e),e.getStrokeEnabled()&&this._stroke(e)},getTrace:function(e){var t,n,r,o,i=this.traceArr,a=i.length,s="";for(t=0;t<a;t++)(r=(n=i[t]).method)?(o=n.args,s+=r,e?s+="()":Konva.Util._isArray(o[0])?s+="(["+o.join(",")+"])":s+="("+o.join(",")+")"):(s+=n.property,e||(s+="="+n.val)),s+=";";return s},clearTrace:function(){this.traceArr=[]},_trace:function(e){var t=this.traceArr;t.push(e),t.length>=Konva.traceArrMax&&t.shift()},reset:function(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)},getCanvas:function(){return this.canvas},clear:function(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)},_applyLineCap:function(e){var t=e.getLineCap();t&&this.setAttr("lineCap",t)},_applyOpacity:function(e){var t=e.getAbsoluteOpacity();1!==t&&this.setAttr("globalAlpha",t)},_applyLineJoin:function(e){var t=e.getLineJoin();t&&this.setAttr("lineJoin",t)},setAttr:function(e,t){this._context[e]=t},arc:function(){var e=arguments;this._context.arc(e[0],e[1],e[2],e[3],e[4],e[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var e=arguments;this._context.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])},clearRect:function(){var e=arguments;this._context.clearRect(e[0],e[1],e[2],e[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var e=arguments;return 2===e.length?this._context.createImageData(e[0],e[1]):1===e.length?this._context.createImageData(e[0]):void 0},createLinearGradient:function(){var e=arguments;return this._context.createLinearGradient(e[0],e[1],e[2],e[3])},createPattern:function(){var e=arguments;return this._context.createPattern(e[0],e[1])},createRadialGradient:function(){var e=arguments;return this._context.createRadialGradient(e[0],e[1],e[2],e[3],e[4],e[5])},drawImage:function(){var e=arguments,t=this._context;3===e.length?t.drawImage(e[0],e[1],e[2]):5===e.length?t.drawImage(e[0],e[1],e[2],e[3],e[4]):9===e.length&&t.drawImage(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},isPointInPath:function(e,t){return this._context.isPointInPath(e,t)},fill:function(){this._context.fill()},fillRect:function(e,t,n,r){this._context.fillRect(e,t,n,r)},strokeRect:function(e,t,n,r){this._context.strokeRect(e,t,n,r)},fillText:function(){var e=arguments;this._context.fillText(e[0],e[1],e[2])},measureText:function(e){return this._context.measureText(e)},getImageData:function(){var e=arguments;return this._context.getImageData(e[0],e[1],e[2],e[3])},lineTo:function(){var e=arguments;this._context.lineTo(e[0],e[1])},moveTo:function(){var e=arguments;this._context.moveTo(e[0],e[1])},rect:function(){var e=arguments;this._context.rect(e[0],e[1],e[2],e[3])},putImageData:function(){var e=arguments;this._context.putImageData(e[0],e[1],e[2])},quadraticCurveTo:function(){var e=arguments;this._context.quadraticCurveTo(e[0],e[1],e[2],e[3])},restore:function(){this._context.restore()},rotate:function(){var e=arguments;this._context.rotate(e[0])},save:function(){this._context.save()},scale:function(){var e=arguments;this._context.scale(e[0],e[1])},setLineDash:function(){var e=arguments,t=this._context;this._context.setLineDash?t.setLineDash(e[0]):"mozDash"in t?t.mozDash=e[0]:"webkitLineDash"in t&&(t.webkitLineDash=e[0])},getLineDash:function(){return this._context.getLineDash()},setTransform:function(){var e=arguments;this._context.setTransform(e[0],e[1],e[2],e[3],e[4],e[5])},stroke:function(){this._context.stroke()},strokeText:function(){var e=arguments;this._context.strokeText(e[0],e[1],e[2])},transform:function(){var e=arguments;this._context.transform(e[0],e[1],e[2],e[3],e[4],e[5])},translate:function(){var e=arguments;this._context.translate(e[0],e[1])},_enableTrace:function(){var t,n,r=this,o=e.length,i=Konva.Util._simplifyArray,a=this.setAttr;for(t=0;t<o;t++)!function(e){var t,o=r[e];r[e]=function(){return n=i(Array.prototype.slice.call(arguments,0)),t=o.apply(r,arguments),r._trace({method:e,args:n}),t}}(e[t]);r.setAttr=function(){a.apply(r,arguments);var e=arguments[0],t=arguments[1];"shadowOffsetX"!==e&&"shadowOffsetY"!==e&&"shadowBlur"!==e||(t/=this.canvas.getPixelRatio()),r._trace({property:e,val:t})}}},["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation"].forEach(function(e){Object.defineProperty(Konva.Context.prototype,e,{get:function(){return this._context[e]},set:function(t){this._context[e]=t}})}),Konva.SceneContext=function(e){Konva.Context.call(this,e)},Konva.SceneContext.prototype={_fillColor:function(e){var t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)},_fillPattern:function(e){var t=e.getFillPatternX(),n=e.getFillPatternY(),r=e.getFillPatternScale(),o=Konva.getAngle(e.getFillPatternRotation()),i=e.getFillPatternOffset();(t||n)&&this.translate(t||0,n||0),o&&this.rotate(o),r&&this.scale(r.x,r.y),i&&this.translate(-1*i.x,-1*i.y),this.setAttr("fillStyle",this.createPattern(e.getFillPatternImage(),e.getFillPatternRepeat()||"repeat")),this.fill()},_fillLinearGradient:function(e){var t=e.getFillLinearGradientStartPoint(),n=e.getFillLinearGradientEndPoint(),r=e.getFillLinearGradientColorStops(),o=this.createLinearGradient(t.x,t.y,n.x,n.y);if(r){for(var i=0;i<r.length;i+=2)o.addColorStop(r[i],r[i+1]);this.setAttr("fillStyle",o),e._fillFunc(this)}},_fillRadialGradient:function(e){for(var t=e.getFillRadialGradientStartPoint(),n=e.getFillRadialGradientEndPoint(),r=e.getFillRadialGradientStartRadius(),o=e.getFillRadialGradientEndRadius(),i=e.getFillRadialGradientColorStops(),a=this.createRadialGradient(t.x,t.y,r,n.x,n.y,o),s=0;s<i.length;s+=2)a.addColorStop(i[s],i[s+1]);this.setAttr("fillStyle",a),this.fill()},_fill:function(e){var t=e.fill(),n=e.getFillPatternImage(),r=e.getFillLinearGradientColorStops(),o=e.getFillRadialGradientColorStops(),i=e.getFillPriority();t&&"color"===i?this._fillColor(e):n&&"pattern"===i?this._fillPattern(e):r&&"linear-gradient"===i?this._fillLinearGradient(e):o&&"radial-gradient"===i?this._fillRadialGradient(e):t?this._fillColor(e):n?this._fillPattern(e):r?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)},_stroke:function(e){var t=e.dash(),n=e.getStrokeScaleEnabled()||e instanceof Konva.Text;e.hasStroke()&&(n||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),this.setAttr("strokeStyle",e.stroke()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e._strokeFunc(this),n||this.restore())},_applyShadow:function(e){var t=Konva.Util,n=t.get(e.getShadowRGBA(),"black"),r=t.get(e.getShadowBlur(),5),o=t.get(e.getShadowOffset(),{x:0,y:0}),i=e.getAbsoluteScale(),a=this.canvas.getPixelRatio(),s=i.x*a,u=i.y*a;this.setAttr("shadowColor",n),this.setAttr("shadowBlur",r*a*Math.min(Math.abs(s),Math.abs(u))),this.setAttr("shadowOffsetX",o.x*s),this.setAttr("shadowOffsetY",o.y*u)},_applyGlobalCompositeOperation:function(e){var t=e.getGlobalCompositeOperation();"source-over"!==t&&this.setAttr("globalCompositeOperation",t)}},Konva.Util.extend(Konva.SceneContext,Konva.Context),Konva.HitContext=function(e){Konva.Context.call(this,e)},Konva.HitContext.prototype={_fill:function(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()},_stroke:function(e){if(e.hasStroke()&&e.strokeHitEnabled()){var t=e.getStrokeScaleEnabled()||e instanceof Konva.Text;t||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(e),this.setAttr("lineWidth",e.strokeWidth()),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),t||this.restore()}}},Konva.Util.extend(Konva.HitContext,Konva.Context)}()},function(e,t){!function(){"use strict";Konva.Factory={addGetterSetter:function(e,t,n,r,o){this.addGetter(e,t,n),this.addSetter(e,t,r,o),this.addOverloadedGetterSetter(e,t)},addGetter:function(e,t,n){var r="get"+Konva.Util._capitalize(t);e.prototype[r]=function(){var e=this.attrs[t];return void 0===e?n:e}},addSetter:function(e,t,n,r){var o="set"+Konva.Util._capitalize(t);e.prototype[o]=function(e){return n&&(e=n.call(this,e)),this._setAttr(t,e),r&&r.call(this),this}},addComponentsGetterSetter:function(e,t,n,r,o){var i,a,s=n.length,u=Konva.Util._capitalize,c="get"+u(t),l="set"+u(t);e.prototype[c]=function(){var e={};for(i=0;i<s;i++)e[a=n[i]]=this.getAttr(t+u(a));return e},e.prototype[l]=function(e){var n,i=this.attrs[t];for(n in r&&(e=r.call(this,e)),e)e.hasOwnProperty(n)&&this._setAttr(t+u(n),e[n]);return this._fireChangeEvent(t,i,e),o&&o.call(this),this},this.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter:function(e,t){var n=Konva.Util._capitalize(t),r="set"+n,o="get"+n;e.prototype[t]=function(){return arguments.length?(this[r](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter:function(e,t,n,r){var o="get"+Konva.Util._capitalize(t),i=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[o]=function(){Konva.Util.error(i);var e=this.attrs[t];return void 0===e?n:e},this.addSetter(e,t,r,function(){Konva.Util.error(i)}),this.addOverloadedGetterSetter(e,t)},backCompat:function(e,t){Konva.Util.each(t,function(t,n){var r=e.prototype[n];e.prototype[t]=function(){r.apply(this,arguments),Konva.Util.error(t+" method is deprecated and will be removed soon. Use "+n+" instead")}})},afterSetFilter:function(){this._filterUpToDate=!1}},Konva.Validators={RGBComponent:function(e){return e>255?255:e<0?0:Math.round(e)},alphaComponent:function(e){return e>1?1:e<1e-4?1e-4:e}}}()},function(e,t){!function(e){"use strict";var t="Shape",n=["id"],r=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(" "),o=["scaleXChange.konva","scaleYChange.konva"].join(" ");e.Node=function(e){this._init(e)},e.Util.addMethods(e.Node,{_init:function(t){var n=this;this._id=e.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this._isUnderCache=!1,this.setAttrs(t),this.on(r,function(){this._clearCache("transform"),n._clearSelfAndDescendantCache("absoluteTransform")}),this.on(o,function(){n._clearSelfAndDescendantCache("absoluteScale")}),this.on("visibleChange.konva",function(){n._clearSelfAndDescendantCache("visible")}),this.on("listeningChange.konva",function(){n._clearSelfAndDescendantCache("listening")}),this.on("opacityChange.konva",function(){n._clearSelfAndDescendantCache("absoluteOpacity")})},_clearCache:function(e){e?delete this._cache[e]:this._cache={}},_getCache:function(e,t){return void 0===this._cache[e]&&(this._cache[e]=t.call(this)),this._cache[e]},_clearSelfAndDescendantCache:function(e){this._clearCache(e),this.children&&this.getChildren().each(function(t){t._clearSelfAndDescendantCache(e)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(t){var n=t||{},r=this.getClientRect(!0),o=n.width||r.width,i=n.height||r.height,a=n.pixelRatio,s=n.x||r.x,u=n.y||r.y,c=n.offset||0,l=n.drawBorder||!1;if(!o||!i)throw new Error("Width or height of caching configuration equals 0.");o+=2*c,i+=2*c,s-=c,u-=c;var f=new e.SceneCanvas({pixelRatio:a,width:o,height:i}),d=new e.SceneCanvas({pixelRatio:a,width:o,height:i}),h=new e.HitCanvas({pixelRatio:1,width:o,height:i}),p=f.getContext(),g=h.getContext();return h.isCache=!0,this.clearCache(),p.save(),g.save(),p.translate(-s,-u),g.translate(-s,-u),this._isUnderCache=!0,this._clearSelfAndDescendantCache("absoluteOpacity"),this._clearSelfAndDescendantCache("absoluteScale"),this.drawScene(f,this,!0),this.drawHit(h,this,!0),this._isUnderCache=!1,p.restore(),g.restore(),l&&(p.save(),p.beginPath(),p.rect(0,0,o,i),p.closePath(),p.setAttr("strokeStyle","red"),p.setAttr("lineWidth",5),p.stroke(),p.restore()),this._cache.canvas={scene:f,filter:d,hit:h,x:s,y:u},this},getClientRect:function(){throw new Error('abstract "getClientRect" method call')},_transformedRect:function(e){var t,n,r,o,i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],a=this.getTransform();return i.forEach(function(e){var i=a.point(e);void 0===t&&(t=r=i.x,n=o=i.y),t=Math.min(t,i.x),n=Math.min(n,i.y),r=Math.max(r,i.x),o=Math.max(o,i.y)}),{x:t,y:n,width:r-t,height:o-n}},_drawCachedSceneCanvas:function(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this),e.translate(this._cache.canvas.x,this._cache.canvas.y);var t=this._getCachedSceneCanvas(),n=t.pixelRatio;e.drawImage(t._canvas,0,0,t.width/n,t.height/n),e.restore()},_drawCachedHitCanvas:function(e){var t=this._cache.canvas.hit;e.save(),e.translate(this._cache.canvas.x,this._cache.canvas.y),e.drawImage(t._canvas,0,0),e.restore()},_getCachedSceneCanvas:function(){var t,n,r,o,i=this.filters(),a=this._cache.canvas,s=a.scene,u=a.filter,c=u.getContext();if(i){if(!this._filterUpToDate){var l=s.pixelRatio;try{for(t=i.length,c.clear(),c.drawImage(s._canvas,0,0,s.getWidth()/l,s.getHeight()/l),n=c.getImageData(0,0,u.getWidth(),u.getHeight()),r=0;r<t;r++)"function"==typeof(o=i[r])?(o.call(this,n),c.putImageData(n,0,0)):e.Util.error("Filter should be type of function, but got "+typeof o+" insted. Please check correct filters")}catch(t){e.Util.error("Unable to apply filter. "+t.message)}this._filterUpToDate=!0}return u}return s},on:function(e,t){if(3===arguments.length)return this._delegate.apply(this,arguments);var n,r,o,i,a=e.split(" "),s=a.length;for(n=0;n<s;n++)o=(r=a[n].split("."))[0],i=r[1]||"",this.eventListeners[o]||(this.eventListeners[o]=[]),this.eventListeners[o].push({name:i,handler:t});return this},off:function(e){var t,n,r,o,i,a=(e||"").split(" "),s=a.length;if(!e)for(n in this.eventListeners)this._off(n);for(t=0;t<s;t++)if(o=(r=a[t].split("."))[0],i=r[1],o)this.eventListeners[o]&&this._off(o,i);else for(n in this.eventListeners)this._off(n,i);return this},dispatchEvent:function(e){var t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this},addEventListener:function(e,t){return this.on(e,function(e){t.call(this,e.evt)}),this},removeEventListener:function(e){return this.off(e),this},_delegate:function(t,n,r){var o=this;this.on(t,function(t){for(var i=t.target.findAncestors(n,!0,o),a=0;a<i.length;a++)(t=e.Util.cloneObject(t)).currentTarget=i[a],r.call(i[a],t)})},remove:function(){var e=this.getParent();return e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache("absoluteTransform"),this._clearSelfAndDescendantCache("visible"),this._clearSelfAndDescendantCache("listening"),this._clearSelfAndDescendantCache("absoluteOpacity"),this},destroy:function(){e._removeId(this.getId());for(var t=(this.getName()||"").split(/\s/g),n=0;n<t.length;n++){var r=t[n];e._removeName(r,this._id)}return this.remove(),this},getAttr:function(t){var n="get"+e.Util._capitalize(t);return e.Util._isFunction(this[n])?this[n]():this.attrs[t]},getAncestors:function(){for(var t=this.getParent(),n=new e.Collection;t;)n.push(t),t=t.getParent();return n},getAttrs:function(){return this.attrs||{}},setAttrs:function(t){var n,r;if(!t)return this;for(n in t)"children"!==n&&(r="set"+e.Util._capitalize(n),e.Util._isFunction(this[r])?this[r](t[n]):this._setAttr(n,t[n]));return this},isListening:function(){return this._getCache("listening",this._isListening)},_isListening:function(){var e=this.getListening(),t=this.getParent();return"inherit"===e?!t||t.isListening():e},isVisible:function(){return this._getCache("visible",this._isVisible)},_isVisible:function(){var e=this.getVisible(),t=this.getParent();return"inherit"===e?!t||t.isVisible():e},shouldDrawHit:function(e){var t=this.getLayer();return e&&e.isCache||t&&t.hitGraphEnabled()&&this.isListening()&&this.isVisible()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){var e,n,r,o,i=this.getDepth(),a=this,s=0;return"Stage"!==a.nodeType&&function u(c){for(e=[],n=c.length,r=0;r<n;r++)o=c[r],s++,o.nodeType!==t&&(e=e.concat(o.getChildren().toArray())),o._id===a._id&&(r=n);e.length>0&&e[0].getDepth()<=i&&u(e)}(a.getStage().getChildren()),s},getDepth:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},setPosition:function(e){return this.setX(e.x),this.setY(e.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(t){var n=this.getAbsoluteTransform(t).getMatrix(),r=new e.Transform,o=this.offset();return r.m=n.slice(),r.translate(o.x,o.y),r.getTranslation()},setAbsolutePosition:function(e){var t,n=this._clearTransform();return this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,(t=this.getAbsoluteTransform()).invert(),t.translate(e.x,e.y),e={x:this.attrs.x+t.getTranslation().x,y:this.attrs.y+t.getTranslation().y},this.setPosition({x:e.x,y:e.y}),this._setTransform(n),this},_setTransform:function(e){var t;for(t in e)this.attrs[t]=e[t];this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},_clearTransform:function(){var e={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform"),e},move:function(e){var t=e.x,n=e.y,r=this.getX(),o=this.getY();return void 0!==t&&(r+=t),void 0!==n&&(o+=n),this.setPosition({x:r,y:o}),this},_eachAncestorReverse:function(e,t){var n,r,o=[],i=this.getParent();if(t&&t._id===this._id)return e(this),!0;for(o.unshift(this);i&&(!t||i._id!==t._id);)o.unshift(i),i=i.parent;for(n=o.length,r=0;r<n;r++)e(o[r])},rotate:function(e){return this.setRotation(this.getRotation()+e),this},moveToTop:function(){if(!this.parent)return e.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){if(!this.parent)return e.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)},moveDown:function(){if(!this.parent)return e.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)},moveToBottom:function(){if(!this.parent)return e.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)},setZIndex:function(t){if(!this.parent)return e.Util.warn("Node has no parent. zIndex parameter is ignored."),!1;var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache("absoluteOpacity",this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var e=this.getOpacity(),t=this.getParent();return t&&!t._isUnderCache&&(e*=this.getParent().getAbsoluteOpacity()),e},moveTo:function(e){return this.getParent()!==e&&((this.__originalRemove||this.remove).call(this),e.add(this)),this},toObject:function(){var t,n,r,o,i={},a=this.getAttrs();for(t in i.attrs={},a)n=a[t],r=this[t],delete a[t],o=r?r.call(this):null,a[t]=n,o!==n&&(i.attrs[t]=n);return i.className=this.getClassName(),e.Util._prepareToStringify(i)},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},findAncestors:function(e,t,n){var r=[];t&&this._isMatch(e)&&r.push(this);for(var o=this.parent;o;){if(o===n)return r;o._isMatch(e)&&r.push(o),o=o.parent}return r},findAncestor:function(e,t,n){return this.findAncestors(e,t,n)[0]},_isMatch:function(t){if(!t)return!1;var n,r,o=t.replace(/ /g,"").split(","),i=o.length;for(n=0;n<i;n++)if(r=o[n],e.Util.isValidSelector(r)||(e.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),e.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),e.Util.warn("Konva is awesome, right?")),"#"===r.charAt(0)){if(this.id()===r.slice(1))return!0}else if("."===r.charAt(0)){if(this.hasName(r.slice(1)))return!0}else if(0!==this._get(r).length)return!0;return!1},getLayer:function(){var e=this.getParent();return e?e.getLayer():null},getStage:function(){return this._getCache("stage",this._getStage)},_getStage:function(){var e=this.getParent();return e?e.getStage():void 0},fire:function(e,t,n){return(t=t||{}).target=t.target||this,n?this._fireAndBubble(e,t):this._fire(e,t),this},getAbsoluteTransform:function(e){return e?this._getAbsoluteTransform(e):this._getCache("absoluteTransform",this._getAbsoluteTransform)},_getAbsoluteTransform:function(t){var n,r,o=new e.Transform;return this._eachAncestorReverse(function(e){n=e.transformsEnabled(),r=e.getTransform(),"all"===n?o.multiply(r):"position"===n&&o.translate(e.x(),e.y())},t),o},getAbsoluteScale:function(e){return e?this._getAbsoluteScale(e):this._getCache("absoluteScale",this._getAbsoluteScale)},_getAbsoluteScale:function(e){for(var t=this;t;)t._isUnderCache&&(e=t),t=t.getParent();var n=1,r=1;return this._eachAncestorReverse(function(e){n*=e.scaleX(),r*=e.scaleY()},e),{x:n,y:r}},getTransform:function(){return this._getCache("transform",this._getTransform)},_getTransform:function(){var t=new e.Transform,n=this.getX(),r=this.getY(),o=e.getAngle(this.getRotation()),i=this.getScaleX(),a=this.getScaleY(),s=this.getSkewX(),u=this.getSkewY(),c=this.getOffsetX(),l=this.getOffsetY();return 0===n&&0===r||t.translate(n,r),0!==o&&t.rotate(o),0===s&&0===u||t.skew(s,u),1===i&&1===a||t.scale(i,a),0===c&&0===l||t.translate(-1*c,-1*l),t},clone:function(t){var r,o,i,a,s,u=e.Util.cloneObject(this.attrs);for(var c in n)delete u[n[c]];for(r in t)u[r]=t[r];var l=new this.constructor(u);for(r in this.eventListeners)for(i=(o=this.eventListeners[r]).length,a=0;a<i;a++)(s=o[a]).name.indexOf("konva")<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(s));return l},_toKonvaCanvas:function(t){t=t||{};var n=this.getStage(),r=t.x||0,o=t.y||0,i=t.pixelRatio||1,a=new e.SceneCanvas({width:t.width||this.getWidth()||(n?n.getWidth():0),height:t.height||this.getHeight()||(n?n.getHeight():0),pixelRatio:i}),s=a.getContext();return s.save(),(r||o)&&s.translate(-1*r,-1*o),this.drawScene(a),s.restore(),a},toCanvas:function(e){return this._toKonvaCanvas(e)._canvas},toDataURL:function(e){var t=(e=e||{}).mimeType||null,n=e.quality||null;return this._toKonvaCanvas(e).toDataURL(t,n)},toImage:function(t){if(!t||!t.callback)throw"callback required for toImage method config argument";e.Util._getImage(this.toDataURL(t),function(e){t.callback(e)})},setSize:function(e){return this.setWidth(e.width),this.setHeight(e.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():e.dragDistance},_get:function(e){return this.className===e||this.nodeType===e?[this]:[]},_off:function(e,t){var n,r,o=this.eventListeners[e];for(n=0;n<o.length;n++)if(!("konva"===(r=o[n].name)&&"konva"!==t||t&&r!==t)){if(o.splice(n,1),0===o.length){delete this.eventListeners[e];break}n--}},_fireChangeEvent:function(e,t,n){this._fire(e+"Change",{oldVal:t,newVal:n})},setId:function(t){var n=this.getId();return e._removeId(n),e._addId(this,t),this._setAttr("id",t),this},setName:function(t){var n,r,o=(this.getName()||"").split(/\s/g),i=(t||"").split(/\s/g);for(r=0;r<o.length;r++)n=o[r],-1===i.indexOf(n)&&n&&e._removeName(n,this._id);for(r=0;r<i.length;r++)n=i[r],-1===o.indexOf(n)&&n&&e._addName(this,n);return this._setAttr("name",t),this},addName:function(e){if(!this.hasName(e)){var t=this.name(),n=t?t+" "+e:e;this.setName(n)}return this},hasName:function(e){return-1!==(this.name()||"").split(/\s/g).indexOf(e)},removeName:function(e){var t=(this.name()||"").split(/\s/g),n=t.indexOf(e);return-1!==n&&(t.splice(n,1),this.setName(t.join(" "))),this},setAttr:function(t,n){var r=this["set"+e.Util._capitalize(t)];return e.Util._isFunction(r)?r.call(this,n):this._setAttr(t,n),this},_setAttr:function(e,t){var n;(n=this.attrs[e])!==t&&(null==t?delete this.attrs[e]:this.attrs[e]=t,this._fireChangeEvent(e,n,t))},_setComponentAttr:function(e,t,n){var r;void 0!==n&&((r=this.attrs[e])||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=n,this._fireChangeEvent(e,r,n))},_fireAndBubble:function(e,n,r){var o=!0;if(n&&this.nodeType===t&&(n.target=this),"mouseenter"===e&&r&&(this._id===r._id||this.isAncestorOf&&this.isAncestorOf(r))?o=!1:"mouseleave"===e&&r&&(this._id===r._id||this.isAncestorOf&&this.isAncestorOf(r))&&(o=!1),o){this._fire(e,n);var i=("mouseenter"===e||"mouseleave"===e)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!i&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r.parent):this._fireAndBubble.call(this.parent,e,n))}},_fire:function(e,t){var n,r=this.eventListeners[e];if((t=t||{}).currentTarget=this,t.type=e,r)for(n=0;n<r.length;n++)r[n].handler.call(this,t)},draw:function(){return this.drawScene(),this.drawHit(),this}}),e.Node.create=function(t,n){return e.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,n)},e.Node._createNode=function(t,n){var r,o,i,a=e.Node.prototype.getClassName.call(t),s=t.children;if(n&&(t.attrs.container=n),r=new e[a](t.attrs),s)for(o=s.length,i=0;i<o;i++)r.add(this._createNode(s[i]));return r},e.Factory.addOverloadedGetterSetter(e.Node,"position"),e.Factory.addGetterSetter(e.Node,"x",0),e.Factory.addGetterSetter(e.Node,"y",0),e.Factory.addGetterSetter(e.Node,"globalCompositeOperation","source-over"),e.Factory.addGetterSetter(e.Node,"opacity",1),e.Factory.addGetter(e.Node,"name"),e.Factory.addOverloadedGetterSetter(e.Node,"name"),e.Factory.addGetter(e.Node,"id"),e.Factory.addOverloadedGetterSetter(e.Node,"id"),e.Factory.addGetterSetter(e.Node,"rotation",0),e.Factory.addComponentsGetterSetter(e.Node,"scale",["x","y"]),e.Factory.addGetterSetter(e.Node,"scaleX",1),e.Factory.addGetterSetter(e.Node,"scaleY",1),e.Factory.addComponentsGetterSetter(e.Node,"skew",["x","y"]),e.Factory.addGetterSetter(e.Node,"skewX",0),e.Factory.addGetterSetter(e.Node,"skewY",0),e.Factory.addComponentsGetterSetter(e.Node,"offset",["x","y"]),e.Factory.addGetterSetter(e.Node,"offsetX",0),e.Factory.addGetterSetter(e.Node,"offsetY",0),e.Factory.addSetter(e.Node,"dragDistance"),e.Factory.addOverloadedGetterSetter(e.Node,"dragDistance"),e.Factory.addSetter(e.Node,"width",0),e.Factory.addOverloadedGetterSetter(e.Node,"width"),e.Factory.addSetter(e.Node,"height",0),e.Factory.addOverloadedGetterSetter(e.Node,"height"),e.Factory.addGetterSetter(e.Node,"listening","inherit"),e.Factory.addGetterSetter(e.Node,"preventDefault",!0),e.Factory.addGetterSetter(e.Node,"filters",void 0,function(e){return this._filterUpToDate=!1,e}),e.Factory.addGetterSetter(e.Node,"visible","inherit"),e.Factory.addGetterSetter(e.Node,"transformsEnabled","all"),e.Factory.addOverloadedGetterSetter(e.Node,"size"),e.Factory.backCompat(e.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),e.Collection.mapMethods(e.Node)}(Konva)},function(e,t){!function(){"use strict";Konva.Container=function(e){this.__init(e)},Konva.Util.addMethods(Konva.Container,{__init:function(e){this.children=new Konva.Collection,Konva.Node.call(this,e)},getChildren:function(e){if(!e)return this.children;var t=new Konva.Collection;return this.children.each(function(n){e(n)&&t.push(n)}),t},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var e,t=Konva.Collection.toCollection(this.children),n=0;n<t.length;n++)delete(e=t[n]).parent,e.index=0,e.remove();return t=null,this.children=new Konva.Collection,this},destroyChildren:function(){for(var e,t=Konva.Collection.toCollection(this.children),n=0;n<t.length;n++)delete(e=t[n]).parent,e.index=0,e.destroy();return t=null,this.children=new Konva.Collection,this},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}if(e.getParent())return e.moveTo(this),this;var n=this.children;return this._validateAdd(e),e.index=n.length,e.parent=this,n.push(e),this._fire("add",{child:e}),Konva.DD&&e.isDragging()&&Konva.DD.anim.setLayers(e.getLayer()),this},destroy:function(){return this.hasChildren()&&this.destroyChildren(),Konva.Node.prototype.destroy.call(this),this},find:function(e){var t,n,r,o,i,a,s,u=[],c=e.replace(/ /g,"").split(","),l=c.length;for(t=0;t<l;t++)if(r=c[t],Konva.Util.isValidSelector(r)||(Konva.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Konva.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Konva.Util.warn("Konva is awesome, right?")),"#"===r.charAt(0))(i=this._getNodeById(r.slice(1)))&&u.push(i);else if("."===r.charAt(0))o=this._getNodesByName(r.slice(1)),u=u.concat(o);else for(s=(a=this.getChildren()).length,n=0;n<s;n++)u=u.concat(a[n]._get(r));return Konva.Collection.toCollection(u)},findOne:function(e){return this.find(e)[0]},_getNodeById:function(e){var t=Konva.ids[e];return void 0!==t&&this.isAncestorOf(t)?t:null},_getNodesByName:function(e){var t=Konva.names[e]||[];return this._getDescendants(t)},_get:function(e){for(var t=Konva.Node.prototype._get.call(this,e),n=this.getChildren(),r=n.length,o=0;o<r;o++)t=t.concat(n[o]._get(e));return t},toObject:function(){var e=Konva.Node.prototype.toObject.call(this);e.children=[];for(var t=this.getChildren(),n=t.length,r=0;r<n;r++){var o=t[r];e.children.push(o.toObject())}return e},_getDescendants:function(e){for(var t=[],n=e.length,r=0;r<n;r++){var o=e[r];this.isAncestorOf(o)&&t.push(o)}return t},isAncestorOf:function(e){for(var t=e.getParent();t;){if(t._id===this._id)return!0;t=t.getParent()}return!1},clone:function(e){var t=Konva.Node.prototype.clone.call(this,e);return this.getChildren().each(function(e){t.add(e.clone())}),t},getAllIntersections:function(e){var t=[];return this.find("Shape").each(function(n){n.isVisible()&&n.intersects(e)&&t.push(n)}),t},_setChildrenIndices:function(){this.children.each(function(e,t){e.index=t})},drawScene:function(e,t,n){var r=this.getLayer(),o=e||r&&r.getCanvas(),i=o&&o.getContext(),a=this._cache.canvas,s=a&&a.scene;return this.isVisible()&&(!n&&s?(i.save(),r._applyTransform(this,i,t),this._drawCachedSceneCanvas(i),i.restore()):this._drawChildren(o,"drawScene",t,!1,n)),this},drawHit:function(e,t,n){var r=this.getLayer(),o=e||r&&r.hitCanvas,i=o&&o.getContext(),a=this._cache.canvas,s=a&&a.hit;return this.shouldDrawHit(o)&&(r&&r.clearHitCache(),!n&&s?(i.save(),r._applyTransform(this,i,t),this._drawCachedHitCanvas(i),i.restore()):this._drawChildren(o,"drawHit",t)),this},_drawChildren:function(e,t,n,r,o){var i,a,s=this.getLayer(),u=e&&e.getContext(),c=this.getClipWidth(),l=this.getClipHeight(),f=this.getClipFunc(),d=c&&l||f;if(d&&s){u.save();var h=this.getAbsoluteTransform(n),p=h.getMatrix();u.transform(p[0],p[1],p[2],p[3],p[4],p[5]),u.beginPath(),f?f.call(this,u,this):(i=this.getClipX(),a=this.getClipY(),u.rect(i,a,c,l)),u.clip(),p=h.copy().invert().getMatrix(),u.transform(p[0],p[1],p[2],p[3],p[4],p[5])}this.children.each(function(i){i[t](e,n,r,o)}),d&&u.restore()},shouldDrawHit:function(e){var t=this.getLayer(),n=Konva.DD&&Konva.isDragging()&&-1!==Konva.DD.anim.getLayers().indexOf(t);return e&&e.isCache||t&&t.hitGraphEnabled()&&this.isVisible()&&!n},getClientRect:function(e){var t,n,r,o,i={x:0,y:0,width:0,height:0};return this.children.each(function(e){if(e.isVisible()){var i=e.getClientRect();void 0===t?(t=i.x,n=i.y,r=i.x+i.width,o=i.y+i.height):(t=Math.min(t,i.x),n=Math.min(n,i.y),r=Math.max(r,i.x+i.width),o=Math.max(o,i.y+i.height))}}),0!==this.children.length&&(i={x:t,y:n,width:r-t,height:o-n}),e?i:this._transformedRect(i)}}),Konva.Util.extend(Konva.Container,Konva.Node),Konva.Container.prototype.get=Konva.Container.prototype.find,Konva.Factory.addComponentsGetterSetter(Konva.Container,"clip",["x","y","width","height"]),Konva.Factory.addGetterSetter(Konva.Container,"clipX"),Konva.Factory.addGetterSetter(Konva.Container,"clipY"),Konva.Factory.addGetterSetter(Konva.Container,"clipWidth"),Konva.Factory.addGetterSetter(Konva.Container,"clipHeight"),Konva.Factory.addGetterSetter(Konva.Container,"clipFunc"),Konva.Collection.mapMethods(Konva.Container)}()},function(e,t){!function(e){"use strict";function t(e){e.fill()}function n(e){e.stroke()}function r(e){e.fill()}function o(e){e.stroke()}function i(){this._clearCache(s)}function a(){this._clearCache(u)}var s="hasShadow",u="shadowRGBA";e.Shape=function(e){this.__init(e)},e.Util.addMethods(e.Shape,{__init:function(s){this.nodeType="Shape",this._fillFunc=t,this._strokeFunc=n,this._fillFuncHit=r,this._strokeFuncHit=o;for(var u,c=e.shapes;!(u=e.Util.getRandomColor())||u in c;);this.colorKey=u,c[u]=this,e.Node.call(this,s),this.on("shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",i),this.on("shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",a)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(s,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},getShadowRGBA:function(){return this._getCache(u,this._getShadowRGBA)},_getShadowRGBA:function(){if(this.hasShadow()){var t=e.Util.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.getShadowOpacity()||1)+")"}},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return this.strokeEnabled()&&!!this.stroke()},intersects:function(e){var t=this.getStage().bufferHitCanvas;return t.getContext().clear(),this.drawHit(t),t.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0},destroy:function(){return e.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],this},_useBufferCanvas:function(e){return!e&&this.perfectDrawEnabled()&&1!==this.getAbsoluteOpacity()&&this.hasFill()&&this.hasStroke()&&this.getStage()||this.perfectDrawEnabled()&&this.hasShadow()&&1!==this.getAbsoluteOpacity()&&this.hasFill()&&this.hasStroke()&&this.getStage()},getSelfRect:function(){var e=this.getSize();return{x:this._centroid?Math.round(-e.width/2):0,y:this._centroid?Math.round(-e.height/2):0,width:e.width,height:e.height}},getClientRect:function(e){var t=this.getSelfRect(),n=this.hasStroke()&&this.strokeWidth()||0,r=t.width+n,o=t.height+n,i=this.hasShadow()?this.shadowOffsetX():0,a=this.hasShadow()?this.shadowOffsetY():0,s=r+Math.abs(i),u=o+Math.abs(a),c=this.hasShadow()&&this.shadowBlur()||0,l=s+2*c,f=u+2*c,d=0;Math.round(n/2)!==n/2&&(d=1);var h={width:l+d,height:f+d,x:-Math.round(n/2+c)+Math.min(i,0)+t.x,y:-Math.round(n/2+c)+Math.min(a,0)+t.y};return e?h:this._transformedRect(h)},drawScene:function(e,t,n,r){var o,i,a=this.getLayer(),s=e||a.getCanvas(),u=s.getContext(),c=this._cache.canvas,l=this.sceneFunc(),f=this.hasShadow(),d=this.hasStroke();if(!this.isVisible())return this;if(c)return u.save(),a._applyTransform(this,u,t),this._drawCachedSceneCanvas(u),u.restore(),this;if(!l)return this;if(u.save(),this._useBufferCanvas(n)&&!r){if((i=(o=this.getStage().bufferCanvas).getContext()).clear(),i.save(),i._applyLineJoin(this),!n)if(a)a._applyTransform(this,i,t);else{var h=this.getAbsoluteTransform(t).getMatrix();u.transform(h[0],h[1],h[2],h[3],h[4],h[5])}l.call(this,i),i.restore();var p=o.pixelRatio;f&&!s.hitCanvas?(u.save(),u._applyShadow(this),u._applyOpacity(this),u._applyGlobalCompositeOperation(this),u.drawImage(o._canvas,0,0,o.width/p,o.height/p),u.restore()):(u._applyOpacity(this),u._applyGlobalCompositeOperation(this),u.drawImage(o._canvas,0,0,o.width/p,o.height/p))}else{if(u._applyLineJoin(this),!n)if(a)a._applyTransform(this,u,t);else{var g=this.getAbsoluteTransform(t).getMatrix();u.transform(g[0],g[1],g[2],g[3],g[4],g[5])}f&&d&&!s.hitCanvas?(u.save(),n||(u._applyOpacity(this),u._applyGlobalCompositeOperation(this)),u._applyShadow(this),l.call(this,u),u.restore(),this.hasFill()&&this.getShadowForStrokeEnabled()&&l.call(this,u)):f&&!s.hitCanvas?(u.save(),n||(u._applyOpacity(this),u._applyGlobalCompositeOperation(this)),u._applyShadow(this),l.call(this,u),u.restore()):(n||(u._applyOpacity(this),u._applyGlobalCompositeOperation(this)),l.call(this,u))}return u.restore(),this},drawHit:function(e,t,n){var r=this.getLayer(),o=e||r.hitCanvas,i=o.getContext(),a=this.hitFunc()||this.sceneFunc(),s=this._cache.canvas,u=s&&s.hit;if(!this.shouldDrawHit(o))return this;if(r&&r.clearHitCache(),u)return i.save(),r._applyTransform(this,i,t),this._drawCachedHitCanvas(i),i.restore(),this;if(!a)return this;if(i.save(),i._applyLineJoin(this),!n)if(r)r._applyTransform(this,i,t);else{var c=this.getAbsoluteTransform(t).getMatrix();i.transform(c[0],c[1],c[2],c[3],c[4],c[5])}return a.call(this,i),i.restore(),this},drawHitFromCache:function(t){var n,r,o,i,a,s=t||0,u=this._cache.canvas,c=this._getCachedSceneCanvas(),l=u.hit,f=l.getContext(),d=l.getWidth(),h=l.getHeight();f.clear(),f.drawImage(c._canvas,0,0,d,h);try{for(o=(r=(n=f.getImageData(0,0,d,h)).data).length,i=e.Util._hexToRgb(this.colorKey),a=0;a<o;a+=4)r[a+3]>s?(r[a]=i.r,r[a+1]=i.g,r[a+2]=i.b,r[a+3]=255):r[a+3]=0;f.putImageData(n,0,0)}catch(t){e.Util.error("Unable to draw hit graph from cached scene canvas. "+t.message)}return this}}),e.Util.extend(e.Shape,e.Node),e.Factory.addGetterSetter(e.Shape,"stroke"),e.Factory.addDeprecatedGetterSetter(e.Shape,"strokeRed",0,e.Validators.RGBComponent),e.Factory.addDeprecatedGetterSetter(e.Shape,"strokeGreen",0,e.Validators.RGBComponent),e.Factory.addDeprecatedGetterSetter(e.Shape,"strokeBlue",0,e.Validators.RGBComponent),e.Factory.addDeprecatedGetterSetter(e.Shape,"strokeAlpha",1,e.Validators.alphaComponent),e.Factory.addGetterSetter(e.Shape,"strokeWidth",2),e.Factory.addGetterSetter(e.Shape,"strokeHitEnabled",!0),e.Factory.addGetterSetter(e.Shape,"perfectDrawEnabled",!0),e.Factory.addGetterSetter(e.Shape,"shadowForStrokeEnabled",!0),e.Factory.addGetterSetter(e.Shape,"lineJoin"),e.Factory.addGetterSetter(e.Shape,"lineCap"),e.Factory.addGetterSetter(e.Shape,"sceneFunc"),e.Factory.addGetterSetter(e.Shape,"hitFunc"),e.Factory.addGetterSetter(e.Shape,"dash"),e.Factory.addGetterSetter(e.Shape,"dashOffset",0),e.Factory.addGetterSetter(e.Shape,"shadowColor"),e.Factory.addDeprecatedGetterSetter(e.Shape,"shadowRed",0,e.Validators.RGBComponent),e.Factory.addDeprecatedGetterSetter(e.Shape,"shadowGreen",0,e.Validators.RGBComponent),e.Factory.addDeprecatedGetterSetter(e.Shape,"shadowBlue",0,e.Validators.RGBComponent),e.Factory.addDeprecatedGetterSetter(e.Shape,"shadowAlpha",1,e.Validators.alphaComponent),e.Factory.addGetterSetter(e.Shape,"shadowBlur"),e.Factory.addGetterSetter(e.Shape,"shadowOpacity"),e.Factory.addComponentsGetterSetter(e.Shape,"shadowOffset",["x","y"]),e.Factory.addGetterSetter(e.Shape,"shadowOffsetX",0),e.Factory.addGetterSetter(e.Shape,"shadowOffsetY",0),e.Factory.addGetterSetter(e.Shape,"fillPatternImage"),e.Factory.addGetterSetter(e.Shape,"fill"),e.Factory.addDeprecatedGetterSetter(e.Shape,"fillRed",0,e.Validators.RGBComponent),e.Factory.addDeprecatedGetterSetter(e.Shape,"fillGreen",0,e.Validators.RGBComponent),e.Factory.addDeprecatedGetterSetter(e.Shape,"fillBlue",0,e.Validators.RGBComponent),e.Factory.addDeprecatedGetterSetter(e.Shape,"fillAlpha",1,e.Validators.alphaComponent),e.Factory.addGetterSetter(e.Shape,"fillPatternX",0),e.Factory.addGetterSetter(e.Shape,"fillPatternY",0),e.Factory.addGetterSetter(e.Shape,"fillLinearGradientColorStops"),e.Factory.addGetterSetter(e.Shape,"fillRadialGradientStartRadius",0),e.Factory.addGetterSetter(e.Shape,"fillRadialGradientEndRadius",0),e.Factory.addGetterSetter(e.Shape,"fillRadialGradientColorStops"),e.Factory.addGetterSetter(e.Shape,"fillPatternRepeat","repeat"),e.Factory.addGetterSetter(e.Shape,"fillEnabled",!0),e.Factory.addGetterSetter(e.Shape,"strokeEnabled",!0),e.Factory.addGetterSetter(e.Shape,"shadowEnabled",!0),e.Factory.addGetterSetter(e.Shape,"dashEnabled",!0),e.Factory.addGetterSetter(e.Shape,"strokeScaleEnabled",!0),e.Factory.addGetterSetter(e.Shape,"fillPriority","color"),e.Factory.addComponentsGetterSetter(e.Shape,"fillPatternOffset",["x","y"]),e.Factory.addGetterSetter(e.Shape,"fillPatternOffsetX",0),e.Factory.addGetterSetter(e.Shape,"fillPatternOffsetY",0),e.Factory.addComponentsGetterSetter(e.Shape,"fillPatternScale",["x","y"]),e.Factory.addGetterSetter(e.Shape,"fillPatternScaleX",1),e.Factory.addGetterSetter(e.Shape,"fillPatternScaleY",1),e.Factory.addComponentsGetterSetter(e.Shape,"fillLinearGradientStartPoint",["x","y"]),e.Factory.addGetterSetter(e.Shape,"fillLinearGradientStartPointX",0),e.Factory.addGetterSetter(e.Shape,"fillLinearGradientStartPointY",0),e.Factory.addComponentsGetterSetter(e.Shape,"fillLinearGradientEndPoint",["x","y"]),e.Factory.addGetterSetter(e.Shape,"fillLinearGradientEndPointX",0),e.Factory.addGetterSetter(e.Shape,"fillLinearGradientEndPointY",0),e.Factory.addComponentsGetterSetter(e.Shape,"fillRadialGradientStartPoint",["x","y"]),e.Factory.addGetterSetter(e.Shape,"fillRadialGradientStartPointX",0),e.Factory.addGetterSetter(e.Shape,"fillRadialGradientStartPointY",0),e.Factory.addComponentsGetterSetter(e.Shape,"fillRadialGradientEndPoint",["x","y"]),e.Factory.addGetterSetter(e.Shape,"fillRadialGradientEndPointX",0),e.Factory.addGetterSetter(e.Shape,"fillRadialGradientEndPointY",0),e.Factory.addGetterSetter(e.Shape,"fillPatternRotation",0),e.Factory.backCompat(e.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),e.Collection.mapMethods(e.Shape)}(Konva)},function(e,t){!function(){"use strict";function e(e,n){e.content.addEventListener(n,function(r){e[t+n](r)},!1)}var t="_",n=["mousedown","mousemove","mouseup","mouseout","touchstart","touchmove","touchend","mouseover","wheel","contextmenu"],r=n.length;Konva.Stage=function(e){this.___init(e)},Konva.Util.addMethods(Konva.Stage,{___init:function(e){this.nodeType="Stage",Konva.Container.call(this,e),this._id=Konva.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Konva.stages.push(this)},_validateAdd:function(e){"Layer"!==e.getType()&&Konva.Util.throw("You may only add layers to the stage.")},setContainer:function(e){if("string"==typeof e){if("."===e.charAt(0)){var t=e.slice(1);e=Konva.document.getElementsByClassName(t)[0]}else{var n;n="#"!==e.charAt(0)?e:e.slice(1),e=Konva.document.getElementById(n)}if(!e)throw"Can not find container in document with id "+n}return this._setAttr("container",e),this},shouldDrawHit:function(){return!0},draw:function(){return Konva.Node.prototype.draw.call(this),this},setHeight:function(e){return Konva.Node.prototype.setHeight.call(this,e),this._resizeDOM(),this},setWidth:function(e){return Konva.Node.prototype.setWidth.call(this,e),this._resizeDOM(),this},clear:function(){var e,t=this.children,n=t.length;for(e=0;e<n;e++)t[e].clear();return this},clone:function(e){return e||(e={}),e.container=Konva.document.createElement("div"),Konva.Container.prototype.clone.call(this,e)},destroy:function(){var e=this.content;Konva.Container.prototype.destroy.call(this),e&&Konva.Util._isInDocument(e)&&this.getContainer().removeChild(e);var t=Konva.stages.indexOf(this);return t>-1&&Konva.stages.splice(t,1),this},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(e){var t=(e=e||{}).mimeType||null,n=e.quality||null,r=e.x||0,o=e.y||0,i=new Konva.SceneCanvas({width:e.width||this.getWidth(),height:e.height||this.getHeight(),pixelRatio:e.pixelRatio}),a=i.getContext()._context,s=this.children;(r||o)&&a.translate(-1*r,-1*o),s.each(function(e){var t=e.getCanvas().getWidth(),n=e.getCanvas().getHeight(),r=e.getCanvas().getPixelRatio();a.drawImage(e.getCanvas()._canvas,0,0,t/r,n/r)});var u=i.toDataURL(t,n);return e.callback&&e.callback(u),u},toImage:function(e){var t=e.callback;e.callback=function(e){Konva.Util._getImage(e,function(e){t(e)})},this.toDataURL(e)},getIntersection:function(e,t){var n,r,o=this.getChildren();for(n=o.length-1;n>=0;n--)if(r=o[n].getIntersection(e,t))return r;return null},_resizeDOM:function(){if(this.content){var e,t,n=this.getWidth(),r=this.getHeight(),o=this.getChildren(),i=o.length;for(this.content.style.width=n+"px",this.content.style.height=r+"px",this.bufferCanvas.setSize(n,r),this.bufferHitCanvas.setSize(n,r),e=0;e<i;e++)(t=o[e]).setSize(n,r),t.batchDraw()}},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return Konva.Container.prototype.add.call(this,e),e._setCanvasSize(this.width(),this.height()),e.draw(),this.content.appendChild(e.canvas._canvas),this},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var t=0;t<r;t++)e(this,n[t])},_mouseover:function(e){Konva.UA.mobile||(this._setPointerPosition(e),this._fire("contentMouseover",{evt:e}))},_mouseout:function(e){if(!Konva.UA.mobile){this._setPointerPosition(e);var t=this.targetShape;t&&!Konva.isDragging()&&(t._fireAndBubble("mouseout",{evt:e}),t._fireAndBubble("mouseleave",{evt:e}),this.targetShape=null),this.pointerPos=void 0,this._fire("contentMouseout",{evt:e})}},_mousemove:function(e){return Konva.UA.ieMobile?this._touchmove(e):void 0===e.movementX&&void 0===e.movementY||0!==e.movementY||0!==e.movementX?Konva.UA.mobile?null:(this._setPointerPosition(e),Konva.isDragging()||((t=this.getIntersection(this.getPointerPosition()))&&t.isListening()?Konva.isDragging()||this.targetShape&&this.targetShape._id===t._id?t._fireAndBubble("mousemove",{evt:e}):(this.targetShape&&(this.targetShape._fireAndBubble("mouseout",{evt:e},t),this.targetShape._fireAndBubble("mouseleave",{evt:e},t)),t._fireAndBubble("mouseover",{evt:e},this.targetShape),t._fireAndBubble("mouseenter",{evt:e},this.targetShape),this.targetShape=t):this.targetShape&&!Konva.isDragging()&&(this.targetShape._fireAndBubble("mouseout",{evt:e}),this.targetShape._fireAndBubble("mouseleave",{evt:e}),this.targetShape=null),this._fire("contentMousemove",{evt:e})),void(e.preventDefault&&e.preventDefault())):null;var t},_mousedown:function(e){if(Konva.UA.ieMobile)return this._touchstart(e);if(!Konva.UA.mobile){this._setPointerPosition(e);var t=this.getIntersection(this.getPointerPosition());Konva.listenClickTap=!0,t&&t.isListening()&&(this.clickStartShape=t,t._fireAndBubble("mousedown",{evt:e})),this._fire("contentMousedown",{evt:e})}e.preventDefault&&e.preventDefault()},_mouseup:function(e){if(Konva.UA.ieMobile)return this._touchend(e);if(!Konva.UA.mobile){this._setPointerPosition(e);var t=this.getIntersection(this.getPointerPosition()),n=this.clickStartShape,r=this.clickEndShape,o=!1,i=Konva.DD;Konva.inDblClickWindow?(o=!0,Konva.inDblClickWindow=!1):i&&i.justDragged?i&&(i.justDragged=!1):Konva.inDblClickWindow=!0,setTimeout(function(){Konva.inDblClickWindow=!1},Konva.dblClickWindow),t&&t.isListening()&&(this.clickEndShape=t,t._fireAndBubble("mouseup",{evt:e}),Konva.listenClickTap&&n&&n._id===t._id&&(t._fireAndBubble("click",{evt:e}),o&&r&&r._id===t._id&&t._fireAndBubble("dblclick",{evt:e}))),this._fire("contentMouseup",{evt:e}),Konva.listenClickTap&&(this._fire("contentClick",{evt:e}),o&&this._fire("contentDblclick",{evt:e})),Konva.listenClickTap=!1}e.preventDefault&&e.preventDefault()},_contextmenu:function(e){this._fire("contentContextmenu",{evt:e})},_touchstart:function(e){this._setPointerPosition(e);var t=this.getIntersection(this.getPointerPosition());Konva.listenClickTap=!0,t&&t.isListening()&&(this.tapStartShape=t,t._fireAndBubble("touchstart",{evt:e}),t.isListening()&&t.preventDefault()&&e.preventDefault&&e.preventDefault()),this._fire("contentTouchstart",{evt:e})},_touchend:function(e){this._setPointerPosition(e);var t=this.getIntersection(this.getPointerPosition()),n=!1;Konva.inDblClickWindow?(n=!0,Konva.inDblClickWindow=!1):Konva.inDblClickWindow=!0,setTimeout(function(){Konva.inDblClickWindow=!1},Konva.dblClickWindow),t&&t.isListening()&&(t._fireAndBubble("touchend",{evt:e}),Konva.listenClickTap&&this.tapStartShape&&t._id===this.tapStartShape._id&&(t._fireAndBubble("tap",{evt:e}),n&&t._fireAndBubble("dbltap",{evt:e})),t.isListening()&&t.preventDefault()&&e.preventDefault&&e.preventDefault()),this._fire("contentTouchend",{evt:e}),Konva.listenClickTap&&(this._fire("contentTap",{evt:e}),n&&this._fire("contentDbltap",{evt:e})),Konva.listenClickTap=!1},_touchmove:function(e){this._setPointerPosition(e);var t,n=Konva.DD;Konva.isDragging()||((t=this.getIntersection(this.getPointerPosition()))&&t.isListening()&&(t._fireAndBubble("touchmove",{evt:e}),t.isListening()&&t.preventDefault()&&e.preventDefault&&e.preventDefault()),this._fire("contentTouchmove",{evt:e})),n&&Konva.isDragging()&&Konva.DD.node.preventDefault()&&e.preventDefault()},_wheel:function(e){this._setPointerPosition(e);var t=this.getIntersection(this.getPointerPosition());t&&t.isListening()&&t._fireAndBubble("wheel",{evt:e}),this._fire("contentWheel",{evt:e})},_setPointerPosition:function(e){var t=this._getContentPosition(),n=null,r=null;if(void 0!==(e=e||window.event).touches){if(e.touches.length>0){var o=e.touches[0];n=o.clientX-t.left,r=o.clientY-t.top}}else n=e.clientX-t.left,r=e.clientY-t.top;null!==n&&null!==r&&(this.pointerPos={x:n,y:r})},_getContentPosition:function(){var e=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:e.top,left:e.left}},_buildDOM:function(){var e=this.getContainer();if(!e){if(Konva.Util.isBrowser())throw"Stage has no container. A container is required.";e=Konva.document.createElement("div")}e.innerHTML="",this.content=Konva.document.createElement("div"),this.content.style.position="relative",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this.bufferCanvas=new Konva.SceneCanvas,this.bufferHitCanvas=new Konva.HitCanvas({pixelRatio:1}),this._resizeDOM()},_onContent:function(e,t){var n,r,o=e.split(" "),i=o.length;for(n=0;n<i;n++)r=o[n],this.content.addEventListener(r,t,!1)},cache:function(){Konva.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},clearCache:function(){}}),Konva.Util.extend(Konva.Stage,Konva.Container),Konva.Factory.addGetter(Konva.Stage,"container"),Konva.Factory.addOverloadedGetterSetter(Konva.Stage,"container")}()},function(e,t){!function(){"use strict";Konva.BaseLayer=function(e){this.___init(e)},Konva.Util.addMethods(Konva.BaseLayer,{___init:function(e){this.nodeType="Layer",Konva.Container.call(this,e)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(e){return this.getContext().clear(e),this},clearHitCache:function(){this._hitImageData=void 0},setZIndex:function(e){Konva.Node.prototype.setZIndex.call(this,e);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas()._canvas),e<t.getChildren().length-1?t.content.insertBefore(this.getCanvas()._canvas,t.getChildren()[e+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Konva.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas()._canvas),e.content.appendChild(this.getCanvas()._canvas)),this},moveUp:function(){if(!Konva.Node.prototype.moveUp.call(this))return this;var e=this.getStage();return e?(e.content.removeChild(this.getCanvas()._canvas),this.index<e.getChildren().length-1?e.content.insertBefore(this.getCanvas()._canvas,e.getChildren()[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas),this):this},moveDown:function(){if(Konva.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var t=e.getChildren();e.content.removeChild(this.getCanvas()._canvas),e.content.insertBefore(this.getCanvas()._canvas,t[this.index+1].getCanvas()._canvas)}}return this},moveToBottom:function(){if(Konva.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var t=e.getChildren();e.content.removeChild(this.getCanvas()._canvas),e.content.insertBefore(this.getCanvas()._canvas,t[1].getCanvas()._canvas)}}return this},getLayer:function(){return this},remove:function(){var e=this.getCanvas()._canvas;return Konva.Node.prototype.remove.call(this),e&&e.parentNode&&Konva.Util._isInDocument(e)&&e.parentNode.removeChild(e),this},getStage:function(){return this.parent},setSize:function(e,t){return this.canvas.setSize(e,t),this},getWidth:function(){if(this.parent)return this.parent.getWidth()},setWidth:function(){Konva.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},getHeight:function(){if(this.parent)return this.parent.getHeight()},setHeight:function(){Konva.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},_applyTransform:function(e,t,n){var r=e.getAbsoluteTransform(n).getMatrix();t.transform(r[0],r[1],r[2],r[3],r[4],r[5])}}),Konva.Util.extend(Konva.BaseLayer,Konva.Container),Konva.Factory.addGetterSetter(Konva.BaseLayer,"clearBeforeDraw",!0),Konva.Collection.mapMethods(Konva.BaseLayer)}()},function(e,t){!function(){"use strict";var e=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],t=e.length;Konva.Layer=function(e){this.____init(e)},Konva.Util.addMethods(Konva.Layer,{____init:function(e){this.nodeType="Layer",this.canvas=new Konva.SceneCanvas,this.hitCanvas=new Konva.HitCanvas({pixelRatio:1}),Konva.BaseLayer.call(this,e)},_setCanvasSize:function(e,t){this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t)},_validateAdd:function(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&Konva.Util.throw("You may only add groups and shapes to a layer.")},getIntersection:function(n,r){var o,i,a,s;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(var u=1,c=!1;;){for(i=0;i<t;i++){if(a=e[i],(s=(o=this._getIntersection({x:n.x+a.x*u,y:n.y+a.y*u})).shape)&&r)return s.findAncestor(r,!0);if(s)return s;if(c=!!o.antialiased,!o.antialiased)break}if(!c)return null;u+=1}},_getImageData:function(e,t){var n=this.hitCanvas.width||1,r=this.hitCanvas.height||1,o=Math.round(t)*n+Math.round(e);return this._hitImageData||(this._hitImageData=this.hitCanvas.context.getImageData(0,0,n,r)),[this._hitImageData.data[4*o+0],this._hitImageData.data[4*o+1],this._hitImageData.data[4*o+2],this._hitImageData.data[4*o+3]]},_getIntersection:function(e){var t,n,r=this.hitCanvas.pixelRatio,o=this.hitCanvas.context.getImageData(Math.round(e.x*r),Math.round(e.y*r),1,1).data,i=o[3];return 255===i?(t=Konva.Util._rgbToHex(o[0],o[1],o[2]),(n=Konva.shapes["#"+t])?{shape:n}:{antialiased:!0}):i>0?{antialiased:!0}:{}},drawScene:function(e,t){var n=this.getLayer(),r=e||n&&n.getCanvas();return this._fire("beforeDraw",{node:this}),this.getClearBeforeDraw()&&r.getContext().clear(),Konva.Container.prototype.drawScene.call(this,r,t),this._fire("draw",{node:this}),this},drawHit:function(e,t){var n=this.getLayer(),r=e||n&&n.hitCanvas;return n&&n.getClearBeforeDraw()&&n.getHitCanvas().getContext().clear(),Konva.Container.prototype.drawHit.call(this,r,t),this.imageData=null,this},clear:function(e){return Konva.BaseLayer.prototype.clear.call(this,e),this.getHitCanvas().getContext().clear(e),this.imageData=null,this},setVisible:function(e){return Konva.Node.prototype.setVisible.call(this,e),e?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this},setSize:function(e,t){return Konva.BaseLayer.prototype.setSize.call(this,e,t),this.hitCanvas.setSize(e,t),this}}),Konva.Util.extend(Konva.Layer,Konva.BaseLayer),Konva.Factory.addGetterSetter(Konva.Layer,"hitGraphEnabled",!0),Konva.Collection.mapMethods(Konva.Layer)}()},function(e,t){!function(){"use strict";Konva.FastLayer=function(e){this.____init(e)},Konva.Util.addMethods(Konva.FastLayer,{____init:function(e){this.nodeType="Layer",this.canvas=new Konva.SceneCanvas,Konva.BaseLayer.call(this,e)},_validateAdd:function(e){"Shape"!==e.getType()&&Konva.Util.throw("You may only add shapes to a fast layer.")},_setCanvasSize:function(e,t){this.canvas.setSize(e,t)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(e){var t=this.getLayer(),n=e||t&&t.getCanvas();return this.getClearBeforeDraw()&&n.getContext().clear(),Konva.Container.prototype.drawScene.call(this,n),this},draw:function(){return this.drawScene(),this},setVisible:function(e){return Konva.Node.prototype.setVisible.call(this,e),this.getCanvas()._canvas.style.display=e?"block":"none",this}}),Konva.Util.extend(Konva.FastLayer,Konva.BaseLayer),Konva.Collection.mapMethods(Konva.FastLayer)}()},function(e,t){!function(){"use strict";Konva.Group=function(e){this.___init(e)},Konva.Util.addMethods(Konva.Group,{___init:function(e){this.nodeType="Group",Konva.Container.call(this,e)},_validateAdd:function(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&Konva.Util.throw("You may only add groups and shapes to groups.")}}),Konva.Util.extend(Konva.Group,Konva.Container),Konva.Collection.mapMethods(Konva.Group)}()},function(e,t){!function(){"use strict";Konva.Image=function(e){this.___init(e)},Konva.Image.prototype={___init:function(e){Konva.Shape.call(this,e),this.className="Image",this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()&&this.getStage()},_sceneFunc:function(e){var t,n,r,o=this.getWidth(),i=this.getHeight(),a=this.getImage();a&&(t=this.getCropWidth(),n=this.getCropHeight(),r=t&&n?[a,this.getCropX(),this.getCropY(),t,n,0,0,o,i]:[a,0,0,o,i]),(this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,o,i),e.closePath(),e.fillStrokeShape(this)),a&&e.drawImage.apply(e,r)},_hitFunc:function(e){var t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){var e=this.getImage();return this.attrs.width||(e?e.width:0)},getHeight:function(){var e=this.getImage();return this.attrs.height||(e?e.height:0)}},Konva.Util.extend(Konva.Image,Konva.Shape),Konva.Factory.addGetterSetter(Konva.Image,"image"),Konva.Factory.addComponentsGetterSetter(Konva.Image,"crop",["x","y","width","height"]),Konva.Factory.addGetterSetter(Konva.Image,"cropX",0),Konva.Factory.addGetterSetter(Konva.Image,"cropY",0),Konva.Factory.addGetterSetter(Konva.Image,"cropWidth",0),Konva.Factory.addGetterSetter(Konva.Image,"cropHeight",0),Konva.Collection.mapMethods(Konva.Image),Konva.Image.fromURL=function(e,t){var n=new Image;n.onload=function(){var e=new Konva.Image({image:n});t(e)},n.src=e}}()},function(e,t){!function(){"use strict";var e=2*Math.PI-1e-4;Konva.Circle=function(e){this.___init(e)},Konva.Circle.prototype={_centroid:!0,___init:function(e){Konva.Shape.call(this,e),this.className="Circle",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getRadius(),0,e,!1),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(e){Konva.Node.prototype.setWidth.call(this,e),this.radius()!==e/2&&this.setRadius(e/2)},setHeight:function(e){Konva.Node.prototype.setHeight.call(this,e),this.radius()!==e/2&&this.setRadius(e/2)}},Konva.Util.extend(Konva.Circle,Konva.Shape),Konva.Factory.addGetterSetter(Konva.Circle,"radius",0),Konva.Factory.addOverloadedGetterSetter(Konva.Circle,"radius"),Konva.Collection.mapMethods(Konva.Circle)}()},function(e,t){!function(){"use strict";Konva.Rect=function(e){this.___init(e)},Konva.Rect.prototype={___init:function(e){Konva.Shape.call(this,e),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t=this.getCornerRadius(),n=this.getWidth(),r=this.getHeight();e.beginPath(),t?(t=Math.min(t,n/2,r/2),e.moveTo(t,0),e.lineTo(n-t,0),e.arc(n-t,t,t,3*Math.PI/2,0,!1),e.lineTo(n,r-t),e.arc(n-t,r-t,t,0,Math.PI/2,!1),e.lineTo(t,r),e.arc(t,r-t,t,Math.PI/2,Math.PI,!1),e.lineTo(0,t),e.arc(t,t,t,Math.PI,3*Math.PI/2,!1)):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}},Konva.Util.extend(Konva.Rect,Konva.Shape),Konva.Factory.addGetterSetter(Konva.Rect,"cornerRadius",0),Konva.Collection.mapMethods(Konva.Rect)}()},function(e,t){!function(){"use strict";Konva.Path=function(e){this.___init(e)},Konva.Path.prototype={___init:function(e){this.dataArray=[];var t=this;Konva.Shape.call(this,e),this.className="Path",this.dataArray=Konva.Path.parsePathData(this.getData()),this.on("dataChange.konva",function(){t.dataArray=Konva.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t=this.dataArray;e.beginPath();for(var n=0;n<t.length;n++){var r=t[n].command,o=t[n].points;switch(r){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var i=o[0],a=o[1],s=o[2],u=o[3],c=o[4],l=o[5],f=o[6],d=o[7],h=s>u?s:u,p=s>u?1:s/u,g=s>u?u/s:1;e.translate(i,a),e.rotate(f),e.scale(p,g),e.arc(0,0,h,c,c+l,1-d),e.scale(1/p,1/g),e.rotate(-f),e.translate(-i,-a);break;case"z":e.closePath()}}e.fillStrokeShape(this)},getSelfRect:function(){var e=[];this.dataArray.forEach(function(t){e=e.concat(t.points)});for(var t,n,r=e[0],o=e[0],i=e[1],a=e[1],s=0;s<e.length/2;s++)t=e[2*s],n=e[2*s+1],r=Math.min(r,t),o=Math.max(o,t),i=Math.min(i,n),a=Math.max(a,n);return{x:Math.round(r),y:Math.round(i),width:Math.round(o-r),height:Math.round(a-i)}}},Konva.Util.extend(Konva.Path,Konva.Shape),Konva.Path.getLineLength=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},Konva.Path.getPointOnLine=function(e,t,n,r,o,i,a){void 0===i&&(i=t),void 0===a&&(a=n);var s=(o-n)/(r-t+1e-8),u=Math.sqrt(e*e/(1+s*s));r<t&&(u*=-1);var c,l=s*u;if(r===t)c={x:i,y:a+l};else if((a-n)/(i-t+1e-8)===s)c={x:i+u,y:a+l};else{var f,d,h=this.getLineLength(t,n,r,o);if(h<1e-8)return;var p=(i-t)*(r-t)+(a-n)*(o-n);f=t+(p/=h*h)*(r-t),d=n+p*(o-n);var g=this.getLineLength(i,a,f,d),m=Math.sqrt(e*e-g*g);u=Math.sqrt(m*m/(1+s*s)),r<t&&(u*=-1),c={x:f+u,y:d+(l=s*u)}}return c},Konva.Path.getPointOnCubicBezier=function(e,t,n,r,o,i,a,s,u){function c(e){return e*e*e}function l(e){return 3*e*e*(1-e)}function f(e){return 3*e*(1-e)*(1-e)}function d(e){return(1-e)*(1-e)*(1-e)}return{x:s*c(e)+i*l(e)+r*f(e)+t*d(e),y:u*c(e)+a*l(e)+o*f(e)+n*d(e)}},Konva.Path.getPointOnQuadraticBezier=function(e,t,n,r,o,i,a){function s(e){return e*e}function u(e){return 2*e*(1-e)}function c(e){return(1-e)*(1-e)}return{x:i*s(e)+r*u(e)+t*c(e),y:a*s(e)+o*u(e)+n*c(e)}},Konva.Path.getPointOnEllipticalArc=function(e,t,n,r,o,i){var a=Math.cos(i),s=Math.sin(i),u=n*Math.cos(o),c=r*Math.sin(o);return{x:e+(u*a-c*s),y:t+(u*s+c*a)}},Konva.Path.parsePathData=function(e){if(!e)return[];var t=e,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(var r=0;r<n.length;r++)t=t.replace(new RegExp(n[r],"g"),"|"+n[r]);var o=t.split("|"),i=[],a=0,s=0;for(r=1;r<o.length;r++){var u=o[r],c=u.charAt(0),l=(u=(u=(u=(u=u.slice(1)).replace(new RegExp(",-","g"),"-")).replace(new RegExp("-","g"),",-")).replace(new RegExp("e,-","g"),"e-")).split(",");l.length>0&&""===l[0]&&l.shift();for(var f=0;f<l.length;f++)l[f]=parseFloat(l[f]);for(;l.length>0&&!isNaN(l[0]);){var d,h,p,g,m,v,y,b,_,w,C=null,k=[],E=a,S=s;switch(c){case"l":a+=l.shift(),s+=l.shift(),C="L",k.push(a,s);break;case"L":a=l.shift(),s=l.shift(),k.push(a,s);break;case"m":var x=l.shift(),T=l.shift();if(a+=x,s+=T,C="M",i.length>2&&"z"===i[i.length-1].command)for(var A=i.length-2;A>=0;A--)if("M"===i[A].command){a=i[A].points[0]+x,s=i[A].points[1]+T;break}k.push(a,s),c="l";break;case"M":a=l.shift(),s=l.shift(),C="M",k.push(a,s),c="L";break;case"h":a+=l.shift(),C="L",k.push(a,s);break;case"H":a=l.shift(),C="L",k.push(a,s);break;case"v":s+=l.shift(),C="L",k.push(a,s);break;case"V":s=l.shift(),C="L",k.push(a,s);break;case"C":k.push(l.shift(),l.shift(),l.shift(),l.shift()),a=l.shift(),s=l.shift(),k.push(a,s);break;case"c":k.push(a+l.shift(),s+l.shift(),a+l.shift(),s+l.shift()),a+=l.shift(),s+=l.shift(),C="C",k.push(a,s);break;case"S":h=a,p=s,"C"===(d=i[i.length-1]).command&&(h=a+(a-d.points[2]),p=s+(s-d.points[3])),k.push(h,p,l.shift(),l.shift()),a=l.shift(),s=l.shift(),C="C",k.push(a,s);break;case"s":h=a,p=s,"C"===(d=i[i.length-1]).command&&(h=a+(a-d.points[2]),p=s+(s-d.points[3])),k.push(h,p,a+l.shift(),s+l.shift()),a+=l.shift(),s+=l.shift(),C="C",k.push(a,s);break;case"Q":k.push(l.shift(),l.shift()),a=l.shift(),s=l.shift(),k.push(a,s);break;case"q":k.push(a+l.shift(),s+l.shift()),a+=l.shift(),s+=l.shift(),C="Q",k.push(a,s);break;case"T":h=a,p=s,"Q"===(d=i[i.length-1]).command&&(h=a+(a-d.points[0]),p=s+(s-d.points[1])),a=l.shift(),s=l.shift(),C="Q",k.push(h,p,a,s);break;case"t":h=a,p=s,"Q"===(d=i[i.length-1]).command&&(h=a+(a-d.points[0]),p=s+(s-d.points[1])),a+=l.shift(),s+=l.shift(),C="Q",k.push(h,p,a,s);break;case"A":g=l.shift(),m=l.shift(),v=l.shift(),y=l.shift(),b=l.shift(),_=a,w=s,a=l.shift(),s=l.shift(),C="A",k=this.convertEndpointToCenterParameterization(_,w,a,s,y,b,g,m,v);break;case"a":g=l.shift(),m=l.shift(),v=l.shift(),y=l.shift(),b=l.shift(),_=a,w=s,a+=l.shift(),s+=l.shift(),C="A",k=this.convertEndpointToCenterParameterization(_,w,a,s,y,b,g,m,v)}i.push({command:C||c,points:k,start:{x:E,y:S},pathLength:this.calcLength(E,S,C||c,k)})}"z"!==c&&"Z"!==c||i.push({command:"z",points:[],start:void 0,pathLength:0})}return i},Konva.Path.calcLength=function(e,t,n,r){var o,i,a,s,u=Konva.Path;switch(n){case"L":return u.getLineLength(e,t,r[0],r[1]);case"C":for(o=0,i=u.getPointOnCubicBezier(0,e,t,r[0],r[1],r[2],r[3],r[4],r[5]),s=.01;s<=1;s+=.01)a=u.getPointOnCubicBezier(s,e,t,r[0],r[1],r[2],r[3],r[4],r[5]),o+=u.getLineLength(i.x,i.y,a.x,a.y),i=a;return o;case"Q":for(o=0,i=u.getPointOnQuadraticBezier(0,e,t,r[0],r[1],r[2],r[3]),s=.01;s<=1;s+=.01)a=u.getPointOnQuadraticBezier(s,e,t,r[0],r[1],r[2],r[3]),o+=u.getLineLength(i.x,i.y,a.x,a.y),i=a;return o;case"A":o=0;var c=r[4],l=r[5],f=r[4]+l,d=Math.PI/180;if(Math.abs(c-f)<d&&(d=Math.abs(c-f)),i=u.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],c,0),l<0)for(s=c-d;s>f;s-=d)a=u.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],s,0),o+=u.getLineLength(i.x,i.y,a.x,a.y),i=a;else for(s=c+d;s<f;s+=d)a=u.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],s,0),o+=u.getLineLength(i.x,i.y,a.x,a.y),i=a;return a=u.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],f,0),o+u.getLineLength(i.x,i.y,a.x,a.y)}return 0},Konva.Path.convertEndpointToCenterParameterization=function(e,t,n,r,o,i,a,s,u){var c=u*(Math.PI/180),l=Math.cos(c)*(e-n)/2+Math.sin(c)*(t-r)/2,f=-1*Math.sin(c)*(e-n)/2+Math.cos(c)*(t-r)/2,d=l*l/(a*a)+f*f/(s*s);d>1&&(a*=Math.sqrt(d),s*=Math.sqrt(d));var h=Math.sqrt((a*a*(s*s)-a*a*(f*f)-s*s*(l*l))/(a*a*(f*f)+s*s*(l*l)));o===i&&(h*=-1),isNaN(h)&&(h=0);var p=h*a*f/s,g=h*-s*l/a,m=(e+n)/2+Math.cos(c)*p-Math.sin(c)*g,v=(t+r)/2+Math.sin(c)*p+Math.cos(c)*g,y=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},b=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(y(e)*y(t))},_=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(b(e,t))},w=_([1,0],[(l-p)/a,(f-g)/s]),C=[(l-p)/a,(f-g)/s],k=[(-1*l-p)/a,(-1*f-g)/s],E=_(C,k);return b(C,k)<=-1&&(E=Math.PI),b(C,k)>=1&&(E=0),0===i&&E>0&&(E-=2*Math.PI),1===i&&E<0&&(E+=2*Math.PI),[m,v,a,s,w,E,c,i]},Konva.Factory.addGetterSetter(Konva.Path,"data"),Konva.Collection.mapMethods(Konva.Path)}()},function(e,t){!function(e){"use strict";function t(e){setTimeout(e,1e3/60)}function n(){return o.apply(e.global,arguments)}var r=e.global.performance&&e.global.performance.now?function(){return e.global.performance.now()}:function(){return(new Date).getTime()},o=e.global.requestAnimationFrame||e.global.webkitRequestAnimationFrame||e.global.mozRequestAnimationFrame||e.global.oRequestAnimationFrame||e.global.msRequestAnimationFrame||t;e.Animation=function(t,n){var o=e.Animation;this.func=t,this.setLayers(n),this.id=o.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r()}},e.Animation.prototype={setLayers:function(e){var t;return t=e?e.length>0?e:[e]:[],this.layers=t,this},getLayers:function(){return this.layers},addLayer:function(e){var t,n=this.layers,r=n.length;for(t=0;t<r;t++)if(n[t]._id===e._id)return!1;return this.layers.push(e),!0},isRunning:function(){var t,n=e.Animation.animations,r=n.length;for(t=0;t<r;t++)if(n[t].id===this.id)return!0;return!1},start:function(){var t=e.Animation;return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r(),t._addAnimation(this),this},stop:function(){return e.Animation._removeAnimation(this),this},_updateFrameObject:function(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},e.Animation.animations=[],e.Animation.animIdCounter=0,e.Animation.animRunning=!1,e.Animation._addAnimation=function(e){this.animations.push(e),this._handleAnimation()},e.Animation._removeAnimation=function(e){var t,n=e.id,r=this.animations,o=r.length;for(t=0;t<o;t++)if(r[t].id===n){this.animations.splice(t,1);break}},e.Animation._runFrames=function(){var e,t,n,o,i,a,s,u,c={},l=this.animations;for(o=0;o<l.length;o++)if(t=(e=l[o]).layers,n=e.func,e._updateFrameObject(r()),a=t.length,!n||!1!==n.call(e,e.frame))for(i=0;i<a;i++)void 0!==(s=t[i])._id&&(c[s._id]=s);for(u in c)c.hasOwnProperty(u)&&c[u].draw()},e.Animation._animationLoop=function(){var t=e.Animation;t.animations.length?(t._runFrames(),n(t._animationLoop)):t.animRunning=!1},e.Animation._handleAnimation=function(){this.animRunning||(this.animRunning=!0,n(this._animationLoop))},e.BaseLayer.prototype.batchDraw=function(){var t=this,n=e.Animation;return this.batchAnim||(this.batchAnim=new n(function(){t.batchAnim.stop()},this)),this.batchAnim.isRunning()||this.batchAnim.start(),this},e.Stage.prototype.batchDraw=function(){return this.getChildren().each(function(e){e.batchDraw()}),this}}(Konva)},function(e,t){!function(){"use strict";Konva.DD={anim:new Konva.Animation(function(){var e=this.dirty;return this.dirty=!1,e}),isDragging:!1,justDragged:!1,offset:{x:0,y:0},node:null,_drag:function(e){var t=Konva.DD,n=t.node;if(n){if(!t.isDragging){var r=n.getStage().getPointerPosition(),o=n.dragDistance();if(Math.max(Math.abs(r.x-t.startPointerPos.x),Math.abs(r.y-t.startPointerPos.y))<o)return}n.getStage()._setPointerPosition(e),n._setDragPosition(e),t.isDragging||(t.isDragging=!0,n.fire("dragstart",{type:"dragstart",target:n,evt:e},!0)),n.fire("dragmove",{type:"dragmove",target:n,evt:e},!0)}},_endDragBefore:function(e){var t,n=Konva.DD,r=n.node;r&&(t=r.getLayer(),n.anim.stop(),n.isDragging&&(n.isDragging=!1,n.justDragged=!0,Konva.listenClickTap=!1,e&&(e.dragEndNode=r)),delete n.node,(r.getLayer()||t||r instanceof Konva.Stage)&&(t||r).draw())},_endDragAfter:function(e){var t=(e=e||{}).dragEndNode;e&&t&&t.fire("dragend",{type:"dragend",target:t,evt:e},!0)}},Konva.Node.prototype.startDrag=function(){var e=Konva.DD,t=this.getStage(),n=this.getLayer(),r=t.getPointerPosition(),o=this.getAbsolutePosition();r&&(e.node&&e.node.stopDrag(),e.node=this,e.startPointerPos=r,e.offset.x=r.x-o.x,e.offset.y=r.y-o.y,e.anim.setLayers(n||this.getLayers()),e.anim.start(),this._setDragPosition())},Konva.Node.prototype._setDragPosition=function(e){var t=Konva.DD,n=this.getStage().getPointerPosition(),r=this.getDragBoundFunc();if(n){var o={x:n.x-t.offset.x,y:n.y-t.offset.y};void 0!==r&&(o=r.call(this,o,e)),this.setAbsolutePosition(o),this._lastPos&&this._lastPos.x===o.x&&this._lastPos.y===o.y||(t.anim.dirty=!0),this._lastPos=o}},Konva.Node.prototype.stopDrag=function(){var e=Konva.DD,t={};e._endDragBefore(t),e._endDragAfter(t)},Konva.Node.prototype.setDraggable=function(e){this._setAttr("draggable",e),this._dragChange()};var e=Konva.Node.prototype.remove;Konva.Node.prototype.__originalRemove=e,Konva.Node.prototype.remove=function(){var t=Konva.DD;t.node&&t.node._id===this._id&&this.stopDrag(),e.call(this)},Konva.Node.prototype.isDragging=function(){var e=Konva.DD;return!(!e.node||e.node._id!==this._id||!e.isDragging)},Konva.Node.prototype._listenDrag=function(){var e=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.konva contentTouchstart.konva",function(t){Konva.DD.node||e.startDrag(t)}):this.on("mousedown.konva touchstart.konva",function(t){1!==t.evt.button&&2!==t.evt.button&&(Konva.DD.node||e.startDrag(t))})},Konva.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage(),t=Konva.DD;e&&t.node&&t.node._id===this._id&&t.node.stopDrag()}},Konva.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.konva"),this.off("contentTouchstart.konva")):(this.off("mousedown.konva"),this.off("touchstart.konva"))},Konva.Factory.addGetterSetter(Konva.Node,"dragBoundFunc"),Konva.Factory.addGetter(Konva.Node,"draggable",!1),Konva.Factory.addOverloadedGetterSetter(Konva.Node,"draggable");var t=Konva.document.documentElement;t.addEventListener("mouseup",Konva.DD._endDragBefore,!0),t.addEventListener("touchend",Konva.DD._endDragBefore,!0),t.addEventListener("mousemove",Konva.DD._drag),t.addEventListener("touchmove",Konva.DD._drag),t.addEventListener("mouseup",Konva.DD._endDragAfter,!1),t.addEventListener("touchend",Konva.DD._endDragAfter,!1)}()}])},e.exports=r(n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=(r=o)&&r.__esModule?r:{default:r},a=n(3);t.default=function(){return i.default.createElement("div",{id:"hero",className:"Hero",style:{backgroundImage:"url(/img/GhostBlade_Aeolian.jpg)"}},i.default.createElement("div",{className:"content"},i.default.createElement("h1",null,"BLACK MIRROR"),i.default.createElement("h2",null,"Season 4 now available"),i.default.createElement("p",null,"Black Mirror is a British television series created by Charlie Brooker. The series is produced by Zeppotron for Endemol."),i.default.createElement("div",{className:"button-wrapper"},i.default.createElement(a.Link,{to:"/video/5a3bcc52b1d6692551c19ec3",className:"Button","data-primary":!0,style:{textDecoration:"none"}},"Watch now"),i.default.createElement("a",{className:"Button","data-primary":!1},"+ My list"))),i.default.createElement("div",{className:"overlay"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),i=s(n(5)),a=s(n(28));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={data:[],videolist:[],searchTerm:""},n.loadContent=n.loadContent.bind(n),n.getVideoList=n.getVideoList.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.term.split("="),t=0;"title"===e[0]&&(t=0),"tag"===e[0]&&(t=1),""!==e[1]&&(this.loadContent(e[1],t),this.getVideoList(),this.setState({searchTerm:e[1]}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.match.params.term.split("=");if(e.match.params.term!==this.props.match.params.term&&""!==t[1]){var n=0;"title"===t[0]&&(n=0),"tag"===t[0]&&(n=1),this.getVideoList(),this.loadContent(t[1],n),this.setState({searchTerm:t[1]})}}},{key:"loadContent",value:function(e,t){var n=this,r="";0===t&&(r="/api/videos?q=title:"),1===t&&(r="/api/videos?q=tag:");var o=r+e,a=i.default.getToken();$.ajax({url:o,headers:{Authorization:"bearer "+a},contentType:"application/x-www-form-urlencoded",method:"GET"}).done(function(e){var t=e.hits.map(function(e){return{id:e._id,title:e._source.title,backdrop:e._source.backdrop}});n.setState({data:t})}).fail(function(){console.log("There has an error on loading search results.")})}},{key:"getVideoList",value:function(){var e=this,t=i.default.getToken();$.ajax({url:"/api/videolist/id",headers:{Authorization:"bearer "+t},contentType:"application/json",method:"GET"}).done(function(t){e.setState({videolist:t.video_list})}).fail(function(){console.log("There is an error when getting video list.")})}},{key:"render",value:function(){return o.default.createElement("div",{className:"search-results-wrapper"},o.default.createElement("div",{className:"title"},"Search Results for ",o.default.createElement("p",null,this.state.searchTerm)),o.default.createElement(a.default,{data:this.state.data,videolist:this.state.videolist}))}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(0)),i=n(3),a=l(n(5)),s=n(39),u=(l(n(27)),l(n(41)),n(13)),c=l(n(109));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=n(110),g=function(e){function t(e){f(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.announce=["ws://104.131.128.61:8000"],n.state={data:{title:"",backdrop:"",tags:[],rscInfo:[],introduction:""},seeders:[],liked:!1},n.loadContent=n.loadContent.bind(n),n.getLiked=n.getLiked.bind(n),n.addToList=n.addToList.bind(n),n.openEditVideoModal=n.openEditVideoModal.bind(n),n.searchTag=n.searchTag.bind(n),n}return h(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){this.getLiked(),this.loadContent()}},{key:"loadContent",value:function(){var e=this,t=this.props.match.params.id,n=encodeURIComponent(a.default.getToken()),r="id="+t;$.ajax({url:"/api/video",data:r,headers:{Authorization:"bearer "+n},contentType:"application/x-www-form-urlencoded",method:"GET"}).done(function(t){e.setState({data:{title:t.title,backdrop:t.backdrop,tags:t.tags,rscInfo:t.rsc_info,introduction:t.introduction}});var n=t.rsc_info.map(function(e){return e[2].split("magnet:?xt=urn:btih:")[1]}),r=new Array(n.length).fill(0);p.scrape({announce:[e.announce],infoHash:n},function(t,o){if(t)throw t;var i;if(n.length>=1)for(i=0;i<n.length;i++)r[i]=o[n[i]].complete;else r[0]=o.complete;e.setState({seeders:r})}.bind(e))}).fail(function(){console.log("There has an error.")})}},{key:"addToList",value:function(){!0===this.state.liked?this.setState({liked:!1}):this.setState({liked:!0});var e=this.props.match.params.id,t=a.default.getToken(),n={token:t,videoId:e,add:this.state.liked};$.ajax({url:"/update/videolist",headers:{Authorization:"bearer "+t},data:JSON.stringify(n),contentType:"application/json",method:"POST"}).fail(function(){console.log("There is an error when updating video list.")})}},{key:"getLiked",value:function(){var e=this,t=this.props.match.params.id,n=a.default.getToken();$.ajax({url:"/api/videolist/id",headers:{Authorization:"bearer "+n},contentType:"application/json",method:"GET"}).done(function(n){n.video_list.includes(t)&&e.setState({liked:!0})}).fail(function(){console.log("There is an error when getting video list.")})}},{key:"openEditVideoModal",value:function(){$("#edit-video-card").css({visibility:"visible",opacity:"1"}),$("#edit-video-card-flag").val(this.props.match.params.id),$("#edit-video-card-flag").click()}},{key:"searchTag",value:function(e){this.props.history.push("/search/tag="+e.target.innerHTML)}},{key:"render",value:function(){var e=this.state.data.title,t=this.state.data.backdrop,n=this.state.data.tags,r=this.state.data.rscInfo,i=this.state.data.introduction,a=this.state.seeders;if(n)var s=n.map(function(e,t){return o.default.createElement("li",{key:(0,u.uuidv8)(),onClick:this.searchTag},e)}.bind(this));if(r)var c=r.map(function(e,t){return o.default.createElement(m,{key:(0,u.uuidv8)(),data:e,seeder:a[t]})});return void 0!==e&&o.default.createElement("div",{className:"videopage-content"},o.default.createElement("div",{className:"cover-title-wrapper",style:{backgroundImage:"url(/backdrop/"+t+")"}},o.default.createElement("div",{className:"title"},o.default.createElement("h1",null,e)),o.default.createElement("div",{className:"overlay"}),o.default.createElement("div",{className:"buttons-wrapper"},o.default.createElement("i",{className:"fa fa-heart","data-toggled":this.state.liked,onClick:this.addToList}),o.default.createElement("i",{className:"fa fa-pencil",onClick:this.openEditVideoModal}))),o.default.createElement("div",{className:"tags"},o.default.createElement("ul",null,s)),o.default.createElement("div",{className:"videopage-rsc"},o.default.createElement("div",{className:"videopage-cards-wrapper"},o.default.createElement("ul",null,c))),o.default.createElement("div",{className:"intro"},o.default.createElement("p",null,i)))}}]),t}(),m=function(e){function t(e){f(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=n.handleClick.bind(n),n.copyMagnet=n.copyMagnet.bind(n),n}return h(t,o.default.Component),r(t,[{key:"handleClick",value:function(e){"I"!==e.target.tagName&&("none"===$("#video-components").css("display")?($("#video-components").show(),(0,s.displayVideo)({title:this.props.data[0],torrentID:this.props.data[2]})):(0,s.switchVideo)({title:this.props.data[0],torrentID:this.props.data[2]}))}},{key:"copyMagnet",value:function(e){c.default.writeText(e.target.nextSibling.innerHTML)}},{key:"render",value:function(){var e=this.props.data,t=this.props.seeder;return o.default.createElement("li",{onClick:this.handleClick},o.default.createElement("div",null,e[0]),o.default.createElement("div",null,o.default.createElement("span",null,o.default.createElement("i",{className:"fa fa-arrow-circle-up rsc-icon"}),t),o.default.createElement("span",null,o.default.createElement("i",{className:"fa fa-file rsc-icon"}),e[1])),o.default.createElement("div",null,o.default.createElement("i",{className:"fa fa-magnet rsc-magnet",onClick:this.copyMagnet}),o.default.createElement("div",{className:"magnet-content"},e[2])))}}]),t}();t.default=(0,i.withRouter)(g)},function(e,t,n){var r;r=function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e){var t=new v,n=function(e,t,n){d("listener called"),e.success=!0,t.forEach(function(t,r){n.clipboardData.setData(r,t),r===g&&n.clipboardData.getData(r)!=t&&(d("setting text/plain failed"),e.success=!1)}),n.preventDefault()}.bind(this,t,e);document.addEventListener("copy",n);try{document.execCommand("copy")}finally{document.removeEventListener("copy",n)}return t}function o(e,t){a(e);var n=r(t);return s(),n}function i(e){d("copyTextUsingDOM");var t=document.createElement("div"),n=t.attachShadow({mode:"open"});document.body.appendChild(t);var r=document.createElement("span");r.innerText=e,n.appendChild(r),a(r);var o=document.execCommand("copy");return s(),document.body.removeChild(t),o}function a(e){var t=document.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}function s(){document.getSelection().removeAllRanges()}function u(){return"undefined"==typeof ClipboardEvent&&void 0!==window.clipboardData&&void 0!==window.clipboardData.setData}function c(){return new l.Promise(function(e,t){var n=window.clipboardData.getData("Text");""===n?t(new Error("Empty clipboard or could not read plain text from clipboard")):e(n)})}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),f=n(5),d=function(e){},h=!0,p=(console.warn||console.log).bind(console,"[clipboard-polyfill]"),g="text/plain",m=function(){function e(){}return e.setDebugLog=function(e){d=e},e.suppressWarnings=function(){h=!1,f.suppressDTWarnings()},e.write=function(e){return h&&!e.getData(g)&&p("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call clipboard.suppressWarnings() to suppress this warning."),new l.Promise(function(t,n){if(u())(function(e){var t=e.getData("text/plain");if(void 0!==t)return window.clipboardData.setData("Text",t);throw"No `text/plain` value was specified."})(e)?t():n(new Error("Copying failed, possibly because the user rejected it."));else{var a=r(e);if(a.success)return d("regular execCopy worked"),void t();if(navigator.userAgent.indexOf("Edge")>-1)return d('UA "Edge" => assuming success'),void t();if((a=o(document.body,e)).success)return d("copyUsingTempSelection worked"),void t();if((a=function(e){var t=document.createElement("div");t.textContent="temporary element",document.body.appendChild(t);var n=o(t,e);return document.body.removeChild(t),n}(e)).success)return d("copyUsingTempElem worked"),void t();var s=e.getData(g);if(void 0!==s&&i(s))return d("copyTextUsingDOM worked"),void t();n(new Error("Copy command failed."))}})},e.writeText=function(e){var t=new f.DT;return t.setData(g,e),this.write(t)},e.read=function(){return new l.Promise(function(e,t){u()?c().then(function(t){return e(function(e){var t=new f.DT;return t.setData("text/plain",e),t}(t))},t):t("Read is not supported in your browser.")})},e.readText=function(){return u()?c():new l.Promise(function(e,t){t("Read is not supported in your browser.")})},e.DT=f.DT,e}();t.default=m;var v=function(){return function(){this.success=!1}}();e.exports=m},function(e,t,n){(function(t,r){!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){return"function"==typeof e}function o(){var e=setTimeout;return function(){return e(i,1)}}function i(){for(var e=0;e<k;e+=2)(0,I[e])(I[e+1]),I[e]=void 0,I[e+1]=void 0;k=0}function a(e,t){var n=arguments,r=this,o=new this.constructor(u);void 0===o[B]&&b(o);var i=r._state;return i?function(){var e=n[i-1];x(function(){return y(i,o,e,r._result)})}():g(r,o,e,t),o}function s(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(u);return f(t,e),t}function u(){}function c(e){try{return e.then}catch(e){return N.error=e,N}}function l(t,n,r){n.constructor===t.constructor&&r===a&&n.constructor.resolve===s?function(e,t){t._state===M?h(e,t._result):t._state===D?p(e,t._result):g(t,void 0,function(t){return f(e,t)},function(t){return p(e,t)})}(t,n):r===N?(p(t,N.error),N.error=null):void 0===r?h(t,n):e(r)?function(e,t,n){x(function(e){var r=!1,o=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,function(n){r||(r=!0,t!==n?f(e,n):h(e,n))},function(t){r||(r=!0,p(e,t))},e._label);!r&&o&&(r=!0,p(e,o))},e)}(t,n,r):h(t,n)}function f(e,t){e===t?p(e,new TypeError("You cannot resolve a promise with itself")):function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)?l(e,t,c(t)):h(e,t)}function d(e){e._onerror&&e._onerror(e._result),m(e)}function h(e,t){e._state===U&&(e._result=t,e._state=M,0!==e._subscribers.length&&x(m,e))}function p(e,t){e._state===U&&(e._state=D,e._result=t,x(d,e))}function g(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+M]=n,o[i+D]=r,0===i&&e._state&&x(m,e)}function m(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?y(n,r,o,i):o(i);e._subscribers.length=0}}function v(){this.error=null}function y(t,n,r,o){var i=e(r),a=void 0,s=void 0,u=void 0,c=void 0;if(i){if((a=function(e,t){try{return e(t)}catch(e){return j.error=e,j}}(r,o))===j?(c=!0,s=a.error,a.error=null):u=!0,n===a)return void p(n,new TypeError("A promises callback cannot return that same promise."))}else a=o,u=!0;n._state!==U||(i&&u?f(n,a):c?p(n,s):t===M?h(n,a):t===D&&p(n,a))}function b(e){e[B]=F++,e._state=void 0,e._result=void 0,e._subscribers=[]}function _(e,t){this._instanceConstructor=e,this.promise=new e(u),this.promise[B]||b(this.promise),C(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?h(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&h(this.promise,this._result))):p(this.promise,new Error("Array Methods must be provided an Array"))}function w(e){this[B]=F++,this._result=this._state=void 0,this._subscribers=[],u!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof w?function(e,t){try{t(function(t){f(e,t)},function(t){p(e,t)})}catch(t){p(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var C=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},k=0,E=void 0,S=void 0,x=function(e,t){I[k]=e,I[k+1]=t,2===(k+=2)&&(S?S(i):L())},T="undefined"!=typeof window?window:void 0,A=T||{},P=A.MutationObserver||A.WebKitMutationObserver,O="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),R="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,I=new Array(1e3),L=void 0;L=O?function(){return t.nextTick(i)}:P?function(){var e=0,t=new P(i),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():R?function(){var e=new MessageChannel;return e.port1.onmessage=i,function(){return e.port2.postMessage(0)}}():void 0===T?function(){try{var e=n(4);return void 0!==(E=e.runOnLoop||e.runOnContext)?function(){E(i)}:o()}catch(e){return o()}}():o();var B=Math.random().toString(36).substring(16),U=void 0,M=1,D=2,N=new v,j=new v,F=0;return _.prototype._enumerate=function(e){for(var t=0;this._state===U&&t<e.length;t++)this._eachEntry(e[t],t)},_.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===s){var o=c(e);if(o===a&&e._state!==U)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===w){var i=new n(u);l(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},_.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===U&&(this._remaining--,e===D?p(r,n):this._result[t]=n),0===this._remaining&&h(r,this._result)},_.prototype._willSettleAt=function(e,t){var n=this;g(e,void 0,function(e){return n._settledAt(M,t,e)},function(e){return n._settledAt(D,t,e)})},w.all=function(e){return new _(this,e).promise},w.race=function(e){var t=this;return new t(C(e)?function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},w.resolve=s,w.reject=function(e){var t=new this(u);return p(t,e),t},w._setScheduler=function(e){S=e},w._setAsap=function(e){x=e},w._asap=x,w.prototype={constructor:w,then:a,catch:function(e){return this.then(null,e)}},w.polyfill=function(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=w},w.Promise=w,w})}).call(t,n(2),n(3))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(){p&&d&&(p=!1,d.length?h=d.concat(h):g=-1,h.length&&a())}function a(){if(!p){var e=o(i);p=!0;for(var t=h.length;t;){for(d=h,h=[];++g<t;)d&&d[g].run();g=-1,t=h.length}d=null,p=!1,function(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var c,l,f=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var d,h=[],p=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new s(e,t)),1!==h.length||p||o(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={TEXT_PLAIN:"text/plain",TEXT_HTML:"text/html"},o=new Set;for(var i in r)o.add(r[i]);var a=(console.warn||console.log).bind(console,"[clipboard-polyfill]"),s=!0;t.suppressDTWarnings=function(){s=!1};var u=function(){function e(){this.m=new Map}return e.prototype.setData=function(e,t){s&&!o.has(e)&&a("Unknown data type: "+e,"Call clipboard.suppressWarnings() to suppress this warning."),this.m.set(e,t)},e.prototype.getData=function(e){return this.m.get(e)},e.prototype.forEach=function(e){return this.m.forEach(e)},e}();t.DT=u}])},e.exports=r()},function(e,t,n){var r=n(111),o=n(140);e.exports=r,e.exports.Client=r,e.exports.Server=o},function(e,t,n){(function(t){e.exports=v;var r=n(9).Buffer,o=n(44)("bittorrent-tracker:client"),i=n(18).EventEmitter,a=n(46),s=n(7),u=n(115),c=n(117),l=n(47),f=n(124),d=n(125),h=n(56),p=n(134),g=n(135),m=n(136);function v(e){var n=this;if(!(n instanceof v))return new v(e);if(i.call(n),e||(e={}),!e.peerId)throw new Error("Option `peerId` is required");if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");if(!t.browser&&!e.port)throw new Error("Option `port` is required");n.peerId="string"==typeof e.peerId?e.peerId:e.peerId.toString("hex"),n._peerIdBuffer=r.from(n.peerId,"hex"),n._peerIdBinary=n._peerIdBuffer.toString("binary"),n.infoHash="string"==typeof e.infoHash?e.infoHash:e.infoHash.toString("hex"),n._infoHashBuffer=r.from(n.infoHash,"hex"),n._infoHashBinary=n._infoHashBuffer.toString("binary"),o("new client %s",n.infoHash),n.destroyed=!1,n._port=e.port,n._getAnnounceOpts=e.getAnnounceOpts,n._rtcConfig=e.rtcConfig,n._userAgent=e.userAgent,n._wrtc="function"==typeof e.wrtc?e.wrtc():e.wrtc;var a="string"==typeof e.announce?[e.announce]:null==e.announce?[]:e.announce;a=a.map(function(e){return"/"===(e=e.toString())[e.length-1]&&(e=e.substring(0,e.length-1)),e}),a=f(a);var s=!1!==n._wrtc&&(!!n._wrtc||l.WEBRTC_SUPPORT);function u(e){t.nextTick(function(){n.emit("warning",e)})}n._trackers=a.map(function(e){var t=d.parse(e).protocol;return"http:"!==t&&"https:"!==t||"function"!=typeof p?"udp:"===t&&"function"==typeof g?new g(n,e):"ws:"!==t&&"wss:"!==t||!s?(u(new Error("Unsupported tracker protocol: "+e)),null):"ws:"===t&&"undefined"!=typeof window&&"https:"===window.location.protocol?(u(new Error("Unsupported tracker protocol: "+e)),null):new m(n,e):new p(n,e)}).filter(Boolean)}s(v,i),v.scrape=function(e,t){if(t=u(t),!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");var n=new v(a(e,{infoHash:Array.isArray(e.infoHash)?e.infoHash[0]:e.infoHash,peerId:r.from("01234567890123456789"),port:6881}));n.once("error",t),n.once("warning",t);var o=Array.isArray(e.infoHash)?e.infoHash.length:1,i={};return n.on("scrape",function(e){if(o-=1,i[e.infoHash]=e,0===o){n.destroy();var r=Object.keys(i);1===r.length?t(null,i[r[0]]):t(null,i)}}),e.infoHash=Array.isArray(e.infoHash)?e.infoHash.map(function(e){return r.from(e,"hex")}):r.from(e.infoHash,"hex"),n.scrape({infoHash:e.infoHash}),n},v.prototype.start=function(e){o("send `start`"),(e=this._defaultAnnounceOpts(e)).event="started",this._announce(e),this._trackers.forEach(function(e){e.setInterval()})},v.prototype.stop=function(e){o("send `stop`"),(e=this._defaultAnnounceOpts(e)).event="stopped",this._announce(e)},v.prototype.complete=function(e){o("send `complete`"),e||(e={}),(e=this._defaultAnnounceOpts(e)).event="completed",this._announce(e)},v.prototype.update=function(e){o("send `update`"),(e=this._defaultAnnounceOpts(e)).event&&delete e.event,this._announce(e)},v.prototype._announce=function(e){this._trackers.forEach(function(t){t.announce(e)})},v.prototype.scrape=function(e){o("send `scrape`"),e||(e={}),this._trackers.forEach(function(t){t.scrape(e)})},v.prototype.setInterval=function(e){o("setInterval %d",e),this._trackers.forEach(function(t){t.setInterval(e)})},v.prototype.destroy=function(e){if(!this.destroyed){this.destroyed=!0,o("destroy");var t=this._trackers.map(function(e){return function(t){e.destroy(t)}});c(t,e),this._trackers=[],this._getAnnounceOpts=null}},v.prototype._defaultAnnounceOpts=function(e){return e||(e={}),null==e.numwant&&(e.numwant=h.DEFAULT_ANNOUNCE_PEERS),null==e.uploaded&&(e.uploaded=0),null==e.downloaded&&(e.downloaded=0),this._getAnnounceOpts&&(e=a(e,this._getAnnounceOpts())),e}}).call(t,n(6))},function(e,t,n){"use strict";t.byteLength=function(e){return 3*e.length/4-c(e)},t.toByteArray=function(e){var t,n,r,a,s,u=e.length;a=c(e),s=new i(3*u/4-a),n=a>0?u-4:u;var l=0;for(t=0;t<n;t+=4)r=o[e.charCodeAt(t)]<<18|o[e.charCodeAt(t+1)]<<12|o[e.charCodeAt(t+2)]<<6|o[e.charCodeAt(t+3)],s[l++]=r>>16&255,s[l++]=r>>8&255,s[l++]=255&r;2===a?(r=o[e.charCodeAt(t)]<<2|o[e.charCodeAt(t+1)]>>4,s[l++]=255&r):1===a&&(r=o[e.charCodeAt(t)]<<10|o[e.charCodeAt(t+1)]<<4|o[e.charCodeAt(t+2)]>>2,s[l++]=r>>8&255,s[l++]=255&r);return s},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i="",a=[],s=0,u=n-o;s<u;s+=16383)a.push(l(e,s,s+16383>u?u:s+16383));1===o?(t=e[n-1],i+=r[t>>2],i+=r[t<<4&63],i+="=="):2===o&&(t=(e[n-2]<<8)+e[n-1],i+=r[t>>10],i+=r[t>>4&63],i+=r[t<<2&63],i+="=");return a.push(i),a.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function l(e,t,n){for(var o,i,a=[],s=t;s<n;s+=3)o=(e[s]<<16)+(e[s+1]<<8)+e[s+2],a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?o-1:0,d=n?-1:1,h=e[t+f];for(f+=d,i=h&(1<<-l)-1,h>>=-l,l+=s;l>0;i=256*i+e[t+f],f+=d,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=d,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=c}return(h?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,s,u,c=8*i-o-1,l=(1<<c)-1,f=l>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,o),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[n+h]=255&s,h+=p,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;e[n+h]=255&a,h+=p,a/=256,c-=8);e[n+h-p]|=128*g}},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,i=o-(n||o);e.diff=i,e.prev=n,e.curr=o,n=o;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var o=t.formatters[r];if("function"==typeof o){var i=a[u];n=o.call(e,i),a.splice(u,1),u--}return n}),t.formatArgs.call(e,a),(r.log||t.log||console.log.bind(console)).apply(e,a)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var i=t.instances[n];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(45),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var r=n(116);function o(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function i(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=r(o),e.exports.strict=r(i),o.proto=o(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})})},function(e,t){e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");Object.keys(t).forEach(function(e){r[e]=t[e]});return r;function r(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),o=e[e.length-1];return"function"==typeof r&&r!==o&&Object.keys(o).forEach(function(e){r[e]=o[e]}),r}}},function(e,t,n){(function(t){e.exports=function(e,n){var r,o,i,a=!0;function s(e){function o(){n&&n(e,r),n=null}a?t.nextTick(o):o()}function u(e,t,n){r[e]=n,(0==--o||t)&&s(t)}Array.isArray(e)?(r=[],o=e.length):(i=Object.keys(e),r={},o=i.length),o?i?i.forEach(function(t){e[t](function(e,n){u(t,e,n)})}):e.forEach(function(e,t){e(function(e,n){u(t,e,n)})}):s(null),a=!1}}).call(t,n(6))},function(e,t,n){var r;function o(e){function n(){if(n.enabled){var e=n,o=+new Date,i=o-(r||o);e.diff=i,e.prev=r,e.curr=o,r=o;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var o=t.formatters[r];if("function"==typeof o){var i=a[u];n=o.call(e,i),a.splice(u,1),u--}return n}),t.formatArgs.call(e,a),(n.log||t.log||console.log.bind(console)).apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(45),t.names=[],t.skips=[],t.formatters={}},function(e,t){e.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},function(e,t){},function(e,t,n){"use strict";var r=n(9).Buffer;e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,o,i=r.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,n=i,o=s,t.copy(n,o),s+=a.data.length,a=a.next;return i},e}()},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(t,n(8))},function(e,t,n){"use strict";e.exports=i;var r=n(55),o=n(14);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}o.inherits=n(7),o.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";e.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,r=e.length,o=e[0],i=e[0],a=1;a<r;++a)if(i=o,t(o=e[a],i)){if(a===n){n++;continue}e[n++]=o}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,r=e[0],o=e[0],i=1;i<n;++i,o=r)if(o=r,(r=e[i])!==o){if(i===t){t++;continue}e[t++]=r}return e.length=t,e}(e))}},function(e,t,n){"use strict";var r=n(126),o=n(128);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){o.isString(e)&&(e=b(e));return e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),f=["%","/","?",";","#"].concat(l),d=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(129);function b(e,t,n){if(e&&o.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}i.prototype.parse=function(e,t,n){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),s=-1!==i&&i<e.indexOf("#")?"?":"#",c=e.split(s);c[0]=c[0].replace(/\\/g,"/");var b=e=c.join(s);if(b=b.trim(),!n&&1===e.split("#").length){var _=u.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=a.exec(b);if(w){var C=(w=w[0]).toLowerCase();this.protocol=C,b=b.substr(w.length)}if(n||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===b.substr(0,2);!k||w&&m[w]||(b=b.substr(2),this.slashes=!0)}if(!m[w]&&(k||w&&!v[w])){for(var E,S,x=-1,T=0;T<d.length;T++){-1!==(A=b.indexOf(d[T]))&&(-1===x||A<x)&&(x=A)}-1!==(S=-1===x?b.lastIndexOf("@"):b.lastIndexOf("@",x))&&(E=b.slice(0,S),b=b.slice(S+1),this.auth=decodeURIComponent(E)),x=-1;for(T=0;T<f.length;T++){var A;-1!==(A=b.indexOf(f[T]))&&(-1===x||A<x)&&(x=A)}-1===x&&(x=b.length),this.host=b.slice(0,x),b=b.slice(x),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var O=this.hostname.split(/\./),R=(T=0,O.length);T<R;T++){var I=O[T];if(I&&!I.match(h)){for(var L="",B=0,U=I.length;B<U;B++)I.charCodeAt(B)>127?L+="x":L+=I[B];if(!L.match(h)){var M=O.slice(0,T),D=O.slice(T+1),N=I.match(p);N&&(M.push(N[1]),D.unshift(N[2])),D.length&&(b="/"+D.join(".")+b),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=r.toASCII(this.hostname));var j=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+j,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!g[C])for(T=0,R=l.length;T<R;T++){var H=l[T];if(-1!==b.indexOf(H)){var K=encodeURIComponent(H);K===H&&(K=escape(H)),b=b.split(H).join(K)}}var W=b.indexOf("#");-1!==W&&(this.hash=b.substr(W),b=b.slice(0,W));var q=b.indexOf("?");if(-1!==q?(this.search=b.substr(q),this.query=b.substr(q+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,q)):t&&(this.search="",this.query={}),b&&(this.pathname=b),v[C]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var z=this.search||"";this.path=j+z}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||v[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+r},i.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(o.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=e[l])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!v[e.protocol]){for(var f=Object.keys(e),d=0;d<f.length;d++){var h=f[d];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",y=n.search||"";n.path=g+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=_||b||n.host&&e.pathname,C=w,k=n.pathname&&n.pathname.split("/")||[],E=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===k[0]?k[0]=n.host:k.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),w=w&&(""===p[0]||""===k[0])),_)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,k=p;else if(p.length)k||(k=[]),k.pop(),k=k.concat(p),n.search=e.search,n.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(E)n.hostname=n.host=k.shift(),(P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=P.shift(),n.host=n.hostname=P.shift());return n.search=e.search,n.query=e.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!k.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=k.slice(-1)[0],x=(n.host||e.host||k.length>1)&&("."===S||".."===S)||""===S,T=0,A=k.length;A>=0;A--)"."===(S=k[A])?k.splice(A,1):".."===S?(k.splice(A,1),T++):T&&(k.splice(A,1),T--);if(!w&&!C)for(;T--;T)k.unshift("..");!w||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),x&&"/"!==k.join("/").substr(-1)&&k.push("");var P,O=""===k[0]||k[0]&&"/"===k[0].charAt(0);E&&(n.hostname=n.host=O?"":k.length?k.shift():"",(P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=P.shift(),n.host=n.hostname=P.shift()));return(w=w||n.host&&k.length)&&!O&&k.unshift(""),k.length?n.pathname=k.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){(function(e,r){var o;!function(i){"object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,c=36,l=1,f=26,d=38,h=700,p=72,g=128,m="-",v=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=c-l,C=Math.floor,k=String.fromCharCode;function E(e){throw new RangeError(_[e])}function S(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function x(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+S((e=e.replace(b,".")).split("."),t).join(".")}function T(e){for(var t,n,r=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function A(e){return S(e,function(e){var t="";return e>65535&&(t+=k((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=k(e)}).join("")}function P(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function O(e,t,n){var r=0;for(e=n?C(e/h):e>>1,e+=C(e/t);e>w*f>>1;r+=c)e=C(e/w);return C(r+(w+1)*e/(e+d))}function R(e){var t,n,r,o,i,a,s,d,h,v,y,b=[],_=e.length,w=0,k=g,S=p;for((n=e.lastIndexOf(m))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&E("not-basic"),b.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<_;){for(i=w,a=1,s=c;o>=_&&E("invalid-input"),((d=(y=e.charCodeAt(o++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:c)>=c||d>C((u-w)/a))&&E("overflow"),w+=d*a,!(d<(h=s<=S?l:s>=S+f?f:s-S));s+=c)a>C(u/(v=c-h))&&E("overflow"),a*=v;S=O(w-i,t=b.length+1,0==i),C(w/t)>u-k&&E("overflow"),k+=C(w/t),w%=t,b.splice(w++,0,k)}return A(b)}function I(e){var t,n,r,o,i,a,s,d,h,v,y,b,_,w,S,x=[];for(b=(e=T(e)).length,t=g,n=0,i=p,a=0;a<b;++a)(y=e[a])<128&&x.push(k(y));for(r=o=x.length,o&&x.push(m);r<b;){for(s=u,a=0;a<b;++a)(y=e[a])>=t&&y<s&&(s=y);for(s-t>C((u-n)/(_=r+1))&&E("overflow"),n+=(s-t)*_,t=s,a=0;a<b;++a)if((y=e[a])<t&&++n>u&&E("overflow"),y==t){for(d=n,h=c;!(d<(v=h<=i?l:h>=i+f?f:h-i));h+=c)S=d-v,w=c-v,x.push(k(P(v+S%w,0))),d=C(S/w);x.push(k(P(d,0))),i=O(n,_,r==o),n=0,++r}++n,++t}return x.join("")}s={version:"1.4.1",ucs2:{decode:T,encode:A},decode:R,encode:I,toASCII:function(e){return x(e,function(e){return y.test(e)?"xn--"+I(e):e})},toUnicode:function(e){return x(e,function(e){return v.test(e)?R(e.slice(4).toLowerCase()):e})}},void 0===(o=function(){return s}.call(t,n,t,e))||(e.exports=o)}()}).call(t,n(127)(e),n(8))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(130),t.encode=t.stringify=n(131)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,d,h,p,g=e[l].replace(s,"%20"),m=g.indexOf(n);m>=0?(f=g.substr(0,m),d=g.substr(m+1)):(f=g,d=""),h=decodeURIComponent(f),p=decodeURIComponent(d),r(a,h)?o(a[h])?a[h].push(p):a[h]=[a[h],p]:a[h]=p}return a};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?i(a(e),function(a){var s=encodeURIComponent(r(a))+n;return o(e[a])?i(e[a],function(e){return s+encodeURIComponent(r(e))}).join(t):s+encodeURIComponent(r(e[a]))}).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t){e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)n.call(r,o)&&(e[o]=r[o])}return e};var n=Object.prototype.hasOwnProperty},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){e.exports=h;var r=n(44)("bittorrent-tracker:websocket-tracker"),o=n(46),i=n(7),a=n(47),s=n(29),u=n(137),c=n(56),l=n(139),f={},d=5e4;function h(e,t,n){l.call(this,e,t),r("new websocket tracker %s",t),this.peers={},this.socket=null,this.reconnecting=!1,this.retries=0,this.reconnectTimer=null,this.expectingResponse=!1,this._openSocket()}function p(){}i(h,l),h.prototype.DEFAULT_ANNOUNCE_INTERVAL=3e4,h.prototype.announce=function(e){var t=this;if(!t.destroyed&&!t.reconnecting)if(t.socket.connected){var n=o(e,{action:"announce",info_hash:t.client._infoHashBinary,peer_id:t.client._peerIdBinary});if(t._trackerId&&(n.trackerid=t._trackerId),"stopped"===e.event||"completed"===e.event)t._send(n);else{var r=Math.min(e.numwant,10);t._generateOffers(r,function(e){n.numwant=r,n.offers=e,t._send(n)})}}else t.socket.once("connect",function(){t.announce(e)})},h.prototype.scrape=function(e){var t=this;if(!t.destroyed&&!t.reconnecting)if(t.socket.connected){var n={action:"scrape",info_hash:Array.isArray(e.infoHash)&&e.infoHash.length>0?e.infoHash.map(function(e){return e.toString("binary")}):e.infoHash&&e.infoHash.toString("binary")||t.client._infoHashBinary};t._send(n)}else t.socket.once("connect",function(){t.scrape(e)})},h.prototype.destroy=function(e){if(e||(e=p),this.destroyed)return e(null);for(var t in this.destroyed=!0,clearInterval(this.interval),clearTimeout(this.reconnectTimer),this.peers){var n=this.peers[t];clearTimeout(n.trackerTimeout),n.destroy()}if(this.peers=null,this.socket&&(this.socket.removeListener("connect",this._onSocketConnectBound),this.socket.removeListener("data",this._onSocketDataBound),this.socket.removeListener("close",this._onSocketCloseBound),this.socket.removeListener("error",this._onSocketErrorBound),this.socket=null),this._onSocketConnectBound=null,this._onSocketErrorBound=null,this._onSocketDataBound=null,this._onSocketCloseBound=null,f[this.announceUrl]&&(f[this.announceUrl].consumers-=1),f[this.announceUrl].consumers>0)return e();var r=f[this.announceUrl];if(delete f[this.announceUrl],r.on("error",p),r.once("close",e),!this.expectingResponse)return i();var o=setTimeout(i,c.DESTROY_TIMEOUT);function i(){o&&(clearTimeout(o),o=null),r.removeListener("data",i),r.destroy(),r=null}r.once("data",i)},h.prototype._openSocket=function(){var e=this;e.destroyed=!1,e.peers||(e.peers={}),e._onSocketConnectBound=function(){e._onSocketConnect()},e._onSocketErrorBound=function(t){e._onSocketError(t)},e._onSocketDataBound=function(t){e._onSocketData(t)},e._onSocketCloseBound=function(){e._onSocketClose()},e.socket=f[e.announceUrl],e.socket?f[e.announceUrl].consumers+=1:(e.socket=f[e.announceUrl]=new u(e.announceUrl),e.socket.consumers=1,e.socket.once("connect",e._onSocketConnectBound)),e.socket.on("data",e._onSocketDataBound),e.socket.once("close",e._onSocketCloseBound),e.socket.once("error",e._onSocketErrorBound)},h.prototype._onSocketConnect=function(){this.destroyed||this.reconnecting&&(this.reconnecting=!1,this.retries=0,this.announce(this.client._defaultAnnounceOpts()))},h.prototype._onSocketData=function(e){if(!this.destroyed){this.expectingResponse=!1;try{e=JSON.parse(e)}catch(e){return void this.client.emit("warning",new Error("Invalid tracker response"))}"announce"===e.action?this._onAnnounceResponse(e):"scrape"===e.action?this._onScrapeResponse(e):this._onSocketError(new Error("invalid action in WS response: "+e.action))}},h.prototype._onAnnounceResponse=function(e){var t=this;if(e.info_hash===t.client._infoHashBinary){if(!e.peer_id||e.peer_id!==t.client._peerIdBinary){r("received %s from %s for %s",JSON.stringify(e),t.announceUrl,t.client.infoHash);var n=e["failure reason"];if(n)return t.client.emit("warning",new Error(n));var o=e["warning message"];o&&t.client.emit("warning",new Error(o));var i=e.interval||e["min interval"];i&&t.setInterval(1e3*i);var a,s=e["tracker id"];if(s&&(t._trackerId=s),null!=e.complete){var u=Object.assign({},e,{announce:t.announceUrl,infoHash:c.binaryToHex(e.info_hash)});t.client.emit("update",u)}if(e.offer&&e.peer_id&&(r("creating peer (from remote offer)"),(a=t._createPeer()).id=c.binaryToHex(e.peer_id),a.once("signal",function(n){var r={action:"announce",info_hash:t.client._infoHashBinary,peer_id:t.client._peerIdBinary,to_peer_id:e.peer_id,answer:n,offer_id:e.offer_id};t._trackerId&&(r.trackerid=t._trackerId),t._send(r)}),a.signal(e.offer),t.client.emit("peer",a)),e.answer&&e.peer_id){var l=c.binaryToHex(e.offer_id);(a=t.peers[l])?(a.id=c.binaryToHex(e.peer_id),a.signal(e.answer),t.client.emit("peer",a),clearTimeout(a.trackerTimeout),a.trackerTimeout=null,delete t.peers[l]):r("got unexpected answer: "+JSON.stringify(e.answer))}}}else r("ignoring websocket data from %s for %s (looking for %s: reused socket)",t.announceUrl,c.binaryToHex(e.info_hash),t.client.infoHash)},h.prototype._onScrapeResponse=function(e){var t=this;e=e.files||{};var n=Object.keys(e);0!==n.length?n.forEach(function(n){var r=Object.assign(e[n],{announce:t.announceUrl,infoHash:c.binaryToHex(n)});t.client.emit("scrape",r)}):t.client.emit("warning",new Error("invalid scrape response"))},h.prototype._onSocketClose=function(){this.destroyed||(this.destroy(),this._startReconnectTimer())},h.prototype._onSocketError=function(e){this.destroyed||(this.destroy(),this.client.emit("warning",e),this._startReconnectTimer())},h.prototype._startReconnectTimer=function(){var e=this,t=Math.floor(3e4*Math.random())+Math.min(15e3*Math.pow(2,e.retries),18e5);e.reconnecting=!0,clearTimeout(e.reconnectTimer),e.reconnectTimer=setTimeout(function(){e.retries++,e._openSocket()},t),e.reconnectTimer.unref&&e.reconnectTimer.unref(),r("reconnecting socket in %s ms",t)},h.prototype._send=function(e){if(!this.destroyed){this.expectingResponse=!0;var t=JSON.stringify(e);r("send %s",t),this.socket.send(t)}},h.prototype._generateOffers=function(e,t){var n=this,o=[];r("generating %s offers",e);for(var i=0;i<e;++i)a();function a(){var e=s(20).toString("hex");r("creating peer (from _generateOffers)");var t=n.peers[e]=n._createPeer({initiator:!0});t.once("signal",function(t){o.push({offer:t,offer_id:c.hexToBinary(e)}),u()}),t.trackerTimeout=setTimeout(function(){r("tracker timeout: destroying peer"),t.trackerTimeout=null,delete n.peers[e],t.destroy()},d),t.trackerTimeout.unref&&t.trackerTimeout.unref()}function u(){o.length===e&&(r("generated %s offers",e),t(o))}u()},h.prototype._createPeer=function(e){var t=this;e=Object.assign({trickle:!1,config:t.client._rtcConfig,wrtc:t.client._wrtc},e);var n=new a(e);return n.once("error",r),n.once("connect",function e(){n.removeListener("error",r);n.removeListener("connect",e)}),n;function r(e){t.client.emit("warning",new Error("Connection error: "+e.message)),n.destroy()}}},function(e,t,n){(function(t){e.exports=l;var r=n(9).Buffer,o=n(48)("simple-websocket"),i=n(7),a=n(29),s=n(49),u=n(138),c="function"!=typeof u?WebSocket:u;function l(e){var n=this;if(!(n instanceof l))return new l(e);if(e||(e={}),"string"==typeof e&&(e={url:e}),null==e.url&&null==e.socket)throw new Error("Missing required `url` or `socket` option");if(null!=e.url&&null!=e.socket)throw new Error("Must specify either `url` or `socket` option, not both");if(n._id=a(4).toString("hex").slice(0,7),n._debug("new websocket: %o",e),e=Object.assign({allowHalfOpen:!1},e),s.Duplex.call(n,e),n.connected=!1,n.destroyed=!1,n._chunk=null,n._cb=null,n._interval=null,e.socket)n.url=e.socket.url,n._ws=e.socket;else{n.url=e.url;try{n._ws="function"==typeof u?new c(e.url,e):new c(e.url)}catch(e){return void t.nextTick(function(){n._destroy(e)})}}n._ws.binaryType="arraybuffer",n._ws.onopen=function(){n._onOpen()},n._ws.onmessage=function(e){n._onMessage(e)},n._ws.onclose=function(){n._onClose()},n._ws.onerror=function(){n._destroy(new Error("connection error to "+n.url))},n._onFinishBound=function(){n._onFinish()},n.once("finish",n._onFinishBound)}i(l,s.Duplex),l.WEBSOCKET_SUPPORT=!!c,l.prototype.send=function(e){this._ws.send(e)},l.prototype.destroy=function(e){this._destroy(null,e)},l.prototype._destroy=function(e,t){if(!this.destroyed){if(t&&this.once("close",t),this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.connected=!1,this.destroyed=!0,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._ws){var n=this._ws,r=function(){n.onclose=null};if(n.readyState===c.CLOSED)r();else try{n.onclose=r,n.close()}catch(e){r()}n.onopen=null,n.onmessage=null,n.onerror=null}this._ws=null,e&&this.emit("error",e),this.emit("close")}},l.prototype._read=function(){},l.prototype._write=function(e,t,n){if(this.destroyed)return n(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(e)}catch(e){return this._destroy(e)}"function"!=typeof u&&this._ws.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n},l.prototype._onFinish=function(){var e=this;function t(){setTimeout(function(){e._destroy()},1e3)}e.destroyed||(e.connected?t():e.once("connect",t))},l.prototype._onMessage=function(e){if(!this.destroyed){var t=e.data;t instanceof ArrayBuffer&&(t=r.from(t)),this.push(t)}},l.prototype._onOpen=function(){var e=this;if(!e.connected&&!e.destroyed){if(e.connected=!0,e._chunk){try{e.send(e._chunk)}catch(t){return e._destroy(t)}e._chunk=null,e._debug('sent chunk from "write before connect"');var t=e._cb;e._cb=null,t(null)}"function"!=typeof u&&(e._interval=setInterval(function(){e._onInterval()},150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect")}},l.prototype._onInterval=function(){if(this._cb&&this._ws&&!(this._ws.bufferedAmount>65536)){this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);var e=this._cb;this._cb=null,e(null)}},l.prototype._onClose=function(){this.destroyed||(this._debug("on close"),this._destroy())},l.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],o.apply(null,e)}}).call(t,n(6))},function(e,t){},function(e,t,n){e.exports=o;var r=n(18).EventEmitter;function o(e,t){r.call(this),this.client=e,this.announceUrl=t,this.interval=null,this.destroyed=!1}n(7)(o,r),o.prototype.setInterval=function(e){var t=this;null==e&&(e=t.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(t.interval),e&&(t.interval=setInterval(function(){t.announce(t.client._defaultAnnounceOpts())},e),t.interval.unref&&t.interval.unref())}},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),i=s(n(5)),a=s(n(28));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={data:[],videolist:[]},e.loadContent=e.loadContent.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){this.loadContent()}},{key:"loadContent",value:function(){var e=this,t=i.default.getToken();$.ajax({url:"/api/videolist/all",headers:{Authorization:"bearer "+t},contentType:"application/json",method:"GET"}).done(function(t){var n=t.data.map(function(e){return e.id});e.setState({data:t.data,videolist:n})}).fail(function(){console.log("There is an error when getting video list.")})}},{key:"render",value:function(){return o.default.createElement("div",{className:"search-results-wrapper"},o.default.createElement("div",{className:"title"},"My List"),o.default.createElement(a.default,{data:this.state.data,videolist:this.state.videolist}))}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),i=s(n(5)),a=s(n(28));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={data:[],videolist:[]},e.loadContent=e.loadContent.bind(e),e.getVideoList=e.getVideoList.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){this.getVideoList(),this.loadContent()}},{key:"loadContent",value:function(){var e=this,t=i.default.getToken();$.ajax({url:"/api/new",headers:{Authorization:"bearer "+t},contentType:"application/json",method:"GET"}).done(function(t){e.setState({data:t.data})}).fail(function(){console.log("There is an error when getting video list.")})}},{key:"getVideoList",value:function(){var e=this,t=i.default.getToken();$.ajax({url:"/api/videolist/id",headers:{Authorization:"bearer "+t},contentType:"application/json",method:"GET"}).done(function(t){e.setState({videolist:t.video_list})}).fail(function(){console.log("There is an error when getting video list.")})}},{key:"render",value:function(){return o.default.createElement("div",{className:"search-results-wrapper"},o.default.createElement("div",{className:"title"},"Newest"),o.default.createElement(a.default,{data:this.state.data,videolist:this.state.videolist}))}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(0)),i=u(n(5)),a=u(n(144)),s=n(3);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=localStorage.getItem("successMessage"),r="";return n&&(r=n,localStorage.removeItem("successMessage")),e.state={errors:{},successMessage:r,user:{username:"",password:""}},e.processForm=e.processForm.bind(e),e.changeUser=e.changeUser.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"processForm",value:function(e){var t=this;e.preventDefault();var n="username="+encodeURIComponent(this.state.user.username)+"&password="+encodeURIComponent(this.state.user.password),r=new XMLHttpRequest;r.open("post","/auth/login"),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.responseType="json",r.addEventListener("load",function(){if(200===r.status)t.setState({errors:{}}),i.default.authenticateUser(r.response.token),t.props.history.push("/");else{var e=r.response.errors?r.response.errors:{};e.summary=r.response.message,t.setState({errors:e})}}),r.send(n)}},{key:"changeUser",value:function(e){var t=e.target.name,n=this.state.user;n[t]=e.target.value,this.setState({user:n})}},{key:"render",value:function(){return o.default.createElement(a.default,{onSubmit:this.processForm,onChange:this.changeUser,errors:this.state.errors})}}]),t}();t.default=(0,s.withRouter)(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),o=n(3),i=s(n(1)),a=s(n(57));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.onSubmit,n=e.onChange,i=e.errors;return r.default.createElement("div",{className:"auth-page"},r.default.createElement("div",{className:"auth-form"},r.default.createElement("div",{className:"modal"},i.summary&&r.default.createElement("p",{className:"error-message"},i.summary),r.default.createElement("form",{onSubmit:t},r.default.createElement(a.default,{name:"username",type:"text",placeholder:"username",onChange:n}),r.default.createElement(a.default,{name:"password",type:"password",placeholder:"password",onChange:n}),r.default.createElement("button",{className:"auth-form-btn"},"Log in"),r.default.createElement("p",null,"Don't have an account? ",r.default.createElement(o.Link,{to:"/signup",className:"link"},"Create one"))))))};u.propTypes={onSubmit:i.default.func.isRequired,onChange:i.default.func.isRequired,errors:i.default.object.isRequired},t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),i=s(n(146)),a=n(3);function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={errors:{},user:{username:"",password:"",repeatPassword:"",inviteCode:""}},e.processForm=e.processForm.bind(e),e.changeUser=e.changeUser.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"processForm",value:function(e){var t=this;e.preventDefault();var n=encodeURIComponent(this.state.user.username),r=encodeURIComponent(this.state.user.password),o="username="+n+"&password="+r+"&inviteCode="+encodeURIComponent(this.state.user.inviteCode);if(r==encodeURIComponent(this.state.user.repeatPassword)){var i=new XMLHttpRequest;i.open("post","/auth/signup"),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.responseType="json",i.addEventListener("load",function(){if(200===i.status)t.setState({errors:{}}),localStorage.setItem("successMessage",i.response.message),t.props.history.push("/");else{var e=i.response.errors?i.response.errors:{};e.summary=i.response.message,t.setState({errors:e})}}),i.send(o)}else{var a={summary:"Please confirm your password!"};this.setState({errors:a})}}},{key:"changeUser",value:function(e){var t=e.target.name,n=this.state.user;n[t]=e.target.value,this.setState({user:n})}},{key:"render",value:function(){return o.default.createElement(i.default,{onSubmit:this.processForm,onChange:this.changeUser,errors:this.state.errors})}}]),t}();t.default=(0,a.withRouter)(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),o=n(3),i=s(n(1)),a=s(n(57));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.onSubmit,n=e.onChange,i=e.errors;return r.default.createElement("div",{className:"auth-page"},r.default.createElement("div",{className:"auth-form"},r.default.createElement("div",{className:"modal"},i.summary&&r.default.createElement("p",{className:"error-message"},i.summary),r.default.createElement("form",{onSubmit:t},r.default.createElement(a.default,{name:"username",type:"text",placeholder:"username",onChange:n}),r.default.createElement(a.default,{name:"password",type:"password",placeholder:"password",onChange:n}),r.default.createElement(a.default,{name:"repeatPassword",type:"password",placeholder:"repeat password",onChange:n}),r.default.createElement(a.default,{name:"inviteCode",type:"text",placeholder:"invite code",onChange:n}),r.default.createElement("button",{className:"auth-form-btn"},"Sign up"),r.default.createElement("p",null,"Already have an account? ",r.default.createElement(o.Link,{to:"/login",className:"link"},"Log in"))))))};u.propTypes={onSubmit:i.default.func.isRequired,onChange:i.default.func.isRequired,errors:i.default.object.isRequired},t.default=u}]);
//# sourceMappingURL=bundle.js.map